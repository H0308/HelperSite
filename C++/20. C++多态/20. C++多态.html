<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://www.help-doc.top/C%2B%2B/20.%20C%2B%2B%E5%A4%9A%E6%80%81/20.%20C%2B%2B%E5%A4%9A%E6%80%81.html><link rel=prev href=../19.%20C%2B%2B%E7%BB%A7%E6%89%BF/19.%20C%2B%2B%E7%BB%A7%E6%89%BF.html><link rel=next href=../21.%20set%E7%B1%BB/21.%20set%E7%B1%BB.html><link rel=icon href=../../images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.12"><title>C++多态 - 柯懒的知识库</title><link rel=stylesheet href=../../assets/stylesheets/main.2afb09e1.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=stylesheet href=../../css/timeline.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-9XWRGNRRSY"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-9XWRGNRRSY",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-9XWRGNRRSY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=stylesheet href=../../stylesheets/colors.min.css><!-- 移动端和平板端始终只加载theme2 --><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (max-width: 1199px)"><!-- 桌面端主题切换：新版主题同时加载theme1和theme2，旧版主题只加载theme2 --><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (min-width: 1200px)" id=theme2-desktop><link rel=stylesheet href=../../stylesheets/theme1.min.css media="screen and (min-width: 1200px)" id=theme1-desktop><link rel=stylesheet href=../../stylesheets/print.min.css><!-- 字体样式表 --><link rel=stylesheet href=../../stylesheets/font-dongguanti.min.css id=font-dongguanti><link rel=stylesheet href=../../stylesheets/font-oppoti.min.css id=font-oppoti disabled><link rel=stylesheet href=../../stylesheets/font-jiangchengti.min.css id=font-jiangchengti disabled><link rel=stylesheet href=../../stylesheets/font-lxgw.min.css id=font-lxgw disabled><!-- 代码字体样式表 --><link rel=stylesheet href=../../stylesheets/code-font-dejavu-sans-mono.min.css id=code-font-dejavu-sans-mono><link rel=stylesheet href=../../stylesheets/code-font-zsft-hk.min.css id=code-font-zsft-hk disabled><script src=https://cdn.jsdelivr.net/npm/mermaid@11.5.0/dist/mermaid.min.js></script><script src=../../javascripts/start.min.js></script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=teal> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#c class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../index.html title=柯懒的知识库 class="md-header__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 柯懒的知识库 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> C++多态 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=teal aria-label type=radio name=__palette id=__palette_1> </form> <!-- 头像元素 - 直接在HTML中定义 --> <div class=header-avatar> <img src=../../作者/作者.assets/20250206-200653.jpg alt=头像> <div class=avatar-dropdown> <p><strong>柯懒不是柯南</strong></p> <a href=../../作者/联系作者/作者.html class=avatar-dropdown-item>吵醒柯懒</a> <div class=avatar-dropdown-divider></div> <a href=../../作者/关于作者/关于作者.html class=avatar-dropdown-item>柯懒自传</a> <div class=avatar-dropdown-divider></div> <a href=https://github.com/H0308 class=avatar-dropdown-item>柯懒的零食库</a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=查找> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <!-- 独立的切换按钮 --> <div class=toolbar-toggle-btn id=toolbarToggleBtn onclick=toggleToolbar()> <div class=toggle-icon> <svg class=toggle-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=16 height=16> <path d="M346.538667 1024L170.666667 853.333333l341.333333-341.333333-341.333333-341.333333 175.872-170.666667L853.333333 512z" fill=currentColor></path> </svg> </div> </div> <!-- 右侧固定功能条 - 独立于内容区 --> <div class=floating-toolbar id=floatingToolbar> <!-- 字体切换功能 --> <div class="toolbar-item font-switcher"> <div class=toolbar-icon> <svg class=font-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M913.408 1024l-66.56 0q-29.696 0-51.2-5.12t-36.864-15.872-26.112-27.136-19.968-37.888q-15.36-38.912-28.16-70.656t-22.016-55.296q-11.264-26.624-20.48-49.152l-254.976 0q-7.168 23.552-17.408 51.2-8.192 23.552-21.504 56.832t-30.72 72.192q-20.48 46.08-47.104 63.488t-60.416 17.408l-70.656 0q-45.056 0-60.928-19.968t2.56-68.096q18.432-46.08 43.008-108.544t52.224-132.608 57.344-143.872 57.344-144.384q65.536-164.864 137.216-343.04 7.168-17.408 18.432-31.744 10.24-11.264 27.136-21.504t42.496-10.24q26.624 0 43.52 10.752t28.16 24.064q12.288 15.36 19.456 33.792 72.704 180.224 138.24 345.088 27.648 70.656 57.344 143.872t56.832 142.336 51.2 129.536 41.472 104.448q14.336 34.816 4.096 62.464t-43.008 27.648zM616.448 634.88l-97.28-347.136-1.024 0-108.544 347.136 206.848 0z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>内容字体</div> <div class=font-dropdown-toolbar> <div class=font-current-toolbar onclick=toggleFontDropdownToolbar()> <span class=current-font-name-toolbar>东观体</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=font-options-toolbar> <div class=font-option-toolbar data-font=dongguanti onclick="selectFontToolbar('dongguanti')">上图东观体 </div> <div class=font-option-toolbar data-font=oppoti onclick="selectFontToolbar('oppoti')">OPPO Sans </div> <div class=font-option-toolbar data-font=jiangchengti onclick="selectFontToolbar('jiangchengti')"> 江城黑体</div> <div class=font-option-toolbar data-font=lxgw onclick="selectFontToolbar('lxgw')">霞鹜臻楷</div> </div> </div> </div> <!-- 代码字体切换功能 --> <div class="toolbar-item code-font-switcher"> <div class=toolbar-icon> <svg t=1753672111433 class="icon code-font-icon" viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg p-id=5148 width=20 height=20> <path d="M941.709938 0H82.290062A82.290062 82.290062 0 0 0 0 82.290062v859.419876A82.290062 82.290062 0 0 0 82.290062 1022.53923h859.419876A82.290062 82.290062 0 0 0 1022.53923 941.709938V82.290062A82.290062 82.290062 0 0 0 941.709938 0zM188.439372 553.631954a40.901569 40.901569 0 0 1-29.215406-70.116975L292.154066 351.558726 159.223966 218.628626a40.901569 40.901569 0 0 1 58.430813-57.94389l160.197813 162.145507a40.901569 40.901569 0 0 1 0 57.943889l-160.197813 160.684736a40.901569 40.901569 0 0 1-29.215407 12.173086z m443.587257 0H405.120304a40.901569 40.901569 0 0 1 0-82.290061H633.000476a40.901569 40.901569 0 0 1 0 82.290061z" fill=currentColor p-id=5149></path> </svg> </div> <div class=toolbar-label>代码字体</div> <div class=code-font-dropdown-toolbar> <div class=code-font-current-toolbar onclick=toggleCodeFontDropdownToolbar()> <span class=current-code-font-name-toolbar>DejaVu Sans Mono</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=code-font-options-toolbar> <div class=code-font-option-toolbar data-code-font=dejavu onclick="selectCodeFontToolbar('dejavu')"> DejaVu Sans Mono</div> <div class=code-font-option-toolbar data-code-font=zsft onclick="selectCodeFontToolbar('zsft')"> JetBrains Mono</div> </div> </div> </div> <!-- 主题切换功能 --> <div class="toolbar-item theme-switcher" onclick=switchTheme()> <div class=toolbar-icon> <svg class=theme-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M876.572788 522.301623c-1.886977 12.375865-9.657964 30.331819-35.880185 45.48903-56.489572 32.697703-150.21828 83.990926-174.010149 96.958262-13.143345 24.431435-66.067718 122.221646-98.141204 178.503487-16.117073 28.124548-36.055171 34.041304-50.030463 34.041304-0.031722 0-0.031722 0-0.031722 0-14.613836 0-29.1806-6.460132-43.234687-19.218714-47.183626-42.643216-125.994576-117.105115-146.013515-136.083351-27.757181-4.732791-138.338718-23.743774-200.584388-35.752272-17.924231-3.533476-32.649608-14.07046-40.372499-29.084409-5.78782-11.256368-10.281157-30.05962 1.471514-55.658647 26.989701-59.047838 74.126254-157.557432 85.957721-182.196599-3.437286-27.117614-16.996093-135.060045-23.760147-198.905142-1.886977-17.460674 3.901867-35.096333 15.829524-48.351218 12.791327-14.278191 30.667463-21.48943 49.854455-19.426445 63.669088 6.332219 173.259042 19.426445 200.584388 22.705118 24.335245-11.879562 121.085776-58.936297 180.133613-86.34146 9.91379-4.573155 19.85828-6.92369 29.596062-6.92369 28.748764 0 52.172243 20.642133 58.328453 51.421136 12.599969 62.997799 30.93864 166.70272 35.639708 193.484689 18.851347 19.682271 91.953272 96.031147 135.060045 143.07151C872.72004 487.125473 879.307062 504.71406 876.572788 522.301623L876.572788 522.301623zM825.375755 499.085876C776.017604 445.314205 687.245791 352.977193 686.365748 352.017332c-2.942005-3.069919-4.956895-6.971785-5.676279-11.208273-0.207731-1.215688-22.193465-127.001509-36.551474-198.936865-0.799202-3.917216-4.285606-16.836457-16.196891-16.836457-3.453658 0-7.30743 1.006933-11.464099 2.942005-67.282383 31.179117-183.955662 88.180342-185.170327 88.771813-3.693112 1.790786-7.850805 2.558265-11.975752 2.01489-1.295506-0.224104-133.63765-16.165168-205.988468-23.424502-0.079818 0-0.207731 0-0.287549 0-7.30743 0-11.128455 2.89391-13.319353 5.40408-3.677762 4.124947-5.644557 9.91379-5.068436 15.110139 7.674796 72.623018 24.255427 202.934922 24.463158 204.325595 0.511653 4.109598-0.159636 8.266267-1.966795 11.960403-0.591471 1.215688-57.657164 120.04712-88.339977 187.201589-3.565199 7.754614-4.41352 14.214746-2.350534 18.131963 1.935072 3.725858 6.588045 5.820566 10.360975 6.53995 70.719668 13.718443 204.644867 36.519752 206.036563 36.727483 4.189416 0.671289 8.058536 2.686179 11.112082 5.580089 1.006933 0.87902 96.414887 91.281983 150.090367 139.889027 8.314363 7.563256 13.143345 8.106632 14.437827 8.106632 3.485381 0 8.314363-4.621251 12.727882-12.391215 36.343743-63.828724 100.011808-181.988868 100.636025-183.155437 1.983167-3.64604 5.004991-6.667863 8.650007-8.650007 1.134847-0.671289 114.418936-62.373583 178.6314-99.516528 8.698103-5.036713 14.278191-10.568706 14.94948-14.854313C834.681702 511.845481 831.49922 505.800811 825.375755 499.085876L825.375755 499.085876zM935.333076 935.670256c-4.157693 4.157693-9.689686 6.299473-15.141862 6.299473-5.548366 0-11.048637-2.142803-15.238053-6.299473l-171.915441-171.915441c-8.362458-8.394181-8.362458-21.98471 0-30.426987 8.394181-8.394181 21.98471-8.394181 30.379914 0l171.915441 171.915441C943.727257 913.684522 943.727257 927.275052 935.333076 935.670256L935.333076 935.670256z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>主题切换</div> </div> <!-- 返回顶部功能 --> <div class="toolbar-item back-to-top" onclick=scrollToTop()> <div class=toolbar-icon> <svg class=back-to-top-icon viewbox="0 0 1024 1024" xmlns=http://www.w3.org/2000/svg> <path d="M882.688 624.128l-336.896-583.68c-15.872-27.136-54.784-27.136-70.656 0L138.24 624.128c-15.872 27.136 4.096 61.44 35.328 61.44H317.44c22.528 0 40.96 18.432 40.96 40.96v239.616c0 22.528 18.432 40.96 40.96 40.96h223.232c22.528 0 40.96-18.432 40.96-40.96v-239.616c0-22.528 18.432-40.96 40.96-40.96h143.872c30.208 0 50.176-34.304 34.304-61.44z"> </path> </svg> </div> <div class=toolbar-label>返回顶部</div> </div> </div> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.html class=md-tabs__link> 主页 </a> </li> <li class=md-tabs__item> <a href=../../%E7%BD%91%E7%AB%99%E4%BB%8B%E7%BB%8D/%E7%BD%91%E7%AB%99%E4%BB%8B%E7%BB%8D.html class=md-tabs__link> 网站介绍 </a> </li> <li class=md-tabs__item> <a href=../../%E7%BD%91%E7%AB%99%E6%97%B6%E9%97%B4%E7%BA%BF/%E7%BD%91%E7%AB%99%E6%97%B6%E9%97%B4%E7%BA%BF.html class=md-tabs__link> 网站时间线 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../C%E8%AF%AD%E8%A8%80/index.html class=md-tabs__link> 编程语言 </a> </li> <li class=md-tabs__item> <a href=../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1.%20%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%92%8C%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/1.%20%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E4%B8%8E%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6.html class=md-tabs__link> 数据结构与算法 </a> </li> <li class=md-tabs__item> <a href=../../Linux/1.%20Linux%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E5%92%8C%E6%8C%87%E4%BB%A4/1.%20Linux%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E5%92%8C%E6%8C%87%E4%BB%A4.html class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../HTML%E4%B8%8ECSS/HTML%E7%AC%94%E8%AE%B0/HTML%E7%AC%94%E8%AE%B0.html class=md-tabs__link> 前端 </a> </li> <li class=md-tabs__item> <a href=../../MySQL/MySQL%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/MySQL%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8.html class=md-tabs__link> MySQL </a> </li> <li class=md-tabs__item> <a href=../../JavaEE/Spring/1.%20SpringMVC%E5%9F%BA%E7%A1%80/1.%20SpringMVC%E5%9F%BA%E7%A1%80.html class=md-tabs__link> JavaEE应用开发 </a> </li> <li class=md-tabs__item> <a href=../../%E5%85%B6%E5%AE%83/Shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/%E5%85%B3%E4%BA%8EShell.html class=md-tabs__link> 扩展知识 </a> </li> <li class=md-tabs__item> <a href=../../%E5%B7%A5%E5%85%B7%E5%B8%AE%E5%8A%A9/vscode%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/vscode%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5.html class=md-tabs__link> 工具帮助 </a> </li> <li class=md-tabs__item> <a href=../../%E9%A1%B9%E7%9B%AE/1.%20Boost%E5%BA%93%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/1.%20Boost%E5%BA%93%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E.html class=md-tabs__link> 项目 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title=柯懒的知识库 class="md-nav__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> 柯懒的知识库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.html class=md-nav__link> <span class=md-ellipsis> 主页 </span> </a> </li> <li class=md-nav__item> <a href=../../%E7%BD%91%E7%AB%99%E4%BB%8B%E7%BB%8D/%E7%BD%91%E7%AB%99%E4%BB%8B%E7%BB%8D.html class=md-nav__link> <span class=md-ellipsis> 网站介绍 </span> </a> </li> <li class=md-nav__item> <a href=../../%E7%BD%91%E7%AB%99%E6%97%B6%E9%97%B4%E7%BA%BF/%E7%BD%91%E7%AB%99%E6%97%B6%E9%97%B4%E7%BA%BF.html class=md-nav__link> <span class=md-ellipsis> 网站时间线 </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> 编程语言 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> 编程语言 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../C%E8%AF%AD%E8%A8%80/index.html class=md-nav__link> <span class=md-ellipsis> C语言 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> C++ </span> </a> <label class="md-nav__link " for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=true> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> C++ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../1.%20C%E8%AF%AD%E8%A8%80%E8%BF%87%E6%B8%A1C%2B%2B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.%20C%E8%AF%AD%E8%A8%80%E8%BF%87%E6%B8%A1C%2B%2B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html class=md-nav__link> <span class=md-ellipsis> C语言过渡C++基础知识 </span> </a> </li> <li class=md-nav__item> <a href=../2.%20C%2B%2B%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/2.%20%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1.html class=md-nav__link> <span class=md-ellipsis> C++类和对象 </span> </a> </li> <li class=md-nav__item> <a href=../3.%20C%2B%2B%E9%BB%98%E8%AE%A4%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0/3.%20C%2B%2B%E9%BB%98%E8%AE%A4%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0.html class=md-nav__link> <span class=md-ellipsis> C++默认成员函数 </span> </a> </li> <li class=md-nav__item> <a href=../4.%20C%2B%2B%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9/4.%20C%2B%2B%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9.html class=md-nav__link> <span class=md-ellipsis> C++类和对象相关内容 </span> </a> </li> <li class=md-nav__item> <a href=../5.%20C%2B%2B%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/5.%20C%2B%2B%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html class=md-nav__link> <span class=md-ellipsis> C++内存管理 </span> </a> </li> <li class=md-nav__item> <a href=../6.%20C%2B%2B%E6%A8%A1%E7%89%88%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89/6.%20C%2B%2B%E6%A8%A1%E7%89%88%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89.html class=md-nav__link> <span class=md-ellipsis> C++模版 </span> </a> </li> <li class=md-nav__item> <a href=../7.%20C%2B%2BSTL%E7%AE%80%E4%BB%8B%E4%B8%8Estring%E7%B1%BB/7.%20C%2B%2BSTL%E7%AE%80%E4%BB%8B%E4%B8%8Estring%E7%B1%BB.html class=md-nav__link> <span class=md-ellipsis> C++STL简介与string类 </span> </a> </li> <li class=md-nav__item> <a href=../8.%20string%E7%B1%BB%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/8.%20string%E7%B1%BB%E7%9A%84%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0.html class=md-nav__link> <span class=md-ellipsis> string类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../9.%20vector%E7%B1%BB/9.%20vector%E7%B1%BB.html class=md-nav__link> <span class=md-ellipsis> vector类 </span> </a> </li> <li class=md-nav__item> <a href=../10.%20vector%E7%B1%BB%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/10.%20vector%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0.html class=md-nav__link> <span class=md-ellipsis> vector类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../11.%20list%E7%B1%BB/11.%20list%E7%B1%BB.html class=md-nav__link> <span class=md-ellipsis> list类 </span> </a> </li> <li class=md-nav__item> <a href=../12.%20list%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/12.%20list%E7%B1%BB%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0.html class=md-nav__link> <span class=md-ellipsis> list类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../13.%20stack%E7%B1%BB/13.%20stack%E7%B1%BB.html class=md-nav__link> <span class=md-ellipsis> stack类 </span> </a> </li> <li class=md-nav__item> <a href=../14.%20queue%E4%B8%8Epriority_queue%E7%B1%BB/14.%20queue%E4%B8%8Epriority_queue%E7%B1%BB.html class=md-nav__link> <span class=md-ellipsis> queue与priority_queue类 </span> </a> </li> <li class=md-nav__item> <a href=../15.%20stack%E5%92%8Cqueue%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/15.%20stack%E5%92%8Cqueue%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0.html class=md-nav__link> <span class=md-ellipsis> stack和queue模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../16.%20priority_queue%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/16.%20priority_queue%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0.html class=md-nav__link> <span class=md-ellipsis> priority_queue模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../17.%20%E5%8F%8D%E5%90%91%E8%BF%AD%E4%BB%A3%E5%99%A8%E8%AE%BE%E8%AE%A1/17.%20reverse_iterator%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1.html class=md-nav__link> <span class=md-ellipsis> 反向迭代器设计 </span> </a> </li> <li class=md-nav__item> <a href=../19.%20C%2B%2B%E7%BB%A7%E6%89%BF/19.%20C%2B%2B%E7%BB%A7%E6%89%BF.html class=md-nav__link> <span class=md-ellipsis> C++继承 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> C++多态 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=20.%20C%2B%2B%E5%A4%9A%E6%80%81.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> C++多态 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 虚函数 </span> </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 虚函数重写 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 多态 </span> </a> <nav class=md-nav aria-label=多态> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 多态基本介绍 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 成员函数隐藏与重写的区别 </span> </a> </li> <li class=md-nav__item> <a href=#override class=md-nav__link> <span class=md-ellipsis> override关键字 </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 不可继承类和不可重写函数 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 抽象类与多态 </span> </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 实现继承与接口继承 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 多态的原理 </span> </a> <nav class=md-nav aria-label=多态的原理> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 虚函数表的存在 </span> </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 动态绑定和静态绑定 </span> </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 多态的必要条件思考 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 继承和多态中的面试题 </span> </a> <nav class=md-nav aria-label=继承和多态中的面试题> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 多继承中的指针偏移 </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 虚函数中的缺省参数问题 </span> </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 多态与内存对齐问题 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../21.%20set%E7%B1%BB/21.%20set%E7%B1%BB.html class=md-nav__link> <span class=md-ellipsis> set类 </span> </a> </li> <li class=md-nav__item> <a href=../22.%20map%E7%B1%BB/22.%20map%E7%B1%BB.html class=md-nav__link> <span class=md-ellipsis> map类 </span> </a> </li> <li class=md-nav__item> <a href=../23.%20map%E5%92%8Cset%E7%B1%BB%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/23.%20map%E5%92%8Cset%E7%B1%BB%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0.html class=md-nav__link> <span class=md-ellipsis> map和set类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../24.%20unordered_map%E5%92%8Cunordered_set%E7%B1%BB%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/24.%20unordered_map%E5%92%8Cunordered_set%E7%B1%BB%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0.html class=md-nav__link> <span class=md-ellipsis> unordered_map和unordered_set类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../31.%20bitset%E7%B1%BB/31.%20bitset%E7%B1%BB.html class=md-nav__link> <span class=md-ellipsis> bitset类 </span> </a> </li> <li class=md-nav__item> <a href=../32.%20initializer_list%E7%B1%BB/32.%20initializer_list%E7%B1%BB.html class=md-nav__link> <span class=md-ellipsis> initializer_list类 </span> </a> </li> <li class=md-nav__item> <a href=../25.%20C%2B%2B11%E7%9B%B8%E5%85%B3%E6%96%B0%E7%89%B9%E6%80%A7/C%2B%2B%2011%E7%9B%B8%E5%85%B3%E6%96%B0%E7%89%B9%E6%80%A7.html class=md-nav__link> <span class=md-ellipsis> C++ 11相关新特性 </span> </a> </li> <li class=md-nav__item> <a href=../26.%20C%2B%2B%E5%BC%82%E5%B8%B8/26.%20C%2B%2B%E5%BC%82%E5%B8%B8.html class=md-nav__link> <span class=md-ellipsis> C++ 异常 </span> </a> </li> <li class=md-nav__item> <a href=../27.%20%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/27.%20%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88.html class=md-nav__link> <span class=md-ellipsis> C++ 智能指针 </span> </a> </li> <li class=md-nav__item> <a href=../28.%20%E7%89%B9%E6%AE%8A%E7%B1%BB%E8%AE%BE%E8%AE%A1/28.%20%E7%89%B9%E6%AE%8A%E7%B1%BB%E8%AE%BE%E8%AE%A1.html class=md-nav__link> <span class=md-ellipsis> 特殊类设计 </span> </a> </li> <li class=md-nav__item> <a href=../29.%20C%2B%2B%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/29.%20C%2B%2B%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2.html class=md-nav__link> <span class=md-ellipsis> C++中的类型转换 </span> </a> </li> <li class=md-nav__item> <a href=../30.%20C%2B%2BIO%E6%B5%81/30.%20C%2B%2BIO%E6%B5%81.html class=md-nav__link> <span class=md-ellipsis> C++ IO流 </span> </a> </li> <li class=md-nav__item> <a href=../33.%20C%2B%2B17%E7%9B%B8%E5%85%B3%E6%96%B0%E7%89%B9%E6%80%A7/33.%20C%2B%2B17%E7%9B%B8%E5%85%B3%E6%96%B0%E7%89%B9%E6%80%A7.html class=md-nav__link> <span class=md-ellipsis> C++ 17相关新特性 </span> </a> </li> <li class=md-nav__item> <a href=../34.%20C%2B%2B%E6%97%B6%E9%97%B4%E5%92%8C%E9%9A%8F%E6%9C%BA%E6%95%B0%E7%9B%B8%E5%85%B3%E5%BA%93/34.%20C%2B%2B%E6%97%B6%E9%97%B4%E5%92%8C%E9%9A%8F%E6%9C%BA%E6%95%B0%E7%9B%B8%E5%85%B3%E5%BA%93.html class=md-nav__link> <span class=md-ellipsis> C++时间和随机数相关库 </span> </a> </li> <li class=md-nav__item> <a href=../35.%20C%2B%2B%E5%B9%B6%E5%8F%91%E6%94%AF%E6%8C%81%E5%BA%93/35.%20C%2B%2B%E5%B9%B6%E5%8F%91%E6%94%AF%E6%8C%81%E5%BA%93.html class=md-nav__link> <span class=md-ellipsis> C++并发支持库 </span> </a> </li> <li class=md-nav__item> <a href=../36.%20C%2B%2B%E4%B8%AD%E7%9A%84%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2/36.%20C%2B%2B%E4%B8%AD%E7%9A%84%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2.html class=md-nav__link> <span class=md-ellipsis> C++中的格式化字符串 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Java/1.%20Java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/Java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html class=md-nav__link> <span class=md-ellipsis> Java </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.%20Python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.%20Python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html class=md-nav__link> <span class=md-ellipsis> Python </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1.%20%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%92%8C%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/1.%20%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E4%B8%8E%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6.html class=md-nav__link> <span class=md-ellipsis> 数据结构与算法 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Linux/1.%20Linux%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E5%92%8C%E6%8C%87%E4%BB%A4/1.%20Linux%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E5%92%8C%E6%8C%87%E4%BB%A4.html class=md-nav__link> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../HTML%E4%B8%8ECSS/HTML%E7%AC%94%E8%AE%B0/HTML%E7%AC%94%E8%AE%B0.html class=md-nav__link> <span class=md-ellipsis> 前端 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../MySQL/MySQL%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/MySQL%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8.html class=md-nav__link> <span class=md-ellipsis> MySQL </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../JavaEE/Spring/1.%20SpringMVC%E5%9F%BA%E7%A1%80/1.%20SpringMVC%E5%9F%BA%E7%A1%80.html class=md-nav__link> <span class=md-ellipsis> JavaEE应用开发 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../%E5%85%B6%E5%AE%83/Shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/%E5%85%B3%E4%BA%8EShell.html class=md-nav__link> <span class=md-ellipsis> 扩展知识 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../%E5%B7%A5%E5%85%B7%E5%B8%AE%E5%8A%A9/vscode%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/vscode%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5.html class=md-nav__link> <span class=md-ellipsis> 工具帮助 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../%E9%A1%B9%E7%9B%AE/1.%20Boost%E5%BA%93%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/1.%20Boost%E5%BA%93%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E.html class=md-nav__link> <span class=md-ellipsis> 项目 </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 虚函数 </span> </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 虚函数重写 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 多态 </span> </a> <nav class=md-nav aria-label=多态> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 多态基本介绍 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 成员函数隐藏与重写的区别 </span> </a> </li> <li class=md-nav__item> <a href=#override class=md-nav__link> <span class=md-ellipsis> override关键字 </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 不可继承类和不可重写函数 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 抽象类与多态 </span> </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 实现继承与接口继承 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 多态的原理 </span> </a> <nav class=md-nav aria-label=多态的原理> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 虚函数表的存在 </span> </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 动态绑定和静态绑定 </span> </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 多态的必要条件思考 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 继承和多态中的面试题 </span> </a> <nav class=md-nav aria-label=继承和多态中的面试题> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 多继承中的指针偏移 </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 虚函数中的缺省参数问题 </span> </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 多态与内存对齐问题 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=c>C++多态<a class=headerlink href=#c title="Permanent link">&para;</a></h1> <div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;"> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span> 约 4234 个字 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"/></svg></span> 633 行代码 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"/></svg></span> 5 张图片 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span> 预计阅读时间 22 分钟</p> </div> <h2 id=_1>虚函数<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <p>在菱形继承中学习到对继承修饰为<code>virtual</code>可以实现虚拟继承，在多态中，可以使用<code>virtual</code>关键字修饰函数，被<code>virtual</code>修饰的函数即为虚函数</p> <h2 id=_2>虚函数重写<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <p>在继承中，如果子类中存在一个与父类同名的函数，则该子类函数会隐藏父类对应的函数，而为了实现函数重写，需要将父类函数修饰为<code>virtual</code>（子类对应的函数可以不写<code>virtual</code>，但是建议写上），此时子类中与父类重名的函数被视为<strong>虚函数重写（也称覆盖）</strong>，若父类中的函数没有被<code>virtual</code>修饰，则子类中如果存在与其同名的函数，则被视为<strong>隐藏</strong></p> <p>虚函数重写需要满足：</p> <ol> <li>函数返回类型相同</li> <li>函数名相同</li> <li>函数参数完全相同</li> </ol> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><span class=c1>// 父类</span>
</span><span id=__span-0-2><span class=k>class</span><span class=w> </span><span class=nc>Animal</span>
</span><span id=__span-0-3><span class=p>{</span>
</span><span id=__span-0-4><span class=k>public</span><span class=o>:</span>
</span><span id=__span-0-5><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>shout</span><span class=p>()</span>
</span><span id=__span-0-6><span class=w>    </span><span class=p>{</span>
</span><span id=__span-0-7><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;叫声&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-0-8><span class=w>    </span><span class=p>}</span>
</span><span id=__span-0-9>
</span><span id=__span-0-10><span class=w>    </span><span class=c1>// 正常函数</span>
</span><span id=__span-0-11><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>eat</span><span class=p>()</span>
</span><span id=__span-0-12><span class=w>    </span><span class=p>{</span>
</span><span id=__span-0-13><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;吃东西&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-0-14><span class=w>    </span><span class=p>}</span>
</span><span id=__span-0-15><span class=p>};</span>
</span><span id=__span-0-16>
</span><span id=__span-0-17><span class=c1>// 子类</span>
</span><span id=__span-0-18><span class=k>class</span><span class=w> </span><span class=nc>cat</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Animal</span>
</span><span id=__span-0-19><span class=p>{</span>
</span><span id=__span-0-20><span class=k>public</span><span class=o>:</span>
</span><span id=__span-0-21><span class=w>    </span><span class=c1>// 重写父类的虚函数——重写</span>
</span><span id=__span-0-22><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>shout</span><span class=p>()</span>
</span><span id=__span-0-23><span class=w>    </span><span class=p>{</span>
</span><span id=__span-0-24><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;喵喵&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-0-25><span class=w>    </span><span class=p>}</span>
</span><span id=__span-0-26>
</span><span id=__span-0-27><span class=w>    </span><span class=c1>// 正常函数——隐藏</span>
</span><span id=__span-0-28><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>eat</span><span class=p>()</span>
</span><span id=__span-0-29><span class=w>    </span><span class=p>{</span>
</span><span id=__span-0-30><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;猫吃东西&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-0-31><span class=w>    </span><span class=p>}</span>
</span><span id=__span-0-32><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p>但是虚函数重写条件存在两个例外：</p> <ol> <li> <p>第一个例外（不常见）：协变</p> <p>所谓协变，即当父类虚函数返回值类型为父类的指针或引用，子类虚函数返回值类型为子类的指针或引用，这种情况下子类中与父类同名的虚函数和父类中的虚函数也构成重写</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><span class=k>class</span><span class=w> </span><span class=nc>Base</span>
</span><span id=__span-1-2><span class=p>{</span>
</span><span id=__span-1-3><span class=k>public</span><span class=o>:</span>
</span><span id=__span-1-4><span class=w>    </span><span class=c1>// 父类返回当前类或者其父类指针类型</span>
</span><span id=__span-1-5><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=n>Base</span><span class=o>*</span><span class=w> </span><span class=n>func</span><span class=p>()</span>
</span><span id=__span-1-6><span class=w>    </span><span class=p>{</span>
</span><span id=__span-1-7><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;Base* func()&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-1-8><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=p>;</span>
</span><span id=__span-1-9><span class=w>    </span><span class=p>}</span>
</span><span id=__span-1-10><span class=p>};</span>
</span><span id=__span-1-11>
</span><span id=__span-1-12><span class=k>class</span><span class=w> </span><span class=nc>Derive</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Base</span>
</span><span id=__span-1-13><span class=p>{</span>
</span><span id=__span-1-14><span class=k>public</span><span class=o>:</span>
</span><span id=__span-1-15><span class=w>    </span><span class=c1>// 子类返回当前类指针类型</span>
</span><span id=__span-1-16><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=n>Derive</span><span class=o>*</span><span class=w> </span><span class=n>func</span><span class=p>()</span>
</span><span id=__span-1-17><span class=w>    </span><span class=p>{</span>
</span><span id=__span-1-18><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;Derive* func()&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-1-19><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=p>;</span>
</span><span id=__span-1-20><span class=w>    </span><span class=p>}</span>
</span><span id=__span-1-21><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> </li> <li> <p>第二个例外：析构函数的重写</p> <p>对于普通子类对象来说，析构函数是否是重写没有影响，因为子类对象在析构之后，子类的析构函数会默认调用父类的析构函数，不论是否存在隐藏</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><span class=k>class</span><span class=w> </span><span class=nc>Base</span>
</span><span id=__span-2-2><span class=p>{</span>
</span><span id=__span-2-3><span class=k>public</span><span class=o>:</span>
</span><span id=__span-2-4><span class=w>    </span><span class=o>~</span><span class=n>Base</span><span class=p>()</span>
</span><span id=__span-2-5><span class=w>    </span><span class=p>{</span>
</span><span id=__span-2-6><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;~Base()&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-2-7><span class=w>    </span><span class=p>}</span>
</span><span id=__span-2-8><span class=p>};</span>
</span><span id=__span-2-9>
</span><span id=__span-2-10><span class=k>class</span><span class=w> </span><span class=nc>Derive</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Base</span>
</span><span id=__span-2-11><span class=p>{</span>
</span><span id=__span-2-12><span class=k>public</span><span class=o>:</span>
</span><span id=__span-2-13><span class=w>    </span><span class=o>~</span><span class=n>Derive</span><span class=p>()</span>
</span><span id=__span-2-14><span class=w>    </span><span class=p>{</span>
</span><span id=__span-2-15><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;~Derive()&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-2-16><span class=w>    </span><span class=p>}</span>
</span><span id=__span-2-17><span class=p>};</span>
</span><span id=__span-2-18>
</span><span id=__span-2-19><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-2-20><span class=p>{</span>
</span><span id=__span-2-21><span class=w>    </span><span class=c1>// 普通对象</span>
</span><span id=__span-2-22><span class=w>    </span><span class=n>Derive</span><span class=w> </span><span class=n>d</span><span class=p>;</span>
</span><span id=__span-2-23>
</span><span id=__span-2-24><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-2-25><span class=p>}</span>
</span><span id=__span-2-26><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-2-27><span class=o>~</span><span class=n>Derive</span><span class=p>()</span>
</span><span id=__span-2-28><span class=o>~</span><span class=n>Base</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> <p>但是如果是父类的指针指向子类对象的话，一旦子类没有重写析构函数，就只会调用父类的析构函数，因为是父类的指针，父类指针销毁会先调用父类的析构函数，再销毁该指针 <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-3-1><span class=k>class</span><span class=w> </span><span class=nc>Base</span>
</span><span id=__span-3-2><span class=p>{</span>
</span><span id=__span-3-3><span class=k>public</span><span class=o>:</span>
</span><span id=__span-3-4><span class=w>    </span><span class=o>~</span><span class=n>Base</span><span class=p>()</span>
</span><span id=__span-3-5><span class=w>    </span><span class=p>{</span>
</span><span id=__span-3-6><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;~Base()&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-3-7><span class=w>    </span><span class=p>}</span>
</span><span id=__span-3-8><span class=p>};</span>
</span><span id=__span-3-9>
</span><span id=__span-3-10><span class=k>class</span><span class=w> </span><span class=nc>Derive</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Base</span>
</span><span id=__span-3-11><span class=p>{</span>
</span><span id=__span-3-12><span class=k>public</span><span class=o>:</span>
</span><span id=__span-3-13><span class=w>    </span><span class=o>~</span><span class=n>Derive</span><span class=p>()</span>
</span><span id=__span-3-14><span class=w>    </span><span class=p>{</span>
</span><span id=__span-3-15><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;~Derive()&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-3-16><span class=w>    </span><span class=p>}</span>
</span><span id=__span-3-17><span class=p>};</span>
</span><span id=__span-3-18>
</span><span id=__span-3-19><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-3-20><span class=p>{</span>
</span><span id=__span-3-21><span class=w>    </span><span class=n>Base</span><span class=o>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Derive</span><span class=p>;</span>
</span><span id=__span-3-22><span class=w>    </span><span class=k>delete</span><span class=w> </span><span class=n>b</span><span class=p>;</span>
</span><span id=__span-3-23>
</span><span id=__span-3-24><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-3-25><span class=p>}</span>
</span><span id=__span-3-26><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-3-27><span class=o>~</span><span class=n>Base</span><span class=p>()</span><span class=w>  </span>
</span></code></pre></div></td></tr></table></div> 但是多态条件中，父类指针指向子类对象，此时如果使用上面的方法写析构函数，则有可能会出现子类内存泄漏问题，所以父类析构函数需要设计成虚函数（析构函数会被处 为<code>destructor()</code>函数，所以子类和父类同名），这样在父类指针指向一个子类对象时，销毁父类指针会先走子类的析构函数（因为是多态，指针指向哪个对象就调哪个对象的析构函数），然后再走父类的析构函数，最后释放指针<code>b</code>的空间</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-4-1><span class=k>class</span><span class=w> </span><span class=nc>Base</span>
</span><span id=__span-4-2><span class=p>{</span>
</span><span id=__span-4-3><span class=k>public</span><span class=o>:</span>
</span><span id=__span-4-4><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=o>~</span><span class=n>Base</span><span class=p>()</span>
</span><span id=__span-4-5><span class=w>    </span><span class=p>{</span>
</span><span id=__span-4-6><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;~Base()&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-4-7><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-8><span class=p>};</span>
</span><span id=__span-4-9>
</span><span id=__span-4-10><span class=k>class</span><span class=w> </span><span class=nc>Derive</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Base</span>
</span><span id=__span-4-11><span class=p>{</span>
</span><span id=__span-4-12><span class=k>public</span><span class=o>:</span>
</span><span id=__span-4-13><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=o>~</span><span class=n>Derive</span><span class=p>()</span>
</span><span id=__span-4-14><span class=w>    </span><span class=p>{</span>
</span><span id=__span-4-15><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;~Derive()&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-4-16><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-17><span class=p>};</span>
</span><span id=__span-4-18>
</span><span id=__span-4-19><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-4-20><span class=p>{</span>
</span><span id=__span-4-21><span class=w>    </span><span class=c1>// 普通对象</span>
</span><span id=__span-4-22><span class=w>    </span><span class=c1>//Derive d;</span>
</span><span id=__span-4-23>
</span><span id=__span-4-24><span class=w>    </span><span class=n>Base</span><span class=o>*</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Derive</span><span class=p>;</span>
</span><span id=__span-4-25><span class=w>    </span><span class=k>delete</span><span class=w> </span><span class=n>b</span><span class=p>;</span>
</span><span id=__span-4-26>
</span><span id=__span-4-27><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-4-28><span class=p>}</span>
</span><span id=__span-4-29><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-4-30><span class=o>~</span><span class=n>Derive</span><span class=p>()</span>
</span><span id=__span-4-31><span class=o>~</span><span class=n>Base</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> <p>综上所述，<strong>析构函数需要设计成虚函数</strong></p> </li> </ol> <h2 id=_3>多态<a class=headerlink href=#_3 title="Permanent link">&para;</a></h2> <h3 id=_4>多态基本介绍<a class=headerlink href=#_4 title="Permanent link">&para;</a></h3> <p>所谓多态，即多种形态，例如在动物界中，不同的动物有不同的叫声，所以不同的动物就是“动物”的不同形态。在C++中，<strong>多态首先需要继承</strong>，接着需要满足下面两个条件才能构成多态：</p> <ol> <li>子类重写父类的虚函数</li> <li><strong>父类的指针或者引用</strong>指向子类对象，<strong>调用虚函数</strong></li> </ol> <p>结合多态的要求，使用下面的例子实现多态</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-5-1><span class=k>class</span><span class=w> </span><span class=nc>Animal</span>
</span><span id=__span-5-2><span class=p>{</span>
</span><span id=__span-5-3><span class=k>public</span><span class=o>:</span>
</span><span id=__span-5-4><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>shout</span><span class=p>()</span>
</span><span id=__span-5-5><span class=w>    </span><span class=p>{</span>
</span><span id=__span-5-6><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;叫声&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-5-7><span class=w>    </span><span class=p>}</span>
</span><span id=__span-5-8><span class=k>private</span><span class=o>:</span>
</span><span id=__span-5-9><span class=w>    </span><span class=n>string</span><span class=w> </span><span class=n>_kind</span><span class=p>;</span>
</span><span id=__span-5-10><span class=p>};</span>
</span><span id=__span-5-11>
</span><span id=__span-5-12><span class=k>class</span><span class=w> </span><span class=nc>cat</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Animal</span>
</span><span id=__span-5-13><span class=p>{</span>
</span><span id=__span-5-14><span class=k>public</span><span class=o>:</span>
</span><span id=__span-5-15><span class=w>    </span><span class=c1>// 重写父类的虚函数</span>
</span><span id=__span-5-16><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>shout</span><span class=p>()</span>
</span><span id=__span-5-17><span class=w>    </span><span class=p>{</span>
</span><span id=__span-5-18><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;喵喵&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-5-19><span class=w>    </span><span class=p>}</span>
</span><span id=__span-5-20><span class=p>};</span>
</span><span id=__span-5-21>
</span><span id=__span-5-22><span class=k>class</span><span class=w> </span><span class=nc>dog</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Animal</span>
</span><span id=__span-5-23><span class=p>{</span>
</span><span id=__span-5-24><span class=k>public</span><span class=o>:</span>
</span><span id=__span-5-25><span class=w>    </span><span class=c1>// 重写父类的虚函数</span>
</span><span id=__span-5-26><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>shout</span><span class=p>()</span>
</span><span id=__span-5-27><span class=w>    </span><span class=p>{</span>
</span><span id=__span-5-28><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;汪汪&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-5-29><span class=w>    </span><span class=p>}</span>
</span><span id=__span-5-30><span class=p>};</span>
</span><span id=__span-5-31>
</span><span id=__span-5-32><span class=c1>// 使用父类引用形参接收子类对象，调用虚函数</span>
</span><span id=__span-5-33><span class=kt>void</span><span class=w> </span><span class=nf>func</span><span class=p>(</span><span class=n>Animal</span><span class=o>&amp;</span><span class=w> </span><span class=n>a</span><span class=p>)</span>
</span><span id=__span-5-34><span class=p>{</span>
</span><span id=__span-5-35><span class=w>    </span><span class=n>a</span><span class=p>.</span><span class=n>shout</span><span class=p>();</span>
</span><span id=__span-5-36><span class=p>}</span>
</span><span id=__span-5-37>
</span><span id=__span-5-38><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-5-39><span class=p>{</span>
</span><span id=__span-5-40><span class=w>    </span><span class=n>Animal</span><span class=w> </span><span class=n>a</span><span class=p>;</span><span class=c1>// 创建父类对象</span>
</span><span id=__span-5-41><span class=w>    </span><span class=n>cat</span><span class=w> </span><span class=n>c</span><span class=p>;</span><span class=w> </span><span class=c1>// 创建子类对象</span>
</span><span id=__span-5-42><span class=w>    </span><span class=n>dog</span><span class=w> </span><span class=n>d</span><span class=p>;</span><span class=w> </span><span class=c1>// 创建子类对象</span>
</span><span id=__span-5-43>
</span><span id=__span-5-44><span class=w>    </span><span class=n>func</span><span class=p>(</span><span class=n>a</span><span class=p>);</span>
</span><span id=__span-5-45><span class=w>    </span><span class=n>func</span><span class=p>(</span><span class=n>c</span><span class=p>);</span>
</span><span id=__span-5-46><span class=w>    </span><span class=n>func</span><span class=p>(</span><span class=n>d</span><span class=p>);</span>
</span><span id=__span-5-47>
</span><span id=__span-5-48><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-5-49><span class=p>}</span>
</span><span id=__span-5-50>
</span><span id=__span-5-51><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-5-52><span class=n>叫声</span>
</span><span id=__span-5-53><span class=n>喵喵</span>
</span><span id=__span-5-54><span class=n>汪汪</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_5>成员函数隐藏与重写的区别<a class=headerlink href=#_5 title="Permanent link">&para;</a></h3> <p>首先，对于隐藏来说，子类的成员函数只需要与父类的成员函数重名时，就可以构成隐藏，而对于重写来说，基本要求三个位置（返回值类型、函数名以及形式参数）全部相同并且需要用<code>virtual</code>关键字修饰，考虑下面的例子</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span>
<span class=normal>90</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-6-1><span class=c1>// 父类</span>
</span><span id=__span-6-2><span class=k>class</span><span class=w> </span><span class=nc>Animal</span>
</span><span id=__span-6-3><span class=p>{</span>
</span><span id=__span-6-4><span class=k>public</span><span class=o>:</span>
</span><span id=__span-6-5><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>shout</span><span class=p>()</span>
</span><span id=__span-6-6><span class=w>    </span><span class=p>{</span>
</span><span id=__span-6-7><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;叫声&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-6-8><span class=w>    </span><span class=p>}</span>
</span><span id=__span-6-9>
</span><span id=__span-6-10><span class=w>    </span><span class=c1>// 正常函数</span>
</span><span id=__span-6-11><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>eat</span><span class=p>()</span>
</span><span id=__span-6-12><span class=w>    </span><span class=p>{</span>
</span><span id=__span-6-13><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;吃东西&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-6-14><span class=w>    </span><span class=p>}</span>
</span><span id=__span-6-15><span class=p>};</span>
</span><span id=__span-6-16>
</span><span id=__span-6-17><span class=c1>// 子类</span>
</span><span id=__span-6-18><span class=k>class</span><span class=w> </span><span class=nc>cat</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Animal</span>
</span><span id=__span-6-19><span class=p>{</span>
</span><span id=__span-6-20><span class=k>public</span><span class=o>:</span>
</span><span id=__span-6-21><span class=w>    </span><span class=c1>// 重写父类的虚函数</span>
</span><span id=__span-6-22><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>shout</span><span class=p>()</span>
</span><span id=__span-6-23><span class=w>    </span><span class=p>{</span>
</span><span id=__span-6-24><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;喵喵&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-6-25><span class=w>    </span><span class=p>}</span>
</span><span id=__span-6-26>
</span><span id=__span-6-27><span class=w>    </span><span class=c1>// 正常函数</span>
</span><span id=__span-6-28><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>eat</span><span class=p>()</span>
</span><span id=__span-6-29><span class=w>    </span><span class=p>{</span>
</span><span id=__span-6-30><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;猫吃东西&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-6-31><span class=w>    </span><span class=p>}</span>
</span><span id=__span-6-32>
</span><span id=__span-6-33><span class=p>};</span>
</span><span id=__span-6-34>
</span><span id=__span-6-35><span class=c1>// 子类</span>
</span><span id=__span-6-36><span class=k>class</span><span class=w> </span><span class=nc>dog</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Animal</span>
</span><span id=__span-6-37><span class=p>{</span>
</span><span id=__span-6-38><span class=k>public</span><span class=o>:</span>
</span><span id=__span-6-39><span class=w>    </span><span class=c1>// 重写父类的虚函数</span>
</span><span id=__span-6-40><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>shout</span><span class=p>()</span>
</span><span id=__span-6-41><span class=w>    </span><span class=p>{</span>
</span><span id=__span-6-42><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;汪汪&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-6-43><span class=w>    </span><span class=p>}</span>
</span><span id=__span-6-44>
</span><span id=__span-6-45><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>eat</span><span class=p>()</span>
</span><span id=__span-6-46><span class=w>    </span><span class=p>{</span>
</span><span id=__span-6-47><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;狗吃东西&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-6-48><span class=w>    </span><span class=p>}</span>
</span><span id=__span-6-49><span class=p>};</span>
</span><span id=__span-6-50>
</span><span id=__span-6-51><span class=c1>// 使用父类引用形参接收子类对象，调用虚函数</span>
</span><span id=__span-6-52><span class=kt>void</span><span class=w> </span><span class=nf>func</span><span class=p>(</span><span class=n>Animal</span><span class=o>&amp;</span><span class=w> </span><span class=n>a</span><span class=p>)</span>
</span><span id=__span-6-53><span class=p>{</span>
</span><span id=__span-6-54><span class=w>    </span><span class=c1>// 虚函数调用</span>
</span><span id=__span-6-55><span class=w>    </span><span class=n>a</span><span class=p>.</span><span class=n>shout</span><span class=p>();</span>
</span><span id=__span-6-56><span class=w>    </span><span class=c1>// 非虚函数调用</span>
</span><span id=__span-6-57><span class=w>    </span><span class=n>a</span><span class=p>.</span><span class=n>eat</span><span class=p>();</span>
</span><span id=__span-6-58>
</span><span id=__span-6-59><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-6-60><span class=p>}</span>
</span><span id=__span-6-61>
</span><span id=__span-6-62><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-6-63><span class=p>{</span>
</span><span id=__span-6-64><span class=w>    </span><span class=n>Animal</span><span class=w> </span><span class=n>a</span><span class=p>;</span><span class=c1>// 创建父类对象</span>
</span><span id=__span-6-65><span class=w>    </span><span class=n>cat</span><span class=w> </span><span class=n>c</span><span class=p>;</span><span class=w> </span><span class=c1>// 创建子类对象</span>
</span><span id=__span-6-66><span class=w>    </span><span class=n>dog</span><span class=w> </span><span class=n>d</span><span class=p>;</span><span class=w> </span><span class=c1>// 创建子类对象</span>
</span><span id=__span-6-67>
</span><span id=__span-6-68><span class=w>    </span><span class=n>func</span><span class=p>(</span><span class=n>a</span><span class=p>);</span>
</span><span id=__span-6-69><span class=w>    </span><span class=n>func</span><span class=p>(</span><span class=n>c</span><span class=p>);</span>
</span><span id=__span-6-70><span class=w>    </span><span class=n>func</span><span class=p>(</span><span class=n>d</span><span class=p>);</span>
</span><span id=__span-6-71>
</span><span id=__span-6-72><span class=w>    </span><span class=c1>// 创建子类对象调用子类非虚函数</span>
</span><span id=__span-6-73><span class=w>    </span><span class=n>cat</span><span class=p>().</span><span class=n>eat</span><span class=p>();</span>
</span><span id=__span-6-74><span class=w>    </span><span class=n>dog</span><span class=p>().</span><span class=n>eat</span><span class=p>();</span>
</span><span id=__span-6-75>
</span><span id=__span-6-76><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-6-77><span class=p>}</span>
</span><span id=__span-6-78>
</span><span id=__span-6-79><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-6-80><span class=n>叫声</span>
</span><span id=__span-6-81><span class=n>吃东西</span>
</span><span id=__span-6-82>
</span><span id=__span-6-83><span class=n>喵喵</span>
</span><span id=__span-6-84><span class=n>吃东西</span>
</span><span id=__span-6-85>
</span><span id=__span-6-86><span class=n>汪汪</span>
</span><span id=__span-6-87><span class=n>吃东西</span>
</span><span id=__span-6-88>
</span><span id=__span-6-89><span class=n>猫吃东西</span>
</span><span id=__span-6-90><span class=n>狗吃东西</span>
</span></code></pre></div></td></tr></table></div> <p>根据输出结果可以看出，对于重写的函数来说，函数的调用取决于实参是哪一个对象，而隐藏的函数不论是父类对象还是子类对象，只要是父类类型变量，都会调用父类的函数，如果需要访问子类函数，则需要额外创建子类对象</p> <h3 id=override><code>override</code>关键字<a class=headerlink href=#override title="Permanent link">&para;</a></h3> <p>在C++中，可以使用<code>override</code>关键字来判断子类是否重写的是父类中对应的虚函数，如果没有则编译报错</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1><span class=k>class</span><span class=w> </span><span class=nc>Animal</span>
</span><span id=__span-7-2><span class=p>{</span>
</span><span id=__span-7-3><span class=k>public</span><span class=o>:</span>
</span><span id=__span-7-4><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>func</span><span class=p>()</span>
</span><span id=__span-7-5><span class=w>    </span><span class=p>{</span>
</span><span id=__span-7-6><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;父类&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-7-7><span class=w>    </span><span class=p>}</span>
</span><span id=__span-7-8><span class=p>};</span>
</span><span id=__span-7-9>
</span><span id=__span-7-10><span class=k>class</span><span class=w> </span><span class=nc>cat</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Animal</span>
</span><span id=__span-7-11><span class=p>{</span>
</span><span id=__span-7-12><span class=k>public</span><span class=o>:</span>
</span><span id=__span-7-13><span class=w>    </span><span class=c1>// 与父类中的虚函数不同名不构成重写，但是加了override关键字</span>
</span><span id=__span-7-14><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>func1</span><span class=p>()</span><span class=w> </span><span class=k>override</span>
</span><span id=__span-7-15><span class=w>    </span><span class=p>{</span>
</span><span id=__span-7-16><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;子类&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-7-17><span class=w>    </span><span class=p>}</span>
</span><span id=__span-7-18><span class=p>};</span>
</span><span id=__span-7-19>
</span><span id=__span-7-20><span class=n>报错提示</span><span class=err>：</span>
</span><span id=__span-7-21><span class=err>&#39;</span><span class=n>cat</span><span class=o>::</span><span class=n>func1</span><span class=err>&#39;</span><span class=o>:</span><span class=w> </span><span class=n>method</span><span class=w> </span><span class=n>with</span><span class=w> </span><span class=k>override</span><span class=w> </span><span class=n>specifier</span><span class=w> </span><span class=err>&#39;</span><span class=k>override</span><span class=err>&#39;</span><span class=w> </span><span class=n>did</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>override</span><span class=w> </span><span class=n>any</span><span class=w> </span><span class=n>base</span><span class=w> </span><span class=k>class</span><span class=w> </span><span class=nc>methods</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_6>不可继承类和不可重写函数<a class=headerlink href=#_6 title="Permanent link">&para;</a></h3> <p>在C++中，可以使用<code>final</code>关键字修饰类或者成员函数，此时该类或者函数无法被继承或者重写</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-8-1><span class=c1>// 不可继承类</span>
</span><span id=__span-8-2><span class=k>class</span><span class=w> </span><span class=nc>Base</span><span class=w> </span><span class=k>final</span>
</span><span id=__span-8-3><span class=p>{</span>
</span><span id=__span-8-4>
</span><span id=__span-8-5><span class=p>};</span>
</span><span id=__span-8-6>
</span><span id=__span-8-7><span class=k>class</span><span class=w> </span><span class=nc>Derive</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Base</span>
</span><span id=__span-8-8><span class=p>{</span>
</span><span id=__span-8-9>
</span><span id=__span-8-10><span class=p>};</span>
</span><span id=__span-8-11><span class=n>报错提示</span><span class=err>：</span>
</span><span id=__span-8-12><span class=n>a</span><span class=w> </span><span class=err>&#39;</span><span class=k>final</span><span class=err>&#39;</span><span class=w> </span><span class=k>class</span><span class=w> </span><span class=nc>type</span><span class=w> </span><span class=n>cannot</span><span class=w> </span><span class=n>be</span><span class=w> </span><span class=n>used</span><span class=w> </span><span class=n>as</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>base</span><span class=w> </span><span class=k>class</span><span class=w> </span>
</span><span id=__span-8-13>
</span><span id=__span-8-14><span class=c1>// 不可重写函数</span>
</span><span id=__span-8-15><span class=k>class</span><span class=w> </span><span class=nc>Base</span>
</span><span id=__span-8-16><span class=p>{</span>
</span><span id=__span-8-17><span class=k>public</span><span class=o>:</span>
</span><span id=__span-8-18><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>func</span><span class=p>()</span><span class=w> </span><span class=k>final</span>
</span><span id=__span-8-19><span class=w>    </span><span class=p>{</span>
</span><span id=__span-8-20>
</span><span id=__span-8-21><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-22><span class=p>};</span>
</span><span id=__span-8-23>
</span><span id=__span-8-24><span class=k>class</span><span class=w> </span><span class=nc>Derive</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Base</span>
</span><span id=__span-8-25><span class=p>{</span>
</span><span id=__span-8-26><span class=k>public</span><span class=o>:</span>
</span><span id=__span-8-27><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>func</span><span class=p>()</span>
</span><span id=__span-8-28><span class=w>    </span><span class=p>{</span>
</span><span id=__span-8-29>
</span><span id=__span-8-30><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-31><span class=p>};</span>
</span><span id=__span-8-32><span class=n>报错提示</span><span class=err>：</span>
</span><span id=__span-8-33><span class=n>cannot</span><span class=w> </span><span class=k>override</span><span class=w> </span><span class=err>&#39;</span><span class=k>final</span><span class=err>&#39;</span><span class=w> </span><span class=n>function</span><span class=w> </span><span class=s>&quot;Base::func&quot;</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_7>抽象类与多态<a class=headerlink href=#_7 title="Permanent link">&para;</a></h3> <p>在C++中，当类中至少含有一个抽象函数时，该类即为抽象类（也称接口类）</p> <p>所谓抽象类，即无法实例化出对象的类</p> <p>抽象函数，即<strong>没有函数定义只有函数声明且函数声明后出现<code>=0</code></strong>的函数（也称纯虚函数），考虑下面的示例：</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-9-1><span class=c1>// 抽象类</span>
</span><span id=__span-9-2><span class=k>class</span><span class=w> </span><span class=nc>Base</span>
</span><span id=__span-9-3><span class=p>{</span>
</span><span id=__span-9-4><span class=k>public</span><span class=o>:</span>
</span><span id=__span-9-5><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>func</span><span class=p>()</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-9-6><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p>对于抽象类来说，如果有子类继承了该抽象类，则子类必须重写父类中的抽象方法，否则子类也会因为存在函数为纯虚函数导致变为抽象类而无法实例化出对象</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-10-1><span class=c1>// 抽象类</span>
</span><span id=__span-10-2><span class=k>class</span><span class=w> </span><span class=nc>Base</span>
</span><span id=__span-10-3><span class=p>{</span>
</span><span id=__span-10-4><span class=k>public</span><span class=o>:</span>
</span><span id=__span-10-5><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>func</span><span class=p>()</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-10-6><span class=p>};</span>
</span><span id=__span-10-7>
</span><span id=__span-10-8><span class=k>class</span><span class=w> </span><span class=nc>Derive</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Base</span>
</span><span id=__span-10-9><span class=p>{</span>
</span><span id=__span-10-10><span class=k>public</span><span class=o>:</span>
</span><span id=__span-10-11><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>func</span><span class=p>()</span><span class=w> </span><span class=k>override</span>
</span><span id=__span-10-12><span class=w>    </span><span class=p>{</span>
</span><span id=__span-10-13><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;子类&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-10-14><span class=w>    </span><span class=p>}</span>
</span><span id=__span-10-15><span class=p>};</span>
</span><span id=__span-10-16>
</span><span id=__span-10-17><span class=kt>void</span><span class=w> </span><span class=nf>func</span><span class=p>(</span><span class=n>Base</span><span class=o>&amp;</span><span class=w> </span><span class=n>b</span><span class=p>)</span>
</span><span id=__span-10-18><span class=p>{</span>
</span><span id=__span-10-19><span class=w>    </span><span class=n>b</span><span class=p>.</span><span class=n>func</span><span class=p>();</span>
</span><span id=__span-10-20><span class=p>}</span>
</span><span id=__span-10-21>
</span><span id=__span-10-22><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-10-23><span class=p>{</span>
</span><span id=__span-10-24><span class=w>    </span><span class=n>Derive</span><span class=w> </span><span class=n>d</span><span class=p>;</span>
</span><span id=__span-10-25><span class=w>    </span><span class=n>func</span><span class=p>(</span><span class=n>d</span><span class=p>);</span>
</span><span id=__span-10-26><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-10-27><span class=p>}</span>
</span><span id=__span-10-28>
</span><span id=__span-10-29><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-10-30><span class=n>子类</span>
</span></code></pre></div></td></tr></table></div> <p>有了抽象类，多态就会变得更合理化，考虑开始时的动物类，<code>Animal</code>类本身作为一个大集体是没有叫声的，所以可以没必要实现<code>shout()</code>函数，而具体到<code>cat</code>类和<code>dog</code>类有自己的叫声，所以需要具体实现。另外因为<code>Animal</code>类是一个大集体，所以不需要实例化出一个实际对象，所以使用抽象类也可以刚刚好满足这个条件，这也是为什么多态的第二个条件需要是父类的指针或者引用的其中一个原因</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-11-1><span class=k>class</span><span class=w> </span><span class=nc>Animal</span>
</span><span id=__span-11-2><span class=p>{</span>
</span><span id=__span-11-3><span class=k>public</span><span class=o>:</span>
</span><span id=__span-11-4><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>shout</span><span class=p>()</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-11-5><span class=p>};</span>
</span><span id=__span-11-6>
</span><span id=__span-11-7><span class=k>class</span><span class=w> </span><span class=nc>cat</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Animal</span>
</span><span id=__span-11-8><span class=p>{</span>
</span><span id=__span-11-9><span class=k>public</span><span class=o>:</span>
</span><span id=__span-11-10><span class=w>    </span><span class=c1>// 重写父类的虚函数</span>
</span><span id=__span-11-11><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>shout</span><span class=p>()</span>
</span><span id=__span-11-12><span class=w>    </span><span class=p>{</span>
</span><span id=__span-11-13><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;喵喵&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-11-14><span class=w>    </span><span class=p>}</span>
</span><span id=__span-11-15><span class=p>};</span>
</span><span id=__span-11-16>
</span><span id=__span-11-17><span class=k>class</span><span class=w> </span><span class=nc>dog</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Animal</span>
</span><span id=__span-11-18><span class=p>{</span>
</span><span id=__span-11-19><span class=k>public</span><span class=o>:</span>
</span><span id=__span-11-20><span class=w>    </span><span class=c1>// 重写父类的虚函数</span>
</span><span id=__span-11-21><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>shout</span><span class=p>()</span>
</span><span id=__span-11-22><span class=w>    </span><span class=p>{</span>
</span><span id=__span-11-23><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;汪汪&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-11-24><span class=w>    </span><span class=p>}</span>
</span><span id=__span-11-25><span class=p>};</span>
</span><span id=__span-11-26>
</span><span id=__span-11-27><span class=c1>// 使用父类引用形参接收子类对象，调用虚函数</span>
</span><span id=__span-11-28><span class=kt>void</span><span class=w> </span><span class=nf>func</span><span class=p>(</span><span class=n>Animal</span><span class=o>&amp;</span><span class=w> </span><span class=n>a</span><span class=p>)</span>
</span><span id=__span-11-29><span class=p>{</span>
</span><span id=__span-11-30><span class=w>    </span><span class=c1>// 虚函数调用</span>
</span><span id=__span-11-31><span class=w>    </span><span class=n>a</span><span class=p>.</span><span class=n>shout</span><span class=p>();</span>
</span><span id=__span-11-32><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-11-33><span class=p>}</span>
</span><span id=__span-11-34>
</span><span id=__span-11-35><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-11-36><span class=p>{</span>
</span><span id=__span-11-37><span class=w>    </span><span class=n>cat</span><span class=w> </span><span class=n>c</span><span class=p>;</span>
</span><span id=__span-11-38><span class=w>    </span><span class=n>dog</span><span class=w> </span><span class=n>d</span><span class=p>;</span>
</span><span id=__span-11-39><span class=w>    </span><span class=n>func</span><span class=p>(</span><span class=n>c</span><span class=p>);</span>
</span><span id=__span-11-40><span class=w>    </span><span class=n>func</span><span class=p>(</span><span class=n>d</span><span class=p>);</span>
</span><span id=__span-11-41><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-11-42><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_8>实现继承与接口继承<a class=headerlink href=#_8 title="Permanent link">&para;</a></h3> <p>普通函数的继承是一种实现继承，派生类继承了基类函数，可以使用函数，继承的是函数的实现。</p> <p>虚函数的继承是一种接口继承，派生类继承的是基类虚函数的接口，目的是为了重写，达成多态，继承的是接口。所以<strong>如果不实现多态，不要把函数定义成虚函数</strong></p> <h2 id=_9>多态的原理<a class=headerlink href=#_9 title="Permanent link">&para;</a></h2> <h3 id=_10>虚函数表的存在<a class=headerlink href=#_10 title="Permanent link">&para;</a></h3> <p>考虑下面代码中，<code>Base</code>类和<code>Derive</code>类的大小（64位机下）</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-12-1><span class=k>class</span><span class=w> </span><span class=nc>Base</span>
</span><span id=__span-12-2><span class=p>{</span>
</span><span id=__span-12-3><span class=k>public</span><span class=o>:</span>
</span><span id=__span-12-4><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=n>func</span><span class=p>()</span>
</span><span id=__span-12-5><span class=w>    </span><span class=p>{</span>
</span><span id=__span-12-6><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;~Base()&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-12-7><span class=w>    </span><span class=p>}</span>
</span><span id=__span-12-8><span class=p>};</span>
</span><span id=__span-12-9>
</span><span id=__span-12-10><span class=k>class</span><span class=w> </span><span class=nc>Derive</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Base</span>
</span><span id=__span-12-11><span class=p>{</span>
</span><span id=__span-12-12><span class=k>public</span><span class=o>:</span>
</span><span id=__span-12-13><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=o>~</span><span class=n>Derive</span><span class=p>()</span>
</span><span id=__span-12-14><span class=w>    </span><span class=p>{</span>
</span><span id=__span-12-15><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;~Derive()&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-12-16><span class=w>    </span><span class=p>}</span>
</span><span id=__span-12-17><span class=p>};</span>
</span><span id=__span-12-18>
</span><span id=__span-12-19><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-12-20><span class=p>{</span>
</span><span id=__span-12-21><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;Base: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>Base</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-12-22><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;Derive: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>Derive</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-12-23>
</span><span id=__span-12-24><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-12-25><span class=p>}</span>
</span><span id=__span-12-26><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-12-27><span class=nl>Base</span><span class=p>:</span><span class=w> </span><span class=mi>8</span>
</span><span id=__span-12-28><span class=nl>Derive</span><span class=p>:</span><span class=w> </span><span class=mi>8</span>
</span></code></pre></div></td></tr></table></div> <p>在类和对象一节了解到如果一个类中没有成员变量只包含成员函数，那么类只有1字节的大小，但是这两个类的大小都是8字节，原因就是虚函数表</p> <p>当类中定义了虚函数，那么对应的类中就会有虚函数表，但是类中不会直接存储一张表，而是存储一个表指针，该指针是一个指向函数指针数组首元素地址的指针</p> <p><a class=glightbox href=20.%20C%2B%2B%E5%A4%9A%E6%80%81.assets/image-20240711174402775.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img alt=image-20240711174402775 src=20.%20C%2B%2B%E5%A4%9A%E6%80%81.assets/image-20240711174402775.png></a></p> <p>虚函数表中第一个元素存储的地址值</p> <p><a class=glightbox href=20.%20C%2B%2B%E5%A4%9A%E6%80%81.assets/image-20240711174343941.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img alt=image-20240711174343941 src=20.%20C%2B%2B%E5%A4%9A%E6%80%81.assets/image-20240711174343941.png></a></p> <p>所谓虚函数表，就是一个一维函数指针数组，在类定义了虚函数时，每一个虚函数的跳转指令(call指令)的地址都会存储到虚函数表中</p> <p>如果父类中定义了虚函数，则父类中会有一张虚表，此时子类如果继承了父类并且重写了父类对应的虚函数，则子类中也会有一张虚函数表，该虚函数表中存储着子类的虚函数</p> <p><a class=glightbox href=20.%20C%2B%2B%E5%A4%9A%E6%80%81.assets/image-20240711174807164.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img alt=image-20240711174807164 src=20.%20C%2B%2B%E5%A4%9A%E6%80%81.assets/image-20240711174807164.png></a></p> <p>而之所以能实现多态，就是靠的虚函数表，但是不同于普通函数，考虑下面的代码：</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-13-1><span class=k>class</span><span class=w> </span><span class=nc>Base</span>
</span><span id=__span-13-2><span class=p>{</span>
</span><span id=__span-13-3><span class=k>public</span><span class=o>:</span>
</span><span id=__span-13-4><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>func1</span><span class=p>()</span>
</span><span id=__span-13-5><span class=w>    </span><span class=p>{</span>
</span><span id=__span-13-6><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;Base::func1()&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-13-7><span class=w>    </span><span class=p>}</span>
</span><span id=__span-13-8>
</span><span id=__span-13-9><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>func2</span><span class=p>()</span>
</span><span id=__span-13-10><span class=w>    </span><span class=p>{</span>
</span><span id=__span-13-11><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;Base::func2()&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-13-12><span class=w>    </span><span class=p>}</span>
</span><span id=__span-13-13>
</span><span id=__span-13-14><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>func3</span><span class=p>()</span>
</span><span id=__span-13-15><span class=w>    </span><span class=p>{</span>
</span><span id=__span-13-16><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;Base::func3()&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-13-17><span class=w>    </span><span class=p>}</span>
</span><span id=__span-13-18><span class=p>};</span>
</span><span id=__span-13-19>
</span><span id=__span-13-20><span class=k>class</span><span class=w> </span><span class=nc>Derive</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Base</span>
</span><span id=__span-13-21><span class=p>{</span>
</span><span id=__span-13-22><span class=k>public</span><span class=o>:</span>
</span><span id=__span-13-23><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>func1</span><span class=p>()</span>
</span><span id=__span-13-24><span class=w>    </span><span class=p>{</span>
</span><span id=__span-13-25><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;Derive::func1()&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-13-26><span class=w>    </span><span class=p>}</span>
</span><span id=__span-13-27>
</span><span id=__span-13-28><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>func3</span><span class=p>()</span>
</span><span id=__span-13-29><span class=w>    </span><span class=p>{</span>
</span><span id=__span-13-30><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;Derive::func3()&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-13-31><span class=w>    </span><span class=p>}</span>
</span><span id=__span-13-32><span class=p>};</span>
</span><span id=__span-13-33>
</span><span id=__span-13-34><span class=kt>void</span><span class=w> </span><span class=nf>func</span><span class=p>(</span><span class=n>Base</span><span class=o>&amp;</span><span class=w> </span><span class=n>b</span><span class=p>)</span>
</span><span id=__span-13-35><span class=p>{</span>
</span><span id=__span-13-36><span class=w>    </span><span class=c1>// 重写的虚函数</span>
</span><span id=__span-13-37><span class=w>    </span><span class=n>b</span><span class=p>.</span><span class=n>func1</span><span class=p>();</span>
</span><span id=__span-13-38><span class=w>    </span><span class=c1>// 普通函数</span>
</span><span id=__span-13-39><span class=w>    </span><span class=n>b</span><span class=p>.</span><span class=n>func3</span><span class=p>();</span>
</span><span id=__span-13-40><span class=p>}</span>
</span><span id=__span-13-41>
</span><span id=__span-13-42><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-13-43><span class=p>{</span>
</span><span id=__span-13-44><span class=w>    </span><span class=n>Base</span><span class=w> </span><span class=n>b</span><span class=p>;</span>
</span><span id=__span-13-45><span class=w>    </span><span class=n>Derive</span><span class=w> </span><span class=n>d</span><span class=p>;</span>
</span><span id=__span-13-46>
</span><span id=__span-13-47><span class=w>    </span><span class=n>func</span><span class=p>(</span><span class=n>b</span><span class=p>);</span>
</span><span id=__span-13-48><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-13-49><span class=w>    </span><span class=n>func</span><span class=p>(</span><span class=n>d</span><span class=p>);</span>
</span><span id=__span-13-50>
</span><span id=__span-13-51><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-13-52><span class=p>}</span>
</span><span id=__span-13-53><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-13-54><span class=n>Base</span><span class=o>::</span><span class=n>func1</span><span class=p>()</span>
</span><span id=__span-13-55><span class=n>Base</span><span class=o>::</span><span class=n>func3</span><span class=p>()</span>
</span><span id=__span-13-56>
</span><span id=__span-13-57><span class=n>Derive</span><span class=o>::</span><span class=n>func1</span><span class=p>()</span>
</span><span id=__span-13-58><span class=n>Base</span><span class=o>::</span><span class=n>func3</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> <p>在上面的代码中，父类<code>Base</code>中有两个虚函数<code>func1()</code>和<code>func2()</code>，所以父类的虚表中存在两个虚函数，但是父类中还有一个普通函数，普通函数并没有放在虚表中，接着子类<code>Derive</code>中，因为重写了父类中的<code>func1()</code>函数，所以子类虚表中的<code>func1()</code>不同于父类中的<code>func1()</code>，但是子类并没有重写<code>func2()</code>，所以对于子类的虚函数表来说，也存在两个虚函数<code>func1()</code>和<code>func2()</code>，只是子类的<code>func2()</code>与父类的<code>func2()</code>共用一个地址</p> <p><a class=glightbox href=20.%20C%2B%2B%E5%A4%9A%E6%80%81.assets/image-20240711175848717.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img alt=image-20240711175848717 src=20.%20C%2B%2B%E5%A4%9A%E6%80%81.assets/image-20240711175848717.png></a></p> <h3 id=_11>动态绑定和静态绑定<a class=headerlink href=#_11 title="Permanent link">&para;</a></h3> <p>正是因为有了虚函数表，才有了多态的实现。</p> <p>在编译与链接部分提到，一个函数在链接时会生成一个符号表，该符号表中存储的函数名和函数地址，编译器在调用函数时，根据符号表中的地址可以找到该函数完成调用，但是对于多态中的虚函数来说，因为在编译链接时并不知道是哪一个对象在调用虚函数，所以无法确定调用的哪个对象中的虚函数，</p> <p>对于在编译链接部分对函数生成符号表的操作称为<strong>静态绑定</strong>，而在运行时才确定调用函数地址的操作称为<strong>动态绑定</strong></p> <p>虚函数表在多态中相当于一个虚拟的符号表，当父类对象调用虚函数时，会去父类对象中的虚函数表找对应的虚函数跳转地址，当子类对象调用虚函数时，会去子类对象中的虚函数表找对应的虚函数地址，所以才有了父类对象调用父类虚函数，子类对象调用子类虚函数，形参多态</p> <p>对上面的代码进行解析：</p> <p>对于前面出现的<code>func1()</code>，当执行父类对象给父类引用<code>b</code>时，<code>b-&gt;func1()</code>就会去父类对象中的虚函数表中找<code>func1()</code>对应的地址，即<code>0x00007ff6f1421537</code>，<code>b-&gt;func2()</code>也是同样的道理；当执行子类对象给父类引用<code>b</code>时，<code>b-&gt;func1()</code>就会去子类对象的虚函数表中找<code>func1()</code>对应的地址，因为和父类的<code>func1()</code>地址不同，所以调用的<code>func1()</code>函数也就不同，这也是为什么虚函数重写也被称为覆盖，接着调用<code>func2()</code>函数，因为子类中并没有重写父类的虚函数<code>func2()</code>，所以子类虚函数中<code>func2()</code>对应的地址与父类中的相同，此时调用的虚函数也是同一个</p> <p>但是对于<code>func3()</code>来说，因为<code>func3()</code>属于普通函数，所以<code>func3()</code>在编译链接时就已经确定了是父类中的<code>func3()</code>的地址，所以只要是调用<code>func3()</code>，不论是子类对象调用还是父类对象对象调用，只要调用变量的类型是父类类型，就会调用父类的<code>func3()</code></p> <p>在了解了虚函数表的存在后，思考下面三个问题：</p> <ol> <li> <p>虚函数存放在哪里</p> <div class="admonition question"> <p class=admonition-title>Answer</p> <p>虚函数存放在代码段（常量区）</p> </div> </li> <li> <p>虚函数表存放在哪里</p> <div class="admonition question"> <p class=admonition-title>Answer</p> <p>虚函数表存放在代码段（常量区）</p> </div> </li> <li> <p>虚函数表指针存放在哪里</p> <div class="admonition question"> <p class=admonition-title>Answer</p> <p>虚函数表指针存放在对象中，对象存放在栈</p> </div> </li> </ol> <p>通过下面的代码大致看一下虚函数表的位置：</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-14-1><span class=k>class</span><span class=w> </span><span class=nc>Base</span>
</span><span id=__span-14-2><span class=p>{</span>
</span><span id=__span-14-3><span class=k>public</span><span class=o>:</span>
</span><span id=__span-14-4><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>func1</span><span class=p>()</span>
</span><span id=__span-14-5><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-14-6>
</span><span id=__span-14-7><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>func</span><span class=p>()</span><span class=w> </span><span class=p>{}</span>
</span><span id=__span-14-8><span class=p>};</span>
</span><span id=__span-14-9>
</span><span id=__span-14-10><span class=k>class</span><span class=w> </span><span class=nc>Derive</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Base</span>
</span><span id=__span-14-11><span class=p>{</span>
</span><span id=__span-14-12><span class=k>public</span><span class=o>:</span>
</span><span id=__span-14-13><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>func1</span><span class=p>()</span>
</span><span id=__span-14-14><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-14-15><span class=p>};</span>
</span><span id=__span-14-16>
</span><span id=__span-14-17>
</span><span id=__span-14-18><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-14-19><span class=p>{</span>
</span><span id=__span-14-20><span class=w>    </span><span class=c1>// 栈区变量</span>
</span><span id=__span-14-21><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-14-22><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%p</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>num</span><span class=p>);</span>
</span><span id=__span-14-23><span class=w>    </span><span class=c1>// 堆区变量</span>
</span><span id=__span-14-24><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>arr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=kt>int</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
</span><span id=__span-14-25><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%p</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>arr</span><span class=p>);</span>
</span><span id=__span-14-26><span class=w>    </span><span class=c1>// 常量区变量</span>
</span><span id=__span-14-27><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%p</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>Base</span><span class=o>::</span><span class=n>func</span><span class=p>);</span>
</span><span id=__span-14-28><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=o>*</span><span class=w> </span><span class=n>str</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;abc&quot;</span><span class=p>;</span>
</span><span id=__span-14-29><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%p</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>str</span><span class=p>);</span>
</span><span id=__span-14-30>
</span><span id=__span-14-31><span class=w>    </span><span class=n>Base</span><span class=w> </span><span class=n>b</span><span class=p>;</span>
</span><span id=__span-14-32><span class=w>    </span><span class=n>Derive</span><span class=w> </span><span class=n>d</span><span class=p>;</span>
</span><span id=__span-14-33><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%p</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=o>*</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=o>&amp;</span><span class=n>b</span><span class=p>);</span><span class=c1>// 取出b对象前四个字节中的数据</span>
</span><span id=__span-14-34><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%p</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=o>*</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=o>&amp;</span><span class=n>d</span><span class=p>);</span><span class=c1>// 取出d对象前四个字节中的数据</span>
</span><span id=__span-14-35>
</span><span id=__span-14-36><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-14-37><span class=p>}</span>
</span><span id=__span-14-38>
</span><span id=__span-14-39><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-14-40><span class=mo>007</span><span class=n>DFDA4</span>
</span><span id=__span-14-41><span class=mf>00E7</span><span class=n>E828</span>
</span><span id=__span-14-42><span class=mo>00</span><span class=n>B61488</span>
</span><span id=__span-14-43><span class=mo>00</span><span class=n>B68B4C</span>
</span><span id=__span-14-44><span class=mo>00</span><span class=n>B68B34</span>
</span><span id=__span-14-45><span class=mo>00</span><span class=n>B68B40</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>上面的代码需要注意，对于对象的地址来说，如果直接<code>&amp;b</code>取出来的是栈区的对象的地址，但是虚表的位置是虚函数表指针的地址，二者并不相同；另外因为<code>b</code>是自定义类型，所以不可以写成<code>(int)B</code>，<strong>内置类型和自定义类型没有关联不可以强制转换</strong>，但是对于对象的地址中的内容可以通过指针取到因为要取头四个字节中的内容，所以需要强转为<code>int*</code>，写成<code>(int*)&amp;b</code>，在取出其中的内容，即虚函数表指针的内容<code>*(int*)&amp;b</code></p> </div> <h3 id=_12>多态的必要条件思考<a class=headerlink href=#_12 title="Permanent link">&para;</a></h3> <p>在多态中，满足是继承的前提后，有两个必要条件：</p> <ol> <li>重写父类中的虚函数</li> <li>使用父类的指针或者引用指向子类对象，调用虚函数</li> </ol> <p>首先对于第一个条件，如果子类重写了父类中的虚函数，那么子类的虚函数表中对应的同名虚函数的地址和父类的地址就会不同，因为重写的虚函数地址覆盖了父类对应的虚函数地址（子类拷贝父类的虚函数表再覆盖）</p> <p>对于第二个条件，如果直接使用父类对象接收子类对象，那么就会发生切片行为，此时父类对象访问不到子类对象中的虚函数表指针，进而无法访问到虚函数表中的虚函数地址（直接使用父类对象，则会因为是父类对象而调用的是父类中的<code>vptr</code>变量的值）；当使用父类的指针或引用去调用虚函数时，实际上是在调用由子类对象的<code>vptr</code>（父类中也有同样的对象，因为子类继承父类）指向的虚函数表中的函数。另外因为指针或引用允许操作任何派生类对象，指针或引用并未创建新的对象，而是指向了已存在的子类对象，从而可以在运行时选择动态绑定而不是静态绑定</p> <h2 id=_13>继承和多态中的面试题<a class=headerlink href=#_13 title="Permanent link">&para;</a></h2> <h3 id=_14>多继承中的指针偏移<a class=headerlink href=#_14 title="Permanent link">&para;</a></h3> <p>对于下面的程序，下面说法正确的是( )</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-15-1><span class=k>class</span><span class=w> </span><span class=nc>Base1</span>
</span><span id=__span-15-2><span class=p>{</span>
</span><span id=__span-15-3><span class=k>public</span><span class=o>:</span>
</span><span id=__span-15-4><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_b1</span><span class=p>;</span>
</span><span id=__span-15-5><span class=p>};</span>
</span><span id=__span-15-6>
</span><span id=__span-15-7><span class=k>class</span><span class=w> </span><span class=nc>Base2</span>
</span><span id=__span-15-8><span class=p>{</span>
</span><span id=__span-15-9><span class=k>public</span><span class=o>:</span>
</span><span id=__span-15-10><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_b2</span><span class=p>;</span>
</span><span id=__span-15-11><span class=p>};</span>
</span><span id=__span-15-12>
</span><span id=__span-15-13><span class=k>class</span><span class=w> </span><span class=nc>Derive</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Base1</span><span class=p>,</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Base2</span><span class=w> </span>
</span><span id=__span-15-14><span class=p>{</span>
</span><span id=__span-15-15><span class=k>public</span><span class=o>:</span>
</span><span id=__span-15-16><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_d</span><span class=p>;</span><span class=w> </span>
</span><span id=__span-15-17><span class=p>};</span>
</span><span id=__span-15-18>
</span><span id=__span-15-19><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-20><span class=w>    </span><span class=n>Derive</span><span class=w> </span><span class=n>d</span><span class=p>;</span>
</span><span id=__span-15-21><span class=w>    </span><span class=n>Base1</span><span class=o>*</span><span class=w> </span><span class=n>p1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&amp;</span><span class=n>d</span><span class=p>;</span>
</span><span id=__span-15-22><span class=w>    </span><span class=n>Base2</span><span class=o>*</span><span class=w> </span><span class=n>p2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&amp;</span><span class=n>d</span><span class=p>;</span>
</span><span id=__span-15-23><span class=w>    </span><span class=n>Derive</span><span class=o>*</span><span class=w> </span><span class=n>p3</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>&amp;</span><span class=n>d</span><span class=p>;</span>
</span><span id=__span-15-24><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-15-25><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> A：<code>p1 == p2 == p3</code></li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> B：<code>p1 &lt; p2 &lt; p3</code></li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> C：<code>p1 == p3 != p2</code></li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> D：<code>p1 != p2 != p3</code></li> </ul> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>解析：</p> <p>首先需要理解什么是继承中的指针偏移，使用指访问时，指针访问到的第一个成员的位置相对于所访问类的成员的起始位置的偏移量即为继承中的指针偏移量</p> <p>在本题中，因为<code>Derive</code>继承自<code>Base1</code>和<code>Base2</code>，所以<code>Derive</code>中既有<code>Base1</code>中的成员，也有<code>Base2</code>的成员，但是按照继承的顺序，<code>Base1</code>的成员在<code>Derive</code>对象的内存中排在第一个位置，接着就是<code>Base2</code>的成员，最后才是<code>Derive</code>的成员。当使用<code>p1</code>指针访问<code>Derive</code>中的成员时，因为发生了切片行为，所以<code>p1</code>只能访问属于<code>Base1</code>的成员，也就是<code>p1</code>指向第一个成员<code>_b1</code>，接着<code>p2</code>指针访问<code>Derive</code>中的成员时，因为发生了切片行为，所以<code>p2</code>只能访问属于<code>Base2</code>的成员，也就是<code>p2</code>指向第二个成员<code>_b2</code>，最后就是<code>p3</code>指针访问<code>Derive</code>中的成员，此时没有切片现象产生，所以<code>p3</code>可以访问<code>Derive</code>中的所有成员，但是此时位置在<code>_b1</code>成员处，所以指针偏移量为<code>p1==p3!=p2</code>，如下图所示： <a class=glightbox href="20. C++多态.assets/image-20240711191216161.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="20. C++多态.assets/image-20240711191216161.png" alt=image-20240711191216161></a></p> </div> <h3 id=_15>虚函数中的缺省参数问题<a class=headerlink href=#_15 title="Permanent link">&para;</a></h3> <p>以下程序输出结果是什么（）</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-16-1><span class=k>class</span><span class=w> </span><span class=nc>A</span>
</span><span id=__span-16-2><span class=p>{</span>
</span><span id=__span-16-3><span class=k>public</span><span class=o>:</span>
</span><span id=__span-16-4><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>func</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>val</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span>
</span><span id=__span-16-5><span class=w>    </span><span class=p>{</span><span class=w> </span>
</span><span id=__span-16-6><span class=w>        </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;A-&gt;&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>val</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span><span class=w> </span>
</span><span id=__span-16-7><span class=w>    </span><span class=p>}</span>
</span><span id=__span-16-8><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=n>test</span><span class=p>()</span><span class=w> </span>
</span><span id=__span-16-9><span class=w>    </span><span class=p>{</span><span class=w> </span>
</span><span id=__span-16-10><span class=w>        </span><span class=n>func</span><span class=p>();</span><span class=w> </span>
</span><span id=__span-16-11><span class=w>    </span><span class=p>}</span>
</span><span id=__span-16-12><span class=p>};</span>
</span><span id=__span-16-13>
</span><span id=__span-16-14><span class=k>class</span><span class=w> </span><span class=nc>B</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>A</span>
</span><span id=__span-16-15><span class=p>{</span>
</span><span id=__span-16-16><span class=k>public</span><span class=o>:</span>
</span><span id=__span-16-17><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>func</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>val</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>)</span><span class=w> </span>
</span><span id=__span-16-18><span class=w>    </span><span class=p>{</span><span class=w> </span>
</span><span id=__span-16-19><span class=w>        </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;B-&gt;&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>val</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span><span class=w> </span>
</span><span id=__span-16-20><span class=w>    </span><span class=p>}</span>
</span><span id=__span-16-21><span class=p>};</span>
</span><span id=__span-16-22>
</span><span id=__span-16-23><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-16-24><span class=p>{</span>
</span><span id=__span-16-25><span class=w>    </span><span class=n>B</span><span class=o>*</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>B</span><span class=p>;</span>
</span><span id=__span-16-26><span class=w>    </span><span class=n>p</span><span class=o>-&gt;</span><span class=n>test</span><span class=p>();</span>
</span><span id=__span-16-27><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-16-28><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> A: A-&gt;0</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled checked><span class=task-list-indicator></span></label> B: B-&gt;1</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> C: A-&gt;1</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> D: B-&gt;0</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> E: 编译出错</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> F: 以上都不正确</li> </ul> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>解析：</p> <p>首先需要清楚的是，虚函数的确定是一个动态绑定的过程，而缺省参数是静态绑定的，所以在子类<code>B</code>中重写的<code>func</code>函数中的缺省值是无效的（《Effective C++》条款37：绝不重新定义继承而来的缺省参数值）<br> 在本题中，因为<code>p</code>指针指向一个<code>B</code>类型的对象，所以访问的是<code>B</code>中函数，在<code>B</code>中并没有<code>test()</code>函数，但是<code>B</code>继承自<code>A</code>，所以访问<code>A</code>中的<code>test()</code>函数。对于A中的<code>test()</code>函数来说，存在一个指针<code>this</code>，因为是<code>B</code>类对象调用，而因为虚函数会存在一张虚函数表中，所以尽管<code>B</code>没有重写<code>test()</code>函数，<code>B</code>的虚函数表中依旧有<code>test()</code>函数，只不过和<code>A</code>类是同一个虚函数，因为是子类的虚函数表指针，所以这个<code>this</code>指针存储的是<code>B</code>对象的地址，从而在调用<code>test()</code>中的<code>func()</code>函数时访问的是<code>B</code>类中的虚函数<code>func()</code><br> 结合上面两个原因：首先缺省值重新赋予是无效的，所以B类中重写的虚函数<code>func()</code>中<code>val</code>的缺省值依旧还是<code>A</code>类中的1，接着因为访问的<code>B</code>的<code>func()</code>函数，所以输出<code>B-&gt;1</code></p> <p>思考：</p> <p>如果将指向<code>B* p = new B</code>改为<code>A* p = new B</code>，结果会改变吗？</p> <p>答案是<strong>不变</strong>，因为使用<code>A</code>类型的指针<code>p</code>指向<code>B</code>时，依旧是子类的虚函数表指针调用<code>test()</code>函数（多态的第二个条件），所以<code>this</code>中存的依旧是子类对象的地址</p> </div> <h3 id=_16>多态与内存对齐问题<a class=headerlink href=#_16 title="Permanent link">&para;</a></h3> <p>思考下面程序中两次<code>print()</code>的结果：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-17-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-17-2>
</span><span id=__span-17-3><span class=k>class</span><span class=w> </span><span class=nc>Base</span>
</span><span id=__span-17-4><span class=p>{</span>
</span><span id=__span-17-5><span class=k>public</span><span class=o>:</span>
</span><span id=__span-17-6><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-17-7><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>print</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=p>)</span>
</span><span id=__span-17-8><span class=w>    </span><span class=p>{</span>
</span><span id=__span-17-9><span class=w>        </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;Base: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-17-10><span class=w>    </span><span class=p>}</span>
</span><span id=__span-17-11><span class=p>};</span>
</span><span id=__span-17-12>
</span><span id=__span-17-13><span class=k>class</span><span class=w> </span><span class=nc>Derive</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Base</span>
</span><span id=__span-17-14><span class=p>{</span>
</span><span id=__span-17-15><span class=k>public</span><span class=o>:</span>
</span><span id=__span-17-16><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>3</span><span class=p>;</span>
</span><span id=__span-17-17><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=nf>print</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>10</span><span class=p>)</span><span class=w> </span><span class=k>override</span>
</span><span id=__span-17-18><span class=w>    </span><span class=p>{</span>
</span><span id=__span-17-19><span class=w>        </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;Derive: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-17-20><span class=w>    </span><span class=p>}</span>
</span><span id=__span-17-21><span class=p>};</span>
</span><span id=__span-17-22>
</span><span id=__span-17-23><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-17-24><span class=p>{</span>
</span><span id=__span-17-25><span class=w>    </span><span class=n>Base</span><span class=w> </span><span class=o>*</span><span class=n>arr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Derive</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
</span><span id=__span-17-26><span class=w>    </span><span class=n>arr</span><span class=p>[</span><span class=mi>7</span><span class=p>].</span><span class=n>print</span><span class=p>();</span>
</span><span id=__span-17-27><span class=w>    </span><span class=k>delete</span><span class=p>[]</span><span class=w> </span><span class=n>arr</span><span class=p>;</span>
</span><span id=__span-17-28>
</span><span id=__span-17-29><span class=w>    </span><span class=n>Base</span><span class=w> </span><span class=o>*</span><span class=n>ptr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Derive</span><span class=p>();</span>
</span><span id=__span-17-30><span class=w>    </span><span class=n>ptr</span><span class=o>-&gt;</span><span class=n>print</span><span class=p>();</span>
</span><span id=__span-17-31><span class=w>    </span><span class=k>delete</span><span class=w> </span><span class=n>ptr</span><span class=p>;</span>
</span><span id=__span-17-32>
</span><span id=__span-17-33><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-17-34><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>解析：</p> <p>首先考虑第二个<code>print()</code>，因为是父类指针指向子类对象，满足多态条件，根据上一题的分析，输出结果应该为<code>Derive: 5</code>；回到第一个<code>print()</code>，首先通过<code>Base *arr = new Derive[10];</code>创建了10个<code>Derive</code>对象并使用<code>Base*</code>的指针指向每一个<code>Derive</code>对象，接着访问到数组的第8个元素，<code>arr[7]</code>可以化简为<code>*(arr + sizeof(Base) * 7)</code>，对应着就是偏移到第7个元素，如果计算数组大小时的确是使用<code>sizeof(Base)</code>，那么实际上结果依旧与第二个<code>print()</code>结果一样，但是如果计算数组大小时是使用<code>sizeof(Derive)</code>，此时就需要分类进行讨论：</p> <ol> <li>在gcc下，没有默认的内存对齐大小，内存对齐大小就是每一个成员自身的大小，也就是说，<code>Base</code>大小为<span class=arithmatex>\(8（虚函数表指针）+ 4（int类型大小）+ 4（补充值）= 16\)</span>，但是对于<code>Derive</code>来说，计算方式就是<span class=arithmatex>\(8（虚函数表指针）+ 4（int类型大小）+ 4（Derive类int类型变量大小）= 16\)</span>，此时没有填充值，因为结构体大小刚好为最大对齐数的整数倍</li> <li>在VS2022下，存在默认的内存对齐大小为8，对于<code>Base</code>来说，结构体大小依旧为16，但是对于<code>Derive</code>来说，计算方式就是<span class=arithmatex>\(8（虚函数表指针）+ 4（Base类中int类型大小）+ 4（补充值）+ 4（Derive类中int类型大小）= 20\)</span>，但是因为存在默认内存对齐大小，所以根据<a href=https://www.help-doc.top/C%E8%AF%AD%E8%A8%80/3.%20C%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%8F%98%E9%87%8F/3.%20C%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%8F%98%E9%87%8F.html#_38>计算公式</a>实际的<code>Derive</code>类大小为24</li> </ol> <p>此时，如果是gcc，那么结果与使用<code>sizeof(Base)</code>是相同的，但是如果是VS2022，那么就会出现越界访问错误。所以，基于这个问题，<strong>永远不要用基类指针指向派生类对象数组</strong></p> </div> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2025年7月4日</span> </span> <span class=md-source-file__fact> <span class=md-icon title=创建日期> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年8月9日</span> </span> </aside> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> 页面有帮助吗？ </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title=页面对我有帮助 data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title=页面没有帮助到我 data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> 谢谢你的反馈！ </div> <div data-md-value=0 hidden> 谢谢你的反馈！联系<a href=https://www.help-doc.top/%E4%BD%9C%E8%80%85/%E4%BD%9C%E8%80%85.html>作者</a>提供更详细的信息 </div> </div> </div> </fieldset> </form> <!-- Waline 评论系统 --> <div class=waline-comments-container> <div class=waline-comments-header> <h3>评论区</h3> <p>欢迎在这里留下你的想法和建议！</p> </div> <div id=waline></div> </div> <!-- Waline CSS --> <link rel=stylesheet href=https://unpkg.com/@waline/client@v3/dist/waline.css> <!-- Waline JavaScript --> <script type=module>
    import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';
    init({
        el: '#waline',
        serverURL: 'https://waline-g9cd3pdxr-mark-watneys-projects-c5945306.vercel.app/',
    });
</script> <style>
.waline-comments-container {
    margin-top: 3rem;
    padding: 2rem 0;
    border-top: 1px solid var(--md-default-fg-color--lightest);
}

.waline-comments-header {
    margin-bottom: 2rem;
    text-align: center;
}

.waline-comments-header h3 {
    margin: 0 0 0.5rem 0;
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--md-default-fg-color);
}

.waline-comments-header p {
    margin: 0;
    color: var(--md-default-fg-color--light);
    font-size: 0.9rem;
}

/* 加载状态 */
.waline-loading {
    text-align: center;
    padding: 2rem;
    color: var(--md-default-fg-color--light);
}

.loading-spinner {
    width: 40px;
    height: 40px;
    border: 3px solid var(--md-default-fg-color--lightest);
    border-top: 3px solid var(--md-primary-fg-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto 1rem;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* 错误状态 */
.waline-error {
    text-align: center;
    padding: 2rem;
    color: var(--md-default-fg-color--light);
}

.error-icon {
    font-size: 2rem;
    margin-bottom: 1rem;
}

.retry-btn {
    background-color: var(--md-primary-fg-color);
    color: var(--md-primary-bg-color);
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    cursor: pointer;
    margin-top: 1rem;
    font-size: 0.9rem;
}

.retry-btn:hover {
    background-color: var(--md-primary-fg-color--dark);
}

.details-btn {
    background-color: transparent;
    color: var(--md-default-fg-color--light);
    border: 1px solid var(--md-default-fg-color--lightest);
    padding: 0.5rem 1rem;
    border-radius: 4px;
    cursor: pointer;
    margin-top: 1rem;
    margin-left: 0.5rem;
    font-size: 0.9rem;
}

.details-btn:hover {
    background-color: var(--md-default-fg-color--lightest);
}

.error-details {
    margin-top: 1rem;
    padding: 1rem;
    background-color: var(--md-default-bg-color);
    border: 1px solid var(--md-default-fg-color--lightest);
    border-radius: 4px;
    text-align: left;
    font-size: 0.85rem;
    line-height: 1.5;
    color: var(--md-default-fg-color--light);
}

/* 适配网站主题色彩 */
.waline-comments-container .wl-panel {
    border-radius: 8px;
    border: 1px solid var(--md-default-fg-color--lightest);
    background-color: var(--md-default-bg-color);
}

.waline-comments-container .wl-editor {
    background-color: var(--md-default-bg-color);
    border: 1px solid var(--md-default-fg-color--lightest);
    border-radius: 6px;
}

.waline-comments-container .wl-input {
    background-color: var(--md-default-bg-color);
    border: 1px solid var(--md-default-fg-color--lightest);
    color: var(--md-default-fg-color);
}

.waline-comments-container .wl-input:focus {
    border-color: var(--md-primary-fg-color);
}

.waline-comments-container .wl-btn {
    background-color: var(--md-primary-fg-color);
    border-color: var(--md-primary-fg-color);
    color: var(--md-primary-bg-color);
}

.waline-comments-container .wl-btn:hover {
    background-color: var(--md-primary-fg-color--dark);
    border-color: var(--md-primary-fg-color--dark);
}

/* 响应式设计 */
@media screen and (max-width: 768px) {
    .waline-comments-container {
        padding: 1.5rem 0;
        margin-top: 2rem;
    }
    
    .waline-comments-header h3 {
        font-size: 1.3rem;
    }
}

/* 暗色主题适配 */
[data-md-color-scheme="slate"] .waline-comments-container {
    border-top-color: var(--md-default-fg-color--lightest);
}

[data-md-color-scheme="slate"] .waline-comments-container .wl-panel {
    background-color: var(--md-default-bg-color);
    border-color: var(--md-default-fg-color--lightest);
}

[data-md-color-scheme="slate"] .waline-comments-container .wl-editor {
    background-color: var(--md-default-bg-color);
    border-color: var(--md-default-fg-color--lightest);
}

[data-md-color-scheme="slate"] .waline-comments-container .wl-input {
    background-color: var(--md-default-bg-color);
    border-color: var(--md-default-fg-color--lightest);
    color: var(--md-default-fg-color);
}

[data-md-color-scheme="slate"] .loading-spinner {
    border-color: var(--md-default-fg-color--lightest);
    border-top-color: var(--md-primary-fg-color);
}

[data-md-color-scheme="slate"] .retry-btn {
    background-color: var(--md-primary-fg-color);
    color: var(--md-primary-bg-color);
}

[data-md-color-scheme="slate"] .details-btn {
    background-color: transparent;
    color: var(--md-default-fg-color--light);
    border-color: var(--md-default-fg-color--lightest);
}

[data-md-color-scheme="slate"] .details-btn:hover {
    background-color: var(--md-default-fg-color--lightest);
}

[data-md-color-scheme="slate"] .error-details {
    background-color: var(--md-default-bg-color);
    border-color: var(--md-default-fg-color--lightest);
    color: var(--md-default-fg-color--light);
}
</style> <!-- 阅读进度条 - 直接在HTML中定义 --> <div class=reading-progress></div> <!-- 滚动指示器 - 直接在HTML中定义 --> <div class=scroll-indicator></div> <!-- 评论系统 - 只在文章页面显示，不在首页和索引页显示 --> <!-- Waline 评论系统 --> <div class=waline-comments-container> <div class=waline-comments-header> <h3>评论区</h3> <p>欢迎在这里留下你的想法和建议！</p> </div> <div id=waline></div> </div> <!-- Waline CSS --> <link rel=stylesheet href=https://unpkg.com/@waline/client@v3/dist/waline.css> <!-- Waline JavaScript --> <script type=module>
    import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';
    init({
        el: '#waline',
        serverURL: 'https://waline-g9cd3pdxr-mark-watneys-projects-c5945306.vercel.app/',
    });
</script> <style>
.waline-comments-container {
    margin-top: 3rem;
    padding: 2rem 0;
    border-top: 1px solid var(--md-default-fg-color--lightest);
}

.waline-comments-header {
    margin-bottom: 2rem;
    text-align: center;
}

.waline-comments-header h3 {
    margin: 0 0 0.5rem 0;
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--md-default-fg-color);
}

.waline-comments-header p {
    margin: 0;
    color: var(--md-default-fg-color--light);
    font-size: 0.9rem;
}

/* 加载状态 */
.waline-loading {
    text-align: center;
    padding: 2rem;
    color: var(--md-default-fg-color--light);
}

.loading-spinner {
    width: 40px;
    height: 40px;
    border: 3px solid var(--md-default-fg-color--lightest);
    border-top: 3px solid var(--md-primary-fg-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto 1rem;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* 错误状态 */
.waline-error {
    text-align: center;
    padding: 2rem;
    color: var(--md-default-fg-color--light);
}

.error-icon {
    font-size: 2rem;
    margin-bottom: 1rem;
}

.retry-btn {
    background-color: var(--md-primary-fg-color);
    color: var(--md-primary-bg-color);
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    cursor: pointer;
    margin-top: 1rem;
    font-size: 0.9rem;
}

.retry-btn:hover {
    background-color: var(--md-primary-fg-color--dark);
}

.details-btn {
    background-color: transparent;
    color: var(--md-default-fg-color--light);
    border: 1px solid var(--md-default-fg-color--lightest);
    padding: 0.5rem 1rem;
    border-radius: 4px;
    cursor: pointer;
    margin-top: 1rem;
    margin-left: 0.5rem;
    font-size: 0.9rem;
}

.details-btn:hover {
    background-color: var(--md-default-fg-color--lightest);
}

.error-details {
    margin-top: 1rem;
    padding: 1rem;
    background-color: var(--md-default-bg-color);
    border: 1px solid var(--md-default-fg-color--lightest);
    border-radius: 4px;
    text-align: left;
    font-size: 0.85rem;
    line-height: 1.5;
    color: var(--md-default-fg-color--light);
}

/* 适配网站主题色彩 */
.waline-comments-container .wl-panel {
    border-radius: 8px;
    border: 1px solid var(--md-default-fg-color--lightest);
    background-color: var(--md-default-bg-color);
}

.waline-comments-container .wl-editor {
    background-color: var(--md-default-bg-color);
    border: 1px solid var(--md-default-fg-color--lightest);
    border-radius: 6px;
}

.waline-comments-container .wl-input {
    background-color: var(--md-default-bg-color);
    border: 1px solid var(--md-default-fg-color--lightest);
    color: var(--md-default-fg-color);
}

.waline-comments-container .wl-input:focus {
    border-color: var(--md-primary-fg-color);
}

.waline-comments-container .wl-btn {
    background-color: var(--md-primary-fg-color);
    border-color: var(--md-primary-fg-color);
    color: var(--md-primary-bg-color);
}

.waline-comments-container .wl-btn:hover {
    background-color: var(--md-primary-fg-color--dark);
    border-color: var(--md-primary-fg-color--dark);
}

/* 响应式设计 */
@media screen and (max-width: 768px) {
    .waline-comments-container {
        padding: 1.5rem 0;
        margin-top: 2rem;
    }
    
    .waline-comments-header h3 {
        font-size: 1.3rem;
    }
}

/* 暗色主题适配 */
[data-md-color-scheme="slate"] .waline-comments-container {
    border-top-color: var(--md-default-fg-color--lightest);
}

[data-md-color-scheme="slate"] .waline-comments-container .wl-panel {
    background-color: var(--md-default-bg-color);
    border-color: var(--md-default-fg-color--lightest);
}

[data-md-color-scheme="slate"] .waline-comments-container .wl-editor {
    background-color: var(--md-default-bg-color);
    border-color: var(--md-default-fg-color--lightest);
}

[data-md-color-scheme="slate"] .waline-comments-container .wl-input {
    background-color: var(--md-default-bg-color);
    border-color: var(--md-default-fg-color--lightest);
    color: var(--md-default-fg-color);
}

[data-md-color-scheme="slate"] .loading-spinner {
    border-color: var(--md-default-fg-color--lightest);
    border-top-color: var(--md-primary-fg-color);
}

[data-md-color-scheme="slate"] .retry-btn {
    background-color: var(--md-primary-fg-color);
    color: var(--md-primary-bg-color);
}

[data-md-color-scheme="slate"] .details-btn {
    background-color: transparent;
    color: var(--md-default-fg-color--light);
    border-color: var(--md-default-fg-color--lightest);
}

[data-md-color-scheme="slate"] .details-btn:hover {
    background-color: var(--md-default-fg-color--lightest);
}

[data-md-color-scheme="slate"] .error-details {
    background-color: var(--md-default-bg-color);
    border-color: var(--md-default-fg-color--lightest);
    color: var(--md-default-fg-color--light);
}
</style> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Footer --> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2024-2025 柯懒不是柯南 </div> </div> <div class="md-footer-love md-typeset"> 一闪一闪亮晶晶，不及<span class=love-highlight>小亮</span><span class=love-heart>♥</span>照我心。To Li Liang </div> <div class=md-social> <a href=https://github.com/H0308 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.help-doc.top/%E4%BD%9C%E8%80%85/%E4%BD%9C%E8%80%85.html target=_blank rel=noopener title=www.help-doc.top class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.indexes", "navigation.prune", "navigation.tabs", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src=../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../javascripts/katex.min.js></script> <script src=../../javascripts/other.min.js></script> <script src=../../javascripts/copyright.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js></script> <script src=../../assets/javascripts/toggle-sidebar.js async></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>