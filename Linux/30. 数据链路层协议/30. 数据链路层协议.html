<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://www.help-doc.top/Linux/30.%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8D%8F%E8%AE%AE/30.%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8D%8F%E8%AE%AE.html><link rel=prev href=../29.%20%E7%BD%91%E7%BB%9C%E5%B1%82IP%E5%8D%8F%E8%AE%AE/29.%20%E7%BD%91%E7%BB%9C%E5%B1%82IP%E5%8D%8F%E8%AE%AE.html><link rel=next href=../36.%20DNS%E4%B8%8EICMP/36.%20DNS%E4%B8%8EICMP.html><link rel=icon href=../../images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.12"><title>数据链路层协议 - 柯懒的知识库</title><link rel=stylesheet href=../../assets/stylesheets/main.2afb09e1.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=stylesheet href=../../css/timeline.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-9XWRGNRRSY"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-9XWRGNRRSY",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-9XWRGNRRSY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=stylesheet href=../../stylesheets/colors.min.css><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (max-width: 767px)"><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (min-width: 768px) and (max-width: 1199px)"><link rel=stylesheet href=../../stylesheets/theme1.min.css media="screen and (min-width: 1200px)"><link rel=stylesheet href=../../stylesheets/print.min.css><!-- 字体样式表 --><link rel=stylesheet href=../../stylesheets/font-dongguanti.min.css id=font-dongguanti><link rel=stylesheet href=../../stylesheets/font-oppoti.min.css id=font-oppoti disabled><link rel=stylesheet href=../../stylesheets/font-jiangchengti.min.css id=font-jiangchengti disabled><link rel=stylesheet href=../../stylesheets/font-lxgw.min.css id=font-lxgw disabled><script src=https://cdn.jsdelivr.net/npm/mermaid@11.5.0/dist/mermaid.min.js></script><style>
    @import url("https://static.zeoseven.com/zsft/2/main/result.css");
    /* 江城黑体备用 */
    @import url("https://fontsapi.zeoseven.com/194/main/result.css");
    /* OPPO Sans主字体 */
    @import url("https://fonts.cdnfonts.com/css/opposans");
    /* Dejavu Sans Mono */
    @import url('https://fonts.cdnfonts.com/css/dejavu-sans-mono');
    /* 寒蝉团圆体 Sans */
    @import url("https://fontsapi.zeoseven.com/70/main/result.css");
    /* 上图东观体 */
    @import url("https://fontsapi.zeoseven.com/488/main/result.css");

    @font-face {
        font-family: "OPPOSans";
    }

    @font-face {
        font-family: "JiangChengHeiTi 400W";
    }

    @font-face {
        font-family: "LXGW ZhenKai";
    }

    @font-face {
        font-family: 'DejaVu Sans Mono';
    }

    /* JetBrains Mono字体 */
    @font-face {
        font-family: "ZSFT-hk";
        src: url("https://static.zeoseven.com/zsft/hk/main.woff2") format("woff2"),
            url("https://static-host.zeoseven.com/zsft/hk/main.woff2") format("woff2");
    }

    @font-face {
        font-family: "寒蝉团圆体 Sans";
    }

    @font-face {
        font-family: "STDongGuanTi";
    }

    .md-header__topic .md-ellipsis {
        font-family: "寒蝉团圆体 Sans" !important;
    }

    :root {
        --md-text-font: "STDongGuanTi", "OPPOSans", "JiangChengHeiTi 400W", sans-serif;
        --md-header-font: "LXGW ZhenKai", sans-serif;
        --md-code-font: "DejaVu Sans Mono", "ZSFT-hk";
        --code-font-color: var(--text-code);
    }

    h1+div>p {
        font-family: var(--md-header-font);
    }

    @media screen and (max-width: 1199px) {

        
        /* 隐藏功能区的主题切换按钮 */
        .theme-switcher {
            display: none !important;
        }
    }

    /* 右侧固定功能条样式 */
    .floating-toolbar {
        position: fixed;
        top: 50%;
        right: 0;
        transform: translateY(-50%);
        z-index: 99999;
        font-family: var(--md-text-font);
        background: var(--bg-white);
        border: 1px solid #eee;
        border-right: none;
        border-radius: 12px 0 0 12px;
        box-shadow: -4px 0 20px rgba(0, 0, 0, 0.1);
        padding: 8px 0;
        min-width: 60px;
        transition: all 0.3s ease;
        display: block;
        visibility: visible;
        opacity: 1;
        width: auto;
        height: auto;
        max-width: none;
        max-height: none;
        overflow: visible;
    }


    .floating-toolbar:hover {
        box-shadow: -6px 0 30px var(--shadow-strong);
        transform: translateY(-50%) translateX(-2px);
    }

    /* 功能条项目 */
    .toolbar-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 12px 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        border-bottom: 1px solid #eee;
        background: transparent;
        color: #333;
        width: auto;
        height: auto;
        visibility: visible;
        opacity: 1;
    }

    .toolbar-item:last-child {
        border-bottom: none;
    }

    .toolbar-item:hover {
        background: var(--primary-blue-light);
        transform: translateX(-2px);
    }

    .toolbar-item.active {
        background: var(--primary-blue-medium);
        color: var(--primary-blue);
    }

    /* 功能条图标 */
    .toolbar-icon {
        font-size: 20px;
        line-height: 1;
        margin-bottom: 4px;
        transition: all 0.3s ease;
        display: block;
        visibility: visible;
        opacity: 1;
        color: #333;
    }

    .toolbar-item:hover .toolbar-icon {
        transform: scale(1.1) !important;
    }

    /* SVG图标样式 */
    .theme-icon {
        width: 20px !important;
        height: 20px !important;
        fill: currentColor !important;
        transition: all 0.3s ease !important;
    }

    .toolbar-item:hover .theme-icon {
        fill: var(--primary-blue) !important;
    }

    /* 返回顶部SVG图标样式 */
    .back-to-top-icon {
        width: 20px !important;
        height: 20px !important;
        fill: currentColor !important;
        transition: all 0.3s ease !important;
    }

    .toolbar-item:hover .back-to-top-icon {
        fill: var(--primary-blue) !important;
    }

    /* 字体切换SVG图标样式 */
    .font-icon {
        width: 20px;
        height: 20px;
        fill: currentColor;
        transition: all 0.3s ease;
    }

    .toolbar-item:hover {
        fill: var(--primary-blue);
    }

    /* 功能条标签 */
    .toolbar-label {
        font-size: 11px !important;
        font-weight: 500 !important;
        color: #666 !important;
        text-align: center !important;
        line-height: 1.2 !important;
        transition: all 0.3s ease !important;
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }

    .toolbar-item:hover .toolbar-label {
        color: var(--text-primary);
    }

    /* 字体切换功能特殊样式 */
    .font-switcher {
        position: relative;
    }

    .font-dropdown-toolbar {
        position: absolute;
        right: 100%;
        top: 0;
        margin-right: 8px;
        min-width: 120px;
        opacity: 0;
        visibility: hidden;
        transform: translateX(10px);
        transition: all 0.3s ease;
        z-index: 1001;
    }

    .font-switcher:hover .font-dropdown-toolbar,
    .font-dropdown-toolbar.active {
        opacity: 1;
        visibility: visible;
        transform: translateX(0);
    }

    .font-current-toolbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 8px 12px;
        background: var(--bg-white);
        border: 1px solid var(--border-light);
        border-radius: 8px;
        cursor: pointer;
        font-size: 13px;
        color: var(--text-primary);
        transition: all 0.2s ease;
        box-shadow: 0 2px 8px var(--shadow-light);
        white-space: nowrap;
    }

    .font-current-toolbar:hover {
        border-color: var(--primary-blue);
        background: var(--primary-blue-light);
        box-shadow: 0 4px 12px var(--shadow-primary-medium);
    }

    .current-font-name-toolbar {
        font-weight: 500;
        margin-right: 8px;
    }

    .dropdown-arrow-icon {
        width: 12px !important;
        height: 12px !important;
        fill: currentColor !important;
        color: var(--text-secondary) !important;
        transition: transform 0.3s ease !important;
    }

    .font-dropdown-toolbar.active .dropdown-arrow-icon {
        transform: rotate(180deg) !important;
    }

    .font-options-toolbar {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--bg-white);
        border: 1px solid var(--border-light);
        border-radius: 8px;
        box-shadow: 0 4px 12px var(--shadow-strong);
        z-index: 1002;
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.3s ease;
        margin-top: 4px;
        max-height: 150px;
        overflow-y: auto;
    }

    .font-dropdown-toolbar.active .font-options-toolbar {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    .font-option-toolbar {
        padding: 8px 12px;
        cursor: pointer;
        font-size: 13px;
        color: var(--text-primary);
        transition: all 0.2s ease;
        border-bottom: 1px solid var(--border-light);
        white-space: nowrap;
    }

    .font-option-toolbar:last-child {
        border-bottom: none;
        border-radius: 0 0 8px 8px;
    }

    .font-option-toolbar:first-child {
        border-radius: 8px 8px 0 0;
    }

    .font-option-toolbar:hover {
        background: var(--primary-blue-light);
        color: var(--text-primary-blue);
    }

    .font-option-toolbar.selected {
        background: var(--primary-blue-medium);
        color: var(--primary-blue);
        font-weight: 500;
    }

    /* 独立的切换按钮样式 */
    .toolbar-toggle-btn {
        position: fixed;
        top: 50%;
        right: 60px;
        transform: translateY(-50%);
        width: 30px;
        height: 60px;
        background: #ffffff;
        border: 1px solid #eee;
        border-right: none;
        border-radius: 8px 0 0 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
        z-index: 99999;
    }

    .toolbar-toggle-btn:hover {
        background: var(--primary-blue-light) !important;
        transform: translateY(-50%) translateX(-2px) !important;
        box-shadow: -4px 0 15px rgba(0, 0, 0, 0.15) !important;
    }

    .toggle-icon {
        font-size: 16px;
        color: #666;
        transition: all 0.3s ease;
        line-height: 1;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .toggle-arrow-icon {
        width: 16px !important;
        height: 16px !important;
        fill: currentColor !important;
        transition: all 0.3s ease !important;
    }

    .toolbar-toggle-btn:hover .toggle-icon {
        color: var(--primary-blue) !important;
        transform: scale(1.1) !important;
    }

    .toolbar-toggle-btn:hover .toggle-arrow-icon {
        fill: var(--primary-blue) !important;
    }

    /* 功能条隐藏状态 */
    .floating-toolbar.hidden {
        transform: translateY(-50%) translateX(100%) !important;
        opacity: 0 !important;
        visibility: hidden !important;
    }

    /* 切换按钮在功能条隐藏时的状态 */
    .toolbar-toggle-btn.toolbar-hidden {
        right: 0px !important;
        background: var(--border-white) !important;
        border-color: var(--border-white) !important;
        border-radius: 8px 0 0 8px !important;
    }

    .toolbar-toggle-btn.toolbar-hidden .toggle-icon {
        color: black !important;
        transform: rotate(180deg) !important;
    }

    .toolbar-toggle-btn.toolbar-hidden .toggle-arrow-icon {
        fill: black !important;
    }

    .toolbar-toggle-btn.toolbar-hidden:hover {
        background: var(--primary-blue-dark) !important;
        transform: translateY(-50%) translateX(-2px) !important;
    }

    /* 响应式设计 */
    @media screen and (max-width: 768px) {
        .floating-toolbar {
            min-width: 50px;
            padding: 6px 0;
        }
        
        .toolbar-item {
            padding: 10px 6px;
        }
        
        .toolbar-icon {
            font-size: 18px;
        }
        
        .theme-icon {
            width: 18px !important;
            height: 18px !important;
        }
        
        .back-to-top-icon {
            width: 18px !important;
            height: 18px !important;
        }
        
        .font-icon {
            width: 18px !important;
            height: 18px !important;
        }
        
        .toggle-arrow-icon {
            width: 14px !important;
            height: 14px !important;
        }
        
        .toolbar-label {
            font-size: 10px;
        }
        
        .font-dropdown-toolbar {
            min-width: 100px;
            margin-right: 6px;
        }
        
        .dropdown-arrow-icon {
            width: 10px !important;
            height: 10px !important;
        }
        
        .font-current-toolbar {
            padding: 6px 10px;
            font-size: 12px;
        }
    }

    @media screen and (max-width: 480px) {
        .floating-toolbar {
            right: -5px;
        }
        
        .toolbar-label {
            display: none;
        }
        
        .toolbar-item {
            padding: 8px 4px;
        }
        
        .theme-icon {
            width: 16px !important;
            height: 16px !important;
        }
        
        .back-to-top-icon {
            width: 16px !important;
            height: 16px !important;
        }
        
        .font-icon {
            width: 16px !important;
            height: 16px !important;
        }
        
        .toggle-arrow-icon {
            width: 12px !important;
            height: 12px !important;
        }
        
        .font-dropdown-toolbar {
            min-width: 90px;
            margin-right: 4px;
        }
        
        .dropdown-arrow-icon {
            width: 8px !important;
            height: 8px !important;
        }
    }

    .md-content article>*:not(.md-top):not(.md-nav) {
        animation: flyIn 0.6s ease-out forwards;
        opacity: 0;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(1) {
        animation-delay: 0.1s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(2) {
        animation-delay: 0.15s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(3) {
        animation-delay: 0.2s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(4) {
        animation-delay: 0.25s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(5) {
        animation-delay: 0.3s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(6) {
        animation-delay: 0.35s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(7) {
        animation-delay: 0.4s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(8) {
        animation-delay: 0.45s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(9) {
        animation-delay: 0.5s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(10) {
        animation-delay: 0.55s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(11) {
        animation-delay: 0.6s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(12) {
        animation-delay: 0.65s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(13) {
        animation-delay: 0.7s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(14) {
        animation-delay: 0.75s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(15) {
        animation-delay: 0.8s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(16) {
        animation-delay: 0.85s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(17) {
        animation-delay: 0.9s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(18) {
        animation-delay: 0.95s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(19) {
        animation-delay: 1s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(20) {
        animation-delay: 1.05s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(n + 21) {
        animation-delay: 1.1s;
    }

    @keyframes flyIn {
        0% {
            opacity: 0;
            transform: translateY(-20px);
        }

        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @media (prefers-reduced-motion: reduce) {
        .md-content article>*:not(.md-top):not(.md-nav) {
            animation: none !important;
            opacity: 1 !important;
            transform: none !important;
        }
    }

    /* 添加超时后强制显示内容 */
    .md-content article>*:not(.md-top):not(.md-nav) {
        animation: flyIn 0.6s ease-out forwards;
        opacity: 0;
        /* 添加延迟后的备用显示 */
        animation-fill-mode: both;
    }

    /* 确保在3秒后强制显示所有内容 */
    .md-content {
        animation: ensureVisible 0.1s ease-out 3s forwards;
    }

    @keyframes ensureVisible {
        to {
            --force-visible: 1;
        }
    }

    .md-content[style*="--force-visible"] article>*:not(.md-top):not(.md-nav) {
        opacity: 1 !important;
        transform: translateY(0) !important;
    }

    li::marker {
        color: var(--primary-blue-semi);
    }

    [data-md-toggle=search]:checked~.md-header .md-search__form {
        border-radius: 8px 8px 0px 0px;
    }

    .md-search__form {
        background: var(--primary-blue-strong);
        border-radius: 20px;
        padding: 2px;
        transition: all 0.3s ease;
    }

    .md-search__input {
        border: none;
        border-radius: 18px;
        padding: 8px 16px;
        font-size: 14px;
        transition: all 0.3s ease;
    }


    .md-search__input:hover,
    .md-search__input:focus {
        outline: none;
        box-shadow: var(--table-shadow);
        border-radius: 18px !important;
    }

    .md-search__output {
        border-radius: 0px 0px 8px 8px !important;
    }

    .md-tooltip {
        background-color: var(--overlay-dark);
        color: var(--text-white);
        border: none;
        border-radius: 6px;
        padding: 8px 12px;
        font-size: 12px;
        box-shadow: var(--shadow-dark);
        position: relative;
    }

    .md-tooltip:after {
        content: '';
        position: absolute;
        top: 100%;
        left: 50%;
        margin-left: -5px;
        width: 0;
        height: 0;
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 5px solid var(--overlay-dark);
    }

    :not(pre)>code {
        color: var(--text-orange) !important;
        font-weight: normal;
    }

    .highlight .c1,
    .highlight .cm {
        color: var(--text-gray);
    }

    .md-typeset .admonition,
    .md-typeset details {
        border-width: 0;
        border-left-width: 4px;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: var(--md-header-font);
        color: var(--primary-blue) !important;
    }

    body {
        font-family: var(--md-text-font);
    }

    pre code {
        color: var(--md-code-fg-color) !important;
    }

    .highlight pre {
        background-color: var(--md-code-bg-color) !important;
    }

    .md-typeset code {
        font-family: var(--md-code-font), var(--md-text-font);
    }

    .md-tabs__item.md-tabs__item--active {
        border-bottom: 2px solid var(--primary-blue-semi);
    }

    .md-tabs__list>.md-tabs__item--active>.md-tabs__link {
        color: var(--primary-blue-semi) !important;
    }

    .timeline-content::before {
        background-color: var(--bg-gray-light);
    }

    .timeline-card {
        background-color: var(--bg-gray-light) !important;
    }

    .changelog-content a {
        color: var(--text-blue) !important;
        word-break: break-word;
    }

    .changelog-content a:focus,
    .changelog-content a:hover {
        color: var(--text-teal) !important;
    }

    .changelog-type-pageupdate {
        background-color: var(--primary-blue-semi) !important;
    }

    .md-footer-runtime {
        position: relative;
        z-index: 3;
        margin: 0.5rem 0;
        padding: 0.4rem 0;
        font-size: 0.7rem;
        line-height: 1.6;
        color: var(--md-footer-fg-color--light);
        display: flex;
        align-items: center;
    }

    ::selection {
        background: var(--primary-blue-strong);
    }

    html {
        scroll-behavior: smooth !important;
        /* 强制启用平滑滚动 */
        scroll-padding-top: 53px;
        /* 设置滚动偏移量,避免标题被导航栏遮挡 */
    }

    strong {
        color: var(--text-purple);
    }

    a[href^="#"],
    a[href*="/#"] {
        scroll-behavior: smooth !important;
    }

    .custom-tooltip {
        position: relative;
        display: inline-block;
        cursor: help;
        color: var(--primary-blue-semi);
        border-bottom: 1px dashed var(--primary-blue-semi);
        text-decoration: none !important;
    }

    .custom-tooltip::before {
        content: attr(data-title);
        position: absolute;
        width: 300px;
        background-color: var(--overlay-dark);
        color: var(--text-white);
        text-align: left;
        padding: 10px;
        border-radius: 6px;
        bottom: 125%;
        /* 定位在链接上方 */
        left: 50%;
        transform: translateX(-50%);
        z-index: 99999;
        /* 确保显示在最上层 */
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s;
        font-weight: normal;
        font-size: 14px;
        line-height: 1.5;
        pointer-events: none;
        box-shadow: var(--shadow-dark);
        word-wrap: break-word;
        white-space: normal;
    }

    .custom-tooltip::after {
        content: "";
        position: absolute;
        bottom: 100%;
        left: 50%;
        margin-left: -5px;
        border-width: 5px;
        border-style: solid;
        border-color: var(--overlay-dark) transparent transparent transparent;
        z-index: 99999;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s;
        pointer-events: none;
    }

    .custom-tooltip:hover::before {
        opacity: 1;
        visibility: visible;
    }

    .custom-tooltip:hover::after {
        opacity: 1;
        visibility: visible;
    }

    /* 修改移动设备上的 tooltip 样式，确保不会溢出屏幕 */
    @media (max-width: 767px) {
        .custom-tooltip::before {
            width: calc(100vw - 40px);
            max-width: 250px;
            white-space: normal;
            font-size: 14px;
            left: 50%;
            transform: translateX(-50%);
            bottom: 130%;
            /* 确保不会超出屏幕边缘 */
            box-sizing: border-box;

            /* 新增：定位逻辑调整，防止溢出 */
            position: fixed;
            top: auto;
            bottom: auto;
            left: 20px;
            /* 距离左边缘固定距离 */
            right: 20px;
            /* 距离右边缘固定距离 */
            transform: none;
            margin-top: -120px;
            /* 在目标元素上方显示，可根据需要调整 */
            width: auto;
            /* 宽度由left和right决定 */
        }

        /* 新增：处理靠近页面底部的 tooltip */
        .custom-tooltip:hover::before {
            max-height: 80vh;
            /* 最大高度限制 */
            overflow-y: auto;
            /* 内容过多时可滚动 */
        }
    }

    .md-content a.custom-tooltip::after {
        display: none !important;
    }

    @media screen and (max-width: 767px) {

        /* 移除可能导致问题的现有样式 */
        .md-typeset .arithmatex {
            max-width: 100%;
            overflow-x: hidden;
            text-overflow: ellipsis;
        }

        /* 修改为更有效的样式 */
        .katex-display {
            overflow-x: auto;
            overflow-y: hidden;
            max-width: 100%;
            padding: 0.25em 0;
        }

        /* 对于行内公式的新样式 */
        .katex {
            font-size: 1em !important;
            /* 减小字体大小 */
        }

        /* 调整整体数学公式容器的样式 */
        .md-typeset .arithmatex {
            max-width: 100% !important;
            overflow-x: auto;
            padding: 0.1em 0;
            margin: 0;
        }

        /* 确保行内公式不破坏布局 */
        .katex-inline {
            display: inline-block;
            max-width: 100%;
            overflow-x: auto;
            vertical-align: middle;
            white-space: normal;
            line-break: anywhere;
        }

        /* 添加淡出效果指示可滚动 */
        .katex-display::after {
            content: "";
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            width: 20px;
            background: linear-gradient(to right,
                    rgba(255, 255, 255, 0),
                    rgba(255, 255, 255, 0.7));
            pointer-events: none;
        }
    }

    /* 头像样式 - 增强版，添加悬浮区域控制 */
    .header-avatar {
        display: inline-flex;
        align-items: center;
        margin-right: 0.8rem;
        position: relative;
        z-index: 1;
        /* 添加一个内边距以增加可点击区域，但不会影响布局 */
        padding: 3px;
    }

    .header-avatar img {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid #fff;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        position: relative;
        z-index: 5;
    }

    /* 下拉菜单样式 - 增强版，改进悬浮区域控制 */
    .avatar-dropdown {
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%) translateY(25px) scale(0.95);
        background-color: var(--bg-white);
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.18);
        padding: 45px 0 8px 0;
        /* 增加更多顶部内边距 */
        min-width: 140px;
        opacity: 0;
        visibility: hidden;
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        z-index: 4;
        /* 低于头像 */
        margin-top: -10px;
        /* 让菜单上移覆盖头像下半部分 */
        /* 添加一个缓冲区，防止鼠标离开时闪烁 */
        pointer-events: none;
    }

    /* 悬停效果，修改触发条件和过渡延迟 */
    .header-avatar:hover .avatar-dropdown {
        opacity: 1;
        visibility: visible;
        transform: translateX(-50%) translateY(15px) scale(1);
        /* 添加延迟以防止闪烁 */
        transition-delay: 0.05s;
        pointer-events: auto;
    }

    /* 添加间隙区域保持悬停状态 */
    .avatar-dropdown::after {
        content: "";
        position: absolute;
        top: -20px;
        /* 创建顶部缓冲区 */
        left: 0;
        width: 100%;
        height: 20px;
        background: transparent;
    }

    .header-avatar:hover img {
        transform: scale(1.5) translateY(18px);
        /* 放大并稍微向下移动 */
        box-shadow: 0 6px 16px rgba(77, 166, 218, 0.35);
        border-color: var(--primary-blue-semi);
        /* 添加延迟以防止闪烁 */
        transition-delay: 0s;
    }

    /* 菜单三角形指示器 - 隐藏，因为视觉上头像已经作为指示器 */
    .avatar-dropdown::before {
        display: none;
    }

    /* 菜单项样式 */
    .avatar-dropdown-item {
        display: block;
        padding: 10px 16px;
        color: var(--text-primary);
        font-size: 14px;
        text-decoration: none;
        transition: all 0.25s ease;
        text-align: center;
        position: relative;
        white-space: nowrap;
    }

    .avatar-dropdown p {
        padding: 10px 16px;
        color: var(--text-primary);
        font-size: 16px;
        text-align: center;
        white-space: nowrap;
    }

    .avatar-dropdown-item:hover {
        background-color: rgba(77, 166, 218, 0.08);
        color: var(--primary-blue-semi);
    }

    .avatar-dropdown-item:hover::after {
        content: "";
        position: absolute;
        left: 8px;
        width: 3px;
        height: 70%;
        background: var(--primary-blue-semi);
        border-radius: 2px;
        top: 15%;
    }

    .avatar-dropdown-divider {
        height: 1px;
        background-color: rgba(0, 0, 0, 0.06);
        margin: 4px 8px;
    }

    /* 响应式设计调整 */
    @media screen and (max-width: 1199px) {
        .header-avatar {
            margin-right: 0.5rem;
        }
    }

    /* 响应式设计调整 */
    @media screen and (max-width: 1200px) {
        .header-avatar {
            margin-right: 0.3rem;
            padding: 2px;
        }

        .header-avatar img {
            width: 32px;
            height: 32px;
        }

        /* 调整菜单位置，靠左侧显示 */
        .avatar-dropdown {
            /* 调整left确保显示在左侧 */
            left: -120px;
            transform: translateX(0) translateY(25px) scale(0.95);
            padding-top: 15px;
            margin-top: 0;
            min-width: 130px;
            position: absolute;
            z-index: 100;
        }

        /* 点击时的行为，而不是悬停 */
        .header-avatar:hover .avatar-dropdown {
            transform: translateX(0) translateY(5px) scale(1);
        }

        /* 移动端头像不放大，防止页面移动 */
        .header-avatar:hover img {
            transform: none;
            border-color: var(--primary-blue-semi);
            box-shadow: 0 4px 12px rgba(77, 166, 218, 0.3);
        }

        /* 调整导航栏布局 */
        .md-header__inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* 确保下拉菜单不遮挡其他元素 */
        .avatar-dropdown {
            max-width: 85vw;
        }
    }

    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
        background: #ccc;
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: #999;
    }

    /* 主题切换蒙版 - 优化结构和性能 */
    .theme-transition-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--bg-white);
        z-index: 100000;
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
        display: flex;
        align-items: center;
        justify-content: center;
        /* 简化过渡效果，提高性能 */
        transition: opacity 0.3s ease-out, visibility 0.3s ease-out,
            background-color 0.3s ease-out, backdrop-filter 0.3s ease-out;
        backdrop-filter: blur(0px);
    }

    .theme-transition-overlay.active {
        opacity: 1;
        visibility: visible;
        pointer-events: all;
        backdrop-filter: blur(5px);
    }

    /* 主题切换内容容器 - 整合样式 */
    .theme-transition-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 20px;
        transform: scale(0.9);
        opacity: 0;
        transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
            opacity 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .theme-transition-overlay.active .theme-transition-content {
        transform: scale(1);
        opacity: 1;
    }

    /* 简化加载图标结构，移除不必要的嵌套 */
    .theme-transition-spinner {
        width: 50px;
        height: 50px;
        border: 5px solid rgba(77, 166, 218, 0.2);
        border-top-color: var(--primary-blue-semi);
        border-radius: 50%;
        animation: none;
        transition: opacity 0.3s ease;
    }

    .theme-transition-overlay.active .theme-transition-spinner {
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }

    /* 主题切换文字样式 */
    .theme-transition-text {
        font-family: var(--md-text-font);
        color: var(--primary-blue-semi);
        font-size: 16px;
        font-weight: 500;
        text-align: center;
        margin-top: 10px;
    }

    /* 页脚爱情宣言样式 */
    .md-footer-love {
        position: relative;
        font-family: var(--md-header-font) !important;
        font-size: 0.9rem;
        line-height: 1.6;
        margin: 0.5rem 0;
        padding: 0.5rem 1rem;
        color: rgba(255, 255, 255, 0.85);
        text-align: center;
        border-radius: 8px;
        background: linear-gradient(135deg,
                rgba(255, 255, 255, 0.1),
                rgba(255, 255, 255, 0.05));
        backdrop-filter: blur(4px);
        transition: all 0.4s ease;
        overflow: hidden;
        border-left: 3px solid rgba(255, 182, 193, 0.6);
    }

    .md-footer-love:hover {
        background: linear-gradient(135deg,
                rgba(255, 182, 193, 0.2),
                rgba(255, 255, 255, 0.1));
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(255, 182, 193, 0.15);
    }

    /* 添加闪烁星星效果 */
    .md-footer-love::before,
    .md-footer-love::after {
        content: "★";
        position: absolute;
        opacity: 0;
        font-size: 0.8rem;
        color: rgba(255, 223, 223, 0.8);
        animation: twinkle 3s ease-in-out infinite alternate;
    }

    .md-footer-love::before {
        left: 0.5rem;
        top: 0.4rem;
        animation-delay: 0s;
    }

    .md-footer-love::after {
        right: 0.5rem;
        top: 0.4rem;
        animation-delay: 1.5s;
    }

    @keyframes twinkle {
        0% {
            opacity: 0.3;
            transform: scale(0.8);
        }

        50% {
            opacity: 0.9;
            transform: scale(1.2);
        }

        100% {
            opacity: 0.3;
            transform: scale(0.8);
        }
    }

    /* 名字高亮显示 */
    .love-highlight {
        font-weight: 500;
        background: linear-gradient(120deg, #ffb6c1, #ffc0cb);
        background-clip: text;
        -webkit-background-clip: text;
        color: transparent;
        padding: 0 0.2rem;
        position: relative;
        white-space: nowrap;
    }

    /* 添加心跳动画效果 */
    .love-heart {
        display: inline-block;
        font-size: 0.9em;
        color: rgba(255, 182, 193, 0.9);
        transform-origin: center;
        margin: 0 0.2rem;
        animation: heartbeat 1.5s ease-in-out infinite;
    }

    @keyframes heartbeat {
        0% {
            transform: scale(1);
        }

        15% {
            transform: scale(1.25);
        }

        30% {
            transform: scale(1);
        }

        45% {
            transform: scale(1.25);
        }

        60% {
            transform: scale(1);
        }

        100% {
            transform: scale(1);
        }
    }

    /* 添加响应式样式 - 平板设备 */
    @media screen and (max-width: 1199px) {
        .md-footer-love {
            font-size: 0.8rem;
            padding: 0.4rem 0.8rem;
            margin: 0.4rem 0;
        }

        .md-footer-love::before,
        .md-footer-love::after {
            font-size: 0.7rem;
        }
    }

    /* 添加响应式样式 - 移动设备 */
    @media screen and (max-width: 767px) {
        .md-footer-love {
            font-size: 0.75rem;
            padding: 0.3rem 0.5rem;
            margin: 0.3rem 0;
            border-radius: 6px;
            max-width: 90%;
            margin-left: auto;
            margin-right: auto;
            border-left-width: 2px;
        }

        .md-footer-love:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(255, 182, 193, 0.12);
        }

        .md-footer-love::before,
        .md-footer-love::after {
            font-size: 0.6rem;
        }

        .love-heart {
            font-size: 0.8em;
        }

        /* 在非常小的屏幕上隐藏星星效果 */
        @media screen and (max-width: 360px) {

            .md-footer-love::before,
            .md-footer-love::after {
                display: none;
            }
        }
    }

    /* Atom One Light 语法高亮样式 - 仅覆盖代码块语法高亮 */
    .highlight .hll {
        background-color: var(--code-bg) !important;
    }

    .highlight .c {
        color: var(--code-comment) !important;
    }

    /* Comment */
    .highlight .err {
        color: var(--code-string) !important;
    }

    /* Error */
    .highlight .k {
        color: var(--code-keyword) !important;
    }

    /* Keyword */
    .highlight .l {
        color: var(--code-number) !important;
    }

    /* Literal */
    .highlight .n {
        color: var(--code-text) !important;
    }

    /* Name */
    .highlight .o {
        color: var(--code-text) !important;
    }

    /* Operator */
    .highlight .p {
        color: var(--code-text) !important;
    }

    /* Punctuation */
    .highlight .ch {
        color: var(--code-comment) !important;
    }

    /* Comment.Hashbang */
    .highlight .cm {
        color: var(--code-comment) !important;
    }

    /* Comment.Multiline */
    .highlight .cp {
        color: var(--code-keyword) !important;
    }

    /* Comment.Preproc */
    .highlight .cpf {
        color: var(--code-string) !important;
    }

    /* Comment.PreprocFile */
    .highlight .c1 {
        color: var(--code-comment) !important;
    }

    /* Comment.Single */
    .highlight .cs {
        color: var(--code-comment) !important;
    }

    /* Comment.Special */
    .highlight .gd {
        color: var(--code-string) !important;
    }

    /* Generic.Deleted */
    .highlight .ge {}

    /* Generic.Emph */
    .highlight .gr {
        color: var(--code-string) !important;
    }

    /* Generic.Error */
    .highlight .gh {
        color: var(--code-function) !important;
        font-weight: bold !important;
    }

    /* Generic.Heading */
    .highlight .gi {
        color: var(--code-string) !important;
    }

    /* Generic.Inserted */
    .highlight .go {
        color: var(--code-text) !important;
    }

    /* Generic.Output */
    .highlight .gp {
        color: var(--code-text) !important;
    }

    /* Generic.Prompt */
    .highlight .gs {
        font-weight: bold !important;
    }

    /* Generic.Strong */
    .highlight .gu {
        color: var(--code-function) !important;
        font-weight: bold !important;
    }

    /* Generic.Subheading */
    .highlight .gt {
        color: var(--code-string) !important;
    }

    /* Generic.Traceback */
    .highlight .kc {
        color: var(--code-keyword) !important;
    }

    /* Keyword.Constant */
    .highlight .kd {
        color: var(--code-keyword) !important;
    }

    /* Keyword.Declaration */
    .highlight .kn {
        color: var(--code-keyword) !important;
    }

    /* Keyword.Namespace */
    .highlight .kp {
        color: var(--code-keyword) !important;
    }

    /* Keyword.Pseudo */
    .highlight .kr {
        color: var(--code-keyword) !important;
    }

    /* Keyword.Reserved */
    .highlight .kt {
        color: var(--code-class) !important;
    }

    /* Keyword.Type */
    .highlight .ld {
        color: var(--code-builtin) !important;
    }

    /* Literal.Date */
    .highlight .m {
        color: var(--code-number) !important;
    }

    /* Literal.Number */
    .highlight .s {
        color: var(--code-builtin) !important;
    }

    /* Literal.String */
    .highlight .na {
        color: var(--code-class) !important;
    }

    /* Name.Attribute */
    .highlight .nb {
        color: var(--code-class) !important;
    }

    /* Name.Builtin */
    .highlight .nc {
        color: var(--code-class) !important;
    }

    /* Name.Class */
    .highlight .no {
        color: var(--code-string) !important;
    }

    /* Name.Constant */
    .highlight .nd {
        color: var(--code-function) !important;
    }

    /* Name.Decorator */
    .highlight .ni {
        color: var(--code-text) !important;
    }

    /* Name.Entity */
    .highlight .ne {
        color: var(--code-string) !important;
    }

    /* Name.Exception */
    .highlight .nf {
        color: var(--code-function) !important;
    }

    /* Name.Function */
    .highlight .nl {
        color: var(--code-text) !important;
    }

    /* Name.Label */
    .highlight .nn {
        color: var(--code-text) !important;
    }

    /* Name.Namespace */
    .highlight .nx {
        color: var(--code-function) !important;
    }

    /* Name.Other */
    .highlight .py {
        color: var(--code-text) !important;
    }

    /* Name.Property */
    .highlight .nt {
        color: var(--code-variable) !important;
    }

    /* Name.Tag */
    .highlight .nv {
        color: var(--code-string) !important;
    }

    /* Name.Variable */
    .highlight .ow {
        color: var(--code-keyword) !important;
    }

    /* Operator.Word */
    .highlight .w {
        color: var(--code-text) !important;
    }

    /* Text.Whitespace */
    .highlight .mb {
        color: var(--code-number) !important;
    }

    /* Literal.Number.Bin */
    .highlight .mf {
        color: var(--code-number) !important;
    }

    /* Literal.Number.Float */
    .highlight .mh {
        color: var(--code-number) !important;
    }

    /* Literal.Number.Hex */
    .highlight .mi {
        color: var(--code-number) !important;
    }

    /* Literal.Number.Integer */
    .highlight .mo {
        color: var(--code-number) !important;
    }

    /* Literal.Number.Oct */
    .highlight .sa {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Affix */
    .highlight .sb {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Backtick */
    .highlight .sc {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Char */
    .highlight .dl {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Delimiter */
    .highlight .sd {
        color: var(--code-comment) !important;
    }

    /* Literal.String.Doc */
    .highlight .s2 {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Double */
    .highlight .se {
        color: var(--code-function) !important;
    }

    /* Literal.String.Escape */
    .highlight .sh {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Heredoc */
    .highlight .si {
        color: var(--code-function) !important;
    }

    /* Literal.String.Interpol */
    .highlight .sx {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Other */
    .highlight .sr {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Regex */
    .highlight .s1 {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Single */
    .highlight .ss {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Symbol */
    .highlight .bp {
        color: var(--code-class) !important;
    }

    /* Name.Builtin.Pseudo */
    .highlight .fm {
        color: var(--code-function) !important;
    }

    /* Name.Function.Magic */
    .highlight .vc {
        color: var(--code-string) !important;
    }

    /* Name.Variable.Class */
    .highlight .vg {
        color: var(--code-string) !important;
    }

    /* Name.Variable.Global */
    .highlight .vi {
        color: var(--code-string) !important;
    }

    /* Name.Variable.Instance */
    .highlight .vm {
        color: var(--code-string) !important;
    }

    /* Name.Variable.Magic */
    .highlight .il {
        color: var(--code-number) !important;
    }

    /* Literal.Number.Integer.Long */

    /* 特殊语言的额外样式调整 */
    .highlight[data-lang="json"] .nt {
        color: var(--code-variable) !important;
    }

    /* JSON keys */
    .highlight[data-lang="yaml"] .na {
        color: var(--code-variable) !important;
    }

    /* YAML keys */
    .highlight[data-lang="yml"] .na {
        color: var(--code-variable) !important;
    }

    /* YAML keys */
    .highlight[data-lang="xml"] .nt {
        color: var(--code-variable) !important;
    }

    /* XML tags */
    .highlight[data-lang="html"] .nt {
        color: var(--code-variable) !important;
    }

    /* HTML tags */

    /* CSS特殊处理 */
    .highlight[data-lang="css"] .nc {
        color: var(--code-class) !important;
    }

    /* CSS class selectors */
    .highlight[data-lang="css"] .nf {
        color: var(--code-function) !important;
    }

    /* CSS functions */
    .highlight[data-lang="css"] .nt {
        color: var(--code-variable) !important;
    }

    /* CSS element selectors */
    .highlight[data-lang="css"] .nd {
        color: var(--code-keyword) !important;
    }

    /* CSS pseudo-classes */

    /* JavaScript特殊处理 */
    .highlight[data-lang="javascript"] .nx {
        color: var(--code-function) !important;
    }

    /* JS functions and variables */
    .highlight[data-lang="js"] .nx {
        color: var(--code-function) !important;
    }

    /* JS functions and variables */

    /* Python特殊处理 */
    .highlight[data-lang="python"] .nd {
        color: var(--code-function) !important;
    }

    /* Python decorators */
    .highlight[data-lang="python"] .nf {
        color: var(--code-function) !important;
    }

    /* Python functions */
    .highlight[data-lang="python"] .nc {
        color: var(--code-class) !important;
    }

    /* Python classes */

    /* Shell/Bash特殊处理 */
    .highlight[data-lang="bash"] .nv {
        color: var(--code-string) !important;
    }

    /* Bash variables */
    .highlight[data-lang="shell"] .nv {
        color: var(--code-string) !important;
    }

    /* Shell variables */
    .highlight[data-lang="sh"] .nv {
        color: var(--code-string) !important;
    }

    /* Shell variables */

    /* C/C++特殊处理 */
    .highlight[data-lang="c"] .kt {
        color: var(--code-keyword) !important;
    }

    /* C types */
    .highlight[data-lang="cpp"] .kt {
        color: var(--code-keyword) !important;
    }

    /* C++ types */
    .highlight[data-lang="c++"] .kt {
        color: var(--code-keyword) !important;
    }

    /* C++ types */

    /* Java特殊处理 */
    .highlight[data-lang="java"] .nc {
        color: var(--code-class) !important;
    }

    /* Java classes */
    .highlight[data-lang="java"] .kt {
        color: var(--code-keyword) !important;
    }

    /* Java types */
</style><script>
    // 字体配置
    const fontConfig = {
        "dongguanti": {
            name: "上图东观体",
            id: "font-dongguanti"
        },
        "oppoti": {
            name: "OPPO Sans",
            id: "font-oppoti"
        },
        "jiangchengti": {
            name: "江城黑体",
            id: "font-jiangchengti"
        },
        "lxgw": {
            name: "霞鹜臻楷",
            id: "font-lxgw"
        }
    };

    // 立即应用保存的字体设置（与主题初始化方式一致）
    (function initFont() {
        const savedFont = localStorage.getItem("preferred-font") || "dongguanti";
        
        // 禁用所有字体样式表
        Object.values(fontConfig).forEach(font => {
            const link = document.getElementById(font.id);
            if (link) {
                link.setAttribute("disabled", "true");
            }
        });
        
        // 启用选中的字体样式表
        const selectedFontLink = document.getElementById(fontConfig[savedFont].id);
        if (selectedFontLink) {
            selectedFontLink.removeAttribute("disabled");
        }
    })();

    document.addEventListener("DOMContentLoaded", () => {
        const savedTheme = localStorage.getItem("preferred-theme") || "theme1";
        const savedFont = localStorage.getItem("preferred-font") || "dongguanti";

        // 初始化功能条字体下拉菜单和字体设置
        updateFontDropdownToolbar(savedFont);
        applyFont(savedFont);
        
        // 初始化功能条状态
        initToolbarState();

        const initialTheme = localStorage.getItem("preferred-theme");
        if (initialTheme) {
            const theme1Link = document.querySelector('link[href*="theme1"]');
            const theme2Link = document.querySelector('link[href*="theme2"]');

            // 关闭过渡动画，直接设置主题
            if (initialTheme === "theme1") {
                theme1Link.removeAttribute("disabled");
                theme2Link.setAttribute("disabled", "true");
            } else {
                theme2Link.removeAttribute("disabled");
                theme1Link.setAttribute("disabled", "true");
            }
        }

        // 添加加载完成后的检测
        setTimeout(() => {
            const hiddenElements = document.querySelectorAll('.md-content article>*[style*="opacity: 0"]');
            hiddenElements.forEach(el => {
                el.style.opacity = '1';
                el.style.transform = 'translateY(0)';
            });
        }, 2000); // 2秒后强制显示所有隐藏元素
    });

    (function initTheme() {
        const savedTheme = localStorage.getItem("preferred-theme");
        if (savedTheme) {
            const theme1Link = document.querySelector('link[href*="theme1"]');
            const theme2Link = document.querySelector('link[href*="theme2"]');
            if (theme1Link && theme2Link) {
                if (savedTheme === "theme1") {
                    theme1Link.removeAttribute("disabled");
                    theme2Link.setAttribute("disabled", "true");
                } else {
                    theme2Link.removeAttribute("disabled");
                    theme1Link.setAttribute("disabled", "true");
                }
            }
        }
    })();

    // 功能条字体下拉菜单功能
    function toggleFontDropdownToolbar() {
        const dropdown = document.querySelector('.font-dropdown-toolbar');
        const isActive = dropdown.classList.contains('active');
        
        if (isActive) {
            dropdown.classList.remove('active');
        } else {
            dropdown.classList.add('active');
        }
    }

    // 功能条字体选择
    function selectFontToolbar(fontKey) {
        // 应用新字体
        applyFont(fontKey);
        
        // 保存字体设置
        localStorage.setItem("preferred-font", fontKey);
        
        // 更新下拉菜单显示
        updateFontDropdownToolbar(fontKey);
        
        // 关闭下拉菜单
        const dropdown = document.querySelector('.font-dropdown-toolbar');
        dropdown.classList.remove('active');
    }

    // 应用字体
    function applyFont(fontKey) {
        // 禁用所有字体样式表
        Object.values(fontConfig).forEach(font => {
            const link = document.getElementById(font.id);
            if (link) {
                link.setAttribute("disabled", "true");
            }
        });
        
        // 启用选中的字体样式表
        const selectedFontLink = document.getElementById(fontConfig[fontKey].id);
        if (selectedFontLink) {
            selectedFontLink.removeAttribute("disabled");
        }
    }

    // 更新功能条字体下拉菜单显示
    function updateFontDropdownToolbar(currentFontKey) {
        const currentFontNameEl = document.querySelector(".current-font-name-toolbar");
        const fontOptions = document.querySelectorAll(".font-option-toolbar");
        
        if (currentFontNameEl) {
            currentFontNameEl.textContent = fontConfig[currentFontKey].name;
        }
        
        // 更新选项的选中状态
        fontOptions.forEach(option => {
            const fontKey = option.getAttribute('data-font');
            if (fontKey === currentFontKey) {
                option.classList.add('selected');
            } else {
                option.classList.remove('selected');
            }
        });
    }

    // 返回顶部功能
    function scrollToTop() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }

    // 功能条切换功能
    function toggleToolbar() {
        const toolbar = document.getElementById('floatingToolbar');
        const toggleBtn = document.getElementById('toolbarToggleBtn');
        
        if (!toolbar || !toggleBtn) {
            console.error('无法找到功能条或切换按钮元素');
            return;
        }
        
        const isHidden = toolbar.classList.contains('hidden');
        
        if (isHidden) {
            // 显示功能条
            toolbar.classList.remove('hidden');
            toggleBtn.classList.remove('toolbar-hidden');
            localStorage.setItem('toolbar-visible', 'true');
        } else {
            // 隐藏功能条
            toolbar.classList.add('hidden');
            toggleBtn.classList.add('toolbar-hidden');
            localStorage.setItem('toolbar-visible', 'false');
        }
    }

    // 初始化功能条状态
    function initToolbarState() {
        const toolbar = document.getElementById('floatingToolbar');
        const toggleBtn = document.getElementById('toolbarToggleBtn');
        const isVisible = localStorage.getItem('toolbar-visible');
        
        if (!toolbar || !toggleBtn) {
            return;
        }
        
        // 如果之前设置为隐藏，则保持隐藏状态
        if (isVisible === 'false') {
            toolbar.classList.add('hidden');
            toggleBtn.classList.add('toolbar-hidden');
        } else {
            // 默认显示
            toolbar.classList.remove('hidden');
            toggleBtn.classList.remove('toolbar-hidden');
        }
    }

    // 隐藏所有子菜单的通用函数
    function hideAllSubmenus() {
        const fontDropdown = document.querySelector('.font-dropdown-toolbar');
        if (fontDropdown) {
            fontDropdown.classList.remove('active');
        }
        // 如果将来有其他子菜单，可以在这里添加
    }

    // 点击外部关闭下拉菜单
    document.addEventListener('click', function(event) {
        const fontDropdown = document.querySelector('.font-dropdown-toolbar');
        
        // 如果点击的不是字体下拉菜单内部，则关闭字体下拉菜单
        const fontSwitcher = document.querySelector('.font-switcher');
        if (fontSwitcher && fontDropdown && !fontSwitcher.contains(event.target)) {
            fontDropdown.classList.remove('active');
        }
    });

    // 为功能区的其他功能添加点击和悬浮事件监听器
    document.addEventListener('DOMContentLoaded', function() {
        const toolbarItems = document.querySelectorAll('.toolbar-item:not(.font-switcher)');
        
        toolbarItems.forEach(item => {
            // 点击其他功能时隐藏子菜单
            item.addEventListener('click', function() {
                hideAllSubmenus();
            });
            
            // 鼠标悬浮在其他功能时隐藏子菜单
            item.addEventListener('mouseenter', function() {
                hideAllSubmenus();
            });
        });
    });

    function switchTheme() {
        // 获取当前和目标主题信息
        const currentTheme =
            localStorage.getItem("preferred-theme") || "theme1";
        const newTheme = currentTheme === "theme1" ? "theme2" : "theme1";
        const targetThemeText = newTheme === "theme1" ? "新版主题" : "原生主题";

        // 获取主题样式链接
        const theme1Link = document.querySelector('link[href*="theme1"]');
        const theme2Link = document.querySelector('link[href*="theme2"]');

        if (!theme1Link || !theme2Link) {
            console.error("无法找到主题样式链接");
            return;
        }

        // 创建和添加过渡覆盖层
        const overlay = document.createElement("div");
        overlay.className = "theme-transition-overlay";
        overlay.innerHTML = `
        <div class="theme-transition-content">
            <div class="theme-transition-spinner"></div>
            <div class="theme-transition-text">正在切换到：${targetThemeText}</div>
        </div>
    `;
        document.body.appendChild(overlay);

        // 确保DOM已更新后再添加active类
        requestAnimationFrame(() => {
            // 激活蒙版
            overlay.classList.add("active");

            // 添加适当的延迟以确保蒙版已完全显示
            setTimeout(() => {
                // 切换主题样式
                if (newTheme === "theme1") {
                    theme1Link.removeAttribute("disabled");
                    theme2Link.setAttribute("disabled", "true");
                } else {
                    theme2Link.removeAttribute("disabled");
                    theme1Link.setAttribute("disabled", "true");
                }

                // 保存主题设置
                localStorage.setItem("preferred-theme", newTheme);

                // 给予足够的时间加载主题
                setTimeout(() => {
                    // 平滑淡出效果
                    fadeOutOverlay(overlay);
                }, 2500); // 主题加载时间
            }, 250); // 蒙版显示时间
        });
    }

    // 平滑淡出蒙版
    function fadeOutOverlay(overlay) {
        // 先改变背景色，制造渐变效果
        overlay.style.backgroundColor = "rgba(255, 255, 255, 0.85)";

        // 短暂延迟后淡出
        setTimeout(() => {
            overlay.classList.remove("active");

            // 等待淡出动画完成后移除元素
            setTimeout(() => {
                document.body.removeChild(overlay);
            }, 300);
        }, 150);
    }
</script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=teal> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#_1 class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../index.html title=柯懒的知识库 class="md-header__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 柯懒的知识库 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 数据链路层协议 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=teal aria-label type=radio name=__palette id=__palette_1> </form> <!-- 头像元素 - 直接在HTML中定义 --> <div class=header-avatar> <img src=../../作者/作者.assets/20250206-200653.jpg alt=头像> <div class=avatar-dropdown> <p><strong>柯懒不是柯南</strong></p> <a href=../../作者/联系作者/作者.html class=avatar-dropdown-item>吵醒柯懒</a> <div class=avatar-dropdown-divider></div> <a href=../../作者/关于作者/关于作者.html class=avatar-dropdown-item>柯懒自传</a> <div class=avatar-dropdown-divider></div> <a href=https://github.com/H0308 class=avatar-dropdown-item>柯懒的零食库</a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=查找> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <!-- 独立的切换按钮 --> <div class=toolbar-toggle-btn id=toolbarToggleBtn onclick=toggleToolbar()> <div class=toggle-icon> <svg class=toggle-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=16 height=16> <path d="M346.538667 1024L170.666667 853.333333l341.333333-341.333333-341.333333-341.333333 175.872-170.666667L853.333333 512z" fill=currentColor></path> </svg> </div> </div> <!-- 右侧固定功能条 - 独立于内容区 --> <div class=floating-toolbar id=floatingToolbar> <!-- 字体切换功能 --> <div class="toolbar-item font-switcher"> <div class=toolbar-icon> <svg class=font-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M913.408 1024l-66.56 0q-29.696 0-51.2-5.12t-36.864-15.872-26.112-27.136-19.968-37.888q-15.36-38.912-28.16-70.656t-22.016-55.296q-11.264-26.624-20.48-49.152l-254.976 0q-7.168 23.552-17.408 51.2-8.192 23.552-21.504 56.832t-30.72 72.192q-20.48 46.08-47.104 63.488t-60.416 17.408l-70.656 0q-45.056 0-60.928-19.968t2.56-68.096q18.432-46.08 43.008-108.544t52.224-132.608 57.344-143.872 57.344-144.384q65.536-164.864 137.216-343.04 7.168-17.408 18.432-31.744 10.24-11.264 27.136-21.504t42.496-10.24q26.624 0 43.52 10.752t28.16 24.064q12.288 15.36 19.456 33.792 72.704 180.224 138.24 345.088 27.648 70.656 57.344 143.872t56.832 142.336 51.2 129.536 41.472 104.448q14.336 34.816 4.096 62.464t-43.008 27.648zM616.448 634.88l-97.28-347.136-1.024 0-108.544 347.136 206.848 0z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>内容字体</div> <div class=font-dropdown-toolbar> <div class=font-current-toolbar onclick=toggleFontDropdownToolbar()> <span class=current-font-name-toolbar>东观体</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=font-options-toolbar> <div class=font-option-toolbar data-font=dongguanti onclick="selectFontToolbar('dongguanti')">上图东观体</div> <div class=font-option-toolbar data-font=oppoti onclick="selectFontToolbar('oppoti')">OPPO Sans</div> <div class=font-option-toolbar data-font=jiangchengti onclick="selectFontToolbar('jiangchengti')">江城黑体</div> <div class=font-option-toolbar data-font=lxgw onclick="selectFontToolbar('lxgw')">霞鹜臻楷</div> </div> </div> </div> <!-- 主题切换功能 --> <div class="toolbar-item theme-switcher" onclick=switchTheme()> <div class=toolbar-icon> <svg class=theme-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M876.572788 522.301623c-1.886977 12.375865-9.657964 30.331819-35.880185 45.48903-56.489572 32.697703-150.21828 83.990926-174.010149 96.958262-13.143345 24.431435-66.067718 122.221646-98.141204 178.503487-16.117073 28.124548-36.055171 34.041304-50.030463 34.041304-0.031722 0-0.031722 0-0.031722 0-14.613836 0-29.1806-6.460132-43.234687-19.218714-47.183626-42.643216-125.994576-117.105115-146.013515-136.083351-27.757181-4.732791-138.338718-23.743774-200.584388-35.752272-17.924231-3.533476-32.649608-14.07046-40.372499-29.084409-5.78782-11.256368-10.281157-30.05962 1.471514-55.658647 26.989701-59.047838 74.126254-157.557432 85.957721-182.196599-3.437286-27.117614-16.996093-135.060045-23.760147-198.905142-1.886977-17.460674 3.901867-35.096333 15.829524-48.351218 12.791327-14.278191 30.667463-21.48943 49.854455-19.426445 63.669088 6.332219 173.259042 19.426445 200.584388 22.705118 24.335245-11.879562 121.085776-58.936297 180.133613-86.34146 9.91379-4.573155 19.85828-6.92369 29.596062-6.92369 28.748764 0 52.172243 20.642133 58.328453 51.421136 12.599969 62.997799 30.93864 166.70272 35.639708 193.484689 18.851347 19.682271 91.953272 96.031147 135.060045 143.07151C872.72004 487.125473 879.307062 504.71406 876.572788 522.301623L876.572788 522.301623zM825.375755 499.085876C776.017604 445.314205 687.245791 352.977193 686.365748 352.017332c-2.942005-3.069919-4.956895-6.971785-5.676279-11.208273-0.207731-1.215688-22.193465-127.001509-36.551474-198.936865-0.799202-3.917216-4.285606-16.836457-16.196891-16.836457-3.453658 0-7.30743 1.006933-11.464099 2.942005-67.282383 31.179117-183.955662 88.180342-185.170327 88.771813-3.693112 1.790786-7.850805 2.558265-11.975752 2.01489-1.295506-0.224104-133.63765-16.165168-205.988468-23.424502-0.079818 0-0.207731 0-0.287549 0-7.30743 0-11.128455 2.89391-13.319353 5.40408-3.677762 4.124947-5.644557 9.91379-5.068436 15.110139 7.674796 72.623018 24.255427 202.934922 24.463158 204.325595 0.511653 4.109598-0.159636 8.266267-1.966795 11.960403-0.591471 1.215688-57.657164 120.04712-88.339977 187.201589-3.565199 7.754614-4.41352 14.214746-2.350534 18.131963 1.935072 3.725858 6.588045 5.820566 10.360975 6.53995 70.719668 13.718443 204.644867 36.519752 206.036563 36.727483 4.189416 0.671289 8.058536 2.686179 11.112082 5.580089 1.006933 0.87902 96.414887 91.281983 150.090367 139.889027 8.314363 7.563256 13.143345 8.106632 14.437827 8.106632 3.485381 0 8.314363-4.621251 12.727882-12.391215 36.343743-63.828724 100.011808-181.988868 100.636025-183.155437 1.983167-3.64604 5.004991-6.667863 8.650007-8.650007 1.134847-0.671289 114.418936-62.373583 178.6314-99.516528 8.698103-5.036713 14.278191-10.568706 14.94948-14.854313C834.681702 511.845481 831.49922 505.800811 825.375755 499.085876L825.375755 499.085876zM935.333076 935.670256c-4.157693 4.157693-9.689686 6.299473-15.141862 6.299473-5.548366 0-11.048637-2.142803-15.238053-6.299473l-171.915441-171.915441c-8.362458-8.394181-8.362458-21.98471 0-30.426987 8.394181-8.394181 21.98471-8.394181 30.379914 0l171.915441 171.915441C943.727257 913.684522 943.727257 927.275052 935.333076 935.670256L935.333076 935.670256z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>主题</div> </div> <!-- 返回顶部功能 --> <div class="toolbar-item back-to-top" onclick=scrollToTop()> <div class=toolbar-icon> <svg class=back-to-top-icon viewbox="0 0 1024 1024" xmlns=http://www.w3.org/2000/svg> <path d="M882.688 624.128l-336.896-583.68c-15.872-27.136-54.784-27.136-70.656 0L138.24 624.128c-15.872 27.136 4.096 61.44 35.328 61.44H317.44c22.528 0 40.96 18.432 40.96 40.96v239.616c0 22.528 18.432 40.96 40.96 40.96h223.232c22.528 0 40.96-18.432 40.96-40.96v-239.616c0-22.528 18.432-40.96 40.96-40.96h143.872c30.208 0 50.176-34.304 34.304-61.44z"></path> </svg> </div> <div class=toolbar-label>顶部</div> </div> </div> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.html class=md-tabs__link> 主页 </a> </li> <li class=md-tabs__item> <a href=../../%E7%BD%91%E7%AB%99%E4%BB%8B%E7%BB%8D/%E7%BD%91%E7%AB%99%E4%BB%8B%E7%BB%8D.html class=md-tabs__link> 网站介绍 </a> </li> <li class=md-tabs__item> <a href=../../%E7%BD%91%E7%AB%99%E6%97%B6%E9%97%B4%E7%BA%BF/%E7%BD%91%E7%AB%99%E6%97%B6%E9%97%B4%E7%BA%BF.html class=md-tabs__link> 网站时间线 </a> </li> <li class=md-tabs__item> <a href=../../C%E8%AF%AD%E8%A8%80/index.html class=md-tabs__link> 编程语言 </a> </li> <li class=md-tabs__item> <a href=../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1.%20%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%92%8C%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/1.%20%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E4%B8%8E%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6.html class=md-tabs__link> 数据结构与算法 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../1.%20Linux%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E5%92%8C%E6%8C%87%E4%BB%A4/1.%20Linux%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E5%92%8C%E6%8C%87%E4%BB%A4.html class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../HTML%E4%B8%8ECSS/HTML%E7%AC%94%E8%AE%B0/HTML%E7%AC%94%E8%AE%B0.html class=md-tabs__link> 前端 </a> </li> <li class=md-tabs__item> <a href=../../MySQL/MySQL%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/MySQL%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8.html class=md-tabs__link> MySQL </a> </li> <li class=md-tabs__item> <a href=../../JavaEE/Spring/1.%20SpringMVC%E5%9F%BA%E7%A1%80/1.%20SpringMVC%E5%9F%BA%E7%A1%80.html class=md-tabs__link> JavaEE应用开发 </a> </li> <li class=md-tabs__item> <a href=../../%E5%85%B6%E5%AE%83/Shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/%E5%85%B3%E4%BA%8EShell.html class=md-tabs__link> 扩展知识 </a> </li> <li class=md-tabs__item> <a href=../../%E5%B7%A5%E5%85%B7%E5%B8%AE%E5%8A%A9/vscode%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/vscode%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5.html class=md-tabs__link> 工具帮助 </a> </li> <li class=md-tabs__item> <a href=../../%E9%A1%B9%E7%9B%AE/1.%20Boost%E5%BA%93%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/1.%20Boost%E5%BA%93%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E.html class=md-tabs__link> 项目 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title=柯懒的知识库 class="md-nav__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> 柯懒的知识库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.html class=md-nav__link> <span class=md-ellipsis> 主页 </span> </a> </li> <li class=md-nav__item> <a href=../../%E7%BD%91%E7%AB%99%E4%BB%8B%E7%BB%8D/%E7%BD%91%E7%AB%99%E4%BB%8B%E7%BB%8D.html class=md-nav__link> <span class=md-ellipsis> 网站介绍 </span> </a> </li> <li class=md-nav__item> <a href=../../%E7%BD%91%E7%AB%99%E6%97%B6%E9%97%B4%E7%BA%BF/%E7%BD%91%E7%AB%99%E6%97%B6%E9%97%B4%E7%BA%BF.html class=md-nav__link> <span class=md-ellipsis> 网站时间线 </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../C%E8%AF%AD%E8%A8%80/index.html class=md-nav__link> <span class=md-ellipsis> 编程语言 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1.%20%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%92%8C%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/1.%20%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E4%B8%8E%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6.html class=md-nav__link> <span class=md-ellipsis> 数据结构与算法 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../1.%20Linux%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E5%92%8C%E6%8C%87%E4%BB%A4/1.%20Linux%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E5%92%8C%E6%8C%87%E4%BB%A4.html class=md-nav__link> <span class=md-ellipsis> Linux常用选项和指令 </span> </a> </li> <li class=md-nav__item> <a href=../2.%20Linux%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3/2.%20Linux%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3.html class=md-nav__link> <span class=md-ellipsis> Linux权限相关 </span> </a> </li> <li class=md-nav__item> <a href=../3.%20CentOS%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/3.%20CentOS%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85.html class=md-nav__link> <span class=md-ellipsis> CentOS软件安装 </span> </a> </li> <li class=md-nav__item> <a href=../4.%20Linux%E4%B8%8B%E7%9A%84gcc%E4%B8%8Egdb/4.%20Linux%E4%B8%8B%E7%9A%84gcc%E4%B8%8Egdb.html class=md-nav__link> <span class=md-ellipsis> Linux下的gcc与gdb </span> </a> </li> <li class=md-nav__item> <a href=../5.%20Linux%E4%B8%8B%E7%9A%84Makefile%E4%B8%8E%E8%BF%9B%E5%BA%A6%E6%9D%A1%E7%A8%8B%E5%BA%8F/5.%20Linux%E4%B8%8B%E7%9A%84Makefile%E4%B8%8E%E8%BF%9B%E5%BA%A6%E6%9D%A1%E7%A8%8B%E5%BA%8F.html class=md-nav__link> <span class=md-ellipsis> Linux下的Makefile与进度条程序 </span> </a> </li> <li class=md-nav__item> <a href=../6.%20%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/6.%20%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html class=md-nav__link> <span class=md-ellipsis> 操作系统基础知识 </span> </a> </li> <li class=md-nav__item> <a href=../7.%20Linux%E8%BF%9B%E7%A8%8B/7.%20Linux%E8%BF%9B%E7%A8%8B.html class=md-nav__link> <span class=md-ellipsis> Linux进程基础 </span> </a> </li> <li class=md-nav__item> <a href=../8.%20Linux%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%E4%B8%8E%E8%BF%9B%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7/8.%20Linux%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%E4%B8%8E%E8%BF%9B%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7.html class=md-nav__link> <span class=md-ellipsis> Linux进程状态与进程优先级 </span> </a> </li> <li class=md-nav__item> <a href=../9.%20Linux%E8%BF%9B%E7%A8%8B%E5%88%87%E6%8D%A2%E4%BB%A5%E5%8F%8A%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95/9.%20Linux%E8%BF%9B%E7%A8%8B%E5%88%87%E6%8D%A2%E4%BB%A5%E5%8F%8A%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95.html class=md-nav__link> <span class=md-ellipsis> Linux进程切换以及调度算法 </span> </a> </li> <li class=md-nav__item> <a href=../10.%20Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8E%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/10.%20Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8E%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.html class=md-nav__link> <span class=md-ellipsis> Linux命令行与环境变量 </span> </a> </li> <li class=md-nav__item> <a href=../11.%20Linux%E8%BF%9B%E7%A8%8B%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4/11.%20%E8%BF%9B%E7%A8%8B%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4.html class=md-nav__link> <span class=md-ellipsis> Linux进程地址空间 </span> </a> </li> <li class=md-nav__item> <a href=../12.%20Linux%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6/12.%20Linux%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6.html class=md-nav__link> <span class=md-ellipsis> Linux进程控制 </span> </a> </li> <li class=md-nav__item> <a href=../13.%20Linux%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E5%9F%BA%E7%A1%80/13.%20Linux%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E5%9F%BA%E7%A1%80.html class=md-nav__link> <span class=md-ellipsis> Linux文件操作基础 </span> </a> </li> <li class=md-nav__item> <a href=../14.%20Linux%E4%B8%AD%E8%BE%93%E5%85%A5%E5%92%8C%E8%BE%93%E5%87%BA%E5%9F%BA%E6%9C%AC%E8%BF%87%E7%A8%8B/14.%20Linux%E4%B8%AD%E8%BE%93%E5%85%A5%E5%92%8C%E8%BE%93%E5%87%BA%E5%9F%BA%E6%9C%AC%E8%BF%87%E7%A8%8B.html class=md-nav__link> <span class=md-ellipsis> Linux中输入和输出基本过程 </span> </a> </li> <li class=md-nav__item> <a href=../15.%20Linux%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/15.%20Linux%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F.html class=md-nav__link> <span class=md-ellipsis> Linux文件系统 </span> </a> </li> <li class=md-nav__item> <a href=../16.%20Linux%E8%BD%AF%E9%93%BE%E6%8E%A5%E5%92%8C%E7%A1%AC%E9%93%BE%E6%8E%A5/16.%20Linux%E8%BD%AF%E9%93%BE%E6%8E%A5%E5%92%8C%E7%A1%AC%E9%93%BE%E6%8E%A5.html class=md-nav__link> <span class=md-ellipsis> Linux软链接和硬链接 </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../17.%20Linux%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/1.%20%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E4%BB%8B%E7%BB%8D%E4%B8%8E%E5%8C%BF%E5%90%8D%E7%AE%A1%E9%81%93/1.%20%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E4%BB%8B%E7%BB%8D%E4%B8%8E%E5%8C%BF%E5%90%8D%E7%AE%A1%E9%81%93.html class=md-nav__link> <span class=md-ellipsis> Linux进程间通信 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../18.%20Linux%E4%BF%A1%E5%8F%B7%E4%B8%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86/18.%20Linux%E4%BF%A1%E5%8F%B7%E4%B8%8E%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86.html class=md-nav__link> <span class=md-ellipsis> Linux信号与操作系统原理 </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../19.%20Linux%E7%BA%BF%E7%A8%8B/1.%20Linux%E7%BA%BF%E7%A8%8B%E6%A6%82%E5%BF%B5%E4%B8%8E%E7%BA%BF%E7%A8%8B%E6%93%8D%E4%BD%9C/1.%20Linux%E7%BA%BF%E7%A8%8B%E6%A6%82%E5%BF%B5%E4%B8%8E%E7%BA%BF%E7%A8%8B%E6%93%8D%E4%BD%9C.html class=md-nav__link> <span class=md-ellipsis> Linux线程 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../20.%20%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/20.%20%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html class=md-nav__link> <span class=md-ellipsis> 网络基础知识 </span> </a> </li> <li class=md-nav__item> <a href=../21.%20Socket%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/21.%20Socket%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80.html class=md-nav__link> <span class=md-ellipsis> Socket编程基础 </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../22.%20UDP%E7%BC%96%E7%A8%8B/1.%20UDP%E7%BC%96%E7%A8%8B%E6%8E%A5%E5%8F%A3%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/1.%20UDP%E7%BC%96%E7%A8%8B%E6%8E%A5%E5%8F%A3%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8.html class=md-nav__link> <span class=md-ellipsis> UDP编程 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../23.%20TCP%E7%BC%96%E7%A8%8B%E6%8E%A5%E5%8F%A3%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/23.%20TCP%E7%BC%96%E7%A8%8B%E6%8E%A5%E5%8F%A3%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8.html class=md-nav__link> <span class=md-ellipsis> TCP编程接口基本使用 </span> </a> </li> <li class=md-nav__item> <a href=../24.%20%E5%BA%8F%E5%88%97%E5%8C%96%E9%97%AE%E9%A2%98%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AE%A1%E7%AE%97%E5%99%A8/24.%20%E5%BA%8F%E5%88%97%E5%8C%96%E9%97%AE%E9%A2%98%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AE%A1%E7%AE%97%E5%99%A8.html class=md-nav__link> <span class=md-ellipsis> 序列化和反序列化与网络计算器 </span> </a> </li> <li class=md-nav__item> <a href=../25.%20%E8%BF%9B%E7%A8%8B%E9%97%B4%E5%85%B3%E7%B3%BB%E5%92%8C%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B/25.%20%E8%BF%9B%E7%A8%8B%E9%97%B4%E5%85%B3%E7%B3%BB%E5%92%8C%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B.html class=md-nav__link> <span class=md-ellipsis> 进程间关系和守护进程 </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../26.%20%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AEHTTP/1.%20%E4%BB%8B%E7%BB%8DHTTP%E5%8D%8F%E8%AE%AE%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84%E4%B8%8E%E5%9F%BA%E6%9C%AC%E5%AE%9E%E7%8E%B0HTTPServer/1.%20%E4%BB%8B%E7%BB%8DHTTP%E5%8D%8F%E8%AE%AE%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84%E4%B8%8E%E5%9F%BA%E6%9C%AC%E5%AE%9E%E7%8E%B0HTTPServer.html class=md-nav__link> <span class=md-ellipsis> 应用层协议HTTP </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../27.%20UDP%E5%8D%8F%E8%AE%AE%E5%8E%9F%E7%90%86/27.%20UDP%E5%8D%8F%E8%AE%AE%E5%8E%9F%E7%90%86.html class=md-nav__link> <span class=md-ellipsis> UDP协议原理 </span> </a> </li> <li class=md-nav__item> <a href=../28.%20TCP%E5%8D%8F%E8%AE%AE%E5%8E%9F%E7%90%86/28.%20TCP%E5%8D%8F%E8%AE%AE%E5%8E%9F%E7%90%86.html class=md-nav__link> <span class=md-ellipsis> TCP协议原理 </span> </a> </li> <li class=md-nav__item> <a href=../35.%20%E7%90%86%E8%A7%A3Linux%E5%A6%82%E4%BD%95%E7%9C%8B%E5%BE%85%E8%BF%9E%E6%8E%A5%E4%BB%A5%E5%8F%8ATCP%E5%85%A8%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97/35.%20%E7%90%86%E8%A7%A3Linux%E5%A6%82%E4%BD%95%E7%9C%8B%E5%BE%85%E8%BF%9E%E6%8E%A5%E4%BB%A5%E5%8F%8ATCP%E5%85%A8%E8%BF%9E%E6%8E%A5%E9%98%9F%E5%88%97.html class=md-nav__link> <span class=md-ellipsis> 理解Linux如何看待连接以及TCP全连接队列 </span> </a> </li> <li class=md-nav__item> <a href=../29.%20%E7%BD%91%E7%BB%9C%E5%B1%82IP%E5%8D%8F%E8%AE%AE/29.%20%E7%BD%91%E7%BB%9C%E5%B1%82IP%E5%8D%8F%E8%AE%AE.html class=md-nav__link> <span class=md-ellipsis> 网络层IP协议 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> 数据链路层协议 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=30.%20%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8D%8F%E8%AE%AE.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> 数据链路层协议 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 本篇介绍 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 局域网介绍 </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 以太网帧格式 </span> </a> <nav class=md-nav aria-label=以太网帧格式> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 基本介绍 </span> </a> </li> <li class=md-nav__item> <a href=#macmac class=md-nav__link> <span class=md-ellipsis> 目的MAC地址和源MAC地址 </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 类型 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 数据 </span> </a> </li> <li class=md-nav__item> <a href=#crc class=md-nav__link> <span class=md-ellipsis> CRC校验和 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 局域网通信与交换机 </span> </a> </li> <li class=md-nav__item> <a href=#arp class=md-nav__link> <span class=md-ellipsis> ARP协议 </span> </a> <nav class=md-nav aria-label=ARP协议> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 基本介绍 </span> </a> </li> <li class=md-nav__item> <a href=#arp_1 class=md-nav__link> <span class=md-ellipsis> ARP协议报 </span> </a> </li> <li class=md-nav__item> <a href=#arp_2 class=md-nav__link> <span class=md-ellipsis> ARP协议工作原理 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#rarp class=md-nav__link> <span class=md-ellipsis> RARP协议 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../36.%20DNS%E4%B8%8EICMP/36.%20DNS%E4%B8%8EICMP.html class=md-nav__link> <span class=md-ellipsis> DNS与ICMP </span> </a> </li> <li class=md-nav__item> <a href=../31.%20NAT%E6%8A%80%E6%9C%AF%E3%80%81%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%92%8C%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/31.%20NAT%E6%8A%80%E6%9C%AF%E3%80%81%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%92%8C%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F.html class=md-nav__link> <span class=md-ellipsis> NAT技术、代理服务器和内网穿透 </span> </a> </li> <li class=md-nav__item> <a href=../32.%20%E4%BA%94%E7%A7%8DIO%E6%A8%A1%E5%9E%8B%E4%B8%8Eselect%E5%92%8Cpoll%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0%E5%A4%9A%E8%B7%AF%E8%BD%AC%E6%8E%A5/32.%20%E4%BA%94%E7%A7%8DIO%E6%A8%A1%E5%9E%8B%E4%B8%8Eselect%E5%92%8Cpoll%E5%88%86%E5%88%AB%E5%AE%9E%E7%8E%B0%E5%A4%9A%E8%B7%AF%E8%BD%AC%E6%8E%A5.html class=md-nav__link> <span class=md-ellipsis> 五种IO模型与select和poll分别实现多路转接 </span> </a> </li> <li class=md-nav__item> <a href=../33.%20epoll%E5%AE%9E%E7%8E%B0%E5%A4%9A%E8%B7%AF%E8%BD%AC%E6%8E%A5/33.%20epoll%E5%AE%9E%E7%8E%B0%E5%A4%9A%E8%B7%AF%E8%BD%AC%E6%8E%A5.html class=md-nav__link> <span class=md-ellipsis> epoll实现多路转接 </span> </a> </li> <li class=md-nav__item> <a href=../34.%20Reactor%E6%A8%A1%E5%BC%8F%E4%B8%8E%E5%AE%8C%E5%96%84%E5%9F%BA%E4%BA%8E%E8%BE%B9%E7%BC%98%E8%A7%A6%E5%8F%91%E6%A8%A1%E5%BC%8Fepoll%E5%AE%9E%E7%8E%B0TCP%E6%9C%8D%E5%8A%A1%E5%99%A8/34.%20Reactor%E6%A8%A1%E5%BC%8F%E4%B8%8E%E5%AE%8C%E5%96%84%E5%9F%BA%E4%BA%8E%E8%BE%B9%E7%BC%98%E8%A7%A6%E5%8F%91%E6%A8%A1%E5%BC%8Fepoll%E5%AE%9E%E7%8E%B0TCP%E6%9C%8D%E5%8A%A1%E5%99%A8.html class=md-nav__link> <span class=md-ellipsis> Reactor模式与完善基于边缘触发模式epoll实现TCP服务器 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../HTML%E4%B8%8ECSS/HTML%E7%AC%94%E8%AE%B0/HTML%E7%AC%94%E8%AE%B0.html class=md-nav__link> <span class=md-ellipsis> 前端 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../MySQL/MySQL%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/MySQL%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8.html class=md-nav__link> <span class=md-ellipsis> MySQL </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../JavaEE/Spring/1.%20SpringMVC%E5%9F%BA%E7%A1%80/1.%20SpringMVC%E5%9F%BA%E7%A1%80.html class=md-nav__link> <span class=md-ellipsis> JavaEE应用开发 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../%E5%85%B6%E5%AE%83/Shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/%E5%85%B3%E4%BA%8EShell.html class=md-nav__link> <span class=md-ellipsis> 扩展知识 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../%E5%B7%A5%E5%85%B7%E5%B8%AE%E5%8A%A9/vscode%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/vscode%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5.html class=md-nav__link> <span class=md-ellipsis> 工具帮助 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../%E9%A1%B9%E7%9B%AE/1.%20Boost%E5%BA%93%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/1.%20Boost%E5%BA%93%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E.html class=md-nav__link> <span class=md-ellipsis> 项目 </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 本篇介绍 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 局域网介绍 </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 以太网帧格式 </span> </a> <nav class=md-nav aria-label=以太网帧格式> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 基本介绍 </span> </a> </li> <li class=md-nav__item> <a href=#macmac class=md-nav__link> <span class=md-ellipsis> 目的MAC地址和源MAC地址 </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 类型 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 数据 </span> </a> </li> <li class=md-nav__item> <a href=#crc class=md-nav__link> <span class=md-ellipsis> CRC校验和 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 局域网通信与交换机 </span> </a> </li> <li class=md-nav__item> <a href=#arp class=md-nav__link> <span class=md-ellipsis> ARP协议 </span> </a> <nav class=md-nav aria-label=ARP协议> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 基本介绍 </span> </a> </li> <li class=md-nav__item> <a href=#arp_1 class=md-nav__link> <span class=md-ellipsis> ARP协议报 </span> </a> </li> <li class=md-nav__item> <a href=#arp_2 class=md-nav__link> <span class=md-ellipsis> ARP协议工作原理 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#rarp class=md-nav__link> <span class=md-ellipsis> RARP协议 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=_1>数据链路层<a class=headerlink href=#_1 title="Permanent link">&para;</a></h1> <div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;"> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span> 约 4704 个字 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"/></svg></span> 6 张图片 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span> 预计阅读时间 16 分钟</p> </div> <h2 id=_2>本篇介绍<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <p>前面已经介绍过传输层协议和网络层协议，知道了传输层协议本身并不是发送数据的一方，而实际上发送数据的是IP协议。在IP协议中，可以通过路由表确定下一跳的位置，但是IP协议只是给出了路线，并没有决定着如何让当前数据走到下一个路由器。实际上，这一点IP协议也做不到，因为这个动作需要由网络层的下一层：数据链路层来完成。本篇就会针对数据链路层做出解释</p> <h2 id=_3>局域网介绍<a class=headerlink href=#_3 title="Permanent link">&para;</a></h2> <p>局域网，是网络发明史中第一个诞生的网络。只要是某一个范围内部的计算机想要进行网络通信就必须要局域网，所以在局域网这个概念刚诞生时，每一个组织内部都有<a href=javascript:; class=custom-tooltip data-title=即不同的局域网有不同的协议规定>属于自己的局域网</a>。随着时代的发展，最后使用最多的局域网就有了以太网，其他的还有例如<a href=javascript:; class=custom-tooltip data-title=令牌环网，就是局域网内持有一种「令牌」的计算机才可以发送消息，在一定程度上减小了数据碰撞问题>令牌环网</a>、无线网</p> <p>以太网本质上不算是一个单独的网路，而是局域网中的一个技术标准。其中既包含了数据链路层的内容，也包含了一些物理层的内容。例如规定了网络拓扑结构、访问控制方式、传输速率等。以太网之间的数据交互一般会使用双绞线，传输速率一般有10M、100M、1000M等</p> <details class=info> <summary>为什么叫「以太网」</summary> <p>以太网（Ethernet）的名字来源于19世纪物理学中的“以太”（Ether 或 Luminiferous Ether）概念。这个名字的由来与以太网技术的发明者和其历史背景密切相关。以下是详细的解释：</p> <ol> <li> <p><strong>物理学中的「以太」</strong>：在19世纪，物理学家认为宇宙中存在一种称为“以太”的介质，用于传播光波和其他电磁波。这种假设是为了解释光波如何在真空中传播，因为当时人们认为波需要某种介质才能传播（如声波需要空气作为介质）。虽然“以太”后来被爱因斯坦的相对论所否定，但它在科学史上曾经是一个重要的概念</p> </li> <li> <p><strong>以太网名字的灵感来源</strong>：以太网是由<strong>罗伯特·梅特卡夫（Robert Metcalfe）</strong>和他的团队在1973年于施乐帕洛阿尔托研究中心（Xerox PARC）开发的一种局域网技术。梅特卡夫在命名这项技术时，受到了“以太”这一概念的启发。在设计以太网时，梅特卡夫希望强调这种网络技术能够像“以太”一样，成为一种无形但无所不在的媒介，用于连接计算机并传输数据。他将这种网络命名为“Ethernet”，意指它是一种“承载数据的以太”，就像“以太”被认为是承载光波的介质一样</p> </li> <li> <p><strong>以太网的象征意义</strong>：以太网的名字不仅仅是一个科学隐喻，还体现了其设计目标：</p> <ol> <li><strong>无处不在</strong>：以太网的目标是创建一个通用的、高效的数据通信网络，类似于“以太”作为传播媒介的普遍性</li> <li><strong>透明性</strong>：以太网对用户来说是“透明”的，就像“以太”被认为是不可见但不可或缺的</li> </ol> </li> <li> <p><strong>以太网的发展</strong>：最初的以太网技术被称为“Alto Aloha Network”，后来梅特卡夫将其改名为“Ethernet”。这项技术基于一种叫做<strong>CSMA/CD（载波监听多路访问/冲突检测）</strong>的协议，能够在共享介质（如同轴电缆）上实现多台设备之间的通信</p> </li> </ol> </details> <p>因为现在大部分的局域网都使用的是以太网的标准，所以下面基于以太网进行具体介绍</p> <details> <summary>为什么现在大部分使用的是无线网，却还需要学以太网</summary> <p>无线网(Wi-Fi)与以太网虽然是不同的网络技术，但它们有着密切的关系和互补性：</p> <p><strong>技术层面的关系：</strong></p> <ol> <li> <p><strong>相似的网络层次</strong>：</p> <ul> <li>两者都工作在OSI模型的数据链路层</li> <li>无线网基于IEEE 802.11标准，以太网基于IEEE 802.3标准</li> <li>同属于局域网技术家族</li> </ul> </li> <li> <p><strong>架构上的连接</strong>：无线网络通常是以太网的<a href=javascript:; class=custom-tooltip data-title='"最后一公里"是电信和网络行业的关键概念，指从主干网络基础设施到最终用户设备之间的最后一段连接，这段连接历来是网络建设中成本最高、技术挑战最大的部分。在现代网络架构中，无线网络(Wi-Fi)成为了理想的"最后一公里"解决方案，因为它消除了为每个终端设备单独铺设物理线缆的需求，一个无线接入点可覆盖一定区域内的多个设备，而这些接入点本身则通过以太网连接到网络骨干。这种配置使得网络架构形成了"以太网作为骨干，无线网作为边缘"的层次结构，完美体现了两种技术的互补性：以太网提供稳定高速的主干连接，而无线网则解决了灵活性和移动性需求，共同构成了现代网络的完整解决方案'>"最后一公里"</a>连接。而无线接入点（AP）几乎都通过以太网连接到网络主干</p> </li> <li> <p><strong>数据帧转换</strong>：当数据从无线设备传输到有线网络时，无线接入点会将802.11帧转换为802.3(以太网)帧</p> </li> </ol> <p><strong>功能互补性：</strong></p> <ul> <li> <p><strong>应用场景互补</strong>：</p> <ul> <li>以太网提供稳定、高速的有线连接</li> <li>无线网提供移动性和灵活部署</li> </ul> </li> <li> <p><strong>核心与边缘</strong>：</p> <ul> <li>以太网常作为网络骨干</li> <li>无线网常作为边缘接入技术</li> </ul> </li> </ul> <p><strong>技术发展关系：</strong></p> <ul> <li><strong>技术继承</strong>：无线网络技术在设计时借鉴了以太网的许多概念</li> <li><strong>标准兼容</strong>：两种技术都设计为可以无缝互连</li> <li><strong>趋同发展</strong>：随着技术发展，两种技术在某些方面(如速率)趋于接近</li> </ul> <p>无线网并没有取代以太网，而是扩展了网络连接的方式。现代网络基础设施通常同时使用这两种技术，形成一个完整的网络解决方案</p> </details> <h2 id=_4>以太网帧格式<a class=headerlink href=#_4 title="Permanent link">&para;</a></h2> <h3 id=_5>基本介绍<a class=headerlink href=#_5 title="Permanent link">&para;</a></h3> <p>两个使用了以太网标准的局域网之间需要通信就需要有对应的协议，这一点在前面的概念中也有充分体现。在数据链路层，一般称有效载荷+报头的数据为数据帧，基本格式如下：</p> <p><a class=glightbox href="30. 数据链路层协议.assets/image-20250329100614679.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="30. 数据链路层协议.assets/image-20250329100614679.png"></a></p> <p>其中，根据类型的不同，数据大小也不同，一般常见的有下面三种：</p> <ol> <li>类型为0800，数据为IP数据报，数据大小为<strong>46字节到1500字节</strong></li> <li>类型为0806，数据为ARP请求/应答，数据大小为<strong>28字节</strong></li> <li>数据为8035，数据为RARP请求/应答，数据大小为<strong>28字节</strong></li> </ol> <p>下面针对每一个字段做出解释</p> <h3 id=macmac>目的MAC地址和源MAC地址<a class=headerlink href=#macmac title="Permanent link">&para;</a></h3> <p>局域网内通信需要使用到MAC地址，而数据需要从发送方传输到接收方就需要使用到目的MAC地址，接收方需要知道是哪一台主机发送的数据就需要使用源MAC地址。这一点的理解与网络层IP地址中的源IP地址和目的IP地址类似</p> <h3 id=_6>类型<a class=headerlink href=#_6 title="Permanent link">&para;</a></h3> <p>当前以太网协议的上一层协议类型，可能是数据链路层上层网络层的IP协议，也可能是当前数据链路层内以太网协议上方的ARP协议或者RARP协议</p> <h3 id=_7>数据<a class=headerlink href=#_7 title="Permanent link">&para;</a></h3> <p>在前面的协议报中并没有对数据进行具体说明，但是在以太网协议中，需要关注此处的数据，主要是关注大小。在讨论网络层IP协议时提到了IP分片和组装，而分片的依据就是其下层数据链路层中的MTU，那么什么是MTU呢？</p> <p>实际上，MTU就是此处数据链路层的最大数据大小，在Linux下，如果需要查看当前设备的MTU，可以使用<code>ifconfig</code>查看：</p> <p><a class=glightbox href="30. 数据链路层协议.assets/image-20250329101858059.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="30. 数据链路层协议.assets/image-20250329101858059.png"></a></p> <p>除了有MTU的概念外，还有一个MSS（Max Segment Size），二者的关系如下：</p> <p><a class=glightbox href="30. 数据链路层协议.assets/image-20250329102400675.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="30. 数据链路层协议.assets/image-20250329102400675.png"></a></p> <p>例如，以MTU=1500为例，IP报头+其数据部分总共大小在不想分片的情况下需要在46字节到1500字节以内，而对于IP协议来说，去除自己的报头后，剩下的数据大小实际上就只能是26字节到1480字节，即传输层的报头和数据部分总和大小在26字节到1480字节。其中的26字节到1480字节就是MSS大小</p> <h3 id=crc>CRC校验和<a class=headerlink href=#crc title="Permanent link">&para;</a></h3> <p>以太网帧中的CRC（循环冗余校验）是一个32位的校验码，位于数据帧的尾部，用于检测传输过程中可能发生的错误。发送方在传输前会根据帧内容（不含前导码）通过特定多项式计算出一个校验值，接收方收到数据后会对整个帧重新计算校验值并与接收到的CRC比较，如结果为零则认为数据完整，否则判定该帧已损坏并予以丢弃。CRC能有效检测单比特错误、双比特错误和所有奇数位错误，是以太网提供可靠通信的基础保障机制。这种设计简单高效、易于硬件实现，为数据链路层提供了必要的错误检测功能，虽不能纠正错误，但能识别损坏的数据，使上层协议得以采取适当措施。但是具体如何进行校验不是本篇讨论的重点</p> <h2 id=_8>局域网通信与交换机<a class=headerlink href=#_8 title="Permanent link">&para;</a></h2> <p>局域网通信的过程图如下：</p> <p><a class=glightbox href="30. 数据链路层协议.assets\download10.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="30. 数据链路层协议.assets\download10.png"></a></p> <p>之前提到过，局域网内任意两台计算机通信都会被其他计算机知道，只是其他计算机通过识别以太网帧格式发现不属于自己的数据默认选择抛弃该数据。对于这一点，如果想让当前计算机对于不论是否是给自己的消息都接收，就可以让当前计算机的网卡开启混杂模式</p> <details class=info> <summary>关于混杂模式</summary> <p>混杂模式（Promiscuous Mode）是网络接口卡（NIC）的一种特殊工作状态，开启混杂模式后，网卡会接收所有经过的数据包，而不仅仅是目的MAC地址为自己的数据包。在标准模式下，网卡只接收目的MAC地址是自己的帧或广播/多播帧</p> <p>基本工作原理为：在以太网环境中，所有连接到同一网段的设备都能"看到"传输的所有数据帧，但通常网卡会根据MAC地址过滤，只接收发给自己的帧。混杂模式则禁用了这个过滤机制</p> <p>在实际开发中一般会有一下应用：</p> <ol> <li><strong>网络监控和分析</strong>：网络管理员使用Wireshark等工具进行网络故障排查</li> <li><strong>网络安全审计</strong>：检测网络中的异常流量和安全威胁</li> <li><strong>网络入侵检测系统（IDS）</strong>：监控网络流量以发现潜在攻击</li> <li><strong>数据包嗅探</strong>：捕获网络中传输的数据，也可被滥用于非法监听</li> </ol> <p>但是也可能存在以下的安全隐患：</p> <ul> <li>可被恶意用户用于捕获网络中的敏感数据</li> <li>在交换式网络中效果有限，因为交换机会定向转发数据</li> <li>可能被用于ARP欺骗等网络攻击的基础</li> </ul> <p>一般用户不需要启用混杂模式，这通常需要管理员权限，并且主要用于网络诊断和安全分析等专业场景</p> </details> <p>同时也提到过，如果有多台计算机同时发送消息就很有可能出现数据碰撞，所以为了保证碰撞概率尽可能小，就需要保证局域网内部的计算机较少，同时确保数据帧的大小在合理的范围内（如果太小，可能两台计算机通信的频次就会比较高，如果太大，那么发送方就会花太长时间发送，如果出现数据丢失还需要重新传输，整体开销大），这就是为什么MTU规定上限为1500字节，下限是46字节。在局域网内部如果存在少量的计算机，那么出现碰撞问题，可以考虑让指定的计算机休眠，等待一段时间后再重新发送数据，这就是数据链路层的数据重传，但是这个重传并不是超时重传，为了尽可能不出现碰撞，在一个局域网内部需要保证任何时刻只有一台计算机使用整个局域网</p> <p>但是，现实中一定存在一个局域网内的计算机很多，例如一家公司的服务器，所以为了减少碰撞就提出了<strong>划分碰撞域</strong>的概念，而具有划分碰撞域能力的设备就是<strong>交换机</strong>，实现划分碰撞域的过程如下：</p> <p><a class=glightbox href="30. 数据链路层协议.assets/image-20250329105639342.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="30. 数据链路层协议.assets/image-20250329105639342.png"></a></p> <p>将所有主机链接到交换机上，假设现在主机1需要给主机5发送数据，在刚开始时，局域网内所有的计算机（包括交换机）都会收到这个数据，只是除了主机5以外都会抛弃这个数据，但是交换机会慢慢“学习”发送方和接收方的位置。一段时间后，交换机知道了主机1、2和3都在其左侧，主机4和5都在其右侧，之后主机1再给主机5发送数据，交换机会查看主机5是否与主机1在同一侧，如果不在，就将数据转发到另外一侧。整个过程中始终还是局域网通信，所以交换机的判断方式还是通过MAC地址</p> <p>有了交换机中，原来五台主机共同组成的一个大碰撞域就被划分成了两个小碰撞域，在一定程度上减少了碰撞的概率</p> <h2 id=arp>ARP协议<a class=headerlink href=#arp title="Permanent link">&para;</a></h2> <h3 id=_9>基本介绍<a class=headerlink href=#_9 title="Permanent link">&para;</a></h3> <p>在本篇最开始的介绍部分提到过，IP协议只负责指出下一跳，并不负责数据的运输，而数据的运输是通过数据链路层完成的，所以就有了一个结论：<strong>物理上，跑在网路上的数据都是数据帧；逻辑上是IP数据报</strong>。不过，IP协议虽然给出了下一跳的地址，但是这个地址是IP地址，而局域网通信必须要MAC地址，如果没有MAC地址，就无法完成网络层的数据到数据链路层的封装，例如发送方发现当前数据需要发送给不属于当前局域网的主机，就需要将数据交给路由器，发送方只知道路由器的IP地址，怎么知道路由器的MAC地址</p> <p>这里就需要用到<strong>ARP协议</strong>，ARP协议是工作在数据链路层中位于以太网协议上层的协议，其作用就是<strong>通过目标主机的IP地址获取到目标主机的MAC地址</strong></p> <h3 id=arp_1>ARP协议报<a class=headerlink href=#arp_1 title="Permanent link">&para;</a></h3> <p>为了了解ARP协议的工作模式，首先需要了解的就是ARP协议报格式，如下图所示：</p> <p><a class=glightbox href="30. 数据链路层协议.assets/image-20250329112608897.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="30. 数据链路层协议.assets/image-20250329112608897.png"></a></p> <p>在ARP协议中，每个字段含义如下：</p> <ul> <li><strong>硬件类型</strong>：指链路层网络类型，1为以太网</li> <li><strong>协议类型</strong>：指要转换的地址类型（上层协议），<code>0x0800</code>为IP地址</li> <li><strong>硬件地址长度</strong>：对于以太网地址为6字节</li> <li><strong>协议地址长度</strong>：对于IP地址为4字节</li> <li><strong>操作字段</strong>：1表示ARP请求，2表示ARP应答</li> </ul> <h3 id=arp_2>ARP协议工作原理<a class=headerlink href=#arp_2 title="Permanent link">&para;</a></h3> <p>当发送方需要给局域网内部的目标主机发送消息，需要知道MAC地址，此时会发送一个填好相关值的ARP请求（需要注意的是，因为发起ARP请求方不知道目标MAC地址，所以以太网首部的目的MAC地址和ARP请求中的目的MAC地址均为<code>FFFFFFFFFFFF</code>）。因为局域网内通信，数据会被每一台计算机接收，只是不是目标主机不会向上层交付，而这个过程中，非目标主机<strong>首先会对这个数据帧进行解包，获取到ARP协议报之后看操作字段为1还是为2，因为一台计算机除了会收到ARP请求以外，还会收到ARP应答</strong>，接着判断目的IP地址是否是自己，如果不是就抛弃</p> <p>当遇到目标主机，同样执行上面的步骤，接着，会在发送方MAC地址填入自己的MAC地址，目的MAC地址填入源发送方的MAC地址，最后封装为数据帧发送给源发送方</p> <div class="admonition note"> <p class=admonition-title>ARP请求和应答是否都会被所有计算机看到</p> <p>注意，在上面的请求和应答过程中，ARP请求和应答<strong>在物理层面都会被局域网内所有设备看到</strong>，但是因为ARP请求部分目的MAC地址为广播地址，所以非目标主机需要交付给数据链路层中的上层处理，但是ARP应答部分目的MAC地址为具体值，非目标主机判断这个MAC地址不是自己直接会直接抛弃，而不会交付给数据链路层中的上层处理</p> </div> <p>最后，源发送方收到目标主机发送的ARP应答（操作字段为2），就会提取其中的<strong>发送方MAC地址字段</strong></p> <p>如果每一次通信都需要发送ARP协议来确定一个局域网内对方的MAC地址，那么效率会有点低，所以一般情况下一台设备在第一次获取到目标主机的ARP应答时都会对这个目标主机的MAC地址进行缓存。但是这个缓存并不是永久性的，一般是30分钟及以上，具体取决于不同的操作系统</p> <h2 id=rarp>RARP协议<a class=headerlink href=#rarp title="Permanent link">&para;</a></h2> <p>ARP（地址解析协议）和RARP（反向地址解析协议）是一对功能互补但方向相反的数据链路层协议，关系如下表：</p> <table> <thead> <tr> <th>特性</th> <th>ARP</th> <th>RARP</th> </tr> </thead> <tbody> <tr> <td>主要功能</td> <td>将IP地址解析为MAC地址</td> <td>将MAC地址解析为IP地址</td> </tr> <tr> <td>应用场景</td> <td>已知目标IP地址，需要获取其MAC地址以发送数据帧</td> <td>设备知道自己的MAC地址，但需要获取自己的IP地址</td> </tr> <tr> <td>协议类型值</td> <td>0806</td> <td>8035</td> </tr> <tr> <td>使用时机</td> <td>正常网络通信时持续使用</td> <td>主要在无盘工作站启动或某些特殊设备初始化时使用</td> </tr> </tbody> </table> <p>工作原理对比如下：</p> <ul> <li><strong>ARP过程</strong>：发送方广播“谁拥有这个IP地址?”，拥有该IP的设备回应自己的MAC地址</li> <li><strong>RARP过程</strong>：发送方广播“我的MAC地址是这个，我的IP地址是什么?”，RARP服务器回应分配给该MAC的IP地址</li> </ul> <p>但是，RARP已基本被DHCP（动态主机配置协议）取代，因为DHCP不仅能分配IP地址，还能提供更多网络配置信息，如子网掩码、默认网关和DNS服务器地址等</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2025年3月30日</span> </span> <span class=md-source-file__fact> <span class=md-icon title=创建日期> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2025年3月29日</span> </span> </aside> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> 页面有帮助吗？ </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title=页面对我有帮助 data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title=页面没有帮助到我 data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> 谢谢你的反馈！ </div> <div data-md-value=0 hidden> 谢谢你的反馈！联系<a href=https://www.help-doc.top/%E4%BD%9C%E8%80%85/%E4%BD%9C%E8%80%85.html>作者</a>提供更详细的信息 </div> </div> </div> </fieldset> </form> <!-- 阅读进度条 - 直接在HTML中定义 --> <div class=reading-progress></div> <!-- 滚动指示器 - 直接在HTML中定义 --> <div class=scroll-indicator></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Footer --> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2024-2025 柯懒不是柯南 </div> </div> <!-- "一闪一闪亮晶晶"元素 - 插入在copyright和social之间 --> <div class="md-footer-love md-typeset"> 一闪一闪亮晶晶，不及<span class=love-highlight>小亮</span><span class=love-heart>♥</span>照我心。To Li Liang </div> <div class=md-social> <a href=https://github.com/H0308 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.help-doc.top/%E4%BD%9C%E8%80%85/%E4%BD%9C%E8%80%85.html target=_blank rel=noopener title=www.help-doc.top class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.indexes", "navigation.prune", "navigation.tabs", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src=../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../javascripts/katex.min.js></script> <script src=../../javascripts/other.min.js></script> <script src=../../javascripts/copyright.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js></script> <script src=../../assets/javascripts/toggle-sidebar.js async></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>