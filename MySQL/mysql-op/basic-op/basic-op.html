<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://www.help-doc.top/MySQL/mysql-op/basic-op/basic-op.html><link rel=prev href=../index.html><link rel=next href=../index-routine/index-routine.html><link rel=icon href=../../../images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.12"><title>MySQL基础操作 - 柯懒的知识库</title><link rel=stylesheet href=../../../assets/stylesheets/main.2afb09e1.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><link rel=stylesheet href=../../../css/timeline.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-9XWRGNRRSY"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-9XWRGNRRSY",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-9XWRGNRRSY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=preload href=../../../stylesheets/colors.min.css as=style><link rel=preload href=../../../stylesheets/theme2.min.css as=style><link rel=preload href=../../../javascripts/start.min.js as=script><link rel=preload href=../../../assets/logo.png as=image><link rel=preload href=../../../images/favicon.png as=image><link rel=preload href=../../../author/作者.assets/20250206-200653.jpg as=image><link rel=dns-prefetch href=//unpkg.com><link rel=dns-prefetch href=//cloud.umami.is><link rel=stylesheet href=../../../stylesheets/colors.min.css><link rel=stylesheet href=../../../stylesheets/theme2.min.css media="screen and (max-width: 1199px)"><link rel=stylesheet href=../../../stylesheets/theme1.min.css media="screen and (min-width: 1200px)"><link rel=stylesheet href=../../../stylesheets/theme2.min.css media="screen and (min-width: 1200px)"><link rel=stylesheet href=../../../stylesheets/print.min.css><link rel=stylesheet href=https://unpkg.com/@waline/client@v3/dist/waline.css><link rel=stylesheet href=../../../stylesheets/waline.min.css><script src=../../../javascripts/start.min.js></script><script defer src=https://cloud.umami.is/script.js data-website-id=02f9b8b7-93d4-4026-bdd8-221f2fcea2cf></script> <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#mysql class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../../index.html title=柯懒的知识库 class="md-header__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 柯懒的知识库 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> MySQL基础操作 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan aria-label type=radio name=__palette id=__palette_1> </form> <div class=header-avatar> <img src=../../../author/作者.assets/20250206-200653.jpg alt=头像> <div class=avatar-dropdown> <p><strong>柯懒不是柯南</strong></p> <a href=../../../author/contact/contact.html class=avatar-dropdown-item>联系作者</a> <div class=avatar-dropdown-divider></div> <a href=../../../author/about/about.html class=avatar-dropdown-item>关于作者</a> <div class=avatar-dropdown-divider></div> <a href=https://github.com/H0308 class=avatar-dropdown-item>Github仓库</a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=查找> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <!-- 返回顶部按钮 --> <div class=back-to-top-btn id=backToTopBtn onclick="window.scrollTo({top: 0})"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg> <path fill=currentColor d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/> </svg> </div> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../index.html class=md-tabs__link> 主页 </a> </li> <li class=md-tabs__item> <a href=../../../timeline/timeline.html class=md-tabs__link> 网站时间线 </a> </li> <li class=md-tabs__item> <a href=../../../languages/index.html class=md-tabs__link> 编程语言 </a> </li> <li class=md-tabs__item> <a href=../../../data-structure-algo/index.html class=md-tabs__link> 数据结构与算法 </a> </li> <li class=md-tabs__item> <a href=../../../Linux/index.html class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../../front-end/index.html class=md-tabs__link> 前端 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../index.html class=md-tabs__link> MySQL </a> </li> <li class=md-tabs__item> <a href=../../../JavaEE/index.html class=md-tabs__link> JavaEE应用开发 </a> </li> <li class=md-tabs__item> <a href=../../../software-test/index.html class=md-tabs__link> 软件测试 </a> </li> <li class=md-tabs__item> <a href=../../../other/index.html class=md-tabs__link> 扩展知识 </a> </li> <li class=md-tabs__item> <a href=../../../tooltips/index.html class=md-tabs__link> 工具帮助 </a> </li> <li class=md-tabs__item> <a href=../../../test-encrypt/test-encrypt.html class=md-tabs__link> 测试加密功能 </a> </li> <li class=md-tabs__item> <a href=../../../projects/index.html class=md-tabs__link> 项目 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../index.html title=柯懒的知识库 class="md-nav__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../../assets/logo.png alt=logo> </a> 柯懒的知识库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../index.html class=md-nav__link> <span class=md-ellipsis> 主页 </span> </a> </li> <li class=md-nav__item> <a href=../../../timeline/timeline.html class=md-nav__link> <span class=md-ellipsis> 网站时间线 </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../languages/index.html class=md-nav__link> <span class=md-ellipsis> 编程语言 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../data-structure-algo/index.html class=md-nav__link> <span class=md-ellipsis> 数据结构与算法 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../Linux/index.html class=md-nav__link> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../front-end/index.html class=md-nav__link> <span class=md-ellipsis> 前端 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7 checked> <div class="md-nav__link md-nav__container"> <a href=../../index.html class="md-nav__link "> <span class=md-ellipsis> MySQL </span> </a> <label class="md-nav__link " for=__nav_7 id=__nav_7_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=true> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> MySQL </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_2 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> MySQL操作 </span> </a> <label class="md-nav__link " for=__nav_7_2 id=__nav_7_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_2_label aria-expanded=true> <label class=md-nav__title for=__nav_7_2> <span class="md-nav__icon md-icon"></span> MySQL操作 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> MySQL基础操作 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=basic-op.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> MySQL基础操作 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=本节目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 本节目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 文档约定 </span> </a> </li> <li class=md-nav__item> <a href=#mysql_1 class=md-nav__link> <span class=md-ellipsis> MySQL中的注释 </span> </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 显示当前数据库 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 创建数据库 </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 使用数据库 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 删除数据库 </span> </a> </li> <li class=md-nav__item> <a href=#mysql_2 class=md-nav__link> <span class=md-ellipsis> MySQL中常用的数据类型 </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 显示数据库中的表 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 查看表结构 </span> </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 创建表 </span> </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 删除表 </span> </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 表中新增数据 </span> </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 表中查询数据 </span> </a> <nav class=md-nav aria-label=表中查询数据> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 全列查询 </span> </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 指定列查询 </span> </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 查询字段为表达式 </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 别名 </span> </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 查询结果去重 </span> </a> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> <span class=md-ellipsis> 查询结果排序 </span> </a> </li> <li class=md-nav__item> <a href=#_18 class=md-nav__link> <span class=md-ellipsis> 条件查询 </span> </a> </li> <li class=md-nav__item> <a href=#_19 class=md-nav__link> <span class=md-ellipsis> 分页查询 </span> </a> </li> <li class=md-nav__item> <a href=#_20 class=md-nav__link> <span class=md-ellipsis> 排序、条件、分页的书写顺序 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_21 class=md-nav__link> <span class=md-ellipsis> 表中修改数据 </span> </a> </li> <li class=md-nav__item> <a href=#_22 class=md-nav__link> <span class=md-ellipsis> 表中删除数据 </span> </a> </li> <li class=md-nav__item> <a href=#_23 class=md-nav__link> <span class=md-ellipsis> 表的约束 </span> </a> </li> <li class=md-nav__item> <a href=#_24 class=md-nav__link> <span class=md-ellipsis> 表的关系 </span> </a> </li> <li class=md-nav__item> <a href=#_25 class=md-nav__link> <span class=md-ellipsis> 聚合函数 </span> </a> </li> <li class=md-nav__item> <a href=#_26 class=md-nav__link> <span class=md-ellipsis> 分组查询 </span> </a> </li> <li class=md-nav__item> <a href=#_27 class=md-nav__link> <span class=md-ellipsis> 联合查询 </span> </a> <nav class=md-nav aria-label=联合查询> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_28 class=md-nav__link> <span class=md-ellipsis> 笛卡尔积 </span> </a> </li> <li class=md-nav__item> <a href=#_29 class=md-nav__link> <span class=md-ellipsis> 内连接 </span> </a> </li> <li class=md-nav__item> <a href=#_30 class=md-nav__link> <span class=md-ellipsis> 外连接 </span> </a> </li> <li class=md-nav__item> <a href=#_31 class=md-nav__link> <span class=md-ellipsis> 自连接 </span> </a> </li> <li class=md-nav__item> <a href=#_32 class=md-nav__link> <span class=md-ellipsis> 子查询（嵌套查询） </span> </a> </li> <li class=md-nav__item> <a href=#_33 class=md-nav__link> <span class=md-ellipsis> 合并查询 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../index-routine/index-routine.html class=md-nav__link> <span class=md-ellipsis> MySQL索引与事务 </span> </a> </li> <li class=md-nav__item> <a href=../install-uninstall-mysql-ubuntu/install-uninstall-mysql-ubuntu.html class=md-nav__link> <span class=md-ellipsis> Ubuntu下安装和卸载MySQL </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../JDBC/index.html class=md-nav__link> <span class=md-ellipsis> JDBC（Java连接数据库技术） </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../JavaEE/index.html class=md-nav__link> <span class=md-ellipsis> JavaEE应用开发 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../software-test/index.html class=md-nav__link> <span class=md-ellipsis> 软件测试 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../other/index.html class=md-nav__link> <span class=md-ellipsis> 扩展知识 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../tooltips/index.html class=md-nav__link> <span class=md-ellipsis> 工具帮助 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../test-encrypt/test-encrypt.html class=md-nav__link> <span class=md-ellipsis> 测试加密功能 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../projects/index.html class=md-nav__link> <span class=md-ellipsis> 项目 </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=本节目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 本节目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 文档约定 </span> </a> </li> <li class=md-nav__item> <a href=#mysql_1 class=md-nav__link> <span class=md-ellipsis> MySQL中的注释 </span> </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 显示当前数据库 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 创建数据库 </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 使用数据库 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 删除数据库 </span> </a> </li> <li class=md-nav__item> <a href=#mysql_2 class=md-nav__link> <span class=md-ellipsis> MySQL中常用的数据类型 </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 显示数据库中的表 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 查看表结构 </span> </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 创建表 </span> </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 删除表 </span> </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 表中新增数据 </span> </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 表中查询数据 </span> </a> <nav class=md-nav aria-label=表中查询数据> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 全列查询 </span> </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 指定列查询 </span> </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 查询字段为表达式 </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 别名 </span> </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 查询结果去重 </span> </a> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> <span class=md-ellipsis> 查询结果排序 </span> </a> </li> <li class=md-nav__item> <a href=#_18 class=md-nav__link> <span class=md-ellipsis> 条件查询 </span> </a> </li> <li class=md-nav__item> <a href=#_19 class=md-nav__link> <span class=md-ellipsis> 分页查询 </span> </a> </li> <li class=md-nav__item> <a href=#_20 class=md-nav__link> <span class=md-ellipsis> 排序、条件、分页的书写顺序 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_21 class=md-nav__link> <span class=md-ellipsis> 表中修改数据 </span> </a> </li> <li class=md-nav__item> <a href=#_22 class=md-nav__link> <span class=md-ellipsis> 表中删除数据 </span> </a> </li> <li class=md-nav__item> <a href=#_23 class=md-nav__link> <span class=md-ellipsis> 表的约束 </span> </a> </li> <li class=md-nav__item> <a href=#_24 class=md-nav__link> <span class=md-ellipsis> 表的关系 </span> </a> </li> <li class=md-nav__item> <a href=#_25 class=md-nav__link> <span class=md-ellipsis> 聚合函数 </span> </a> </li> <li class=md-nav__item> <a href=#_26 class=md-nav__link> <span class=md-ellipsis> 分组查询 </span> </a> </li> <li class=md-nav__item> <a href=#_27 class=md-nav__link> <span class=md-ellipsis> 联合查询 </span> </a> <nav class=md-nav aria-label=联合查询> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_28 class=md-nav__link> <span class=md-ellipsis> 笛卡尔积 </span> </a> </li> <li class=md-nav__item> <a href=#_29 class=md-nav__link> <span class=md-ellipsis> 内连接 </span> </a> </li> <li class=md-nav__item> <a href=#_30 class=md-nav__link> <span class=md-ellipsis> 外连接 </span> </a> </li> <li class=md-nav__item> <a href=#_31 class=md-nav__link> <span class=md-ellipsis> 自连接 </span> </a> </li> <li class=md-nav__item> <a href=#_32 class=md-nav__link> <span class=md-ellipsis> 子查询（嵌套查询） </span> </a> </li> <li class=md-nav__item> <a href=#_33 class=md-nav__link> <span class=md-ellipsis> 合并查询 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=mysql>MySQL基础操作<a class=headerlink href=#mysql title="Permanent link">&para;</a></h1> <div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;"> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span> 约 6308 个字 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"/></svg></span> 265 行代码 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"/></svg></span> 1 张图片 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span> 预计阅读时间 24 分钟</p> </div> <h2 id=_1>文档约定<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <ol> <li>在MySQL中并不区分大小写，后续关于MySQL的代码都以小写为主</li> <li>在MySQL中字符串可以用单引号表示，也可以用双引号表示，后续关于字符串除特殊情况外都会以单引号表示</li> </ol> <h2 id=mysql_1>MySQL中的注释<a class=headerlink href=#mysql_1 title="Permanent link">&para;</a></h2> <p>MySQL中支持两种注释：</p> <ol> <li>单行注释：使用<code>--</code>或者<code>#</code>。<strong>需要注意，使用<code>--</code>时后面必须跟一个空格才能被识别为注释</strong></li> <li>多行注释：使用<code>/**/</code></li> </ol> <h2 id=_2>显示当前数据库<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <p>操作如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><span class=k>show</span><span class=w> </span><span class=n>databases</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_3>创建数据库<a class=headerlink href=#_3 title="Permanent link">&para;</a></h2> <p>基本语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><span class=k>create</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=err>数据库名</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>数据库名不能和已有的数据库名重复，数据库名在Windows下不区分大小写，但是Linux下区分大小写，因为数据库本身实际上就是一个文件。如果数据库名与SQL中的关键字重名，则在创建数据库时可以使用反引号包裹数据库名，例如：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><span class=c1>-- 创建名为order的数据库</span>
</span><span id=__span-2-2><span class=k>create</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=o>`</span><span class=k>order</span><span class=o>`</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> </div> <p>在MySQL 5.7中，数据库默认的字符集为拉丁文，如果存储中文数据就会出现乱码，解决方式就是在创建数据库时指定字符集：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-3-1><span class=c1>-- 指定字符集为UTF-8</span>
</span><span id=__span-3-2><span class=k>create</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=err>数据库名</span><span class=w> </span><span class=n>charset</span><span class=w> </span><span class=n>utf8</span><span class=p>;</span>
</span><span id=__span-3-3><span class=c1>-- charset也可以写作character set</span>
</span></code></pre></div></td></tr></table></div> <p>在MySQL8.0中，默认的字符集就是UTF-8，所以可以不用额外指定字符集</p> <p>但是需要注意的是，MySQL中的UTF-8是“残血版”，即一部分UTF-8中的字符并不支持，所以MySQL还提供<code>utf8mb4</code>，但是这个字符集是MySQL独有的，如果是其他数据库，则无法正常识别该字符集</p> <p>创建数据库时还可以指定条件：如果创建的数据库已经存在，则不继续创建并提示<code>database exists</code>（不指定条件时会报错为<code>database exists</code>），否则就创建，这个条件就可以使用<code>if not exists</code>来表示，语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-4-1><span class=k>create</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=err>数据库名</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>例如创建一个<code>test</code>数据库：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-5-1><span class=k>create</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=n>test</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_4>使用数据库<a class=headerlink href=#_4 title="Permanent link">&para;</a></h2> <p>操作如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-6-1><span class=n>use</span><span class=w> </span><span class=err>数据库名</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_5>删除数据库<a class=headerlink href=#_5 title="Permanent link">&para;</a></h2> <p>基本语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1><span class=k>drop</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=err>数据库名</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>也可以指定简单的条件：如果删除的数据库存在，则删除，否则不处理并提示<code>database doesn't exist</code>（不指定条件时会报错<code>database doesn't exist</code>），这个条件就可以使用<code>if exists</code>来表示，语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-8-1><span class=k>drop</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=err>数据库名</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>例如删除<code>test</code>数据库：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-9-1><span class=k>drop</span><span class=w> </span><span class=k>database</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=n>test</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>删除数据库是非常危险的操作，所以删除时一定要格外小心</p> </div> <h2 id=mysql_2>MySQL中常用的数据类型<a class=headerlink href=#mysql_2 title="Permanent link">&para;</a></h2> <p>在MySQL中，数据类型分为三种：</p> <ol> <li>数值类型（整型和浮点型）</li> <li>字符串类型</li> <li>日期类型</li> </ol> <p>每一种类型包含的具体类型如下表：</p> <div class="tabbed-set tabbed-alternate" data-tabs=1:3><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><input id=__tabbed_1_3 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>数值类型</label><label for=__tabbed_1_2>字符串类型</label><label for=__tabbed_1_3>日期类型</label></div> <div class=tabbed-content> <div class=tabbed-block> <table> <thead> <tr> <th>数据类型</th> <th>大小</th> <th>说明</th> <th>对应Java包装类型</th> </tr> </thead> <tbody> <tr> <td><code>BIT(M)</code></td> <td><code>M</code>指定位数，默认为1</td> <td>二进制数，<code>M</code>范围从1到64，存储数值范围从0到<span class=arithmatex>\(2^M - 1\)</span></td> <td>常用<code>Boolean</code>对应<code>BIT</code>，此时默认是1位，即只能存0和1</td> </tr> <tr> <td><code>TINYINT</code></td> <td>1字节</td> <td></td> <td><code>Byte</code></td> </tr> <tr> <td><code>SMALLINT</code></td> <td>2字节</td> <td></td> <td><code>Short</code></td> </tr> <tr> <td><code>INT</code></td> <td>4字节</td> <td></td> <td><code>Integer</code></td> </tr> <tr> <td><code>BIGINT</code></td> <td>8字节</td> <td></td> <td><code>Long</code></td> </tr> <tr> <td><code>FLOAT(M,D)</code></td> <td>4字节</td> <td>单精度，<code>M</code>指定长度，<code>D</code>指定小数位数。会发生精度丢失</td> <td><code>Float</code></td> </tr> <tr> <td><code>DOUBLE(M,D)</code></td> <td>8字节</td> <td></td> <td><code>Double</code></td> </tr> <tr> <td><code>DECIMAL(M,D)</code></td> <td><code>(M, D)</code>可以表示的最大值，例如<code>DECIMAL(5, 2)</code>最大值为999.99</td> <td>双精度，<code>M</code>指定长度，<code>D</code>表示小数点位数。精确数值</td> <td><code>BigDecimal</code></td> </tr> <tr> <td><code>NUMERIC(M,D)</code></td> <td><code>(M, D)</code>可以表示的最大值</td> <td>和<code>DECIMAL</code>一样</td> <td><code>BigDecimal</code></td> </tr> </tbody> </table> </div> <div class=tabbed-block> <table> <thead> <tr> <th>数据类型</th> <th>大小</th> <th>说明</th> <th>对应Java类型</th> </tr> </thead> <tbody> <tr> <td><code>VARCHAR(SIZE)</code></td> <td>0-65,535字节</td> <td>可变长度字符串</td> <td><code>String</code></td> </tr> <tr> <td><code>TEXT</code></td> <td>0-65,535字节</td> <td>长文本数据</td> <td><code>String</code></td> </tr> <tr> <td><code>MEDIUMTEXT</code></td> <td>0-16777215字节</td> <td>中等长度文本数据</td> <td><code>String</code></td> </tr> <tr> <td><code>BLOB</code></td> <td>0-65,535字节</td> <td>二进制形式的长文本数据</td> <td><code>byte[]</code></td> </tr> </tbody> </table> <div class="admonition note"> <p class=admonition-title>Note</p> <p>注意，<code>VARCHAR(SIZE)</code>中的<code>SIZE</code>单位为字符而不是字节，例如<code>varchar(5)</code>表示可以存储5个字符</p> </div> </div> <div class=tabbed-block> <table> <thead> <tr> <th>数据类型</th> <th>大小</th> <th>说明</th> <th>对应Java类型</th> </tr> </thead> <tbody> <tr> <td><code>DATETIME</code></td> <td>8字节</td> <td>范围从1000到9999年，不会进行时区的检索及转换</td> <td><code>java.util.Date</code>、<code>java.sql.Timestamp</code></td> </tr> <tr> <td><code>TIMESTAMP</code></td> <td>4字节</td> <td>范围从1970到2038年，自动检索当前时区并进行转换</td> <td><code>java.util.Date</code>、<code>java.sql.Timestamp</code></td> </tr> </tbody> </table> </div> </div> </div> <h2 id=_6>显示数据库中的表<a class=headerlink href=#_6 title="Permanent link">&para;</a></h2> <p>操作如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-10-1><span class=c1>-- 需要先使用数据库</span>
</span><span id=__span-10-2><span class=k>show</span><span class=w> </span><span class=n>tables</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_7>查看表结构<a class=headerlink href=#_7 title="Permanent link">&para;</a></h2> <p>操作如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-11-1><span class=k>desc</span><span class=w> </span><span class=err>表名</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_8>创建表<a class=headerlink href=#_8 title="Permanent link">&para;</a></h2> <p>基本语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-12-1><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=err>表名</span><span class=p>(</span><span class=err>列名</span><span class=mi>1</span><span class=w> </span><span class=err>类型</span><span class=p>,</span><span class=w> </span><span class=err>列名</span><span class=mi>2</span><span class=w> </span><span class=err>类型</span><span class=p>,</span><span class=w> </span><span class=p>...);</span>
</span></code></pre></div></td></tr></table></div> <p>可以在创建表时使用<code>comment</code>指定注释：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-13-1><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=err>表名</span><span class=p>(</span>
</span><span id=__span-13-2><span class=w>    </span><span class=err>列名</span><span class=mi>1</span><span class=w> </span><span class=err>类型</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;注释内容&#39;</span><span class=p>,</span><span class=w> </span>
</span><span id=__span-13-3><span class=w>    </span><span class=err>列名</span><span class=mi>2</span><span class=w> </span><span class=err>类型</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;注释内容&#39;</span><span class=p>,</span><span class=w> </span>
</span><span id=__span-13-4><span class=w>    </span><span class=p>...</span>
</span><span id=__span-13-5><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> <p>例如创建一个<code>student</code>表：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-14-1><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>student</span><span class=p>(</span>
</span><span id=__span-14-2><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;学生id&#39;</span><span class=p>,</span>
</span><span id=__span-14-3><span class=w>    </span><span class=n>name</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;学生姓名&#39;</span><span class=p>,</span>
</span><span id=__span-14-4><span class=w>    </span><span class=n>age</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;学生年龄&#39;</span><span class=p>,</span>
</span><span id=__span-14-5><span class=w>    </span><span class=n>gender</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;学生性别&#39;</span>
</span><span id=__span-14-6><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> <p>创建表时也可以指定简单的条件：不存在指定的表就创建，否则不创建（不指定条件时报错<code>Table '表名' already exists</code>），可以使用<code>if not exists</code>表示该条件，如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-15-1><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=err>表名</span><span class=p>(</span>
</span><span id=__span-15-2><span class=w>    </span><span class=err>列名</span><span class=mi>1</span><span class=w> </span><span class=err>类型</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;注释内容&#39;</span><span class=p>,</span><span class=w> </span>
</span><span id=__span-15-3><span class=w>    </span><span class=err>列名</span><span class=mi>2</span><span class=w> </span><span class=err>类型</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;注释内容&#39;</span><span class=p>,</span><span class=w> </span>
</span><span id=__span-15-4><span class=w>    </span><span class=p>...</span>
</span><span id=__span-15-5><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_9>删除表<a class=headerlink href=#_9 title="Permanent link">&para;</a></h2> <p>基本语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-16-1><span class=k>drop</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=err>表名</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>也可以指定简单的条件：存在指定的表就删除，否则不删除（不指定条件时报错<code>Unknown table '数据库名.表名'</code>），可以使用<code>if exists</code>表示该条件，如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-17-1><span class=k>drop</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=err>表名</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>可以删除多个表：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-18-1><span class=k>drop</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=err>表名</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=err>表名</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=p>...;</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_10>表中新增数据<a class=headerlink href=#_10 title="Permanent link">&para;</a></h2> <p>基本语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-19-1><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=s1>&#39;数据&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;数据&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;数据&#39;</span><span class=p>,</span><span class=w> </span><span class=p>...);</span>
</span><span id=__span-19-2><span class=c1>-- 单列数据values可以用value代替</span>
</span></code></pre></div></td></tr></table></div> <p>在这种写法下，MySQL会自动将数据插入到对应的列中</p> <p>对于插入的数据类型来说，满足或者可以隐式类型转换到列类型，例如列类型为整型，数据类型可以为整型数据或者可以转换为整型的字符串（例如<code>'123'</code>，注意不可以是<code>123aa</code>等包含无法转换为数字的字符）</p> <p>也可以指定插入的列：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-20-1><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=p>(</span><span class=err>列名</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=err>列名</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=err>列名</span><span class=mi>3</span><span class=p>)</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=s1>&#39;数据&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;数据&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;数据&#39;</span><span class=p>,</span><span class=w> </span><span class=p>...);</span>
</span></code></pre></div></td></tr></table></div> <p>在这种写法下，MySQL数据对应的列是指定的列</p> <p>例如针对下面的数据库：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-21-1>+---------+-------------+------+-----+---------+-------+
</span><span id=__span-21-2>| Field   | Type        | Null | Key | Default | Extra |
</span><span id=__span-21-3>+---------+-------------+------+-----+---------+-------+
</span><span id=__span-21-4>| id      | int         | YES  |     | NULL    |       |
</span><span id=__span-21-5>| sn      | int         | YES  |     | NULL    |       |
</span><span id=__span-21-6>| name    | varchar(20) | YES  |     | NULL    |       |
</span><span id=__span-21-7>| qq_mail | varchar(20) | YES  |     | NULL    |       |
</span><span id=__span-21-8>+---------+-------------+------+-----+---------+-------+
</span></code></pre></div></td></tr></table></div> <p>使用下面的代码插入数据：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-22-1><span class=c1>-- 不指定列</span>
</span><span id=__span-22-2><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=k>values</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>20210001</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;张三&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;123@qq.com&#39;</span><span class=p>);</span>
</span><span id=__span-22-3><span class=c1>-- 指定列</span>
</span><span id=__span-22-4><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>sn</span><span class=p>,</span><span class=w> </span><span class=n>qq_mail</span><span class=p>)</span><span class=w> </span><span class=k>values</span><span class=w> </span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;李四&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>20210002</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;456@qq.com&#39;</span><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> <p>也可以一次插入指定多行数据：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-23-1><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>student</span><span class=w> </span><span class=k>values</span><span class=w> </span>
</span><span id=__span-23-2><span class=p>(</span><span class=s1>&#39;数据&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;数据&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;数据&#39;</span><span class=p>),</span>
</span><span id=__span-23-3><span class=p>(</span><span class=s1>&#39;数据&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;数据&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;数据&#39;</span><span class=p>),</span>
</span><span id=__span-23-4><span class=p>(</span><span class=s1>&#39;数据&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;数据&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;数据&#39;</span><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition tips"> <p class=admonition-title>Tips</p> <p>如果要插入多条数据，建议使用插入多行的方式而不是写多个单行的插入，减少硬盘IO的次数</p> </div> <p>除了上述的插入方式以外，还可以插入一个查询结果，基本语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-24-1><span class=c1>-- 不指定列</span>
</span><span id=__span-24-2><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=err>查询语句</span><span class=p>;</span>
</span><span id=__span-24-3><span class=c1>-- 指定列</span>
</span><span id=__span-24-4><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=p>(</span><span class=err>列名</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=err>列名</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=p>...)</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=err>查询语句</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>这种插入方式必须保证查询出的表的列对应要插入的表的列，包括列的数量、列的类型以及列的顺序。关于查询语句的编写，见下面的查询部分</p> <h2 id=_11>表中查询数据<a class=headerlink href=#_11 title="Permanent link">&para;</a></h2> <p>基本语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-25-1><span class=k>select</span><span class=w> </span><span class=err>列名</span><span class=o>/</span><span class=err>表达式</span><span class=o>/</span><span class=err>通配符</span><span class=o>/</span><span class=err>聚合函数</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=err>表名</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>以下面的表为例：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-26-1>+---------+--------------+------+-----+---------+-------+
</span><span id=__span-26-2>| Field   | Type         | Null | Key | Default | Extra |
</span><span id=__span-26-3>+---------+--------------+------+-----+---------+-------+
</span><span id=__span-26-4>| id      | int          | YES  |     | NULL    |       |
</span><span id=__span-26-5>| name    | varchar(20)  | YES  |     | NULL    |       |
</span><span id=__span-26-6>| chinese | decimal(3,1) | YES  |     | NULL    |       |
</span><span id=__span-26-7>| math    | decimal(3,1) | YES  |     | NULL    |       |
</span><span id=__span-26-8>| english | decimal(3,1) | YES  |     | NULL    |       |
</span><span id=__span-26-9>+---------+--------------+------+-----+---------+-------+
</span></code></pre></div></td></tr></table></div> <p>插入以下数据：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-27-1><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>exam_result</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>chinese</span><span class=p>,</span><span class=w> </span><span class=n>math</span><span class=p>,</span><span class=w> </span><span class=n>english</span><span class=p>)</span><span class=w> </span><span class=k>values</span>
</span><span id=__span-27-2><span class=w>      </span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=s1>&#39;唐三藏&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>67</span><span class=p>,</span><span class=w> </span><span class=mi>98</span><span class=p>,</span><span class=w> </span><span class=mi>56</span><span class=p>),</span>
</span><span id=__span-27-3><span class=w>      </span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=s1>&#39;孙悟空&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>87</span><span class=p>.</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>78</span><span class=p>,</span><span class=w> </span><span class=mi>77</span><span class=p>),</span>
</span><span id=__span-27-4><span class=w>      </span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=s1>&#39;猪悟能&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>88</span><span class=p>,</span><span class=w> </span><span class=mi>98</span><span class=p>.</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>90</span><span class=p>),</span>
</span><span id=__span-27-5><span class=w>      </span><span class=p>(</span><span class=mi>4</span><span class=p>,</span><span class=s1>&#39;曹孟德&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>82</span><span class=p>,</span><span class=w> </span><span class=mi>84</span><span class=p>,</span><span class=w> </span><span class=mi>67</span><span class=p>),</span>
</span><span id=__span-27-6><span class=w>      </span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=s1>&#39;刘玄德&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>55</span><span class=p>.</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>85</span><span class=p>,</span><span class=w> </span><span class=mi>45</span><span class=p>),</span>
</span><span id=__span-27-7><span class=w>      </span><span class=p>(</span><span class=mi>6</span><span class=p>,</span><span class=s1>&#39;孙权&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>70</span><span class=p>,</span><span class=w> </span><span class=mi>73</span><span class=p>,</span><span class=w> </span><span class=mi>78</span><span class=p>.</span><span class=mi>5</span><span class=p>),</span>
</span><span id=__span-27-8><span class=w>      </span><span class=p>(</span><span class=mi>7</span><span class=p>,</span><span class=s1>&#39;宋公明&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>75</span><span class=p>,</span><span class=w> </span><span class=mi>65</span><span class=p>,</span><span class=w> </span><span class=mi>30</span><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_12>全列查询<a class=headerlink href=#_12 title="Permanent link">&para;</a></h3> <p>操作如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-28-1><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-29-1>+------+--------+---------+------+---------+
</span><span id=__span-29-2>| id   | name   | chinese | math | english |
</span><span id=__span-29-3>+------+--------+---------+------+---------+
</span><span id=__span-29-4>|    1 | 唐三藏 |    67.0 | 98.0 |    56.0 |
</span><span id=__span-29-5>|    2 | 孙悟空 |    87.5 | 78.0 |    77.0 |
</span><span id=__span-29-6>|    3 | 猪悟能 |    88.0 | 98.5 |    90.0 |
</span><span id=__span-29-7>|    4 | 曹孟德 |    82.0 | 84.0 |    67.0 |
</span><span id=__span-29-8>|    5 | 刘玄德 |    55.5 | 85.0 |    45.0 |
</span><span id=__span-29-9>|    6 | 孙权   |    70.0 | 73.0 |    78.5 |
</span><span id=__span-29-10>|    7 | 宋公明 |    75.0 | 65.0 |    30.0 |
</span><span id=__span-29-11>+------+--------+---------+------+---------+
</span></code></pre></div></td></tr></table></div> <h3 id=_13>指定列查询<a class=headerlink href=#_13 title="Permanent link">&para;</a></h3> <p>例如：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-30-1><span class=k>select</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-31-1>+------+--------+
</span><span id=__span-31-2>| id   | name   |
</span><span id=__span-31-3>+------+--------+
</span><span id=__span-31-4>|    1 | 唐三藏 |
</span><span id=__span-31-5>|    2 | 孙悟空 |
</span><span id=__span-31-6>|    3 | 猪悟能 |
</span><span id=__span-31-7>|    4 | 曹孟德 |
</span><span id=__span-31-8>|    5 | 刘玄德 |
</span><span id=__span-31-9>|    6 | 孙权   |
</span><span id=__span-31-10>|    7 | 宋公明 |
</span><span id=__span-31-11>+------+--------+
</span></code></pre></div></td></tr></table></div> <h3 id=_14>查询字段为表达式<a class=headerlink href=#_14 title="Permanent link">&para;</a></h3> <p>例如：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-32-1><span class=k>select</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>chinese</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>math</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>english</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-33-1>+------+--------+--------------------------+
</span><span id=__span-33-2>| id   | name   | chinese + math + english |
</span><span id=__span-33-3>+------+--------+--------------------------+
</span><span id=__span-33-4>|    1 | 唐三藏 |                    221.0 |
</span><span id=__span-33-5>|    2 | 孙悟空 |                    242.5 |
</span><span id=__span-33-6>|    3 | 猪悟能 |                    276.5 |
</span><span id=__span-33-7>|    4 | 曹孟德 |                    233.0 |
</span><span id=__span-33-8>|    5 | 刘玄德 |                    185.5 |
</span><span id=__span-33-9>|    6 | 孙权   |                    221.5 |
</span><span id=__span-33-10>|    7 | 宋公明 |                    170.0 |
</span><span id=__span-33-11>+------+--------+--------------------------+
</span></code></pre></div></td></tr></table></div> <p>需要注意，<strong>任何数据与<code>null</code>进行运算得到的结果都是<code>null</code></strong></p> <h3 id=_15>别名<a class=headerlink href=#_15 title="Permanent link">&para;</a></h3> <p>可以在查询时给列、表达式或者聚合函数指定别名，语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-34-1><span class=c1>-- 使用as</span>
</span><span id=__span-34-2><span class=k>select</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>stu_id</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=p>;</span>
</span><span id=__span-34-3><span class=c1>-- 省略as</span>
</span><span id=__span-34-4><span class=k>select</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=n>stu_id</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-35-1>+--------+--------+
</span><span id=__span-35-2>| stu_id | name   |
</span><span id=__span-35-3>+--------+--------+
</span><span id=__span-35-4>|      1 | 唐三藏 |
</span><span id=__span-35-5>|      2 | 孙悟空 |
</span><span id=__span-35-6>|      3 | 猪悟能 |
</span><span id=__span-35-7>|      4 | 曹孟德 |
</span><span id=__span-35-8>|      5 | 刘玄德 |
</span><span id=__span-35-9>|      6 | 孙权   |
</span><span id=__span-35-10>|      7 | 宋公明 |
</span><span id=__span-35-11>+--------+--------+
</span></code></pre></div></td></tr></table></div> <p>需要注意，如果别名与MySQL中的关键字冲突，可以使用反引号将别名括起来，与数据库名的操作方式一致</p> <h3 id=_16>查询结果去重<a class=headerlink href=#_16 title="Permanent link">&para;</a></h3> <p>对查询结果去重可以使用<code>distinct</code>，基础语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-36-1><span class=k>select</span><span class=w> </span><span class=k>distinct</span><span class=w> </span><span class=err>列名</span><span class=p>,</span><span class=w> </span><span class=err>列名</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=err>表名</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>需要注意，<strong>查询的列必须保证存在两行数据完全相同才会对这两列进行去重</strong>，例如插入下面两行数据观察去重效果：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-37-1><span class=c1>-- 只是id重复</span>
</span><span id=__span-37-2><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>exam_result</span><span class=w> </span><span class=k>values</span><span class=w> </span><span class=p>(</span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;张飞&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>90</span><span class=p>,</span><span class=w> </span><span class=mi>80</span><span class=p>,</span><span class=w> </span><span class=mi>90</span><span class=p>);</span>
</span><span id=__span-37-3><span class=c1>-- 完全重复数据</span>
</span><span id=__span-37-4><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>exam_result</span><span class=w> </span><span class=k>values</span><span class=w> </span><span class=p>(</span><span class=mi>7</span><span class=p>,</span><span class=s1>&#39;宋公明&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>75</span><span class=p>,</span><span class=w> </span><span class=mi>65</span><span class=p>,</span><span class=w> </span><span class=mi>30</span><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> <p>当前<code>exam_result</code>表内容如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-38-1>+------+--------+---------+------+---------+
</span><span id=__span-38-2>| id   | name   | chinese | math | english |
</span><span id=__span-38-3>+------+--------+---------+------+---------+
</span><span id=__span-38-4>|    1 | 唐三藏 |    67.0 | 98.0 |    56.0 |
</span><span id=__span-38-5>|    2 | 孙悟空 |    87.5 | 78.0 |    77.0 |
</span><span id=__span-38-6>|    3 | 猪悟能 |    88.0 | 98.5 |    90.0 |
</span><span id=__span-38-7>|    4 | 曹孟德 |    82.0 | 84.0 |    67.0 |
</span><span id=__span-38-8>|    5 | 刘玄德 |    55.5 | 85.0 |    45.0 |
</span><span id=__span-38-9>|    6 | 孙权   |    70.0 | 73.0 |    78.5 |
</span><span id=__span-38-10>|    7 | 张飞   |    90.0 | 80.0 |    90.0 |
</span><span id=__span-38-11>|    7 | 宋公明 |    75.0 | 65.0 |    30.0 |
</span><span id=__span-38-12>|    7 | 宋公明 |    75.0 | 65.0 |    30.0 |
</span><span id=__span-38-13>+------+--------+---------+------+---------+
</span></code></pre></div></td></tr></table></div> <p>执行下面的去重查询：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-39-1><span class=k>select</span><span class=w> </span><span class=k>distinct</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-40-1>+------+--------+
</span><span id=__span-40-2>| id   | name   |
</span><span id=__span-40-3>+------+--------+
</span><span id=__span-40-4>|    1 | 唐三藏 |
</span><span id=__span-40-5>|    2 | 孙悟空 |
</span><span id=__span-40-6>|    3 | 猪悟能 |
</span><span id=__span-40-7>|    4 | 曹孟德 |
</span><span id=__span-40-8>|    5 | 刘玄德 |
</span><span id=__span-40-9>|    6 | 孙权   |
</span><span id=__span-40-10>|    7 | 张飞   |
</span><span id=__span-40-11>|    7 | 宋公明 |
</span><span id=__span-40-12>+------+--------+
</span></code></pre></div></td></tr></table></div> <p>可以看到，两个<code>name = '宋公明'</code>的数据进行了去重，但是<code>name = '张飞'</code>一行尽管<code>id = 7</code>但是依旧在去重查询结果中保留</p> <p>但是如果只是查询<code>id</code>，那么根据上面的原则，<code>id = 7</code>出现了重复，此时查询就会只保留一个<code>id</code>：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-41-1><span class=k>select</span><span class=w> </span><span class=k>distinct</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-42-1>+------+
</span><span id=__span-42-2>| id   |
</span><span id=__span-42-3>+------+
</span><span id=__span-42-4>|    1 |
</span><span id=__span-42-5>|    2 |
</span><span id=__span-42-6>|    3 |
</span><span id=__span-42-7>|    4 |
</span><span id=__span-42-8>|    5 |
</span><span id=__span-42-9>|    6 |
</span><span id=__span-42-10>|    7 |
</span><span id=__span-42-11>+------+
</span></code></pre></div></td></tr></table></div> <h3 id=_17>查询结果排序<a class=headerlink href=#_17 title="Permanent link">&para;</a></h3> <p>在MySQL中，表中的数据默认是<strong>无序</strong>的，直接使用<code>select</code>查询得到的结果默认也是无序的，可以使用<code>order by</code>指定排序，基本语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-43-1><span class=k>select</span><span class=w> </span><span class=err>列名</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=err>列名</span><span class=w> </span><span class=k>asc</span><span class=o>/</span><span class=k>desc</span><span class=p>;</span>
</span><span id=__span-43-2><span class=c1>-- 使用order by时默认是升序asc，可以显式写asc，也可以不写，desc表示降序</span>
</span></code></pre></div></td></tr></table></div> <p>例如根据数学成绩排降序：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-44-1><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>math</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=w> </span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>math</span><span class=w> </span><span class=k>desc</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-45-1>+--------+------+
</span><span id=__span-45-2>| name   | math |
</span><span id=__span-45-3>+--------+------+
</span><span id=__span-45-4>| 猪悟能 | 98.5 |
</span><span id=__span-45-5>| 唐三藏 | 98.0 |
</span><span id=__span-45-6>| 刘玄德 | 85.0 |
</span><span id=__span-45-7>| 曹孟德 | 84.0 |
</span><span id=__span-45-8>| 张飞   | 80.0 |
</span><span id=__span-45-9>| 孙悟空 | 78.0 |
</span><span id=__span-45-10>| 孙权   | 73.0 |
</span><span id=__span-45-11>| 宋公明 | 65.0 |
</span><span id=__span-45-12>| 宋公明 | 65.0 |
</span><span id=__span-45-13>+--------+------+
</span></code></pre></div></td></tr></table></div> <p>在MySQL排序中，<code>null</code>视为比任何数据都小，升序永远在最上面，降序永远在最下面</p> <p>除了使用表名进行排序以外，还可以指定表达式：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-46-1><span class=c1>-- order by中可以使用别名</span>
</span><span id=__span-46-2><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>chinese</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>math</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>english</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>total</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=w> </span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>total</span><span class=w> </span><span class=k>desc</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-47-1>+--------+-------+
</span><span id=__span-47-2>| name   | total |
</span><span id=__span-47-3>+--------+-------+
</span><span id=__span-47-4>| 猪悟能 | 276.5 |
</span><span id=__span-47-5>| 张飞   | 260.0 |
</span><span id=__span-47-6>| 孙悟空 | 242.5 |
</span><span id=__span-47-7>| 曹孟德 | 233.0 |
</span><span id=__span-47-8>| 孙权   | 221.5 |
</span><span id=__span-47-9>| 唐三藏 | 221.0 |
</span><span id=__span-47-10>| 刘玄德 | 185.5 |
</span><span id=__span-47-11>| 宋公明 | 170.0 |
</span><span id=__span-47-12>| 宋公明 | 170.0 |
</span><span id=__span-47-13>+--------+-------+
</span></code></pre></div></td></tr></table></div> <p>排序除了指定一个列以外，还可以指定多个列，此时的排序规则是先按照指定的第一个列和排序顺序进行排序，如果遇到相同的数据就按照第二个列和排序顺序进行排序，以此类推，例如：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-48-1><span class=c1>-- 以数学降序排序，数学相同时语文升序，语文相同时英语降序</span>
</span><span id=__span-48-2><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>math</span><span class=p>,</span><span class=w> </span><span class=n>chinese</span><span class=p>,</span><span class=w> </span><span class=n>english</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=w> </span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>math</span><span class=w> </span><span class=k>desc</span><span class=p>,</span><span class=w> </span><span class=n>chinese</span><span class=p>,</span><span class=w> </span><span class=n>english</span><span class=w> </span><span class=k>desc</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>需要注意，多个列排序时，每一个列都必须指定排序方式（升序可以不写，默认升序）</p> <h3 id=_18>条件查询<a class=headerlink href=#_18 title="Permanent link">&para;</a></h3> <p>在MySQL中，可以通过一些比较运算符与逻辑运算符结合<code>where</code>关键字表示查询满足条件的数据，常见的比较运算符如下：</p> <div class="tabbed-set tabbed-alternate" data-tabs=2:2><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><input id=__tabbed_2_2 name=__tabbed_2 type=radio><div class=tabbed-labels><label for=__tabbed_2_1>比较运算符</label><label for=__tabbed_2_2>逻辑运算符</label></div> <div class=tabbed-content> <div class=tabbed-block> <table> <thead> <tr> <th>运算符</th> <th>说明</th> </tr> </thead> <tbody> <tr> <td><code>&gt;</code>、<code>&gt;=</code>、<code>&lt;</code>、<code>&lt;=</code></td> <td>大于，大于等于，小于，小于等于</td> </tr> <tr> <td><code>=</code></td> <td>等于，<code>NULL</code>不安全，例如<code>NULL = NULL</code>的结果是<code>NULL</code></td> </tr> <tr> <td><code>&lt;=&gt;</code></td> <td>等于，<code>NULL</code>安全，例如<code>NULL &lt;=&gt; NULL</code>的结果是<code>TRUE(1)</code></td> </tr> <tr> <td><code>!=</code>、<code>&lt;&gt;</code></td> <td>不等于</td> </tr> <tr> <td><code>BETWEEN a0 AND a1</code></td> <td>范围匹配，<code>[a0, a1]</code>，如果<code>a0 &lt;= value &lt;= a1</code>，返回<code>TRUE(1)</code></td> </tr> <tr> <td><code>IN (option, ...)</code></td> <td>如果是<code>option</code>中的任意一个，返回<code>TRUE(1)</code></td> </tr> <tr> <td><code>IS NULL</code></td> <td>是<code>NULL</code></td> </tr> <tr> <td><code>IS NOT NULL</code></td> <td>不是<code>NULL</code></td> </tr> <tr> <td><code>LIKE</code></td> <td>模糊匹配。<code>%</code>表示任意多个（包括0个）任意字符；<code>_</code>表示任意一个字符</td> </tr> </tbody> </table> </div> <div class=tabbed-block> <table> <thead> <tr> <th>运算符</th> <th>说明</th> </tr> </thead> <tbody> <tr> <td><code>AND</code></td> <td>多个条件必须都为<code>TRUE(1)</code>，结果才是<code>TRUE(1)</code></td> </tr> <tr> <td><code>OR</code></td> <td>任意一个条件为<code>TRUE(1)</code>，结果为<code>TRUE(1)</code></td> </tr> <tr> <td><code>NOT</code></td> <td>条件为<code>TRUE(1)</code>，结果为<code>FALSE(0)</code></td> </tr> </tbody> </table> </div> </div> </div> <p>例如下面的示例：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-49-1><span class=c1>-- 查询英语成绩小于60的同学</span>
</span><span id=__span-49-2><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>english</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>english</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>60</span><span class=p>;</span>
</span><span id=__span-49-3><span class=c1>-- 查询语文成绩大于英语成绩的同学</span>
</span><span id=__span-49-4><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>chinese</span><span class=p>,</span><span class=w> </span><span class=n>english</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>chinese</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>english</span><span class=p>;</span>
</span><span id=__span-49-5><span class=c1>-- 查询数学成绩在80到85之间的同学</span>
</span><span id=__span-49-6><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>math</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>math</span><span class=w> </span><span class=k>between</span><span class=w> </span><span class=mi>80</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=mi>95</span><span class=p>;</span>
</span><span id=__span-49-7><span class=c1>-- 查询总成绩小于200的同学</span>
</span><span id=__span-49-8><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>chinese</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>english</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>math</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>total</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>chinese</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>english</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>math</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>200</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>需要特别注意最后一个示例，在<code>where</code>后的表达式中不可以使用别名</p> <h3 id=_19>分页查询<a class=headerlink href=#_19 title="Permanent link">&para;</a></h3> <p>可以使用<code>limit</code>关键字指定分页条件，例如：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-50-1><span class=c1>-- 从0开始，每页n条数据</span>
</span><span id=__span-50-2><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=k>limit</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
</span><span id=__span-50-3><span class=c1>-- 从m开始，每页n条数据</span>
</span><span id=__span-50-4><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=k>limit</span><span class=w> </span><span class=n>m</span><span class=p>,</span><span class=w> </span><span class=n>n</span><span class=p>;</span>
</span><span id=__span-50-5><span class=c1>-- 也可以写成limit n offset m</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_20>排序、条件、分页的书写顺序<a class=headerlink href=#_20 title="Permanent link">&para;</a></h3> <p>在MySQL中，一条正确的查询语句排序、条件和分页的书写顺序是：条件 -&gt; 排序 -&gt; 分页，例如：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-51-1><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>5</span><span class=w> </span><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>math</span><span class=w> </span><span class=k>limit</span><span class=w> </span><span class=mi>3</span><span class=w> </span><span class=k>offset</span><span class=w> </span><span class=mi>2</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_21>表中修改数据<a class=headerlink href=#_21 title="Permanent link">&para;</a></h2> <p>基本语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-52-1><span class=c1>-- 指定条件</span>
</span><span id=__span-52-2><span class=k>update</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=err>列名</span><span class=mi>1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>值</span><span class=p>,</span><span class=w> </span><span class=err>列名</span><span class=mi>2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>值</span><span class=p>,</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=err>条件</span><span class=p>;</span>
</span><span id=__span-52-3><span class=c1>-- 不指定条件</span>
</span><span id=__span-52-4><span class=k>update</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=err>列名</span><span class=mi>1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>值</span><span class=p>,</span><span class=w> </span><span class=err>列名</span><span class=mi>2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=err>值</span><span class=p>,</span><span class=w> </span><span class=p>...;</span>
</span></code></pre></div></td></tr></table></div> <p>需要注意的是，如果使用<code>update</code>时不指定条件，就会把指定列的所有数据全部修改为指定的值，所以绝大部分情况下修改表数据都会指定条件</p> <p>例如：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-53-1><span class=c1>-- 修改名字为张飞的同学的id为8</span>
</span><span id=__span-53-2><span class=k>update</span><span class=w> </span><span class=n>exam_result</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>8</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;张飞&#39;</span><span class=p>;</span>
</span><span id=__span-53-3><span class=c1>-- 修改id为8的同学的数学成绩为原来的两倍</span>
</span><span id=__span-53-4><span class=k>update</span><span class=w> </span><span class=n>exam_result</span><span class=w> </span><span class=k>set</span><span class=w> </span><span class=n>math</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>math</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>8</span><span class=p>;</span>
</span><span id=__span-53-5><span class=c1>-- 注意，SQL中没有*=这样的复合运算符</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_22>表中删除数据<a class=headerlink href=#_22 title="Permanent link">&para;</a></h2> <p>基本语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-54-1><span class=c1>-- 指定条件</span>
</span><span id=__span-54-2><span class=k>delete</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=err>条件</span><span class=p>;</span>
</span><span id=__span-54-3><span class=c1>-- 不指定条件</span>
</span><span id=__span-54-4><span class=k>delete</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=err>表名</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>需要注意的是，如果使用<code>delete</code>时不指定条件，就会把表中所有数据都删除（保留表结构），所以绝大部分情况下删除表数据都会指定条件</p> <p>例如：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-55-1><span class=c1>-- 删除id为7的同学的数据</span>
</span><span id=__span-55-2><span class=k>delete</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>7</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_23>表的约束<a class=headerlink href=#_23 title="Permanent link">&para;</a></h2> <p>数据库表的约束类型有下面几种：</p> <ol> <li><code>not null</code>：表示指定列不能存储<code>null</code>值</li> <li><code>unique</code>：表示指定列的值必须保证唯一，不能出现重复</li> <li><code>default</code>：表示指定列的默认值</li> <li><code>primary key</code>：表示主键，是<code>not null</code>与<code>unique</code>的结合体。确保某列（或两个列多个列的结合）有唯一标识，有助于更容易更快速地找到表中的一个特定的记录。经常结合<code>auto_increment</code>使用，该字段表示自动增长，默认情况下使用当前列最大值+1。如果删除最大值，后续依旧以最大值进行自动增长。启动自动增长也可以手动存储值</li> <li><code>foreigh key</code>：表示外键，保证一张表中的数据必须确保在另外一张表中存在</li> <li><code>check</code>：保证列中的值复合指定的条件。但是，对于MySQL来说，会对<code>check</code>进行分析，但是插入数据时并不会考虑<code>check</code>条件</li> </ol> <p>对于上面每一种约束类型，基本使用如下：</p> <div class="tabbed-set tabbed-alternate" data-tabs=3:6><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><input id=__tabbed_3_2 name=__tabbed_3 type=radio><input id=__tabbed_3_3 name=__tabbed_3 type=radio><input id=__tabbed_3_4 name=__tabbed_3 type=radio><input id=__tabbed_3_5 name=__tabbed_3 type=radio><input id=__tabbed_3_6 name=__tabbed_3 type=radio><div class=tabbed-labels><label for=__tabbed_3_1><code>not null</code></label><label for=__tabbed_3_2><code>unique</code></label><label for=__tabbed_3_3><code>default</code></label><label for=__tabbed_3_4><code>primary key</code></label><label for=__tabbed_3_5><code>foreign key</code></label><label for=__tabbed_3_6><code>check</code></label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-56-1><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>test_null</span><span class=p>(</span>
</span><span id=__span-56-2><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=c1>-- id列不能为空</span>
</span><span id=__span-56-3><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-57-1><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>test_unique</span><span class=p>(</span>
</span><span id=__span-57-2><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>unique</span><span class=w> </span><span class=c1>-- id列必须保证值唯一</span>
</span><span id=__span-57-3><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-58-1><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>test_default</span><span class=p>(</span>
</span><span id=__span-58-2><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=mi>10</span>
</span><span id=__span-58-3><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-59-1><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>test_primary_key</span><span class=p>(</span>
</span><span id=__span-59-2><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=w> </span><span class=n>auto_increment</span>
</span><span id=__span-59-3><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-60-1><span class=c1>-- 班级表和学生表，学生表中的班级编号需要保证一定存在于班级表</span>
</span><span id=__span-60-2><span class=c1>-- 班级表</span>
</span><span id=__span-60-3><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>class</span><span class=p>(</span>
</span><span id=__span-60-4><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=w> </span><span class=n>auto_increment</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;班级编号&#39;</span><span class=p>,</span>
</span><span id=__span-60-5><span class=w>    </span><span class=n>name</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;班级名称&#39;</span>
</span><span id=__span-60-6><span class=p>);</span>
</span><span id=__span-60-7>
</span><span id=__span-60-8><span class=c1>-- 学生表</span>
</span><span id=__span-60-9><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>student</span><span class=p>(</span>
</span><span id=__span-60-10><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=w> </span><span class=n>auto_increment</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;学生编号&#39;</span><span class=p>,</span>
</span><span id=__span-60-11><span class=w>    </span><span class=n>name</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>20</span><span class=p>)</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;学生姓名&#39;</span><span class=p>,</span>
</span><span id=__span-60-12><span class=w>    </span><span class=n>class_id</span><span class=w> </span><span class=nb>int</span><span class=w> </span><span class=k>comment</span><span class=w> </span><span class=s1>&#39;班级编号&#39;</span><span class=p>,</span>
</span><span id=__span-60-13><span class=w>    </span><span class=k>foreign</span><span class=w> </span><span class=k>key</span><span class=w> </span><span class=p>(</span><span class=n>class_id</span><span class=p>)</span><span class=w> </span><span class=k>references</span><span class=w> </span><span class=k>class</span><span class=p>(</span><span class=n>id</span><span class=p>)</span>
</span><span id=__span-60-14><span class=w>    </span><span class=c1>-- foreign key后面紧跟当前表中的字段，references后紧跟其他表名+列名</span>
</span><span id=__span-60-15><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-61-1><span class=c1>-- MySQL中忽略check约束，此处了解即可</span>
</span><span id=__span-61-2><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>test_check</span><span class=p>(</span>
</span><span id=__span-61-3><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=nb>int</span><span class=p>,</span>
</span><span id=__span-61-4><span class=w>    </span><span class=k>check</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>100</span><span class=w> </span><span class=p>)</span>
</span><span id=__span-61-5><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> </div> </div> </div> <p>在上面的几种约束中，需要注意下面几个问题：</p> <ol> <li>在数据库中，一张表只能有一个主键列</li> <li>使用外键约束时需要注意，<code>references</code>后面指定的列必须有主键约束或者<code>unique</code>约束，因为需要构建索引加快查询速度</li> </ol> <h2 id=_24>表的关系<a class=headerlink href=#_24 title="Permanent link">&para;</a></h2> <p>在关系型数据库中，表与表之间存在着三种关系：</p> <ol> <li>一对一关系：表示一个字段能够唯一查询到另外一个字段，反之亦然。例如人与身份证号码</li> <li>一对多关系：表示一个字段能够查询到多个字段，这些多个字段拥有共同的一个字段。例如学生和班级编号</li> <li>多对多关系：一张表中的一条记录可以对应另一张表中的多条记录，另一张表中的一条记录也可以对应第一张表中的多条记录。例如学生与课程</li> </ol> <p>在数据库中，表示以上三种关系的常见方式可以有：</p> <ol> <li>一对一关系：使用两张表。例如，对于人与身份证号码可以用一张表存储人的姓名，另一张表存储身份证号码</li> <li>一对多关系：使用两张表并结合外键约束。例如，学生和班级编号，一张学生表和一张班级表，学生表中的班级字段通过外键约束关联到班级表</li> <li>多对多关系：使用第三张表表示关系。例如，学生与课程，一张学生表和一张课程表，再建立一张学生与课程的关系表</li> </ol> <h2 id=_25>聚合函数<a class=headerlink href=#_25 title="Permanent link">&para;</a></h2> <p>在MySQL中，常见的聚合函数如下表：</p> <table> <thead> <tr> <th>函数</th> <th>说明</th> </tr> </thead> <tbody> <tr> <td><code>count([distinct] expr)</code></td> <td>返回查询到的数据的数量</td> </tr> <tr> <td><code>sum([distinct] expr)</code></td> <td>返回查询到的数据的总和，不是数字或者无法转换为数字没有意义</td> </tr> <tr> <td><code>avg([distinct] expr)</code></td> <td>返回查询到的数据的平均值，不是数字或者无法转换为数字没有意义</td> </tr> <tr> <td><code>max([distinct] expr)</code></td> <td>返回查询到的数据的最大值，不是数字或者无法转换为数字没有意义</td> </tr> <tr> <td><code>min([distinct] expr)</code></td> <td>返回查询到的数据的最小值，不是数字或者无法转换为数字没有意义</td> </tr> </tbody> </table> <p>其中，<code>[distinct]</code>表示可以使用<code>distinct</code>关键字进行去重</p> <p>例如，统计班上学生的数量：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-62-1><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nb>number</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=p>;</span>
</span><span id=__span-62-2><span class=c1>-- count(*)等价于count(0)</span>
</span></code></pre></div></td></tr></table></div> <p>需要注意的是，如果指定的列存在<code>null</code>，那么<code>null</code>所在的行会被忽略</p> <p>例如，向<code>exam_result</code>中插入一条数据如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-63-1><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>exam_result</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=k>null</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;宋江&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>90</span><span class=p>,</span><span class=w> </span><span class=mi>80</span><span class=p>,</span><span class=w> </span><span class=mi>90</span><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> <p>接着使用下面的SQL语句进行统计：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-64-1><span class=c1>-- id列存在null值，插入后总行数为8，但是第8行id为null，所以结果为7</span>
</span><span id=__span-64-2><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nb>number</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>exam_result</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_26>分组查询<a class=headerlink href=#_26 title="Permanent link">&para;</a></h2> <p>基本语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-65-1><span class=k>select</span><span class=w> </span><span class=err>分组依据列名</span><span class=p>,</span><span class=w> </span><span class=err>聚合函数</span><span class=p>(</span><span class=err>其他列名</span><span class=p>),</span><span class=w> </span><span class=err>聚合函数</span><span class=p>(</span><span class=err>其他列名</span><span class=p>),</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=err>表名</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=err>分组依据列名</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>以下面的表为例：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-66-1>+--------+---------------+------+-----+---------+----------------+
</span><span id=__span-66-2>| Field  | Type          | Null | Key | Default | Extra          |
</span><span id=__span-66-3>+--------+---------------+------+-----+---------+----------------+
</span><span id=__span-66-4>| id     | int           | NO   | PRI | NULL    | auto_increment |
</span><span id=__span-66-5>| name   | varchar(20)   | NO   |     | NULL    |                |
</span><span id=__span-66-6>| role   | varchar(20)   | NO   |     | NULL    |                |
</span><span id=__span-66-7>| salary | decimal(11,2) | YES  |     | NULL    |                |
</span><span id=__span-66-8>+--------+---------------+------+-----+---------+----------------+
</span></code></pre></div></td></tr></table></div> <p>插入以下数据：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-67-1><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>emp</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=k>role</span><span class=p>,</span><span class=w> </span><span class=n>salary</span><span class=p>)</span><span class=w> </span><span class=k>values</span>
</span><span id=__span-67-2><span class=p>(</span><span class=s1>&#39;马云&#39;</span><span class=p>,</span><span class=s1>&#39;服务员&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>1000</span><span class=p>.</span><span class=mi>20</span><span class=p>),</span>
</span><span id=__span-67-3><span class=p>(</span><span class=s1>&#39;马化腾&#39;</span><span class=p>,</span><span class=s1>&#39;游戏陪玩&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>2000</span><span class=p>.</span><span class=mi>99</span><span class=p>),</span>
</span><span id=__span-67-4><span class=p>(</span><span class=s1>&#39;孙悟空&#39;</span><span class=p>,</span><span class=s1>&#39;游戏角色&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>999</span><span class=p>.</span><span class=mi>11</span><span class=p>),</span>
</span><span id=__span-67-5><span class=p>(</span><span class=s1>&#39;猪无能&#39;</span><span class=p>,</span><span class=s1>&#39;游戏角色&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>333</span><span class=p>.</span><span class=mi>5</span><span class=p>),</span>
</span><span id=__span-67-6><span class=p>(</span><span class=s1>&#39;沙和尚&#39;</span><span class=p>,</span><span class=s1>&#39;游戏角色&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>700</span><span class=p>.</span><span class=mi>33</span><span class=p>),</span>
</span><span id=__span-67-7><span class=p>(</span><span class=s1>&#39;隔壁老王&#39;</span><span class=p>,</span><span class=s1>&#39;董事长&#39;</span><span class=p>,</span><span class=w> </span><span class=mi>12000</span><span class=p>.</span><span class=mi>66</span><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> <p>现在要求查询出每一种角色的最高工资、最低工资和平均工资。根据这个要求可以得到「分组依据列」为角色，「其他列」都是<code>salary</code>，并且需要用到<code>max</code>、<code>min</code>和<code>avg</code>聚合函数，所以可以得到SQL语句为：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-68-1><span class=k>select</span><span class=w> </span><span class=k>role</span><span class=p>,</span><span class=w> </span><span class=k>max</span><span class=p>(</span><span class=n>salary</span><span class=p>),</span><span class=w> </span><span class=k>min</span><span class=p>(</span><span class=n>salary</span><span class=p>),</span><span class=w> </span><span class=k>avg</span><span class=p>(</span><span class=n>salary</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=k>role</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>得到的结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-69-1>+----------+-------------+-------------+--------------+
</span><span id=__span-69-2>| role     | max(salary) | min(salary) | avg(salary)  |
</span><span id=__span-69-3>+----------+-------------+-------------+--------------+
</span><span id=__span-69-4>| 服务员   |     1000.20 |     1000.20 |  1000.200000 |
</span><span id=__span-69-5>| 游戏陪玩 |     2000.99 |     2000.99 |  2000.990000 |
</span><span id=__span-69-6>| 游戏角色 |      999.11 |      333.50 |   677.646667 |
</span><span id=__span-69-7>| 董事长   |    12000.66 |    12000.66 | 12000.660000 |
</span><span id=__span-69-8>+----------+-------------+-------------+--------------+
</span></code></pre></div></td></tr></table></div> <p>如果需要对<strong>分组的结果</strong>进行进一步筛选，此时就需要用到<code>having</code>而不是之前的<code>where</code>，例如找出平均工资小于1500的角色和平均工资就可以写为：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-70-1><span class=c1>-- 在having中可以使用别名</span>
</span><span id=__span-70-2><span class=k>select</span><span class=w> </span><span class=k>role</span><span class=p>,</span><span class=w> </span><span class=k>avg</span><span class=p>(</span><span class=n>salary</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>average</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=k>role</span><span class=w> </span><span class=k>having</span><span class=w> </span><span class=n>average</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>1500</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>得到的结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-71-1>+----------+-------------+
</span><span id=__span-71-2>| role     | average     |
</span><span id=__span-71-3>+----------+-------------+
</span><span id=__span-71-4>| 服务员   | 1000.200000 |
</span><span id=__span-71-5>| 游戏角色 |  677.646667 |
</span><span id=__span-71-6>+----------+-------------+
</span></code></pre></div></td></tr></table></div> <p>了解了<code>having</code>和<code>where</code>两个可以指定条件的关键字之后就需要知道何时使用<code>having</code>，何时使用<code>where</code>，而确定的思路就是判断条件是针对分组之前的数据还是分组之后的数据，<strong>如果是分组之前（原始数据）的数据，则使用<code>where</code>，否则（统计数据）使用<code>having</code></strong></p> <p>例如统计每个角色的薪资，找出平均工资大于1500的角色，但是不统计员工姓名为猪无能的员工。对于这个案例来说，一共有两个条件：</p> <ol> <li>平均工资大于1500的角色</li> <li>员工姓名为猪无能</li> </ol> <p>第一个条件需要针对「平均工资」这种统计数据进行比较，所以使用<code>having</code>；第二个条件针对「员工姓名」这种原始数据进行比较，所以使用<code>where</code>。所以可以编写SQL语句如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-72-1><span class=k>select</span><span class=w> </span><span class=k>role</span><span class=p>,</span><span class=w> </span><span class=k>avg</span><span class=p>(</span><span class=n>salary</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>average</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>emp</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=s1>&#39;猪无能&#39;</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=k>role</span><span class=w> </span><span class=k>having</span><span class=w> </span><span class=n>average</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>1500</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>得到的结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-73-1>+----------+--------------+
</span><span id=__span-73-2>| role     | average      |
</span><span id=__span-73-3>+----------+--------------+
</span><span id=__span-73-4>| 游戏陪玩 |  2000.990000 |
</span><span id=__span-73-5>| 董事长   | 12000.660000 |
</span><span id=__span-73-6>+----------+--------------+
</span></code></pre></div></td></tr></table></div> <h2 id=_27>联合查询<a class=headerlink href=#_27 title="Permanent link">&para;</a></h2> <h3 id=_28>笛卡尔积<a class=headerlink href=#_28 title="Permanent link">&para;</a></h3> <p>两个集合中，一个集合的每个元素都要和另一个集合中的每个元素配对一次。在数据库中的体现就是两张表中，一张表中的每一行数据要和另一张表的每一行数据匹配一次，如下图所示：</p> <p><a class=glightbox href=basic-op.assets/download.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=basic-op.assets/download.png></a></p> <p>在数据库的多表查询中需要使用到笛卡尔积的结果，但是笛卡尔积的结果就是简单的组合，其中包含很多无意义的数据，所以大多数时候需要指定条件以减少数据量</p> <p>多表查询一般分为5个步骤：</p> <ol> <li>明确查询的信息来自哪些表</li> <li>将需要用到的表进行笛卡尔积</li> <li>指定连接条件，减少数据量</li> <li>根据需要的条件进一步筛选</li> <li>根据需要用到的列进行查询</li> </ol> <p>以下面四张表为例分别演示多表查询</p> <div class="tabbed-set tabbed-alternate" data-tabs=4:4><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><input id=__tabbed_4_2 name=__tabbed_4 type=radio><input id=__tabbed_4_3 name=__tabbed_4 type=radio><input id=__tabbed_4_4 name=__tabbed_4 type=radio><div class=tabbed-labels><label for=__tabbed_4_1>班级表</label><label for=__tabbed_4_2>学生表</label><label for=__tabbed_4_3>课程表</label><label for=__tabbed_4_4>分数表</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-74-1>+-------+--------------+------+-----+---------+----------------+
</span><span id=__span-74-2>| Field | Type         | Null | Key | Default | Extra          |
</span><span id=__span-74-3>+-------+--------------+------+-----+---------+----------------+
</span><span id=__span-74-4>| id    | int          | NO   | PRI | NULL    | auto_increment |
</span><span id=__span-74-5>| name  | varchar(20)  | NO   | UNI | NULL    |                |
</span><span id=__span-74-6>| desc  | varchar(100) | YES  |     | NULL    |                |
</span><span id=__span-74-7>+-------+--------------+------+-----+---------+----------------+
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-75-1>+----------+-------------+------+-----+---------+----------------+
</span><span id=__span-75-2>| Field    | Type        | Null | Key | Default | Extra          |
</span><span id=__span-75-3>+----------+-------------+------+-----+---------+----------------+
</span><span id=__span-75-4>| id       | int         | NO   | PRI | NULL    | auto_increment |
</span><span id=__span-75-5>| sn       | varchar(20) | NO   | UNI | NULL    |                |
</span><span id=__span-75-6>| name     | varchar(20) | NO   |     | NULL    |                |
</span><span id=__span-75-7>| qq_email | varchar(20) | NO   | UNI | NULL    |                |
</span><span id=__span-75-8>| class_id | int         | YES  | MUL | NULL    |                |
</span><span id=__span-75-9>+----------+-------------+------+-----+---------+----------------+
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-76-1>+-------+-------------+------+-----+---------+----------------+
</span><span id=__span-76-2>| Field | Type        | Null | Key | Default | Extra          |
</span><span id=__span-76-3>+-------+-------------+------+-----+---------+----------------+
</span><span id=__span-76-4>| id    | int         | NO   | PRI | NULL    | auto_increment |
</span><span id=__span-76-5>| name  | varchar(20) | NO   | UNI | NULL    |                |
</span><span id=__span-76-6>+-------+-------------+------+-----+---------+----------------+
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-77-1>+------------+-------------+------+-----+---------+-------+
</span><span id=__span-77-2>| Field      | Type        | Null | Key | Default | Extra |
</span><span id=__span-77-3>+------------+-------------+------+-----+---------+-------+
</span><span id=__span-77-4>| scores     | double(3,1) | YES  |     | 0.0     |       |
</span><span id=__span-77-5>| student_id | int         | YES  | MUL | NULL    |       |
</span><span id=__span-77-6>| course_id  | int         | YES  | MUL | NULL    |       |
</span><span id=__span-77-7>+------------+-------------+------+-----+---------+-------+
</span></code></pre></div></td></tr></table></div> </div> </div> </div> <p>接下来分别插入以下数据：</p> <div class="tabbed-set tabbed-alternate" data-tabs=5:4><input checked=checked id=__tabbed_5_1 name=__tabbed_5 type=radio><input id=__tabbed_5_2 name=__tabbed_5 type=radio><input id=__tabbed_5_3 name=__tabbed_5 type=radio><input id=__tabbed_5_4 name=__tabbed_5 type=radio><div class=tabbed-labels><label for=__tabbed_5_1>班级表</label><label for=__tabbed_5_2>学生表</label><label for=__tabbed_5_3>课程表</label><label for=__tabbed_5_4>分数表</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-78-1><span class=c1>-- 自增的主键可以在插入数据时不指定</span>
</span><span id=__span-78-2><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>classes</span><span class=p>(</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=o>`</span><span class=k>desc</span><span class=o>`</span><span class=p>)</span><span class=w> </span><span class=k>values</span>
</span><span id=__span-78-3><span class=p>(</span><span class=s1>&#39;计算机系2019级1班&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;学习了计算机原理、C和Java语言、数据结构和算法&#39;</span><span class=p>),</span>
</span><span id=__span-78-4><span class=p>(</span><span class=s1>&#39;中文系2019级3班&#39;</span><span class=p>,</span><span class=s1>&#39;学习了中国传统文学&#39;</span><span class=p>),</span>
</span><span id=__span-78-5><span class=p>(</span><span class=s1>&#39;自动化2019级5班&#39;</span><span class=p>,</span><span class=s1>&#39;学习了机械自动化&#39;</span><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-79-1><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>students</span><span class=p>(</span><span class=n>sn</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>qq_email</span><span class=p>,</span><span class=w> </span><span class=n>class_id</span><span class=p>)</span><span class=w> </span><span class=k>values</span>
</span><span id=__span-79-2><span class=p>(</span><span class=s1>&#39;09982&#39;</span><span class=p>,</span><span class=s1>&#39;黑旋风李逵&#39;</span><span class=p>,</span><span class=s1>&#39;xuanfeng@qq.com&#39;</span><span class=p>,</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-79-3><span class=p>(</span><span class=s1>&#39;00835&#39;</span><span class=p>,</span><span class=s1>&#39;菩提老祖&#39;</span><span class=p>,</span><span class=s1>&#39;123@qq.com&#39;</span><span class=p>,</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-79-4><span class=p>(</span><span class=s1>&#39;00391&#39;</span><span class=p>,</span><span class=s1>&#39;白素贞&#39;</span><span class=p>,</span><span class=s1>&#39;456@qq.com&#39;</span><span class=p>,</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-79-5><span class=p>(</span><span class=s1>&#39;00031&#39;</span><span class=p>,</span><span class=s1>&#39;许仙&#39;</span><span class=p>,</span><span class=s1>&#39;xuxian@qq.com&#39;</span><span class=p>,</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-79-6><span class=p>(</span><span class=s1>&#39;00054&#39;</span><span class=p>,</span><span class=s1>&#39;不想毕业&#39;</span><span class=p>,</span><span class=s1>&#39;789@qq.com&#39;</span><span class=p>,</span><span class=mi>1</span><span class=p>),</span>
</span><span id=__span-79-7><span class=p>(</span><span class=s1>&#39;51234&#39;</span><span class=p>,</span><span class=s1>&#39;好好说话&#39;</span><span class=p>,</span><span class=s1>&#39;say@qq.com&#39;</span><span class=p>,</span><span class=mi>2</span><span class=p>),</span>
</span><span id=__span-79-8><span class=p>(</span><span class=s1>&#39;83223&#39;</span><span class=p>,</span><span class=s1>&#39;白蛇&#39;</span><span class=p>,</span><span class=s1>&#39;snake@qq.com&#39;</span><span class=p>,</span><span class=mi>2</span><span class=p>),</span>
</span><span id=__span-79-9><span class=p>(</span><span class=s1>&#39;09527&#39;</span><span class=p>,</span><span class=s1>&#39;老外学中文&#39;</span><span class=p>,</span><span class=s1>&#39;foreigner@qq.com&#39;</span><span class=p>,</span><span class=mi>2</span><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-80-1><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>course</span><span class=p>(</span><span class=n>name</span><span class=p>)</span><span class=w> </span><span class=k>values</span>
</span><span id=__span-80-2><span class=p>(</span><span class=s1>&#39;Java&#39;</span><span class=p>),(</span><span class=s1>&#39;中国传统文化&#39;</span><span class=p>),(</span><span class=s1>&#39;计算机原理&#39;</span><span class=p>),</span>
</span><span id=__span-80-3><span class=p>(</span><span class=s1>&#39;语文&#39;</span><span class=p>),(</span><span class=s1>&#39;高阶数学&#39;</span><span class=p>),(</span><span class=s1>&#39;英文&#39;</span><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-81-1><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>score</span><span class=p>(</span><span class=n>scores</span><span class=p>,</span><span class=w> </span><span class=n>student_id</span><span class=p>,</span><span class=w> </span><span class=n>course_id</span><span class=p>)</span><span class=w> </span><span class=k>values</span>
</span><span id=__span-81-2><span class=p>(</span><span class=mi>70</span><span class=p>.</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>),(</span><span class=mi>98</span><span class=p>.</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>),(</span><span class=mi>33</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>),(</span><span class=mi>98</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>),</span>
</span><span id=__span-81-3><span class=p>(</span><span class=mi>60</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>),(</span><span class=mi>59</span><span class=p>.</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>),</span>
</span><span id=__span-81-4><span class=p>(</span><span class=mi>33</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>),(</span><span class=mi>68</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>),(</span><span class=mi>99</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>),</span>
</span><span id=__span-81-5><span class=p>(</span><span class=mi>67</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>),(</span><span class=mi>23</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>),(</span><span class=mi>56</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>),(</span><span class=mi>72</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>),</span>
</span><span id=__span-81-6><span class=p>(</span><span class=mi>81</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>),(</span><span class=mi>37</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>),</span>
</span><span id=__span-81-7><span class=p>(</span><span class=mi>56</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>),(</span><span class=mi>43</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>),(</span><span class=mi>79</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>),</span>
</span><span id=__span-81-8><span class=p>(</span><span class=mi>80</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>),(</span><span class=mi>92</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> </div> </div> </div> <h3 id=_29>内连接<a class=headerlink href=#_29 title="Permanent link">&para;</a></h3> <p>基本语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-82-1><span class=k>select</span><span class=w> </span><span class=err>列名</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=err>表</span><span class=mi>1</span><span class=w> </span><span class=p>[</span><span class=err>别名</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=k>inner</span><span class=p>]</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=err>表</span><span class=mi>2</span><span class=w> </span><span class=p>[</span><span class=err>别名</span><span class=p>]</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=err>连接条件</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=err>其他条件</span><span class=p>;</span>
</span><span id=__span-82-2><span class=k>select</span><span class=w> </span><span class=err>列名</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=err>表</span><span class=mi>1</span><span class=w> </span><span class=p>[</span><span class=err>别名</span><span class=p>],</span><span class=w> </span><span class=err>表</span><span class=mi>2</span><span class=w> </span><span class=p>[</span><span class=err>别名</span><span class=p>]</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=err>连接条件</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=err>其他条件</span><span class=p>;</span>
</span><span id=__span-82-3><span class=c1>-- 其中[inner]表示可以省略不写inner关键字，默认就是内连接</span>
</span></code></pre></div></td></tr></table></div> <p>实例如下：</p> <details class=question> <summary>查询名字为许仙的同学的成绩</summary> <p>按照多表查询的步骤：</p> <ol> <li>明确查询的信息来自哪些表：名字-&gt;学生表，成绩-&gt;分数表</li> <li>将需要用到的表进行笛卡尔积：<code>select * from students, score</code></li> <li>指定连接条件，减少数据量：此处的连接条件即为两个表相关联的条件，在学生表和分数表中，关联的条件就是<code>students.id = score.student_id</code></li> <li>根据需要的条件进一步筛选：只需要许仙同学的成绩，所以条件为<code>name = '许仙'</code></li> <li>查询列为<code>name</code>和<code>scores</code></li> </ol> <p>根据上面的步骤分析，可以得出SQL语句如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-83-1><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>scores</span><span class=w> </span>
</span><span id=__span-83-2><span class=k>from</span><span class=w> </span><span class=n>students</span><span class=p>,</span><span class=w> </span><span class=n>score</span><span class=w> </span>
</span><span id=__span-83-3><span class=k>where</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>score</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span>
</span><span id=__span-83-4><span class=k>and</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;许仙&#39;</span><span class=p>;</span>
</span><span id=__span-83-5><span class=c1>-- 也可以写成</span>
</span><span id=__span-83-6><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>scores</span><span class=w> </span>
</span><span id=__span-83-7><span class=k>from</span><span class=w> </span><span class=n>students</span><span class=w> </span>
</span><span id=__span-83-8><span class=k>inner</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>score</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span>
</span><span id=__span-83-9><span class=k>and</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;许仙&#39;</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-84-1>+------+--------+
</span><span id=__span-84-2>| name | scores |
</span><span id=__span-84-3>+------+--------+
</span><span id=__span-84-4>| 许仙 |   67.0 |
</span><span id=__span-84-5>| 许仙 |   23.0 |
</span><span id=__span-84-6>| 许仙 |   56.0 |
</span><span id=__span-84-7>| 许仙 |   72.0 |
</span><span id=__span-84-8>+------+--------+
</span></code></pre></div></td></tr></table></div> </details> <details class=question> <summary>查询所有同学的总成绩，及同学的个人信息</summary> <p>按照多表查询的步骤：</p> <ol> <li>明确查询的信息来自哪些表：个人信息-&gt;学生表，成绩-&gt;分数表</li> <li>将需要用到的表进行笛卡尔积：<code>select * from students, score</code></li> <li>指定连接条件，减少数据量：此处的连接条件即为两个表相关联的条件，在学生表和分数表中，关联的条件就是<code>students.id = score.student_id</code></li> <li>根据需要的条件进一步筛选：所有同学的总成绩，因为每一个同学有不同的课程，所以需要根据学生的<code>id</code>进行分组</li> <li>查询列为<code>sum(scores)</code>、<code>sn</code>、<code>name</code>和<code>qq_email</code></li> </ol> <p>根据上面的步骤分析，可以得出SQL语句如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-85-1><span class=k>select</span><span class=w> </span><span class=n>sn</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>qq_email</span><span class=p>,</span><span class=w> </span><span class=k>sum</span><span class=p>(</span><span class=n>scores</span><span class=p>)</span><span class=w> </span>
</span><span id=__span-85-2><span class=k>from</span><span class=w> </span><span class=n>students</span><span class=p>,</span><span class=w> </span><span class=n>score</span><span class=w> </span>
</span><span id=__span-85-3><span class=k>where</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>score</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span>
</span><span id=__span-85-4><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>student_id</span><span class=p>;</span>
</span><span id=__span-85-5><span class=c1>-- 也可以写成</span>
</span><span id=__span-85-6><span class=k>select</span><span class=w> </span><span class=n>sn</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>qq_email</span><span class=p>,</span><span class=w> </span><span class=k>sum</span><span class=p>(</span><span class=n>scores</span><span class=p>)</span><span class=w> </span>
</span><span id=__span-85-7><span class=k>from</span><span class=w> </span><span class=n>students</span><span class=w> </span>
</span><span id=__span-85-8><span class=k>inner</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>score</span><span class=w> </span>
</span><span id=__span-85-9><span class=k>on</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>score</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span>
</span><span id=__span-85-10><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>student_id</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-86-1>+-------+------------+-----------------+-------------+
</span><span id=__span-86-2>| sn    | name       | qq_email        | sum(scores) |
</span><span id=__span-86-3>+-------+------------+-----------------+-------------+
</span><span id=__span-86-4>| 09982 | 黑旋风李逵 | xuanfeng@qq.com |       300.0 |
</span><span id=__span-86-5>| 00835 | 菩提老祖   | 123@qq.com      |       119.5 |
</span><span id=__span-86-6>| 00391 | 白素贞     | 456@qq.com      |       200.0 |
</span><span id=__span-86-7>| 00031 | 许仙       | xuxian@qq.com   |       218.0 |
</span><span id=__span-86-8>| 00054 | 不想毕业   | 789@qq.com      |       118.0 |
</span><span id=__span-86-9>| 51234 | 好好说话   | say@qq.com      |       178.0 |
</span><span id=__span-86-10>| 83223 | 白蛇       | snake@qq.com    |       172.0 |
</span><span id=__span-86-11>+-------+------------+-----------------+-------------+
</span></code></pre></div></td></tr></table></div> </details> <details class=question> <summary>查询每个同学的成绩，列出同学名字、课程名字和课程分数</summary> <p>按照多表查询的步骤：</p> <ol> <li>明确查询的信息来自哪些表：同学名字-&gt;学生表，课程名字-&gt;课程表，课程分数-&gt;分数表</li> <li>将需要用到的表进行笛卡尔积：<code>select * from students, course, score</code></li> <li>指定连接条件，减少数据量：此处的连接条件即为学生表关联分数表的条件和课程表关联分数表的条件，在学生表和分数表中，关联的条件就是<code>students.id = score.student_id</code>，在课程表和分数表中，关联条件就是<code>course.id = score.course_id</code></li> <li>根据需要的条件进一步筛选：本次查询没有其他的条件，忽略</li> <li>查询列为<code>students.name</code>、<code>course.name</code>和<code>score.scores</code></li> </ol> <p>根据上面的步骤分析，可以得出SQL语句如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-87-1><span class=k>select</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>course</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>score</span><span class=p>.</span><span class=n>scores</span><span class=w> </span>
</span><span id=__span-87-2><span class=k>from</span><span class=w> </span><span class=n>students</span><span class=p>,</span><span class=w> </span><span class=n>course</span><span class=p>,</span><span class=w> </span><span class=n>score</span><span class=w> </span>
</span><span id=__span-87-3><span class=k>where</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>score</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span>
</span><span id=__span-87-4><span class=k>and</span><span class=w> </span><span class=n>course</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>score</span><span class=p>.</span><span class=n>course_id</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-88-1>+------------+--------------+--------+
</span><span id=__span-88-2>| name       | name         | scores |
</span><span id=__span-88-3>+------------+--------------+--------+
</span><span id=__span-88-4>| 黑旋风李逵 | Java         |   70.5 |
</span><span id=__span-88-5>| 菩提老祖   | Java         |   60.0 |
</span><span id=__span-88-6>| 白素贞     | Java         |   33.0 |
</span><span id=__span-88-7>| 许仙       | Java         |   67.0 |
</span><span id=__span-88-8>| 不想毕业   | Java         |   81.0 |
</span><span id=__span-88-9>| 好好说话   | 中国传统文化 |   56.0 |
</span><span id=__span-88-10>| 白蛇       | 中国传统文化 |   80.0 |
</span><span id=__span-88-11>| 黑旋风李逵 | 英文         |   98.0 |
</span><span id=__span-88-12>| 许仙       | 英文         |   72.0 |
</span><span id=__span-88-13>| 好好说话   | 英文         |   79.0 |
</span><span id=__span-88-14>| 白蛇       | 英文         |   92.0 |
</span><span id=__span-88-15>| 黑旋风李逵 | 计算机原理   |   98.5 |
</span><span id=__span-88-16>| 白素贞     | 计算机原理   |   68.0 |
</span><span id=__span-88-17>| 许仙       | 计算机原理   |   23.0 |
</span><span id=__span-88-18>| 好好说话   | 语文         |   43.0 |
</span><span id=__span-88-19>| 黑旋风李逵 | 高阶数学     |   33.0 |
</span><span id=__span-88-20>| 菩提老祖   | 高阶数学     |   59.5 |
</span><span id=__span-88-21>| 白素贞     | 高阶数学     |   99.0 |
</span><span id=__span-88-22>| 许仙       | 高阶数学     |   56.0 |
</span><span id=__span-88-23>| 不想毕业   | 高阶数学     |   37.0 |
</span><span id=__span-88-24>+------------+--------------+--------+
</span></code></pre></div></td></tr></table></div> </details> <h3 id=_30>外连接<a class=headerlink href=#_30 title="Permanent link">&para;</a></h3> <p>外连接分为左外连接和右外连接。进行左外连接时，左侧表的内容会完全显示，右侧表的内容如果内容不足会以<code>null</code>代替，右外连接相反。基本语法如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-89-1><span class=c1>-- 左外连接</span>
</span><span id=__span-89-2><span class=k>select</span><span class=w> </span><span class=err>列名</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=err>列名</span><span class=mi>1</span><span class=w> </span><span class=p>[</span><span class=err>别名</span><span class=p>]</span><span class=w> </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=err>列名</span><span class=mi>2</span><span class=w> </span><span class=p>[</span><span class=err>别名</span><span class=p>]</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=err>连接条件</span>
</span><span id=__span-89-3><span class=c1>-- 右外连接</span>
</span><span id=__span-89-4><span class=k>select</span><span class=w> </span><span class=err>列名</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=err>列名</span><span class=mi>1</span><span class=w> </span><span class=p>[</span><span class=err>别名</span><span class=p>]</span><span class=w> </span><span class=k>right</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=err>列名</span><span class=mi>2</span><span class=w> </span><span class=p>[</span><span class=err>别名</span><span class=p>]</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=err>连接条件</span>
</span></code></pre></div></td></tr></table></div> <details class=question> <summary>查询所有同学的成绩，及同学的个人信息，如果该同学没有成绩，也需要显示</summary> <p>按照多表查询的步骤：</p> <ol> <li>明确查询的信息来自哪些表：个人信息-&gt;学生表，成绩-&gt;分数表</li> <li>将需要用到的表进行笛卡尔积：<code>select * from students, score</code></li> <li>指定连接条件，减少数据量：此处的连接条件即为学生表关联分数表的条件和课程表关联分数表的条件，在学生表和分数表中，关联的条件就是<code>students.id = score.student_id</code>，因为需要满足「如果该同学没有成绩，也需要显示」，所以判断是左外连接</li> <li>根据需要的条件进一步筛选：本次查询没有其他的条件，忽略</li> <li>查询列为<code>scores</code>、<code>sn</code>、<code>name</code>和<code>qq_email</code></li> </ol> <p>根据上面的步骤分析，可以得出SQL语句如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-90-1><span class=k>select</span><span class=w> </span><span class=n>sn</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>qq_email</span><span class=p>,</span><span class=w> </span><span class=n>scores</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>students</span><span class=w> </span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>score</span><span class=p>.</span><span class=n>student_id</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>得到的结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-91-1>+-------+------------+------------------+--------+
</span><span id=__span-91-2>| sn    | name       | qq_email         | scores |
</span><span id=__span-91-3>+-------+------------+------------------+--------+
</span><span id=__span-91-4>| 09982 | 黑旋风李逵 | xuanfeng@qq.com  |   70.5 |
</span><span id=__span-91-5>| 09982 | 黑旋风李逵 | xuanfeng@qq.com  |   98.5 |
</span><span id=__span-91-6>| 09982 | 黑旋风李逵 | xuanfeng@qq.com  |   33.0 |
</span><span id=__span-91-7>| 09982 | 黑旋风李逵 | xuanfeng@qq.com  |   98.0 |
</span><span id=__span-91-8>| 00835 | 菩提老祖   | 123@qq.com       |   60.0 |
</span><span id=__span-91-9>| 00835 | 菩提老祖   | 123@qq.com       |   59.5 |
</span><span id=__span-91-10>| 00391 | 白素贞     | 456@qq.com       |   33.0 |
</span><span id=__span-91-11>| 00391 | 白素贞     | 456@qq.com       |   68.0 |
</span><span id=__span-91-12>| 00391 | 白素贞     | 456@qq.com       |   99.0 |
</span><span id=__span-91-13>| 00031 | 许仙       | xuxian@qq.com    |   67.0 |
</span><span id=__span-91-14>| 00031 | 许仙       | xuxian@qq.com    |   23.0 |
</span><span id=__span-91-15>| 00031 | 许仙       | xuxian@qq.com    |   56.0 |
</span><span id=__span-91-16>| 00031 | 许仙       | xuxian@qq.com    |   72.0 |
</span><span id=__span-91-17>| 00054 | 不想毕业   | 789@qq.com       |   81.0 |
</span><span id=__span-91-18>| 00054 | 不想毕业   | 789@qq.com       |   37.0 |
</span><span id=__span-91-19>| 51234 | 好好说话   | say@qq.com       |   56.0 |
</span><span id=__span-91-20>| 51234 | 好好说话   | say@qq.com       |   43.0 |
</span><span id=__span-91-21>| 51234 | 好好说话   | say@qq.com       |   79.0 |
</span><span id=__span-91-22>| 83223 | 白蛇       | snake@qq.com     |   80.0 |
</span><span id=__span-91-23>| 83223 | 白蛇       | snake@qq.com     |   92.0 |
</span><span id=__span-91-24>| 09527 | 老外学中文 | foreigner@qq.com |   NULL |
</span><span id=__span-91-25>+-------+------------+------------------+--------+
</span></code></pre></div></td></tr></table></div> <p>可以看到最后一行的分数列值为<code>null</code>，因为该同学没有成绩</p> </details> <h3 id=_31>自连接<a class=headerlink href=#_31 title="Permanent link">&para;</a></h3> <p>自连接是指在同一张表连接自身进行查询，一般用于将行关系转换为列关系</p> <details> <summary>显示所有计算机原理成绩比Java成绩高的计算机原理成绩</summary> <p>首先对<code>score</code>表和<code>course</code>表进行内连接，只显示计算机原理和Java两门课程名称、课程<code>id</code>和成绩以及对应的学生姓名：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-92-1><span class=k>select</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>course</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>course</span><span class=p>.</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>scores</span><span class=w> </span>
</span><span id=__span-92-2><span class=k>from</span><span class=w> </span><span class=n>students</span><span class=p>,</span><span class=w> </span><span class=n>course</span><span class=p>,</span><span class=w> </span><span class=n>score</span><span class=w> </span>
</span><span id=__span-92-3><span class=k>where</span><span class=w> </span><span class=n>course</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>score</span><span class=p>.</span><span class=n>course_id</span><span class=w> </span>
</span><span id=__span-92-4><span class=k>and</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>score</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span>
</span><span id=__span-92-5><span class=k>and</span><span class=w> </span><span class=p>(</span><span class=n>course</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Java&#39;</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=n>course</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;计算机原理&#39;</span><span class=p>)</span><span class=w> </span>
</span><span id=__span-92-6><span class=k>order</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>name</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>根据题目要求，现在要找出满足「计算机原理比Java成绩高」这一条件的计算机原理成绩就需要用到比较运算符，但是比较运算符是建立在列而非行，所以接下来就需要考虑使用自连接将行关系转换为列关系，写出SQL语句如下：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-93-1><span class=k>select</span><span class=w> </span><span class=n>s2</span><span class=p>.</span><span class=o>*</span><span class=w> </span>
</span><span id=__span-93-2><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s1</span><span class=p>,</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s2</span><span class=w> </span><span class=c1>-- 自连接需要别名</span>
</span><span id=__span-93-3><span class=k>where</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>s2</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span>
</span><span id=__span-93-4><span class=k>and</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>scores</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>s2</span><span class=p>.</span><span class=n>scores</span><span class=w> </span>
</span><span id=__span-93-5><span class=k>and</span><span class=w> </span><span class=n>s1</span><span class=p>.</span><span class=n>course_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=w> </span>
</span><span id=__span-93-6><span class=k>and</span><span class=w> </span><span class=n>s2</span><span class=p>.</span><span class=n>course_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>3</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-94-1>+--------+------------+-----------+
</span><span id=__span-94-2>| scores | student_id | course_id |
</span><span id=__span-94-3>+--------+------------+-----------+
</span><span id=__span-94-4>|   98.5 |          1 |         3 |
</span><span id=__span-94-5>|   68.0 |          3 |         3 |
</span><span id=__span-94-6>+--------+------------+-----------+
</span></code></pre></div></td></tr></table></div> </details> <h3 id=_32>子查询（嵌套查询）<a class=headerlink href=#_32 title="Permanent link">&para;</a></h3> <p>子查询表示将一条查询语句的结果作为另外一条查询语句的条件值。但是因为子查询对性能消耗大，所以一般很少用，此处了解即可。子查询分为两种：</p> <ol> <li>单行子查询：表示只返回一条查询结果的子查询</li> <li>多行子查询：表示返回多条查询结果的子查询</li> </ol> <p>示例如下：</p> <div class="tabbed-set tabbed-alternate" data-tabs=6:2><input checked=checked id=__tabbed_6_1 name=__tabbed_6 type=radio><input id=__tabbed_6_2 name=__tabbed_6 type=radio><div class=tabbed-labels><label for=__tabbed_6_1>单行子查询</label><label for=__tabbed_6_2>多行子查询</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>查询与名字为不想毕业的同学同班的同学</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-95-1><span class=k>select</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>class_id</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>students</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>class_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
</span><span id=__span-95-2><span class=w>    </span><span class=k>select</span><span class=w> </span><span class=n>class_id</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>students</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;不想毕业&#39;</span>
</span><span id=__span-95-3><span class=p>)</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=s1>&#39;不想毕业&#39;</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>结果如下：</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-96-1>+------------+----------+
</span><span id=__span-96-2>| name       | class_id |
</span><span id=__span-96-3>+------------+----------+
</span><span id=__span-96-4>| 黑旋风李逵 |        1 |
</span><span id=__span-96-5>| 菩提老祖   |        1 |
</span><span id=__span-96-6>| 白素贞     |        1 |
</span><span id=__span-96-7>| 许仙       |        1 |
</span><span id=__span-96-8>+------------+----------+
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <p>查询语文或英文课程的成绩信息</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-97-1><span class=c1>-- 使用[not] in关键字</span>
</span><span id=__span-97-2><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>course_id</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span>
</span><span id=__span-97-3><span class=w>    </span><span class=k>select</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>name</span><span class=o>=</span><span class=s1>&#39;语文&#39;</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=n>name</span><span class=o>=</span><span class=s1>&#39;英文&#39;</span>
</span><span id=__span-97-4><span class=p>);</span>
</span><span id=__span-97-5><span class=c1>-- 使用[not] exists关键字</span>
</span><span id=__span-97-6><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=p>(</span>
</span><span id=__span-97-7><span class=w>    </span><span class=k>select</span><span class=w> </span><span class=n>course</span><span class=p>.</span><span class=n>id</span>
</span><span id=__span-97-8><span class=w>    </span><span class=k>from</span><span class=w> </span><span class=n>course</span>
</span><span id=__span-97-9><span class=w>    </span><span class=k>where</span><span class=w> </span><span class=n>course</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>score</span><span class=p>.</span><span class=n>course_id</span>
</span><span id=__span-97-10><span class=w>    </span><span class=k>and</span><span class=w> </span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s1>&#39;语文&#39;</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=n>name</span><span class=o>=</span><span class=s1>&#39;英文&#39;</span><span class=p>)</span>
</span><span id=__span-97-11><span class=p>);</span>
</span><span id=__span-97-12><span class=c1>-- 上面的exists写法等价于</span>
</span><span id=__span-97-13><span class=k>select</span><span class=w> </span><span class=k>distinct</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>score</span><span class=w> </span><span class=n>s</span>
</span><span id=__span-97-14><span class=k>join</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>course_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>id</span>
</span><span id=__span-97-15><span class=k>where</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;语文&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;英文&#39;</span><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> </div> </div> </div> <p>子查询的结果还可以用在<code>from</code>中，例如查找所有成绩高于中文系2019级3班平均分的成绩记录，可以写为：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-98-1><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span>
</span><span id=__span-98-2><span class=w>    </span><span class=n>score</span><span class=p>,</span>
</span><span id=__span-98-3><span class=w>    </span><span class=p>(</span>
</span><span id=__span-98-4><span class=w>        </span><span class=k>select</span>
</span><span id=__span-98-5><span class=w>        </span><span class=k>avg</span><span class=p>(</span><span class=w> </span><span class=n>score</span><span class=p>.</span><span class=n>scores</span><span class=w> </span><span class=p>)</span><span class=w> </span><span class=n>average</span>
</span><span id=__span-98-6><span class=w>        </span><span class=k>from</span><span class=w> </span><span class=n>score</span>
</span><span id=__span-98-7><span class=w>        </span><span class=k>join</span><span class=w> </span><span class=n>students</span>
</span><span id=__span-98-8><span class=w>        </span><span class=k>on</span><span class=w> </span><span class=n>score</span><span class=p>.</span><span class=n>student_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>id</span>
</span><span id=__span-98-9><span class=w>        </span><span class=k>join</span><span class=w> </span><span class=n>classes</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>students</span><span class=p>.</span><span class=n>class_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>classes</span><span class=p>.</span><span class=n>id</span>
</span><span id=__span-98-10><span class=w>        </span><span class=k>where</span><span class=w> </span><span class=n>classes</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;中文系2019级3班&#39;</span>
</span><span id=__span-98-11><span class=w>    </span><span class=p>)</span><span class=w> </span><span class=n>tmp</span>
</span><span id=__span-98-12><span class=k>where</span><span class=w> </span><span class=n>scores</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>tmp</span><span class=p>.</span><span class=n>average</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_33>合并查询<a class=headerlink href=#_33 title="Permanent link">&para;</a></h3> <p>在实际应用中，为了合并多个查询结果，可以使用集合操作符<code>union</code>，<code>union all</code>。使用<code>union</code>和<code>union all</code>时，前后查询的结果集中，字段需要一致</p> <p>例如：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-99-1><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>3</span>
</span><span id=__span-99-2><span class=k>union</span>
</span><span id=__span-99-3><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>6</span><span class=p>;</span>
</span><span id=__span-99-4><span class=c1>-- 或者使用or来实现</span>
</span><span id=__span-99-5><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>3</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>6</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>默认情况下使用<code>union</code>会去除重复行，如果要包含重复行需要使用<code>union all</code>：</p> <div class="language-sql highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>SQL</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-100-1><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>3</span>
</span><span id=__span-100-2><span class=k>union</span><span class=w> </span><span class=k>all</span>
</span><span id=__span-100-3><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>course</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>6</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2025年8月20日</span> </span> </aside> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> 页面有帮助吗？ </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title=页面对我有帮助 data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title=页面没有帮助到我 data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> 谢谢你的反馈！ </div> <div data-md-value=0 hidden> 谢谢你的反馈！联系<a href=https://www.help-doc.top/author/contact/contact.html>作者</a>提供更详细的信息 </div> </div> </div> </fieldset> </form> <!-- Waline 评论系统 --> <div id=waline></div> <!-- Waline 评论系统 --> <div id=waline></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2024-2025 柯懒不是柯南 </div> </div> <div class="md-footer-love md-typeset"> 一闪一闪亮晶晶，不及<span class=love-highlight>小亮</span><span class=love-heart>♥</span>照我心。To Li Liang </div> <div class=md-social> <a href=https://github.com/H0308 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.help-doc.top/author/contact/contact.html target=_blank rel=noopener title=www.help-doc.top class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.indexes", "navigation.prune", "navigation.tabs", "search.highlight", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../../javascripts/katex.min.js></script> <script src=../../../javascripts/other.min.js></script> <script src=../../../javascripts/copyright.min.js></script> <script src=../../../javascripts/waline.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js></script> <script src=https://cdn.jsdelivr.net/npm/mermaid@11.5.0/dist/mermaid.min.js></script> <script src=../../../assets/javascripts/toggle-sidebar.js async></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>