<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://www.help-doc.top/c-lang/fileop/fileop.html><link rel=prev href=../dynamic-memory/dynamic-memory.html><link rel=next href=../compile-link/compile-link.html><link rel=icon href=../../images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.12"><title>C语言文件操作 - 柯懒的知识库</title><link rel=stylesheet href=../../assets/stylesheets/main.2afb09e1.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=stylesheet href=../../css/timeline.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-9XWRGNRRSY"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-9XWRGNRRSY",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-9XWRGNRRSY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=stylesheet href=../../stylesheets/colors.min.css><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (max-width: 1199px)"><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (min-width: 1200px)" id=theme2-desktop><link rel=stylesheet href=../../stylesheets/theme1.min.css media="screen and (min-width: 1200px)" id=theme1-desktop><link rel=stylesheet href=../../stylesheets/print.min.css><link rel=stylesheet href=../../stylesheets/font-dongguanti.min.css id=font-dongguanti><link rel=stylesheet href=../../stylesheets/font-oppoti.min.css id=font-oppoti disabled><link rel=stylesheet href=../../stylesheets/font-jiangchengti.min.css id=font-jiangchengti disabled><link rel=stylesheet href=../../stylesheets/font-lxgw.min.css id=font-lxgw disabled><link rel=stylesheet href=../../stylesheets/code-font-dejavu-sans-mono.min.css id=code-font-dejavu-sans-mono><link rel=stylesheet href=../../stylesheets/code-font-zsft-hk.min.css id=code-font-zsft-hk disabled><link rel=stylesheet href=https://unpkg.com/@waline/client@v3/dist/waline.css><link rel=stylesheet href=../../stylesheets/waline.min.css><script src=https://cdn.jsdelivr.net/npm/mermaid@11.5.0/dist/mermaid.min.js></script><script src=../../javascripts/start.min.js></script><script type=module src=../../javascripts/waline.min.js></script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#c class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../index.html title=柯懒的知识库 class="md-header__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 柯懒的知识库 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> C语言文件操作 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan aria-label type=radio name=__palette id=__palette_1> </form> <!-- 头像元素 - 直接在HTML中定义 --> <div class=header-avatar> <img src=../../author/作者.assets/20250206-200653.jpg alt=头像> <div class=avatar-dropdown> <p><strong>柯懒不是柯南</strong></p> <a href=../../author/contact/contact.html class=avatar-dropdown-item>吵醒柯懒</a> <div class=avatar-dropdown-divider></div> <a href=../../author/about/about.html class=avatar-dropdown-item>柯懒自传</a> <div class=avatar-dropdown-divider></div> <a href=https://github.com/H0308 class=avatar-dropdown-item>柯懒的零食库</a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=查找> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <!-- 独立的切换按钮 --> <div class=toolbar-toggle-btn id=toolbarToggleBtn onclick=toggleToolbar()> <div class=toggle-icon> <svg class=toggle-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=16 height=16> <path d="M346.538667 1024L170.666667 853.333333l341.333333-341.333333-341.333333-341.333333 175.872-170.666667L853.333333 512z" fill=currentColor></path> </svg> </div> </div> <!-- 右侧固定功能条 - 独立于内容区 --> <div class=floating-toolbar id=floatingToolbar> <!-- 字体切换功能 --> <div class="toolbar-item font-switcher"> <div class=toolbar-icon> <svg class=font-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M913.408 1024l-66.56 0q-29.696 0-51.2-5.12t-36.864-15.872-26.112-27.136-19.968-37.888q-15.36-38.912-28.16-70.656t-22.016-55.296q-11.264-26.624-20.48-49.152l-254.976 0q-7.168 23.552-17.408 51.2-8.192 23.552-21.504 56.832t-30.72 72.192q-20.48 46.08-47.104 63.488t-60.416 17.408l-70.656 0q-45.056 0-60.928-19.968t2.56-68.096q18.432-46.08 43.008-108.544t52.224-132.608 57.344-143.872 57.344-144.384q65.536-164.864 137.216-343.04 7.168-17.408 18.432-31.744 10.24-11.264 27.136-21.504t42.496-10.24q26.624 0 43.52 10.752t28.16 24.064q12.288 15.36 19.456 33.792 72.704 180.224 138.24 345.088 27.648 70.656 57.344 143.872t56.832 142.336 51.2 129.536 41.472 104.448q14.336 34.816 4.096 62.464t-43.008 27.648zM616.448 634.88l-97.28-347.136-1.024 0-108.544 347.136 206.848 0z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>内容字体</div> <div class=font-dropdown-toolbar> <div class=font-current-toolbar onclick=toggleFontDropdownToolbar()> <span class=current-font-name-toolbar>东观体</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=font-options-toolbar> <div class=font-option-toolbar data-font=dongguanti onclick="selectFontToolbar('dongguanti')">上图东观体 </div> <div class=font-option-toolbar data-font=oppoti onclick="selectFontToolbar('oppoti')">OPPO Sans </div> <div class=font-option-toolbar data-font=jiangchengti onclick="selectFontToolbar('jiangchengti')"> 江城黑体</div> <div class=font-option-toolbar data-font=lxgw onclick="selectFontToolbar('lxgw')">霞鹜臻楷</div> </div> </div> </div> <!-- 代码字体切换功能 --> <div class="toolbar-item code-font-switcher"> <div class=toolbar-icon> <svg t=1753672111433 class="icon code-font-icon" viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg p-id=5148 width=20 height=20> <path d="M941.709938 0H82.290062A82.290062 82.290062 0 0 0 0 82.290062v859.419876A82.290062 82.290062 0 0 0 82.290062 1022.53923h859.419876A82.290062 82.290062 0 0 0 1022.53923 941.709938V82.290062A82.290062 82.290062 0 0 0 941.709938 0zM188.439372 553.631954a40.901569 40.901569 0 0 1-29.215406-70.116975L292.154066 351.558726 159.223966 218.628626a40.901569 40.901569 0 0 1 58.430813-57.94389l160.197813 162.145507a40.901569 40.901569 0 0 1 0 57.943889l-160.197813 160.684736a40.901569 40.901569 0 0 1-29.215407 12.173086z m443.587257 0H405.120304a40.901569 40.901569 0 0 1 0-82.290061H633.000476a40.901569 40.901569 0 0 1 0 82.290061z" fill=currentColor p-id=5149></path> </svg> </div> <div class=toolbar-label>代码字体</div> <div class=code-font-dropdown-toolbar> <div class=code-font-current-toolbar onclick=toggleCodeFontDropdownToolbar()> <span class=current-code-font-name-toolbar>DejaVu Sans Mono</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=code-font-options-toolbar> <div class=code-font-option-toolbar data-code-font=dejavu onclick="selectCodeFontToolbar('dejavu')"> DejaVu Sans Mono</div> <div class=code-font-option-toolbar data-code-font=zsft onclick="selectCodeFontToolbar('zsft')"> JetBrains Mono</div> </div> </div> </div> <!-- 主题切换功能 --> <div class="toolbar-item theme-switcher" onclick=switchTheme()> <div class=toolbar-icon> <svg class=theme-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M876.572788 522.301623c-1.886977 12.375865-9.657964 30.331819-35.880185 45.48903-56.489572 32.697703-150.21828 83.990926-174.010149 96.958262-13.143345 24.431435-66.067718 122.221646-98.141204 178.503487-16.117073 28.124548-36.055171 34.041304-50.030463 34.041304-0.031722 0-0.031722 0-0.031722 0-14.613836 0-29.1806-6.460132-43.234687-19.218714-47.183626-42.643216-125.994576-117.105115-146.013515-136.083351-27.757181-4.732791-138.338718-23.743774-200.584388-35.752272-17.924231-3.533476-32.649608-14.07046-40.372499-29.084409-5.78782-11.256368-10.281157-30.05962 1.471514-55.658647 26.989701-59.047838 74.126254-157.557432 85.957721-182.196599-3.437286-27.117614-16.996093-135.060045-23.760147-198.905142-1.886977-17.460674 3.901867-35.096333 15.829524-48.351218 12.791327-14.278191 30.667463-21.48943 49.854455-19.426445 63.669088 6.332219 173.259042 19.426445 200.584388 22.705118 24.335245-11.879562 121.085776-58.936297 180.133613-86.34146 9.91379-4.573155 19.85828-6.92369 29.596062-6.92369 28.748764 0 52.172243 20.642133 58.328453 51.421136 12.599969 62.997799 30.93864 166.70272 35.639708 193.484689 18.851347 19.682271 91.953272 96.031147 135.060045 143.07151C872.72004 487.125473 879.307062 504.71406 876.572788 522.301623L876.572788 522.301623zM825.375755 499.085876C776.017604 445.314205 687.245791 352.977193 686.365748 352.017332c-2.942005-3.069919-4.956895-6.971785-5.676279-11.208273-0.207731-1.215688-22.193465-127.001509-36.551474-198.936865-0.799202-3.917216-4.285606-16.836457-16.196891-16.836457-3.453658 0-7.30743 1.006933-11.464099 2.942005-67.282383 31.179117-183.955662 88.180342-185.170327 88.771813-3.693112 1.790786-7.850805 2.558265-11.975752 2.01489-1.295506-0.224104-133.63765-16.165168-205.988468-23.424502-0.079818 0-0.207731 0-0.287549 0-7.30743 0-11.128455 2.89391-13.319353 5.40408-3.677762 4.124947-5.644557 9.91379-5.068436 15.110139 7.674796 72.623018 24.255427 202.934922 24.463158 204.325595 0.511653 4.109598-0.159636 8.266267-1.966795 11.960403-0.591471 1.215688-57.657164 120.04712-88.339977 187.201589-3.565199 7.754614-4.41352 14.214746-2.350534 18.131963 1.935072 3.725858 6.588045 5.820566 10.360975 6.53995 70.719668 13.718443 204.644867 36.519752 206.036563 36.727483 4.189416 0.671289 8.058536 2.686179 11.112082 5.580089 1.006933 0.87902 96.414887 91.281983 150.090367 139.889027 8.314363 7.563256 13.143345 8.106632 14.437827 8.106632 3.485381 0 8.314363-4.621251 12.727882-12.391215 36.343743-63.828724 100.011808-181.988868 100.636025-183.155437 1.983167-3.64604 5.004991-6.667863 8.650007-8.650007 1.134847-0.671289 114.418936-62.373583 178.6314-99.516528 8.698103-5.036713 14.278191-10.568706 14.94948-14.854313C834.681702 511.845481 831.49922 505.800811 825.375755 499.085876L825.375755 499.085876zM935.333076 935.670256c-4.157693 4.157693-9.689686 6.299473-15.141862 6.299473-5.548366 0-11.048637-2.142803-15.238053-6.299473l-171.915441-171.915441c-8.362458-8.394181-8.362458-21.98471 0-30.426987 8.394181-8.394181 21.98471-8.394181 30.379914 0l171.915441 171.915441C943.727257 913.684522 943.727257 927.275052 935.333076 935.670256L935.333076 935.670256z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>主题切换</div> </div> <!-- 返回顶部功能 --> <div class="toolbar-item back-to-top" onclick=scrollToTop()> <div class=toolbar-icon> <svg class=back-to-top-icon viewbox="0 0 1024 1024" xmlns=http://www.w3.org/2000/svg> <path d="M882.688 624.128l-336.896-583.68c-15.872-27.136-54.784-27.136-70.656 0L138.24 624.128c-15.872 27.136 4.096 61.44 35.328 61.44H317.44c22.528 0 40.96 18.432 40.96 40.96v239.616c0 22.528 18.432 40.96 40.96 40.96h223.232c22.528 0 40.96-18.432 40.96-40.96v-239.616c0-22.528 18.432-40.96 40.96-40.96h143.872c30.208 0 50.176-34.304 34.304-61.44z"> </path> </svg> </div> <div class=toolbar-label>返回顶部</div> </div> </div> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.html class=md-tabs__link> 主页 </a> </li> <li class=md-tabs__item> <a href=../../intro/intro.html class=md-tabs__link> 网站介绍 </a> </li> <li class=md-tabs__item> <a href=../../timeline/timeline.html class=md-tabs__link> 网站时间线 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../index.html class=md-tabs__link> 编程语言 </a> </li> <li class=md-tabs__item> <a href=../../data-structure/time-space-complexity/time-space-complexity.html class=md-tabs__link> 数据结构与算法 </a> </li> <li class=md-tabs__item> <a href=../../Linux/options-commands/options-commands.html class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../html-css/html/html.html class=md-tabs__link> 前端 </a> </li> <li class=md-tabs__item> <a href=../../MySQL/JDBC/JDBC-basic/JDBC-basic.html class=md-tabs__link> MySQL </a> </li> <li class=md-tabs__item> <a href=../../JavaEE/Spring/springmvc-basic/springmvc-basic.html class=md-tabs__link> JavaEE应用开发 </a> </li> <li class=md-tabs__item> <a href=../../other/shell/shell.html class=md-tabs__link> 扩展知识 </a> </li> <li class=md-tabs__item> <a href=../../tooltips/vscode-snippets/vscode-snippets.html class=md-tabs__link> 工具帮助 </a> </li> <li class=md-tabs__item> <a href=../../test-encrypt/test-encrypt.html class=md-tabs__link> 测试加密功能 </a> </li> <li class=md-tabs__item> <a href=../../projects/boost-searching-engine/boost-searching-engine.html class=md-tabs__link> 项目 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title=柯懒的知识库 class="md-nav__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> 柯懒的知识库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.html class=md-nav__link> <span class=md-ellipsis> 主页 </span> </a> </li> <li class=md-nav__item> <a href=../../intro/intro.html class=md-nav__link> <span class=md-ellipsis> 网站介绍 </span> </a> </li> <li class=md-nav__item> <a href=../../timeline/timeline.html class=md-nav__link> <span class=md-ellipsis> 网站时间线 </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> 编程语言 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> 编程语言 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> C语言 </span> </a> <label class="md-nav__link " for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=true> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> C语言 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../c-base/c-base.html class=md-nav__link> <span class=md-ellipsis> C语言基础知识 </span> </a> </li> <li class=md-nav__item> <a href=../num-in-memory/num-in-memory.html class=md-nav__link> <span class=md-ellipsis> 进制转换与类型在内存的存储方式 </span> </a> </li> <li class=md-nav__item> <a href=../var-type/var-type.html class=md-nav__link> <span class=md-ellipsis> C语言数据类型与变量 </span> </a> </li> <li class=md-nav__item> <a href=../op/op.html class=md-nav__link> <span class=md-ellipsis> C语言操作符 </span> </a> </li> <li class=md-nav__item> <a href=../scanf-printf/scanf-printf.html class=md-nav__link> <span class=md-ellipsis> C语言的标准输入函数scanf及标准输出函数printf </span> </a> </li> <li class=md-nav__item> <a href=../branch-line/branch-line.html class=md-nav__link> <span class=md-ellipsis> C语言中的分支语句 </span> </a> </li> <li class=md-nav__item> <a href=../cycle-line/cycle-line.html class=md-nav__link> <span class=md-ellipsis> C语言中的循环语句 </span> </a> </li> <li class=md-nav__item> <a href=../func/func.html class=md-nav__link> <span class=md-ellipsis> C语言函数 </span> </a> </li> <li class=md-nav__item> <a href=../ptr/ptr.html class=md-nav__link> <span class=md-ellipsis> C语言指针 </span> </a> </li> <li class=md-nav__item> <a href=../char-str-func/char-str-func.html class=md-nav__link> <span class=md-ellipsis> C语言字符函数、字符串函数与内存函数 </span> </a> </li> <li class=md-nav__item> <a href=../dynamic-memory/dynamic-memory.html class=md-nav__link> <span class=md-ellipsis> C语言动态内存管理 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> C语言文件操作 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=fileop.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> C语言文件操作 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#c_1 class=md-nav__link> <span class=md-ellipsis> C语言中的流与文件指针 </span> </a> <nav class=md-nav aria-label=C语言中的流与文件指针> <ul class=md-nav__list> <li class=md-nav__item> <a href=#c_2 class=md-nav__link> <span class=md-ellipsis> C语言中的流 </span> </a> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 计算机中的读写操作与输入输出操作的关系 </span> </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 文件指针 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#c_3 class=md-nav__link> <span class=md-ellipsis> C语言中的标准流 </span> </a> <nav class=md-nav aria-label=C语言中的标准流> <ul class=md-nav__list> <li class=md-nav__item> <a href=#c_4 class=md-nav__link> <span class=md-ellipsis> C语言中的标准流 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 文件类型 </span> </a> <nav class=md-nav aria-label=文件类型> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 程序文件 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 数据文件 </span> </a> <nav class=md-nav aria-label=数据文件> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 文本文件 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 二进制文件 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 文件的打开和关闭 </span> </a> <nav class=md-nav aria-label=文件的打开和关闭> <ul class=md-nav__list> <li class=md-nav__item> <a href=#fopenfclose class=md-nav__link> <span class=md-ellipsis> 文件的打开fopen与关闭fclose </span> </a> <nav class=md-nav aria-label=文件的打开fopen与关闭fclose> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 文件打开模式 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 文件的顺序读写 </span> </a> <nav class=md-nav aria-label=文件的顺序读写> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 顺序读写函数 </span> </a> </li> <li class=md-nav__item> <a href=#fgetcfputc class=md-nav__link> <span class=md-ellipsis> 函数fgetc和fputc </span> </a> </li> <li class=md-nav__item> <a href=#fgetsfputs class=md-nav__link> <span class=md-ellipsis> 函数fgets和fputs </span> </a> </li> <li class=md-nav__item> <a href=#fscanffprintf class=md-nav__link> <span class=md-ellipsis> 函数fscanf与fprintf </span> </a> </li> <li class=md-nav__item> <a href=#freadfwrite class=md-nav__link> <span class=md-ellipsis> 函数fread与fwrite </span> </a> </li> <li class=md-nav__item> <a href=#printfscanffprintffscanfsprintfsscanf class=md-nav__link> <span class=md-ellipsis> 函数printf/scanf、fprintf/fscanf和sprintf/sscanf对比 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 文件随机读写 </span> </a> <nav class=md-nav aria-label=文件随机读写> <ul class=md-nav__list> <li class=md-nav__item> <a href=#fseek class=md-nav__link> <span class=md-ellipsis> 函数fseek </span> </a> </li> <li class=md-nav__item> <a href=#ftell class=md-nav__link> <span class=md-ellipsis> 函数ftell </span> </a> </li> <li class=md-nav__item> <a href=#rewind class=md-nav__link> <span class=md-ellipsis> 函数rewind </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 文件读取结束后的原因判定 </span> </a> <nav class=md-nav aria-label=文件读取结束后的原因判定> <ul class=md-nav__list> <li class=md-nav__item> <a href=#feof class=md-nav__link> <span class=md-ellipsis> 函数feof </span> </a> </li> <li class=md-nav__item> <a href=#ferror class=md-nav__link> <span class=md-ellipsis> 函数ferror </span> </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 文本文件中的错误判定 </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 二进制文件的错误判定 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 文件缓冲区 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../compile-link/compile-link.html class=md-nav__link> <span class=md-ellipsis> C语言编译与链接（基础） </span> </a> </li> <li class=md-nav__item> <a href=../preprocess/preprocess.html class=md-nav__link> <span class=md-ellipsis> C语言预处理（部分） </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../cpp/index.html class=md-nav__link> <span class=md-ellipsis> C++ </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Java/java-basic/java-basic.html class=md-nav__link> <span class=md-ellipsis> Java </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../python/python-basic/python-basic.html class=md-nav__link> <span class=md-ellipsis> Python </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../data-structure/time-space-complexity/time-space-complexity.html class=md-nav__link> <span class=md-ellipsis> 数据结构与算法 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Linux/options-commands/options-commands.html class=md-nav__link> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../html-css/html/html.html class=md-nav__link> <span class=md-ellipsis> 前端 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../MySQL/JDBC/JDBC-basic/JDBC-basic.html class=md-nav__link> <span class=md-ellipsis> MySQL </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../JavaEE/Spring/springmvc-basic/springmvc-basic.html class=md-nav__link> <span class=md-ellipsis> JavaEE应用开发 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../other/shell/shell.html class=md-nav__link> <span class=md-ellipsis> 扩展知识 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tooltips/vscode-snippets/vscode-snippets.html class=md-nav__link> <span class=md-ellipsis> 工具帮助 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../test-encrypt/test-encrypt.html class=md-nav__link> <span class=md-ellipsis> 测试加密功能 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../projects/boost-searching-engine/boost-searching-engine.html class=md-nav__link> <span class=md-ellipsis> 项目 </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#c_1 class=md-nav__link> <span class=md-ellipsis> C语言中的流与文件指针 </span> </a> <nav class=md-nav aria-label=C语言中的流与文件指针> <ul class=md-nav__list> <li class=md-nav__item> <a href=#c_2 class=md-nav__link> <span class=md-ellipsis> C语言中的流 </span> </a> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 计算机中的读写操作与输入输出操作的关系 </span> </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 文件指针 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#c_3 class=md-nav__link> <span class=md-ellipsis> C语言中的标准流 </span> </a> <nav class=md-nav aria-label=C语言中的标准流> <ul class=md-nav__list> <li class=md-nav__item> <a href=#c_4 class=md-nav__link> <span class=md-ellipsis> C语言中的标准流 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 文件类型 </span> </a> <nav class=md-nav aria-label=文件类型> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 程序文件 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 数据文件 </span> </a> <nav class=md-nav aria-label=数据文件> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 文本文件 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 二进制文件 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 文件的打开和关闭 </span> </a> <nav class=md-nav aria-label=文件的打开和关闭> <ul class=md-nav__list> <li class=md-nav__item> <a href=#fopenfclose class=md-nav__link> <span class=md-ellipsis> 文件的打开fopen与关闭fclose </span> </a> <nav class=md-nav aria-label=文件的打开fopen与关闭fclose> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 文件打开模式 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 文件的顺序读写 </span> </a> <nav class=md-nav aria-label=文件的顺序读写> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 顺序读写函数 </span> </a> </li> <li class=md-nav__item> <a href=#fgetcfputc class=md-nav__link> <span class=md-ellipsis> 函数fgetc和fputc </span> </a> </li> <li class=md-nav__item> <a href=#fgetsfputs class=md-nav__link> <span class=md-ellipsis> 函数fgets和fputs </span> </a> </li> <li class=md-nav__item> <a href=#fscanffprintf class=md-nav__link> <span class=md-ellipsis> 函数fscanf与fprintf </span> </a> </li> <li class=md-nav__item> <a href=#freadfwrite class=md-nav__link> <span class=md-ellipsis> 函数fread与fwrite </span> </a> </li> <li class=md-nav__item> <a href=#printfscanffprintffscanfsprintfsscanf class=md-nav__link> <span class=md-ellipsis> 函数printf/scanf、fprintf/fscanf和sprintf/sscanf对比 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 文件随机读写 </span> </a> <nav class=md-nav aria-label=文件随机读写> <ul class=md-nav__list> <li class=md-nav__item> <a href=#fseek class=md-nav__link> <span class=md-ellipsis> 函数fseek </span> </a> </li> <li class=md-nav__item> <a href=#ftell class=md-nav__link> <span class=md-ellipsis> 函数ftell </span> </a> </li> <li class=md-nav__item> <a href=#rewind class=md-nav__link> <span class=md-ellipsis> 函数rewind </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 文件读取结束后的原因判定 </span> </a> <nav class=md-nav aria-label=文件读取结束后的原因判定> <ul class=md-nav__list> <li class=md-nav__item> <a href=#feof class=md-nav__link> <span class=md-ellipsis> 函数feof </span> </a> </li> <li class=md-nav__item> <a href=#ferror class=md-nav__link> <span class=md-ellipsis> 函数ferror </span> </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 文本文件中的错误判定 </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 二进制文件的错误判定 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 文件缓冲区 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=c>C语言文件操作<a class=headerlink href=#c title="Permanent link">&para;</a></h1> <div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;"> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span> 约 2932 个字 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"/></svg></span> 728 行代码 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"/></svg></span> 10 张图片 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span> 预计阅读时间 19 分钟</p> </div> <h2 id=c_1>C语言中的流与文件指针<a class=headerlink href=#c_1 title="Permanent link">&para;</a></h2> <h3 id=c_2>C语言中的流<a class=headerlink href=#c_2 title="Permanent link">&para;</a></h3> <p>在C语言中，流表示任意输入的源或任意输出的目的地</p> <p><a class=glightbox href=image.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=image.png></a></p> <h3 id=_1>计算机中的读写操作与输入输出操作的关系<a class=headerlink href=#_1 title="Permanent link">&para;</a></h3> <p>在计算机中，读/写操作是相对于计算机而言，而输入/输出操作是相对于人而言</p> <p>读操作：从键盘/文件中输入数据到输入流中，由计算机从输入流中进行读取</p> <p>写操作：由计算机向输出流中写入数据，再通过输出流向屏幕/文件中输出数据</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>简单理解：</p> <p>对于读操作（相对于计算机而言）：用户从键盘/文件中输入数据至流中，CPU需要处理数据首先得有数据，所以计算机需要从流中读取数据</p> <p>对于写操作（相对于计算机而言）：计算机当前已经知道需要输出的数据在自己身上以及数据位置，但是人不知道，所以计算要输出数据需要先进行写操作，将数据写入输出流，再输出到屏幕/文件中</p> </div> <h3 id=_2>文件指针<a class=headerlink href=#_2 title="Permanent link">&para;</a></h3> <p>在C语言中，对流的访问是通过文件指针实现的。该指针类型为<code>FILE*</code>类型，定义在头文件<code>stdio.h</code></p> <p>用文件指针表示的特定的流具有标准的名字，如果需要还可以声明其他的一些文件指针</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><span class=c1>//两个文件指针类型的指针变量</span>
</span><span id=__span-0-2><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>fp1</span><span class=p>;</span>
</span><span id=__span-0-3><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>fp2</span><span class=p>;</span>
</span><span id=__span-0-4>
</span><span id=__span-0-5><span class=n>可以使fp1与fp2指向两个文件的文件信息区</span><span class=err>（</span><span class=n>文件信息区是</span><span class=err>⼀</span><span class=n>个结构体变量</span><span class=err>）。</span><span class=n>通过该文件信息区中的信息就能够访问该文件</span><span class=err>。</span><span class=n>也就是说</span><span class=err>，</span><span class=n>通过文件指针变量能够间接找到与它关联的</span><span class=err>⽂</span><span class=n>件</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>尽管操作系统会限制可以同时打开的流的数量，但是程序可以通过声明任意数量的<code>FILE*</code>类型的变量</p> </div> <p><a class=glightbox href=image1.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=image1.png></a></p> <h2 id=c_3>C语言中的标准流<a class=headerlink href=#c_3 title="Permanent link">&para;</a></h2> <h3 id=c_4>C语言中的标准流<a class=headerlink href=#c_4 title="Permanent link">&para;</a></h3> <p>在C语言头文件<code>stdio.h</code>中，提供了3个默认流，这三个流的类型是<code>FILE*</code>，并且这3个流可以直接使用，不需要对其进行声明，也不用打开或关闭它们</p> <table> <thead> <tr> <th>文件指针</th> <th>流</th> <th>默认含义</th> </tr> </thead> <tbody> <tr> <td><code>stdin</code></td> <td>标准输入</td> <td>键盘</td> </tr> <tr> <td><code>sdtout</code></td> <td>标准输出</td> <td>屏幕</td> </tr> <tr> <td><code>stderr</code></td> <td>标准错误</td> <td>屏幕</td> </tr> </tbody> </table> <h2 id=_3>文件类型<a class=headerlink href=#_3 title="Permanent link">&para;</a></h2> <h3 id=_4>程序文件<a class=headerlink href=#_4 title="Permanent link">&para;</a></h3> <p>文件的内容不一定是程序，而是程序运行时读写的数据，例如程序运行需要从中读取数据的文件</p> <p>程序文件在C语言中包括源程序文件（Windows平台下后缀为<code>.c</code>），目标文件（Windows平台下后缀为<code>.obj</code>）,可执行程序文件（Windows平台下后缀为<code>.exe</code>）</p> <h3 id=_5>数据文件<a class=headerlink href=#_5 title="Permanent link">&para;</a></h3> <p>数据文件表示文件的内容不一定是程序，而是程序运行时读写的数据，例如程序运行时需要从中读取数据的文件，或者输出内容的文件</p> <p>在C语言头文件<code>stdio.h</code>中支持两种数据文件，一种是文本文件，另一种是二进制文件。在文本文件中，字节表示字符，使得用户可以检查或编辑文件，而在二进制文件中，字节不一定表示字符</p> <h4 id=_6>文本文件<a class=headerlink href=#_6 title="Permanent link">&para;</a></h4> <p>所谓文本文件，即在内存中以二进制形式存储，再以ASCII字符的形式存储到外存的文件</p> <p>文本文件具有两种特性：</p> <ol> <li>文本文件分为若干行。文本文件的每一行通常以一两个特殊字符结尾，在Windows系统中，行末标记是回车符<code>\x0d</code>与一个紧跟其后的回行符<code>\x0a</code></li> <li>文本文件可以包含一个特殊的“文件末尾”标记，在Windows中，标记为<code>\x1a</code>（<span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-z>Z</kbd></span>）<span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-z>Z</kbd></span>不是必需的，但如果存在，他就标志着文件的结束，其后的所有字节都会被忽略</li> </ol> <h4 id=_7>二进制文件<a class=headerlink href=#_7 title="Permanent link">&para;</a></h4> <p>所谓二进制文件，即数据在内存中以二进制的形式存储，不加转换输出到外存的文件</p> <p>二进制没有文本文件的两种特性，即二进制文件不会分行，也没有行末标记和文件结尾标记，所有字节都是平等对待</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>在无法确定文件是文本形式还是二进制形式时，安全的做法是把文件假定为二进制文件</p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>字符不论是文本文件还是二进制文件一律以ASCII形式存储于外存，数值型数据根据需要选择其中一种存储于外存</p> </div> <p>例如，在外存中存储数值10000</p> <p><a class=glightbox href=image2.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=image2.png></a></p> <h2 id=_8>文件的打开和关闭<a class=headerlink href=#_8 title="Permanent link">&para;</a></h2> <p>文件在读写之前应该先打开文件，在使用结束之后应该关闭文件</p> <p>在编写程序的时候，在打开文件的同时，都会返回⼀个<code>FILE*</code>的指针变量指向该文件，也相当于建立了指针和文件的关系。</p> <p>ANSIC规定使用 <code>fopen</code> 函数来打开文件， <code>fclose</code> 来关闭文件</p> <h3 id=fopenfclose>文件的打开<code>fopen</code>与关闭<code>fclose</code><a class=headerlink href=#fopenfclose title="Permanent link">&para;</a></h3> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><span class=c1>//文件打开</span>
</span><span id=__span-1-2><span class=n>函数原型</span>
</span><span id=__span-1-3><span class=kt>FILE</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>fopen</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>filename</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>mode</span><span class=w> </span><span class=p>);</span>
</span><span id=__span-1-4>
</span><span id=__span-1-5><span class=n>参数说明</span>
</span><span id=__span-1-6><span class=n>第一个参数是char</span><span class=o>*</span><span class=n>类型的指针</span><span class=err>，</span><span class=n>该指针指向文件的文件名</span><span class=err>，</span><span class=n>通过该文件名找到文件</span><span class=err>（</span><span class=n>如果系统支持路径则可以带上文件路径</span><span class=err>）</span>
</span><span id=__span-1-7><span class=n>第二个参数是char</span><span class=o>*</span><span class=n>类型的指针</span><span class=err>，</span><span class=n>该指针指向文件的打开模式</span>
</span><span id=__span-1-8>
</span><span id=__span-1-9><span class=n>返回类型</span>
</span><span id=__span-1-10><span class=n>函数返回类型是FILE</span><span class=o>*</span><span class=n>类型的指针</span><span class=err>，</span><span class=n>该指针指向文件内容的开头</span><span class=err>，</span><span class=n>如果文件打开失败</span><span class=err>，</span><span class=n>则返回NULL</span><span class=err>，</span><span class=n>故需要对该指针进行非空检查</span>
</span><span id=__span-1-11>
</span><span id=__span-1-12><span class=c1>//文件关闭</span>
</span><span id=__span-1-13><span class=n>函数原型</span>
</span><span id=__span-1-14><span class=kt>int</span><span class=w> </span><span class=n>fclose</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=kt>FILE</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=p>);</span>
</span><span id=__span-1-15>
</span><span id=__span-1-16><span class=n>参数说明</span>
</span><span id=__span-1-17><span class=n>参数为FILE</span><span class=o>*</span><span class=n>类型的指针</span><span class=err>，</span><span class=n>该指针指向即将关闭的文件流</span>
</span><span id=__span-1-18>
</span><span id=__span-1-19><span class=n>返回类型</span>
</span><span id=__span-1-20><span class=n>函数返回类型是int类型</span><span class=err>，</span><span class=n>如果文件成功关闭</span><span class=err>，</span><span class=n>则返回0</span><span class=err>，</span><span class=n>否则返回EOF</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>在Windows中，用<code>.</code>来表示文件当前路径，用<code>..</code>来表示文件当前路径的上一路径，例如，当前路径下的<code>test.txt</code>文件，表示为<code>./test.txt</code>，当前路径下的上一路径的<code>test.txt</code>文件，表示为<code>./../test.txt</code>。指定具体路径例如：<code>C:\data\test.txt</code>（注意<code>\</code>防止与紧随其后的字母形成转义，写成<code>\\</code>）</p> </div> <h4 id=_9>文件打开模式<a class=headerlink href=#_9 title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>文件使用方式</th> <th>含义</th> <th>如果指定文件不存在</th> </tr> </thead> <tbody> <tr> <td>"r"（只读）</td> <td>为了输入数据，打卡一个已经存在的文本文件</td> <td>出错</td> </tr> <tr> <td>"w"（只写）</td> <td>为了输出数据，打开一个文本文件（如果指定的文件中有内容，会清空文件的内容）</td> <td>建立一个新的文件</td> </tr> <tr> <td>"a"（追加）</td> <td>向文本文件尾添加数据</td> <td>建立一个新的文件</td> </tr> <tr> <td>"rb"（只读）</td> <td>为了输入数据，打开一个二进制文件</td> <td>出错</td> </tr> <tr> <td>"wb"（只写）</td> <td>为了输出数据，打开一个二进制文件</td> <td>建立一个新文件</td> </tr> <tr> <td>"ab" （追加）</td> <td>向一个二进制文件尾添加数据</td> <td>建立一个新文件</td> </tr> <tr> <td>"r+"（读写）</td> <td>为了读和写，打开一个文本文件</td> <td>出错</td> </tr> <tr> <td>"w+"（读写）</td> <td>为了读和写，建立一个新文件</td> <td>建立一个新文件</td> </tr> <tr> <td>"a+"（读写）</td> <td>打开一个文件，在文件尾进行读写</td> <td>建立一个新的文件</td> </tr> <tr> <td>"rb+"（读写）</td> <td>为了读和写，打开一个二进制文件</td> <td>出错</td> </tr> <tr> <td>"wb+"（读写）</td> <td>为了读和写，建立一个新的二进制文件</td> <td>建立一个新的文件</td> </tr> <tr> <td>"ab+"（读写）</td> <td>打开一个二进制文件，在文件尾进行读和写</td> <td>建立一个新文件</td> </tr> </tbody> </table> <p>代码实例：</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-2-2><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=w> </span><span class=p>()</span>
</span><span id=__span-2-3><span class=p>{</span>
</span><span id=__span-2-4><span class=w>    </span><span class=kt>FILE</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>pFile</span><span class=p>;</span>
</span><span id=__span-2-5><span class=w>    </span><span class=c1>//打开文件 </span>
</span><span id=__span-2-6><span class=w>    </span><span class=n>pFile</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=w> </span><span class=p>(</span><span class=s>&quot;myfile.txt&quot;</span><span class=p>,</span><span class=s>&quot;w&quot;</span><span class=p>);</span><span class=c1>//默认情况下，代码路径与文件路径相同</span>
</span><span id=__span-2-7><span class=w>    </span><span class=c1>//若打开失败会fopen函数会返回空指针，所以需要对指针进行判断，防止野指针</span>
</span><span id=__span-2-8><span class=w>    </span><span class=c1>//⽂件操作 </span>
</span><span id=__span-2-9><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>pFile</span><span class=o>!=</span><span class=nb>NULL</span><span class=p>)</span>
</span><span id=__span-2-10><span class=w>    </span><span class=p>{</span>
</span><span id=__span-2-11><span class=w>        </span><span class=n>fputs</span><span class=w> </span><span class=p>(</span><span class=s>&quot;fopen example&quot;</span><span class=p>,</span><span class=n>pFile</span><span class=p>);</span>
</span><span id=__span-2-12><span class=w>        </span><span class=c1>//关闭文件 </span>
</span><span id=__span-2-13><span class=w>        </span><span class=n>fclose</span><span class=w> </span><span class=p>(</span><span class=n>pFile</span><span class=p>);</span>
</span><span id=__span-2-14><span class=w>        </span><span class=n>pf</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span><span class=c1>//需要手动对指针置为空，防止野指针</span>
</span><span id=__span-2-15><span class=w>    </span><span class=p>}</span>
</span><span id=__span-2-16><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-2-17><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_10>文件的顺序读写<a class=headerlink href=#_10 title="Permanent link">&para;</a></h2> <p>顺序读写：文件指针依次向后移动进行内容读写操作</p> <h3 id=_11>顺序读写函数<a class=headerlink href=#_11 title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>函数名</th> <th>功能</th> <th>适用于</th> </tr> </thead> <tbody> <tr> <td><code>fgetc</code></td> <td>字符输入函数（读字符函数）</td> <td>所有输入流</td> </tr> <tr> <td><code>fputc</code></td> <td>字符输出函数（写字符函数）</td> <td>所有输出流</td> </tr> <tr> <td><code>fgets</code></td> <td>文本行输入函数（读文本函数）</td> <td>所有输入流</td> </tr> <tr> <td><code>fputs</code></td> <td>文本行输出函数（写文本函数）</td> <td>所有输出流</td> </tr> <tr> <td><code>fscanf</code></td> <td>格式化输入函数（格式化读操作函数）</td> <td>所有输入流</td> </tr> <tr> <td><code>fprintf</code></td> <td>格式化输出函数（格式化写操作函数）</td> <td>所有输出流</td> </tr> <tr> <td><code>fread</code></td> <td>二进制输入函数（二进制读操作函数）</td> <td>文件</td> </tr> <tr> <td><code>fwrite</code></td> <td>二进制输出函数（二进制写操作函数）</td> <td>文件</td> </tr> </tbody> </table> <div class="admonition note"> <p class=admonition-title>Note</p> <p>所有输入流一般指适用于标准输入流和其他输入流（如文件输入流）</p> <p>所有输出流一般指适用于标准输出流和其他输出流（如文件输出流）</p> </div> <h3 id=fgetcfputc>函数<code>fgetc</code>和<code>fputc</code><a class=headerlink href=#fgetcfputc title="Permanent link">&para;</a></h3> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-3-1><span class=n>fgetc</span>
</span><span id=__span-3-2><span class=n>函数原型</span>
</span><span id=__span-3-3><span class=kt>int</span><span class=w> </span><span class=n>fgetc</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=kt>FILE</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=p>);</span>
</span><span id=__span-3-4>
</span><span id=__span-3-5><span class=n>参数说明</span>
</span><span id=__span-3-6><span class=n>参数表示FILE</span><span class=o>*</span><span class=n>类型的文件指针</span><span class=err>，</span><span class=n>该指针指向特定的输入流</span>
</span><span id=__span-3-7>
</span><span id=__span-3-8><span class=n>返回类型</span>
</span><span id=__span-3-9><span class=n>函数返回int类型的值</span><span class=err>，</span><span class=n>该值代表成功读取到的字符</span><span class=err>，</span><span class=n>根据ASCII码转换为对应的值</span>
</span><span id=__span-3-10>
</span><span id=__span-3-11><span class=n>fputc</span>
</span><span id=__span-3-12><span class=n>函数原型</span>
</span><span id=__span-3-13><span class=kt>int</span><span class=w> </span><span class=n>fputc</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>character</span><span class=p>,</span><span class=w> </span><span class=kt>FILE</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=p>);</span>
</span><span id=__span-3-14>
</span><span id=__span-3-15><span class=n>参数说明</span>
</span><span id=__span-3-16><span class=n>函数第一个参数为int类型的变量</span><span class=err>，</span><span class=n>该变量代表需要输出的字符</span>
</span><span id=__span-3-17><span class=n>函数第二个参数为FILE</span><span class=o>*</span><span class=n>类型的文件指针</span><span class=err>，</span><span class=n>该指针指向特定的输出流</span>
</span><span id=__span-3-18>
</span><span id=__span-3-19><span class=n>返回类型</span>
</span><span id=__span-3-20><span class=n>函数返回int类型的值</span><span class=err>，</span><span class=n>该值代表成功输出的字符</span><span class=err>，</span><span class=n>根据ASCII码转换为对应的值</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p><code>fgetc</code>与<code>fputc</code>函数针对字符输入和输出，并且<code>fputc</code>函数在输出时不会自动换行</p> </div> <p>代码实例（文件输入流与文件输出流）</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-4-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-4-2>
</span><span id=__span-4-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-4-4><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;assert.h&gt;</span>
</span><span id=__span-4-5>
</span><span id=__span-4-6><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-4-7><span class=p>{</span>
</span><span id=__span-4-8><span class=w>    </span><span class=c1>//fputc</span>
</span><span id=__span-4-9><span class=w>    </span><span class=c1>//打开文件</span>
</span><span id=__span-4-10><span class=w>    </span><span class=c1>//文件输出流</span>
</span><span id=__span-4-11><span class=w>    </span><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>pfputc</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test_fgetc_fputc.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;w&quot;</span><span class=p>);</span>
</span><span id=__span-4-12><span class=w>    </span><span class=c1>//若文件打开失败会返回空指针，故需要进行判断</span>
</span><span id=__span-4-13><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>pfputc</span><span class=p>);</span>
</span><span id=__span-4-14>
</span><span id=__span-4-15><span class=w>    </span><span class=c1>//向文件中写入26个英文字母</span>
</span><span id=__span-4-16><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>26</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-4-17><span class=w>    </span><span class=p>{</span>
</span><span id=__span-4-18><span class=w>        </span><span class=n>fputc</span><span class=p>(</span><span class=sc>&#39;a&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>pfputc</span><span class=p>);</span>
</span><span id=__span-4-19><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-20><span class=w>    </span><span class=c1>//关闭文件</span>
</span><span id=__span-4-21><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>pfputc</span><span class=p>);</span>
</span><span id=__span-4-22><span class=w>    </span><span class=n>pfputc</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span><span class=c1>//fclose不会将指针置为空，为避免野指针，需要手动将文件指针置为空</span>
</span><span id=__span-4-23>
</span><span id=__span-4-24><span class=w>    </span><span class=c1>//fgetc</span>
</span><span id=__span-4-25><span class=w>    </span><span class=c1>//文件输入流</span>
</span><span id=__span-4-26><span class=w>    </span><span class=c1>//打开文件</span>
</span><span id=__span-4-27><span class=w>    </span><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>pfgetc</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test_fgetc_fputc.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;r&quot;</span><span class=p>);</span>
</span><span id=__span-4-28><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>pfgetc</span><span class=p>);</span>
</span><span id=__span-4-29>
</span><span id=__span-4-30><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-4-31><span class=w>    </span><span class=c1>//从文件中读取26个英文字母</span>
</span><span id=__span-4-32><span class=w>    </span><span class=c1>//fgetc函数正常读到文件结尾会返回EOF</span>
</span><span id=__span-4-33><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>((</span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfgetc</span><span class=p>))</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>EOF</span><span class=p>)</span>
</span><span id=__span-4-34><span class=w>    </span><span class=p>{</span>
</span><span id=__span-4-35><span class=w>        </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span>
</span><span id=__span-4-36><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-37><span class=w>    </span><span class=c1>//关闭文件</span>
</span><span id=__span-4-38><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>pfgetc</span><span class=p>);</span>
</span><span id=__span-4-39><span class=w>    </span><span class=n>pfgetc</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span>
</span><span id=__span-4-40>
</span><span id=__span-4-41><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-4-42><span class=p>}</span>
</span><span id=__span-4-43><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-4-44><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=n>g</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=n>k</span><span class=w> </span><span class=n>l</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=n>o</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=n>q</span><span class=w> </span><span class=n>r</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=n>t</span><span class=w> </span><span class=n>u</span><span class=w> </span><span class=n>v</span><span class=w> </span><span class=n>w</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=n>z</span>
</span></code></pre></div></td></tr></table></div> <p>文件结果：</p> <p><a class=glightbox href=image3.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=image3.png></a></p> <p>代码实例（标准输入流与标准输出流）</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-5-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-5-2>
</span><span id=__span-5-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-5-4>
</span><span id=__span-5-5><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-5-6><span class=p>{</span>
</span><span id=__span-5-7><span class=w>    </span><span class=c1>//标准输入流</span>
</span><span id=__span-5-8><span class=w>    </span><span class=c1>//fgetc从标准输入中读取字符，返回该字符的ASCII码</span>
</span><span id=__span-5-9><span class=w>    </span><span class=c1>//fputc将对应字符输出到控制台</span>
</span><span id=__span-5-10><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>3</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-5-11><span class=w>    </span><span class=p>{</span>
</span><span id=__span-5-12><span class=w>        </span><span class=n>fputc</span><span class=p>(</span><span class=n>fgetc</span><span class=p>(</span><span class=n>stdin</span><span class=p>),</span><span class=w> </span><span class=n>stdout</span><span class=p>);</span><span class=c1>//fputc不会自动换行</span>
</span><span id=__span-5-13><span class=w>    </span><span class=p>}</span>
</span><span id=__span-5-14><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-5-15><span class=p>}</span>
</span><span id=__span-5-16><span class=n>输入</span><span class=err>：</span>
</span><span id=__span-5-17><span class=n>abc</span>
</span><span id=__span-5-18><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-5-19><span class=n>abc</span>
</span></code></pre></div></td></tr></table></div> <h3 id=fgetsfputs>函数<code>fgets</code>和<code>fputs</code><a class=headerlink href=#fgetsfputs title="Permanent link">&para;</a></h3> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-6-1><span class=n>fgets</span>
</span><span id=__span-6-2><span class=n>函数原型</span>
</span><span id=__span-6-3><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>fgets</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>str</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>,</span><span class=w> </span><span class=kt>FILE</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=p>);</span>
</span><span id=__span-6-4>
</span><span id=__span-6-5><span class=n>参数说明</span>
</span><span id=__span-6-6><span class=n>第一个参数为char</span><span class=o>*</span><span class=n>类型的指针</span><span class=err>，</span><span class=n>该指针指向流数据的目标位置</span><span class=err>（</span><span class=n>即将流中的数据读取到的目标位置</span><span class=err>）</span>
</span><span id=__span-6-7><span class=n>第二个参数为int类型的变量</span><span class=err>，</span><span class=n>改变量代表需要读取的字符个数</span><span class=err>，</span><span class=n>该个数为num</span><span class=mi>-1</span><span class=n>个</span><span class=err>，</span><span class=n>因为函数会为</span><span class=err>\</span><span class=mi>0</span><span class=n>预留位置</span>
</span><span id=__span-6-8><span class=n>第三个参数为FILE</span><span class=o>*</span><span class=n>类型的文件指针</span><span class=err>，</span><span class=n>该指针指向特定的输入流</span>
</span><span id=__span-6-9>
</span><span id=__span-6-10><span class=n>返回类型</span>
</span><span id=__span-6-11><span class=n>函数返回char</span><span class=o>*</span><span class=n>类型的指针</span><span class=err>，</span><span class=n>该指针指向目标位置的起始地址</span>
</span><span id=__span-6-12>
</span><span id=__span-6-13><span class=n>fputs</span>
</span><span id=__span-6-14><span class=n>函数原型</span>
</span><span id=__span-6-15><span class=kt>int</span><span class=w> </span><span class=n>fputs</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>str</span><span class=p>,</span><span class=w> </span><span class=kt>FILE</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=p>);</span>
</span><span id=__span-6-16>
</span><span id=__span-6-17><span class=n>参数说明</span>
</span><span id=__span-6-18><span class=n>第一个参数为char</span><span class=o>*</span><span class=n>类型的指针</span><span class=err>，</span><span class=n>该指针指向需要写入流中的字符串的起始地址</span>
</span><span id=__span-6-19><span class=n>第二个参数为FILE</span><span class=o>*</span><span class=n>类型的文件指针</span><span class=err>，</span><span class=n>该指针指向特定的输出流</span>
</span><span id=__span-6-20>
</span><span id=__span-6-21><span class=n>返回类型</span>
</span><span id=__span-6-22><span class=n>函数返回int类型的值</span><span class=err>，</span><span class=n>该值表示函数是否成功写入</span><span class=err>，</span><span class=n>成功写入返回非负值</span><span class=err>，</span><span class=n>否则返回EOF</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>函数<code>fgets</code>和<code>fputs</code>针对字符串的输入和输出，并且<code>fputs</code>不会自动换行</p> </div> <p>代码实例（文件输入和输出流）</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-7-2>
</span><span id=__span-7-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-7-4><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;assert.h&gt;</span>
</span><span id=__span-7-5>
</span><span id=__span-7-6><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-7-7><span class=p>{</span>
</span><span id=__span-7-8><span class=w>    </span><span class=kt>char</span><span class=o>*</span><span class=w> </span><span class=n>str</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;abcdefg&quot;</span><span class=p>;</span>
</span><span id=__span-7-9><span class=w>    </span><span class=c1>//fputs</span>
</span><span id=__span-7-10><span class=w>    </span><span class=c1>//文件输出流</span>
</span><span id=__span-7-11><span class=w>    </span><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>pfputs</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test_fputs_fgets.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;w&quot;</span><span class=p>);</span>
</span><span id=__span-7-12><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>pfputs</span><span class=p>);</span>
</span><span id=__span-7-13>
</span><span id=__span-7-14><span class=w>    </span><span class=n>fputs</span><span class=p>(</span><span class=n>str</span><span class=p>,</span><span class=w> </span><span class=n>pfputs</span><span class=p>);</span>
</span><span id=__span-7-15>
</span><span id=__span-7-16><span class=w>    </span><span class=c1>//关闭文件</span>
</span><span id=__span-7-17><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>pfputs</span><span class=p>);</span>
</span><span id=__span-7-18><span class=w>    </span><span class=n>pfputs</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span>
</span><span id=__span-7-19>
</span><span id=__span-7-20><span class=w>    </span><span class=c1>//fgets</span>
</span><span id=__span-7-21><span class=w>    </span><span class=c1>//文件输入流</span>
</span><span id=__span-7-22><span class=w>    </span><span class=kt>char</span><span class=w> </span><span class=n>arr</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-7-23><span class=w>    </span><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>pfgets</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test_fputs_fgets.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;r&quot;</span><span class=p>);</span>
</span><span id=__span-7-24><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>pfgets</span><span class=p>);</span>
</span><span id=__span-7-25>
</span><span id=__span-7-26><span class=w>    </span><span class=n>fgets</span><span class=p>(</span><span class=n>arr</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=n>pfgets</span><span class=p>);</span><span class=c1>//读入4个字符，并为最后的\0留下一个位置，总共5个字符</span>
</span><span id=__span-7-27>
</span><span id=__span-7-28><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>pfgets</span><span class=p>);</span>
</span><span id=__span-7-29><span class=w>    </span><span class=n>pfgets</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span>
</span><span id=__span-7-30>
</span><span id=__span-7-31><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%s</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>arr</span><span class=p>);</span>
</span><span id=__span-7-32>
</span><span id=__span-7-33><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-7-34><span class=p>}</span>
</span><span id=__span-7-35><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-7-36><span class=n>abcd</span>
</span></code></pre></div></td></tr></table></div> <p>文件结果：</p> <p><a class=glightbox href=image4.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=image4.png></a></p> <p>代码实例（标准输入和输出流）</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-8-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-8-2>
</span><span id=__span-8-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-8-4>
</span><span id=__span-8-5><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-8-6><span class=p>{</span>
</span><span id=__span-8-7><span class=w>    </span><span class=c1>//标准输入流</span>
</span><span id=__span-8-8><span class=w>    </span><span class=kt>char</span><span class=w> </span><span class=n>arr</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-8-9><span class=w>    </span><span class=n>fgets</span><span class=p>(</span><span class=n>arr</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=n>stdin</span><span class=p>);</span>
</span><span id=__span-8-10><span class=w>    </span><span class=n>fputs</span><span class=p>(</span><span class=n>arr</span><span class=p>,</span><span class=w> </span><span class=n>stdout</span><span class=p>);</span>
</span><span id=__span-8-11>
</span><span id=__span-8-12><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-8-13><span class=p>}</span>
</span><span id=__span-8-14><span class=n>输入</span><span class=err>：</span>
</span><span id=__span-8-15><span class=n>abcdefghijklmn</span>
</span><span id=__span-8-16><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-8-17><span class=n>abcdefghi</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>因为<code>fgets</code>函数可以限制读取的字符个数，故在输入字符串至数组中，可以在一定程度上确保不会出现数组越界，而<code>scanf</code>不可以，故可以用<code>fgets</code>函数代替<code>scanf</code>输入字符串</p> </div> <h3 id=fscanffprintf>函数<code>fscanf</code>与<code>fprintf</code><a class=headerlink href=#fscanffprintf title="Permanent link">&para;</a></h3> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-9-1><span class=n>fscanf</span>
</span><span id=__span-9-2><span class=n>函数原型</span>
</span><span id=__span-9-3><span class=kt>int</span><span class=w> </span><span class=n>fscanf</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=kt>FILE</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>stream</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>format</span><span class=p>,</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=p>);</span>
</span><span id=__span-9-4>
</span><span id=__span-9-5><span class=n>参数说明</span>
</span><span id=__span-9-6><span class=n>第一个参数为FILE</span><span class=o>*</span><span class=n>类型的文件指针</span><span class=err>，</span><span class=n>该指针指向特定的输入流</span>
</span><span id=__span-9-7><span class=n>第二个参数为可变参数列表</span>
</span><span id=__span-9-8>
</span><span id=__span-9-9><span class=n>返回类型</span>
</span><span id=__span-9-10><span class=n>函数返回int类型的值</span><span class=err>，</span><span class=n>该值表示成功读取到数据的占位符的个数</span>
</span><span id=__span-9-11>
</span><span id=__span-9-12><span class=n>fprintf</span>
</span><span id=__span-9-13><span class=n>函数原型</span>
</span><span id=__span-9-14><span class=kt>int</span><span class=w> </span><span class=n>fprintf</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=kt>FILE</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>stream</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>format</span><span class=p>,</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=p>);</span>
</span><span id=__span-9-15>
</span><span id=__span-9-16><span class=n>参数说明</span>
</span><span id=__span-9-17><span class=n>第一个参数为FILE</span><span class=o>*</span><span class=n>类型的文件指针</span><span class=err>，</span><span class=n>该指针指向特定的输出流</span>
</span><span id=__span-9-18><span class=n>第二个参数为可变参数列表</span>
</span><span id=__span-9-19>
</span><span id=__span-9-20><span class=n>返回类型</span>
</span><span id=__span-9-21><span class=n>函数返回int类型的值</span><span class=err>，</span><span class=n>该值表示成功输出的字符个数</span>
</span></code></pre></div></td></tr></table></div> <p>代码实例（文件输入和输出流）</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-10-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-10-2>
</span><span id=__span-10-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-10-4><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;assert.h&gt;</span>
</span><span id=__span-10-5><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdlib.h&gt;</span>
</span><span id=__span-10-6>
</span><span id=__span-10-7><span class=k>struct</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-10-8><span class=p>{</span>
</span><span id=__span-10-9><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>age</span><span class=p>;</span>
</span><span id=__span-10-10><span class=w>    </span><span class=kt>char</span><span class=w> </span><span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span><span id=__span-10-11><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>score</span><span class=p>;</span>
</span><span id=__span-10-12><span class=p>};</span>
</span><span id=__span-10-13>
</span><span id=__span-10-14><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-10-15><span class=p>{</span>
</span><span id=__span-10-16><span class=w>    </span><span class=c1>//fprintf</span>
</span><span id=__span-10-17><span class=w>    </span><span class=c1>//文件输出流</span>
</span><span id=__span-10-18><span class=w>    </span><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>pfprintf</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test_fprintf_fscanf.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;w&quot;</span><span class=p>);</span>
</span><span id=__span-10-19>
</span><span id=__span-10-20><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>pfprintf</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=nb>NULL</span><span class=p>)</span>
</span><span id=__span-10-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-10-22><span class=w>        </span><span class=n>perror</span><span class=p>(</span><span class=s>&quot;pfprintf&quot;</span><span class=p>);</span>
</span><span id=__span-10-23><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>EXIT_FAILURE</span><span class=p>;</span><span class=c1>//相当于return 1，对应的return 0有return EXIT_SUCCESS</span>
</span><span id=__span-10-24><span class=w>    </span><span class=p>}</span>
</span><span id=__span-10-25>
</span><span id=__span-10-26><span class=w>    </span><span class=k>struct</span><span class=w> </span><span class=nc>test</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=mi>20</span><span class=p>,</span><span class=w> </span><span class=s>&quot;Mark Watney&quot;</span><span class=p>,</span><span class=w> </span><span class=mf>90.5</span><span class=p>};</span>
</span><span id=__span-10-27><span class=w>    </span><span class=n>fprintf</span><span class=p>(</span><span class=n>pfprintf</span><span class=p>,</span><span class=w> </span><span class=s>&quot;%d %.1f %s&quot;</span><span class=p>,</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>age</span><span class=p>,</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>score</span><span class=p>,</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>name</span><span class=p>);</span>
</span><span id=__span-10-28>
</span><span id=__span-10-29><span class=w>    </span><span class=c1>//关闭文件</span>
</span><span id=__span-10-30><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>pfprintf</span><span class=p>);</span>
</span><span id=__span-10-31><span class=w>    </span><span class=n>pfprintf</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span>
</span><span id=__span-10-32>
</span><span id=__span-10-33><span class=w>    </span><span class=c1>//fscanf</span>
</span><span id=__span-10-34><span class=w>    </span><span class=c1>//文件输入流</span>
</span><span id=__span-10-35><span class=w>    </span><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>pfscanf</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test_fprintf_fscanf.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;r&quot;</span><span class=p>);</span>
</span><span id=__span-10-36>
</span><span id=__span-10-37><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>pfscanf</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=nb>NULL</span><span class=p>)</span>
</span><span id=__span-10-38><span class=w>    </span><span class=p>{</span>
</span><span id=__span-10-39><span class=w>        </span><span class=n>perror</span><span class=p>(</span><span class=s>&quot;pfscanf&quot;</span><span class=p>);</span>
</span><span id=__span-10-40><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>EXIT_FAILURE</span><span class=p>;</span>
</span><span id=__span-10-41><span class=w>    </span><span class=p>}</span>
</span><span id=__span-10-42>
</span><span id=__span-10-43><span class=w>    </span><span class=k>struct</span><span class=w> </span><span class=nc>test</span><span class=w> </span><span class=n>p1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=mi>0</span><span class=p>};</span>
</span><span id=__span-10-44><span class=w>    </span><span class=n>fscanf</span><span class=p>(</span><span class=n>pfscanf</span><span class=p>,</span><span class=w> </span><span class=s>&quot;%d %lf %s&quot;</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=p>(</span><span class=n>p1</span><span class=p>.</span><span class=n>age</span><span class=p>),</span><span class=w> </span><span class=o>&amp;</span><span class=p>(</span><span class=n>p1</span><span class=p>.</span><span class=n>score</span><span class=p>),</span><span class=w> </span><span class=n>p1</span><span class=p>.</span><span class=n>name</span><span class=p>);</span>
</span><span id=__span-10-45>
</span><span id=__span-10-46><span class=w>    </span><span class=c1>//关闭文件</span>
</span><span id=__span-10-47><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>pfscanf</span><span class=p>);</span>
</span><span id=__span-10-48><span class=w>    </span><span class=n>pfscanf</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span>
</span><span id=__span-10-49>
</span><span id=__span-10-50><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d %.1f %s&quot;</span><span class=p>,</span><span class=w> </span><span class=n>p1</span><span class=p>.</span><span class=n>age</span><span class=p>,</span><span class=w> </span><span class=n>p1</span><span class=p>.</span><span class=n>score</span><span class=p>,</span><span class=w> </span><span class=n>p1</span><span class=p>.</span><span class=n>name</span><span class=p>);</span>
</span><span id=__span-10-51>
</span><span id=__span-10-52><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-10-53><span class=p>}</span>
</span><span id=__span-10-54><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-10-55><span class=mi>20</span><span class=w> </span><span class=mf>90.5</span><span class=w> </span><span class=n>Mark</span>
</span></code></pre></div></td></tr></table></div> <p>文件结果：</p> <p><a class=glightbox href=image5.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=image5.png></a></p> <p>代码实例（标准输入和输出流）</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-11-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-11-2>
</span><span id=__span-11-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-11-4>
</span><span id=__span-11-5><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-11-6><span class=p>{</span>
</span><span id=__span-11-7><span class=w>    </span><span class=c1>//标准输入和输出流</span>
</span><span id=__span-11-8><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>age</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-11-9><span class=w>    </span><span class=kt>char</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-11-10><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0.0</span><span class=p>;</span>
</span><span id=__span-11-11><span class=w>    </span><span class=n>fscanf</span><span class=p>(</span><span class=n>stdin</span><span class=p>,</span><span class=w> </span><span class=s>&quot;%d %c %lf&quot;</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>age</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>c</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=n>d</span><span class=p>);</span>
</span><span id=__span-11-12><span class=w>    </span><span class=n>fprintf</span><span class=p>(</span><span class=n>stdout</span><span class=p>,</span><span class=w> </span><span class=s>&quot;%d %c %.1f&quot;</span><span class=p>,</span><span class=w> </span><span class=n>age</span><span class=p>,</span><span class=w> </span><span class=n>c</span><span class=p>,</span><span class=w> </span><span class=n>d</span><span class=p>);</span>
</span><span id=__span-11-13>
</span><span id=__span-11-14><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-11-15><span class=p>}</span>
</span><span id=__span-11-16><span class=n>输入</span><span class=err>：</span>
</span><span id=__span-11-17><span class=mi>20</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=mf>90.5</span>
</span><span id=__span-11-18><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-11-19><span class=mi>20</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=mf>90.5</span>
</span></code></pre></div></td></tr></table></div> <h3 id=freadfwrite>函数<code>fread</code>与<code>fwrite</code><a class=headerlink href=#freadfwrite title="Permanent link">&para;</a></h3> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-12-1><span class=n>fread</span>
</span><span id=__span-12-2><span class=n>函数原型</span>
</span><span id=__span-12-3><span class=kt>size_t</span><span class=w> </span><span class=n>fread</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>ptr</span><span class=p>,</span><span class=w> </span><span class=kt>size_t</span><span class=w> </span><span class=n>size</span><span class=p>,</span><span class=w> </span><span class=kt>size_t</span><span class=w> </span><span class=n>count</span><span class=p>,</span><span class=w> </span><span class=kt>FILE</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=p>);</span>
</span><span id=__span-12-4>
</span><span id=__span-12-5><span class=n>参数说明</span>
</span><span id=__span-12-6><span class=n>第一个参数为void</span><span class=o>*</span><span class=n>类型的指针</span><span class=err>，</span><span class=n>该指针指向读取的数据需要存储到的目标地址</span>
</span><span id=__span-12-7><span class=n>第二个参数为size_t类型的变量</span><span class=err>，</span><span class=n>该变量表示数据类型在内存中占用的大小</span>
</span><span id=__span-12-8><span class=n>第三个参数为size_t类型的变量</span><span class=err>，</span><span class=n>该变量表示需要读取的数据的个数</span>
</span><span id=__span-12-9><span class=n>第四个参数为FILE</span><span class=o>*</span><span class=n>类型的文件指针</span><span class=err>，</span><span class=n>该指针指向文件输入流</span>
</span><span id=__span-12-10>
</span><span id=__span-12-11><span class=n>返回类型</span>
</span><span id=__span-12-12><span class=n>函数返回size_t类型的值</span><span class=err>，</span><span class=n>该值表示成功读到的数据个数</span>
</span><span id=__span-12-13>
</span><span id=__span-12-14><span class=n>fwrite</span>
</span><span id=__span-12-15><span class=n>函数原型</span>
</span><span id=__span-12-16><span class=kt>size_t</span><span class=w> </span><span class=n>fwrite</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>ptr</span><span class=p>,</span><span class=w> </span><span class=kt>size_t</span><span class=w> </span><span class=n>size</span><span class=p>,</span><span class=w> </span><span class=kt>size_t</span><span class=w> </span><span class=n>count</span><span class=p>,</span><span class=w> </span><span class=kt>FILE</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=p>);</span>
</span><span id=__span-12-17>
</span><span id=__span-12-18><span class=n>参数说明</span>
</span><span id=__span-12-19><span class=n>第一个参数为void</span><span class=o>*</span><span class=n>类型的指针</span><span class=err>，</span><span class=n>该指针指向需要写入目标文件流的数据的地址</span>
</span><span id=__span-12-20><span class=n>第二个参数为size_t类型的变量</span><span class=err>，</span><span class=n>该变量表示数据类型在内存中占用的大小</span>
</span><span id=__span-12-21><span class=n>第三个参数为size_t类型的变量</span><span class=err>，</span><span class=n>该变量表示需要读取的数据的个数</span>
</span><span id=__span-12-22><span class=n>第四个参数为FILE</span><span class=o>*</span><span class=n>类型的文件指针</span><span class=err>，</span><span class=w> </span><span class=n>该指针指向文件输出流</span>
</span><span id=__span-12-23>
</span><span id=__span-12-24><span class=n>返回类型</span>
</span><span id=__span-12-25><span class=n>函数返回size_t类型的值</span><span class=err>，</span><span class=n>该值表示成功写入的数据个数</span>
</span></code></pre></div></td></tr></table></div> <p>代码实例（文件输入和输出流）</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>函数<code>fread</code>和<code>fwrite</code>只能用于文件的输入和输出流，不可以用于其他输入和输出流</p> </div> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-13-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-13-2>
</span><span id=__span-13-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-13-4><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;assert.h&gt;</span>
</span><span id=__span-13-5><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdlib.h&gt;</span>
</span><span id=__span-13-6>
</span><span id=__span-13-7><span class=k>struct</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-13-8><span class=p>{</span>
</span><span id=__span-13-9><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>age</span><span class=p>;</span>
</span><span id=__span-13-10><span class=w>    </span><span class=kt>char</span><span class=w> </span><span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span><span id=__span-13-11><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>score</span><span class=p>;</span>
</span><span id=__span-13-12><span class=p>};</span>
</span><span id=__span-13-13>
</span><span id=__span-13-14><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-13-15><span class=p>{</span>
</span><span id=__span-13-16><span class=w>    </span><span class=c1>//fwrite</span>
</span><span id=__span-13-17><span class=w>    </span><span class=c1>//文件输出流</span>
</span><span id=__span-13-18><span class=w>    </span><span class=k>struct</span><span class=w> </span><span class=nc>test</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>.</span><span class=n>age</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>20</span><span class=p>,</span><span class=w> </span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Peter Parker&quot;</span><span class=p>,</span><span class=w> </span><span class=p>.</span><span class=n>score</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>90.5</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-13-19><span class=w>    </span><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>pfwrite</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test_fwrite_fread.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;wb&quot;</span><span class=p>);</span>
</span><span id=__span-13-20>
</span><span id=__span-13-21><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>pfwrite</span><span class=p>);</span>
</span><span id=__span-13-22>
</span><span id=__span-13-23><span class=w>    </span><span class=n>fwrite</span><span class=p>(</span><span class=o>&amp;</span><span class=n>p</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>p</span><span class=p>),</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>pfwrite</span><span class=p>);</span>
</span><span id=__span-13-24>
</span><span id=__span-13-25><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>pfwrite</span><span class=p>);</span>
</span><span id=__span-13-26><span class=w>    </span><span class=n>pfwrite</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span>
</span><span id=__span-13-27>
</span><span id=__span-13-28><span class=w>    </span><span class=c1>//fread</span>
</span><span id=__span-13-29><span class=w>    </span><span class=c1>//文件输入流</span>
</span><span id=__span-13-30><span class=w>    </span><span class=k>struct</span><span class=w> </span><span class=nc>test</span><span class=w> </span><span class=n>p1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-13-31><span class=w>    </span><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>pfread</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test_fwrite_fread.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;rb&quot;</span><span class=p>);</span>
</span><span id=__span-13-32>
</span><span id=__span-13-33><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>pfread</span><span class=p>);</span>
</span><span id=__span-13-34>
</span><span id=__span-13-35><span class=w>    </span><span class=n>fread</span><span class=p>(</span><span class=o>&amp;</span><span class=n>p1</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>p1</span><span class=p>),</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>pfread</span><span class=p>);</span>
</span><span id=__span-13-36>
</span><span id=__span-13-37><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>pfread</span><span class=p>);</span>
</span><span id=__span-13-38><span class=w>    </span><span class=n>pfread</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span>
</span><span id=__span-13-39>
</span><span id=__span-13-40><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d %.1f %s&quot;</span><span class=p>,</span><span class=w> </span><span class=n>p1</span><span class=p>.</span><span class=n>age</span><span class=p>,</span><span class=w> </span><span class=n>p1</span><span class=p>.</span><span class=n>score</span><span class=p>,</span><span class=w> </span><span class=n>p1</span><span class=p>.</span><span class=n>name</span><span class=p>);</span>
</span><span id=__span-13-41>
</span><span id=__span-13-42><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-13-43><span class=p>}</span>
</span><span id=__span-13-44><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-13-45><span class=mi>20</span><span class=w> </span><span class=mf>90.5</span><span class=w> </span><span class=n>Peter</span><span class=w> </span><span class=n>Parker</span>
</span></code></pre></div></td></tr></table></div> <p>文件结果：</p> <p><a class=glightbox href=image6.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=image6.png></a></p> <h3 id=printfscanffprintffscanfsprintfsscanf>函数<code>printf</code>/<code>scanf</code>、<code>fprintf</code>/<code>fscanf</code>和<code>sprintf</code>/<code>sscanf</code>对比<a class=headerlink href=#printfscanffprintffscanfsprintfsscanf title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>函数名</th> <th>功能</th> <th>使用于</th> </tr> </thead> <tbody> <tr> <td><code>printf</code></td> <td>格式化输出函数</td> <td>标准输出流</td> </tr> <tr> <td><code>scanf</code></td> <td>格式化输入函数</td> <td>标准输入流</td> </tr> <tr> <td><code>fprintf</code></td> <td>格式化输出函数</td> <td>所有输出流</td> </tr> <tr> <td><code>fscanf</code></td> <td>格式化输入函数</td> <td>所有输入流</td> </tr> <tr> <td><code>sprintf</code></td> <td>将格式化数据转化成字符串</td> <td>存在可格式化数据</td> </tr> <tr> <td><code>sscanf</code></td> <td>将字符串转化成格式化数据，遇到空格停止读取</td> <td>字符串中存在可格式化数据</td> </tr> </tbody> </table> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-14-1><span class=n>sscanf</span>
</span><span id=__span-14-2><span class=n>函数原型</span>
</span><span id=__span-14-3><span class=kt>int</span><span class=w> </span><span class=n>sscanf</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>s</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>format</span><span class=p>,</span><span class=w> </span><span class=p>...);</span>
</span><span id=__span-14-4>
</span><span id=__span-14-5><span class=n>参数说明</span>
</span><span id=__span-14-6><span class=n>第一个参数为char</span><span class=o>*</span><span class=n>类型的指针</span><span class=err>，</span><span class=n>该指针指向待转化为格式化数据的字符串的地址</span>
</span><span id=__span-14-7><span class=n>第二个参数为可变参数列表</span>
</span><span id=__span-14-8>
</span><span id=__span-14-9><span class=n>返回类型</span>
</span><span id=__span-14-10><span class=n>函数返回int类型的值</span><span class=err>，</span><span class=n>该值表示成功读取到数据的占位符的个数</span>
</span><span id=__span-14-11>
</span><span id=__span-14-12><span class=n>sprintf</span>
</span><span id=__span-14-13><span class=n>函数原型</span>
</span><span id=__span-14-14><span class=kt>int</span><span class=w> </span><span class=n>sprintf</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>str</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>format</span><span class=p>,</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=p>);</span>
</span><span id=__span-14-15>
</span><span id=__span-14-16><span class=n>参数说明</span>
</span><span id=__span-14-17><span class=n>第一个参数为char</span><span class=o>*</span><span class=n>类型的指针</span><span class=err>，</span><span class=n>该指针指向将格式化数据转换成功后的字符串的起始地址</span>
</span><span id=__span-14-18><span class=n>第二个参数为可变参数列表</span>
</span><span id=__span-14-19>
</span><span id=__span-14-20><span class=n>返回类型</span>
</span><span id=__span-14-21><span class=n>函数返回int类型的值</span><span class=err>，</span><span class=n>该值表示成功打印的字符个数</span>
</span></code></pre></div></td></tr></table></div> <p>代码实例</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-15-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-15-2>
</span><span id=__span-15-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-15-4><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;assert.h&gt;</span>
</span><span id=__span-15-5><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdlib.h&gt;</span>
</span><span id=__span-15-6>
</span><span id=__span-15-7><span class=k>enum</span>
</span><span id=__span-15-8><span class=p>{</span>
</span><span id=__span-15-9><span class=w>    </span><span class=n>SIZE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>5</span>
</span><span id=__span-15-10><span class=p>};</span>
</span><span id=__span-15-11>
</span><span id=__span-15-12><span class=k>struct</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-15-13><span class=p>{</span>
</span><span id=__span-15-14><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>age</span><span class=p>;</span>
</span><span id=__span-15-15><span class=w>    </span><span class=kt>char</span><span class=w> </span><span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span><span id=__span-15-16><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>score</span><span class=p>;</span>
</span><span id=__span-15-17><span class=p>};</span>
</span><span id=__span-15-18>
</span><span id=__span-15-19><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-15-20><span class=p>{</span>
</span><span id=__span-15-21><span class=w>    </span><span class=c1>//ssprintf</span>
</span><span id=__span-15-22><span class=w>    </span><span class=k>struct</span><span class=w> </span><span class=nc>test</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>.</span><span class=n>age</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>20</span><span class=p>,</span><span class=w> </span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Sherlock Holmes&quot;</span><span class=p>,</span><span class=w> </span><span class=p>.</span><span class=n>score</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>90.5</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-15-23><span class=w>    </span><span class=kt>char</span><span class=w> </span><span class=n>arr</span><span class=p>[</span><span class=mi>50</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-15-24><span class=w>    </span><span class=n>sprintf</span><span class=p>(</span><span class=n>arr</span><span class=p>,</span><span class=w> </span><span class=s>&quot;%d %s %.1f&quot;</span><span class=p>,</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>age</span><span class=p>,</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>score</span><span class=p>);</span>
</span><span id=__span-15-25><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%s</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>arr</span><span class=p>);</span>
</span><span id=__span-15-26>
</span><span id=__span-15-27><span class=w>    </span><span class=c1>//sscanf</span>
</span><span id=__span-15-28><span class=w>    </span><span class=k>struct</span><span class=w> </span><span class=nc>test</span><span class=w> </span><span class=n>p1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-15-29><span class=w>    </span><span class=kt>char</span><span class=o>*</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;30 John 95.5&quot;</span><span class=p>;</span>
</span><span id=__span-15-30><span class=w>    </span><span class=n>sscanf</span><span class=p>(</span><span class=n>s</span><span class=p>,</span><span class=w> </span><span class=s>&quot;%d %s %lf&quot;</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=p>(</span><span class=n>p1</span><span class=p>.</span><span class=n>age</span><span class=p>),</span><span class=w> </span><span class=n>p1</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=o>&amp;</span><span class=p>(</span><span class=n>p1</span><span class=p>.</span><span class=n>score</span><span class=p>));</span><span class=c1>//sscanf的占位符顺序需要与字符串中的数据类型顺序相同，并且sscanf读到空格时表示当前占位符已经读完，读下一个数据填充占位符直到填满占位符</span>
</span><span id=__span-15-31><span class=w>    </span><span class=c1>//sscanf(s, &quot;%s %d %lf&quot;, p1.name, &amp;(p1.age), &amp;(p1.score));//读不到数据</span>
</span><span id=__span-15-32><span class=w>    </span><span class=c1>//char* s = &quot;30 John Watson 95.5&quot;</span>
</span><span id=__span-15-33><span class=w>    </span><span class=c1>//sscanf(s, &quot;%d %s %lf&quot;, &amp;(p1.age), p1.name, &amp;(p1.score))//读到John时，填充%s，接着将会将读Watson，但是Watson不属于%f可识别的内容，故%f读取不到内容，当前缓冲区还有Watson和95.5</span>
</span><span id=__span-15-34><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d %.1f %s</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>p1</span><span class=p>.</span><span class=n>age</span><span class=p>,</span><span class=w> </span><span class=n>p1</span><span class=p>.</span><span class=n>score</span><span class=p>,</span><span class=w> </span><span class=n>p1</span><span class=p>.</span><span class=n>name</span><span class=p>);</span>
</span><span id=__span-15-35>
</span><span id=__span-15-36><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-15-37><span class=p>}</span>
</span><span id=__span-15-38><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-15-39><span class=mi>20</span><span class=w> </span><span class=n>Sherlock</span><span class=w> </span><span class=n>Holmes</span><span class=w> </span><span class=mf>90.5</span>
</span><span id=__span-15-40><span class=mi>30</span><span class=w> </span><span class=mf>95.5</span><span class=w> </span><span class=n>John</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_12>文件随机读写<a class=headerlink href=#_12 title="Permanent link">&para;</a></h2> <p>随机读写：按照用户需求，指定文件指针的位置，以该位置为标准进行读写</p> <h3 id=fseek>函数<code>fseek</code><a class=headerlink href=#fseek title="Permanent link">&para;</a></h3> <p>函数作用：根据文件指针的位置和偏移量来定位文件指针</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-16-1><span class=n>函数原型</span>
</span><span id=__span-16-2><span class=kt>int</span><span class=w> </span><span class=n>fseek</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=kt>FILE</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>stream</span><span class=p>,</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>offset</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>origin</span><span class=w> </span><span class=p>);</span>
</span><span id=__span-16-3>
</span><span id=__span-16-4><span class=n>参数说明</span>
</span><span id=__span-16-5><span class=n>第一个参数为FILE</span><span class=o>*</span><span class=n>类型的文件指针</span><span class=err>，</span><span class=n>该指针指向文件输入和输出流</span>
</span><span id=__span-16-6><span class=n>第二个参数为long</span><span class=w> </span><span class=n>int类型的变量</span><span class=err>，</span><span class=n>该变量表示偏移量</span><span class=err>，</span><span class=n>即指针移动到指定位置需要的值</span>
</span><span id=__span-16-7><span class=n>第三个参数为int类型的变量</span><span class=err>，</span><span class=n>该变量表示开始计算偏移量的文件指针起始位置</span><span class=err>，</span><span class=n>包括SEEK_CUR</span><span class=err>（</span><span class=n>文件指针当前位置</span><span class=err>）、</span><span class=n>SEEK_SET</span><span class=err>（</span><span class=n>文件起始位置</span><span class=err>）、</span><span class=n>SEEK_END</span><span class=err>（</span><span class=n>文件末尾位置</span><span class=err>）</span>
</span><span id=__span-16-8>
</span><span id=__span-16-9><span class=n>返回类型</span>
</span><span id=__span-16-10><span class=n>函数返回int类型的值</span><span class=err>，</span><span class=n>当函数成功回到指定位置函数返回0</span><span class=err>，</span><span class=n>否则返回非0值</span>
</span></code></pre></div></td></tr></table></div> <p>代码实例</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-17-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-17-2>
</span><span id=__span-17-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-17-4><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;assert.h&gt;</span>
</span><span id=__span-17-5><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-17-6><span class=p>{</span>
</span><span id=__span-17-7><span class=w>    </span><span class=c1>//fseek</span>
</span><span id=__span-17-8><span class=w>    </span><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test_fseek.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;w&quot;</span><span class=p>);</span>
</span><span id=__span-17-9><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>p</span><span class=p>);</span>
</span><span id=__span-17-10>
</span><span id=__span-17-11><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>26</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-17-12><span class=w>    </span><span class=p>{</span>
</span><span id=__span-17-13><span class=w>        </span><span class=n>fputc</span><span class=p>(</span><span class=sc>&#39;a&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>p</span><span class=p>);</span>
</span><span id=__span-17-14><span class=w>    </span><span class=p>}</span>
</span><span id=__span-17-15>
</span><span id=__span-17-16><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>p</span><span class=p>);</span>
</span><span id=__span-17-17><span class=w>    </span><span class=n>p</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span>
</span><span id=__span-17-18>
</span><span id=__span-17-19><span class=w>    </span><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>pfseek</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test_fseek.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;r&quot;</span><span class=p>);</span>
</span><span id=__span-17-20><span class=w>    </span><span class=c1>//当前光标在第一个字符前</span>
</span><span id=__span-17-21><span class=w>    </span><span class=kt>char</span><span class=w> </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-17-22><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span><span class=c1>//打印a</span>
</span><span id=__span-17-23>
</span><span id=__span-17-24><span class=w>    </span><span class=c1>//当前光标在第二个字符前</span>
</span><span id=__span-17-25><span class=w>    </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-17-26><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span><span class=c1>//打印b</span>
</span><span id=__span-17-27>
</span><span id=__span-17-28><span class=w>    </span><span class=c1>//当前光标在第三个字符前</span>
</span><span id=__span-17-29><span class=w>    </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-17-30><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span><span class=c1>//打印c</span>
</span><span id=__span-17-31>
</span><span id=__span-17-32><span class=w>    </span><span class=c1>//当前光标在第四个字符前</span>
</span><span id=__span-17-33><span class=w>    </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-17-34><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span><span class=c1>//打印d</span>
</span><span id=__span-17-35>
</span><span id=__span-17-36><span class=w>    </span><span class=c1>//使光标从当前位置到文件起始位置</span>
</span><span id=__span-17-37><span class=w>    </span><span class=n>fseek</span><span class=p>(</span><span class=n>pfseek</span><span class=p>,</span><span class=w> </span><span class=mi>-4</span><span class=p>,</span><span class=w> </span><span class=n>SEEK_CUR</span><span class=p>);</span><span class=c1>//从SEEK_CUR开始计算偏移量，当前光标在d位置，在当前位置前面有4个字符，传入-4值</span>
</span><span id=__span-17-38><span class=w>    </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-17-39><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span><span class=c1>//打印a</span>
</span><span id=__span-17-40>
</span><span id=__span-17-41><span class=w>    </span><span class=c1>//使光标从起始位置到文件中某一位置</span>
</span><span id=__span-17-42><span class=w>    </span><span class=n>fseek</span><span class=p>(</span><span class=n>pfseek</span><span class=p>,</span><span class=w> </span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=n>SEEK_SET</span><span class=p>);</span><span class=c1>//从SEEK_SET开始计算偏移量，当前光标在起始位置，在当前位置向后跳过8个字符，打印第9个字符，传入8</span>
</span><span id=__span-17-43><span class=w>    </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-17-44><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span><span class=c1>//打印h</span>
</span><span id=__span-17-45>
</span><span id=__span-17-46><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-17-47><span class=w>    </span><span class=n>pfseek</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span>
</span><span id=__span-17-48>
</span><span id=__span-17-49><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-17-50><span class=p>}</span>
</span><span id=__span-17-51><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-17-52><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>i</span>
</span></code></pre></div></td></tr></table></div> <h3 id=ftell>函数<code>ftell</code><a class=headerlink href=#ftell title="Permanent link">&para;</a></h3> <p>函数作用：返回文件指针相对于起始位置的偏移量</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-18-1><span class=n>函数原型</span>
</span><span id=__span-18-2><span class=kt>long</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>ftell</span><span class=w> </span><span class=p>(</span><span class=w> </span><span class=kt>FILE</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>stream</span><span class=w> </span><span class=p>);</span>
</span><span id=__span-18-3>
</span><span id=__span-18-4><span class=n>参数说明</span>
</span><span id=__span-18-5><span class=n>函数参数为FILE</span><span class=o>*</span><span class=n>类型的文件指针</span><span class=err>，</span><span class=n>该指针指向文件的输入和输出流</span>
</span><span id=__span-18-6>
</span><span id=__span-18-7><span class=n>返回类型</span>
</span><span id=__span-18-8><span class=n>函数返回long</span><span class=w> </span><span class=n>int类型的值</span><span class=err>，</span><span class=n>该值表示文件指针相对于起始位置的偏移量</span><span class=err>，</span><span class=n>错误时返回</span><span class=mi>-1L</span>
</span></code></pre></div></td></tr></table></div> <p>代码实例</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-19-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-19-2>
</span><span id=__span-19-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-19-4><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;assert.h&gt;</span>
</span><span id=__span-19-5><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdlib.h&gt;</span>
</span><span id=__span-19-6>
</span><span id=__span-19-7><span class=k>struct</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-19-8><span class=p>{</span>
</span><span id=__span-19-9><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>age</span><span class=p>;</span>
</span><span id=__span-19-10><span class=w>    </span><span class=kt>char</span><span class=w> </span><span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span><span id=__span-19-11><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>score</span><span class=p>;</span>
</span><span id=__span-19-12><span class=p>};</span>
</span><span id=__span-19-13>
</span><span id=__span-19-14><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-19-15><span class=p>{</span>
</span><span id=__span-19-16><span class=w>    </span><span class=c1>//fseek</span>
</span><span id=__span-19-17><span class=w>    </span><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test_fseek.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;w&quot;</span><span class=p>);</span>
</span><span id=__span-19-18><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>p</span><span class=p>);</span>
</span><span id=__span-19-19>
</span><span id=__span-19-20><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>26</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-19-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-19-22><span class=w>        </span><span class=n>fputc</span><span class=p>(</span><span class=sc>&#39;a&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>p</span><span class=p>);</span>
</span><span id=__span-19-23><span class=w>    </span><span class=p>}</span>
</span><span id=__span-19-24>
</span><span id=__span-19-25><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>p</span><span class=p>);</span>
</span><span id=__span-19-26><span class=w>    </span><span class=n>p</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span>
</span><span id=__span-19-27>
</span><span id=__span-19-28><span class=w>    </span><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>pfseek</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test_fseek.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;r&quot;</span><span class=p>);</span>
</span><span id=__span-19-29><span class=w>    </span><span class=c1>//当前光标在第一个字符前</span>
</span><span id=__span-19-30><span class=w>    </span><span class=kt>char</span><span class=w> </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-19-31><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span><span class=c1>//打印a</span>
</span><span id=__span-19-32>
</span><span id=__span-19-33><span class=w>    </span><span class=c1>//当前光标在第二个字符前</span>
</span><span id=__span-19-34><span class=w>    </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-19-35><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span><span class=c1>//打印b</span>
</span><span id=__span-19-36>
</span><span id=__span-19-37><span class=w>    </span><span class=c1>//当前光标在第三个字符前</span>
</span><span id=__span-19-38><span class=w>    </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-19-39><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span><span class=c1>//打印c</span>
</span><span id=__span-19-40>
</span><span id=__span-19-41><span class=w>    </span><span class=c1>//当前光标在第四个字符前</span>
</span><span id=__span-19-42><span class=w>    </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-19-43><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span><span class=c1>//打印d</span>
</span><span id=__span-19-44>
</span><span id=__span-19-45><span class=w>    </span><span class=c1>//使光标从当前位置到文件起始位置</span>
</span><span id=__span-19-46><span class=w>    </span><span class=c1>//fseek(pfseek, -4, SEEK_CUR);//从SEEK_CUR开始计算偏移量，当前光标在d位置，在当前位置前面有4个字符，传入-4值</span>
</span><span id=__span-19-47><span class=w>    </span><span class=c1>//ch = fgetc(pfseek);</span>
</span><span id=__span-19-48><span class=w>    </span><span class=c1>//printf(&quot;%c &quot;, ch);//打印a</span>
</span><span id=__span-19-49><span class=w>    </span><span class=c1>//使用ftell函数确定偏移量</span>
</span><span id=__span-19-50><span class=w>    </span><span class=n>fseek</span><span class=p>(</span><span class=n>pfseek</span><span class=p>,</span><span class=w> </span><span class=o>-</span><span class=n>ftell</span><span class=p>(</span><span class=n>pfseek</span><span class=p>),</span><span class=w> </span><span class=n>SEEK_CUR</span><span class=p>);</span>
</span><span id=__span-19-51><span class=w>    </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-19-52><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span>
</span><span id=__span-19-53>
</span><span id=__span-19-54><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-19-55><span class=w>    </span><span class=n>pfseek</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span>
</span><span id=__span-19-56>
</span><span id=__span-19-57><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-19-58><span class=p>}</span>
</span><span id=__span-19-59><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-19-60><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=n>a</span>
</span></code></pre></div></td></tr></table></div> <h3 id=rewind>函数<code>rewind</code><a class=headerlink href=#rewind title="Permanent link">&para;</a></h3> <p>函数作用：让文件指针回到文件的起始位置</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-20-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-20-2>
</span><span id=__span-20-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-20-4><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;assert.h&gt;</span>
</span><span id=__span-20-5><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdlib.h&gt;</span>
</span><span id=__span-20-6>
</span><span id=__span-20-7><span class=k>struct</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-20-8><span class=p>{</span>
</span><span id=__span-20-9><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>age</span><span class=p>;</span>
</span><span id=__span-20-10><span class=w>    </span><span class=kt>char</span><span class=w> </span><span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span><span id=__span-20-11><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>score</span><span class=p>;</span>
</span><span id=__span-20-12><span class=p>};</span>
</span><span id=__span-20-13>
</span><span id=__span-20-14><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-20-15><span class=p>{</span>
</span><span id=__span-20-16><span class=w>    </span><span class=c1>//fseek</span>
</span><span id=__span-20-17><span class=w>    </span><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test_fseek.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;w&quot;</span><span class=p>);</span>
</span><span id=__span-20-18><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>p</span><span class=p>);</span>
</span><span id=__span-20-19>
</span><span id=__span-20-20><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>26</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-20-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-20-22><span class=w>        </span><span class=n>fputc</span><span class=p>(</span><span class=sc>&#39;a&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>p</span><span class=p>);</span>
</span><span id=__span-20-23><span class=w>    </span><span class=p>}</span>
</span><span id=__span-20-24>
</span><span id=__span-20-25><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>p</span><span class=p>);</span>
</span><span id=__span-20-26><span class=w>    </span><span class=n>p</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span>
</span><span id=__span-20-27>
</span><span id=__span-20-28><span class=w>    </span><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>pfseek</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test_fseek.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;r&quot;</span><span class=p>);</span>
</span><span id=__span-20-29><span class=w>    </span><span class=c1>//当前光标在第一个字符前</span>
</span><span id=__span-20-30><span class=w>    </span><span class=kt>char</span><span class=w> </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-20-31><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span><span class=c1>//打印a</span>
</span><span id=__span-20-32>
</span><span id=__span-20-33><span class=w>    </span><span class=c1>//当前光标在第二个字符前</span>
</span><span id=__span-20-34><span class=w>    </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-20-35><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span><span class=c1>//打印b</span>
</span><span id=__span-20-36>
</span><span id=__span-20-37><span class=w>    </span><span class=c1>//当前光标在第三个字符前</span>
</span><span id=__span-20-38><span class=w>    </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-20-39><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span><span class=c1>//打印c</span>
</span><span id=__span-20-40>
</span><span id=__span-20-41><span class=w>    </span><span class=c1>//当前光标在第四个字符前</span>
</span><span id=__span-20-42><span class=w>    </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-20-43><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span><span class=c1>//打印d</span>
</span><span id=__span-20-44>
</span><span id=__span-20-45><span class=w>    </span><span class=c1>//使光标从当前位置到文件起始位置</span>
</span><span id=__span-20-46><span class=w>    </span><span class=c1>//fseek(pfseek, -4, SEEK_CUR);//从SEEK_CUR开始计算偏移量，当前光标在d位置，在当前位置前面有4个字符，传入-4值</span>
</span><span id=__span-20-47><span class=w>    </span><span class=c1>//ch = fgetc(pfseek);</span>
</span><span id=__span-20-48><span class=w>    </span><span class=c1>//printf(&quot;%c &quot;, ch);//打印a</span>
</span><span id=__span-20-49><span class=w>    </span><span class=c1>//使用ftell函数确定偏移量</span>
</span><span id=__span-20-50><span class=w>    </span><span class=c1>//fseek(pfseek, -ftell(pfseek), SEEK_CUR);</span>
</span><span id=__span-20-51><span class=w>    </span><span class=c1>//ch = fgetc(pfseek);</span>
</span><span id=__span-20-52><span class=w>    </span><span class=c1>//printf(&quot;%c &quot;, ch);</span>
</span><span id=__span-20-53><span class=w>    </span><span class=c1>//使用rewind函数使光标从当前位置回到文件起始位置</span>
</span><span id=__span-20-54><span class=w>    </span><span class=n>rewind</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-20-55><span class=w>    </span><span class=n>ch</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-20-56><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%c &quot;</span><span class=p>,</span><span class=w> </span><span class=n>ch</span><span class=p>);</span>
</span><span id=__span-20-57>
</span><span id=__span-20-58><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>pfseek</span><span class=p>);</span>
</span><span id=__span-20-59><span class=w>    </span><span class=n>pfseek</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span>
</span><span id=__span-20-60>
</span><span id=__span-20-61><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-20-62><span class=p>}</span>
</span><span id=__span-20-63><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-20-64><span class=n>a</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=n>d</span><span class=w> </span><span class=n>a</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_13>文件读取结束后的原因判定<a class=headerlink href=#_13 title="Permanent link">&para;</a></h2> <h3 id=feof>函数<code>feof</code><a class=headerlink href=#feof title="Permanent link">&para;</a></h3> <p>函数作用：当文件读取结束的时候（已知文件读取结束），判断是读取结束的原因是否是：遇到文件末尾结束</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>在文件读取过程中，不能用<code>feof</code>函数的返回值直接来判断文件的是否结束</p> </div> <h3 id=ferror>函数<code>ferror</code><a class=headerlink href=#ferror title="Permanent link">&para;</a></h3> <p>函数作用：当文件读取结束的时候（已知文件读取结束），用于检测在读取或写入文件时是否发生错误。如果在进行文件操作时发生错误，<code>ferror</code>函数会返回非零值</p> <h3 id=_14>文本文件中的错误判定<a class=headerlink href=#_14 title="Permanent link">&para;</a></h3> <p>文本文件读取是否结束，判断返回值是否为 <code>EOF</code> ，或者 <code>NULL</code> </p> <p>例如：</p> <ul> <li><code>fgetc</code> 判断是否为 <code>EOF</code></li> <li><code>fgets</code> 判断返回值是否为 <code>NULL</code></li> </ul> <p>代码实例</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-21-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-21-2>
</span><span id=__span-21-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-21-4>
</span><span id=__span-21-5><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-21-6><span class=p>{</span>
</span><span id=__span-21-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>c</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-21-8><span class=w>    </span><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>fp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test_feof_text.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;r&quot;</span><span class=p>);</span>
</span><span id=__span-21-9><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>fp</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-21-10><span class=w>        </span><span class=n>perror</span><span class=p>(</span><span class=s>&quot;File opening failed&quot;</span><span class=p>);</span>
</span><span id=__span-21-11><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>EXIT_FAILURE</span><span class=p>;</span>
</span><span id=__span-21-12><span class=w>    </span><span class=p>}</span>
</span><span id=__span-21-13><span class=w>    </span><span class=c1>//fgetc 当读取失败的时候或者遇到文件结束的时候，都会返回EOF </span>
</span><span id=__span-21-14><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>((</span><span class=n>c</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fgetc</span><span class=p>(</span><span class=n>fp</span><span class=p>))</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>EOF</span><span class=p>)</span>
</span><span id=__span-21-15><span class=w>    </span><span class=p>{</span>
</span><span id=__span-21-16><span class=w>        </span><span class=n>putchar</span><span class=p>(</span><span class=n>c</span><span class=p>);</span>
</span><span id=__span-21-17><span class=w>    </span><span class=p>}</span>
</span><span id=__span-21-18><span class=w>    </span><span class=c1>//判断是什么原因结束的 </span>
</span><span id=__span-21-19><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>ferror</span><span class=p>(</span><span class=n>fp</span><span class=p>))</span>
</span><span id=__span-21-20><span class=w>        </span><span class=n>puts</span><span class=p>(</span><span class=s>&quot;I/O error when reading&quot;</span><span class=p>);</span>
</span><span id=__span-21-21><span class=w>    </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>feof</span><span class=p>(</span><span class=n>fp</span><span class=p>))</span>
</span><span id=__span-21-22><span class=w>        </span><span class=n>puts</span><span class=p>(</span><span class=s>&quot;End of file reached successfully&quot;</span><span class=p>);</span>
</span><span id=__span-21-23>
</span><span id=__span-21-24><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>fp</span><span class=p>);</span>
</span><span id=__span-21-25><span class=w>    </span><span class=n>fp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span>
</span><span id=__span-21-26>
</span><span id=__span-21-27><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-21-28><span class=p>}</span>
</span><span id=__span-21-29><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-21-30><span class=n>End</span><span class=w> </span><span class=n>of</span><span class=w> </span><span class=n>file</span><span class=w> </span><span class=n>reached</span><span class=w> </span><span class=n>successfully</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_15>二进制文件的错误判定<a class=headerlink href=#_15 title="Permanent link">&para;</a></h3> <p>函数作用：二进制文件的读取结束判断，判断返回值是否小于预期中要读的个数</p> <p>例如：</p> <p><code>fread</code>判断返回值是否小于预期中要读的个数</p> <p>代码实例</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-22-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-22-2>
</span><span id=__span-22-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-22-4><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;assert.h&gt;</span>
</span><span id=__span-22-5><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdlib.h&gt;</span>
</span><span id=__span-22-6>
</span><span id=__span-22-7><span class=k>enum</span>
</span><span id=__span-22-8><span class=p>{</span>
</span><span id=__span-22-9><span class=w>    </span><span class=n>SIZE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>5</span>
</span><span id=__span-22-10><span class=p>};</span>
</span><span id=__span-22-11>
</span><span id=__span-22-12><span class=k>struct</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-22-13><span class=p>{</span>
</span><span id=__span-22-14><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>age</span><span class=p>;</span>
</span><span id=__span-22-15><span class=w>    </span><span class=kt>char</span><span class=w> </span><span class=n>name</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span>
</span><span id=__span-22-16><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>score</span><span class=p>;</span>
</span><span id=__span-22-17><span class=p>};</span>
</span><span id=__span-22-18>
</span><span id=__span-22-19><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-22-20><span class=p>{</span>
</span><span id=__span-22-21><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>a</span><span class=p>[</span><span class=n>SIZE</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mf>1.</span><span class=p>,</span><span class=mf>2.</span><span class=p>,</span><span class=mf>3.</span><span class=p>,</span><span class=mf>4.</span><span class=p>,</span><span class=mf>5.</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-22-22><span class=w>    </span><span class=kt>FILE</span><span class=o>*</span><span class=w> </span><span class=n>fp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test.bin&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;wb&quot;</span><span class=p>);</span>
</span><span id=__span-22-23><span class=w>    </span><span class=n>fwrite</span><span class=p>(</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>SIZE</span><span class=p>,</span><span class=w> </span><span class=n>fp</span><span class=p>);</span>
</span><span id=__span-22-24><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>fp</span><span class=p>);</span>
</span><span id=__span-22-25><span class=w>    </span><span class=kt>double</span><span class=w> </span><span class=n>b</span><span class=p>[</span><span class=n>SIZE</span><span class=p>];</span>
</span><span id=__span-22-26><span class=w>    </span><span class=n>fp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test.bin&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;rb&quot;</span><span class=p>);</span>
</span><span id=__span-22-27><span class=w>    </span><span class=kt>size_t</span><span class=w> </span><span class=n>ret_code</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fread</span><span class=p>(</span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=n>SIZE</span><span class=p>,</span><span class=w> </span><span class=n>fp</span><span class=p>);</span>
</span><span id=__span-22-28>
</span><span id=__span-22-29><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>ret_code</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>SIZE</span><span class=p>)</span>
</span><span id=__span-22-30><span class=w>    </span><span class=p>{</span>
</span><span id=__span-22-31><span class=w>        </span><span class=n>puts</span><span class=p>(</span><span class=s>&quot;Array read successfully, contents: &quot;</span><span class=p>);</span>
</span><span id=__span-22-32><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>n</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>SIZE</span><span class=p>;</span><span class=w> </span><span class=o>++</span><span class=n>n</span><span class=p>)</span><span class=w> </span>
</span><span id=__span-22-33><span class=w>        </span><span class=p>{</span>
</span><span id=__span-22-34><span class=w>            </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%.1f &quot;</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>[</span><span class=n>n</span><span class=p>]);</span>
</span><span id=__span-22-35><span class=w>        </span><span class=p>}</span>
</span><span id=__span-22-36>
</span><span id=__span-22-37><span class=w>        </span><span class=n>putchar</span><span class=p>(</span><span class=sc>&#39;\n&#39;</span><span class=p>);</span>
</span><span id=__span-22-38><span class=w>    </span><span class=p>}</span>
</span><span id=__span-22-39><span class=w>    </span><span class=k>else</span><span class=w> </span>
</span><span id=__span-22-40><span class=w>    </span><span class=p>{</span>
</span><span id=__span-22-41><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>feof</span><span class=p>(</span><span class=n>fp</span><span class=p>))</span>
</span><span id=__span-22-42><span class=w>            </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;Error reading test.bin: unexpected end of file</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>);</span>
</span><span id=__span-22-43><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>ferror</span><span class=p>(</span><span class=n>fp</span><span class=p>))</span>
</span><span id=__span-22-44><span class=w>        </span><span class=p>{</span>
</span><span id=__span-22-45><span class=w>            </span><span class=n>perror</span><span class=p>(</span><span class=s>&quot;Error reading test.bin&quot;</span><span class=p>);</span>
</span><span id=__span-22-46><span class=w>        </span><span class=p>}</span>
</span><span id=__span-22-47><span class=w>    </span><span class=p>}</span>
</span><span id=__span-22-48>
</span><span id=__span-22-49><span class=w>    </span><span class=n>fclose</span><span class=p>(</span><span class=n>fp</span><span class=p>);</span>
</span><span id=__span-22-50><span class=w>    </span><span class=n>fp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span>
</span><span id=__span-22-51>
</span><span id=__span-22-52><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-22-53><span class=p>}</span>
</span><span id=__span-22-54><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-22-55><span class=n>Array</span><span class=w> </span><span class=n>read</span><span class=w> </span><span class=n>successfully</span><span class=p>,</span><span class=w> </span><span class=n>contents</span><span class=o>:</span>
</span><span id=__span-22-56><span class=mf>1.0</span><span class=w> </span><span class=mf>2.0</span><span class=w> </span><span class=mf>3.0</span><span class=w> </span><span class=mf>4.0</span><span class=w> </span><span class=mf>5.0</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_16>文件缓冲区<a class=headerlink href=#_16 title="Permanent link">&para;</a></h2> <p>ANSIC标准采用“缓冲文件系统”处理的数据文件的，所谓缓冲文件系统是指系统自动地在内存中为 程序中每⼀个正在使用的文件开辟一块“文件缓冲区”。从内存向磁盘输出数据会先送到内存中的缓 冲区，装满缓冲区后才⼀起送到磁盘上。如果从磁盘向计算机读入数据，则从磁盘文件中读取数据输 入到内存缓冲区（充满缓冲区），然后再从缓冲区逐个地将数据送到程序数据区（程序变量等）。缓 冲区的大小根据C编译系统决定</p> <p><a class=glightbox href=image7.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=image7.png></a></p> <p>代码演示</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-23-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-23-2><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;windows.h&gt;</span>
</span><span id=__span-23-3><span class=c1>//VS2022 Win11环境测试 </span>
</span><span id=__span-23-4><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-23-5><span class=p>{</span>
</span><span id=__span-23-6><span class=w>        </span><span class=kt>FILE</span><span class=o>*</span><span class=n>pf</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fopen</span><span class=p>(</span><span class=s>&quot;test.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;w&quot;</span><span class=p>);</span>
</span><span id=__span-23-7><span class=w>        </span><span class=n>fputs</span><span class=p>(</span><span class=s>&quot;abcdef&quot;</span><span class=p>,</span><span class=w> </span><span class=n>pf</span><span class=p>);</span><span class=c1>//先将代码放在输出缓冲区 </span>
</span><span id=__span-23-8><span class=w>        </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;睡眠10秒-已经写数据了，打开test.txt⽂件，发现⽂件没有内容</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>);</span>
</span><span id=__span-23-9><span class=w>        </span><span class=n>Sleep</span><span class=p>(</span><span class=mi>10000</span><span class=p>);</span>
</span><span id=__span-23-10><span class=w>        </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;刷新缓冲区</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>);</span>
</span><span id=__span-23-11><span class=w>        </span><span class=n>fflush</span><span class=p>(</span><span class=n>pf</span><span class=p>);</span><span class=c1>//刷新缓冲区时，才将输出缓冲区的数据写到⽂件（磁盘） </span>
</span><span id=__span-23-12><span class=w>        </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;再睡眠10秒-此时，再次打开test.txt⽂件，⽂件有内容了</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>);</span>
</span><span id=__span-23-13><span class=w>        </span><span class=n>Sleep</span><span class=p>(</span><span class=mi>10000</span><span class=p>);</span>
</span><span id=__span-23-14><span class=w>        </span><span class=n>fclose</span><span class=p>(</span><span class=n>pf</span><span class=p>);</span>
</span><span id=__span-23-15><span class=w>        </span><span class=c1>//注：fclose在关闭⽂件的时候，也会刷新缓冲区 </span>
</span><span id=__span-23-16><span class=w>        </span><span class=n>pf</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>NULL</span><span class=p>;</span>
</span><span id=__span-23-17><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-23-18><span class=p>}</span>
</span><span id=__span-23-19><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-23-20><span class=n>睡眠10秒</span><span class=o>-</span><span class=n>已经写数据了</span><span class=err>，</span><span class=n>打开test_fflush</span><span class=p>.</span><span class=n>txt文件</span><span class=err>，</span><span class=n>发现文件没有内容</span>
</span><span id=__span-23-21><span class=n>刷新缓冲区</span>
</span><span id=__span-23-22><span class=n>再睡眠10秒</span><span class=o>-</span><span class=n>此时</span><span class=err>，</span><span class=n>再次打开test_fflush</span><span class=p>.</span><span class=n>txt文件</span><span class=err>，</span><span class=n>文件有内容了</span>
</span></code></pre></div></td></tr></table></div> <p>刷新缓冲区之前：</p> <p><a class=glightbox href=image8.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=image8.png></a></p> <p>刷新缓冲区之后：</p> <p><a class=glightbox href=image9.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=image9.png></a></p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>因为有缓冲区的存在，C语言在操作文件的时候，需要做刷新缓冲区或者在文件操作结束的时候使用<code>fclose</code>函数关闭文件来对缓冲区进行刷新</p> </div> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年10月3日</span> </span> </aside> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> 页面有帮助吗？ </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title=页面对我有帮助 data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title=页面没有帮助到我 data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> 谢谢你的反馈！ </div> <div data-md-value=0 hidden> 谢谢你的反馈！联系<a href=https://www.help-doc.top/author/contact/contact.html>作者</a>提供更详细的信息 </div> </div> </div> </fieldset> </form> <!-- Waline 评论系统 --> <div id=waline></div> <!-- 阅读进度条 - 直接在HTML中定义 --> <div class=reading-progress></div> <!-- 滚动指示器 - 直接在HTML中定义 --> <div class=scroll-indicator></div> <!-- 评论系统 --> <!-- Waline 评论系统 --> <div id=waline></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Footer --> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2024-2025 柯懒不是柯南 </div> </div> <div class="md-footer-love md-typeset"> 一闪一闪亮晶晶，不及<span class=love-highlight>小亮</span><span class=love-heart>♥</span>照我心。To Li Liang </div> <div class=md-social> <a href=https://github.com/H0308 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.help-doc.top/author/contact/contact.html target=_blank rel=noopener title=www.help-doc.top class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.indexes", "navigation.prune", "navigation.tabs", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src=../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../javascripts/katex.min.js></script> <script src=../../javascripts/other.min.js></script> <script src=../../javascripts/copyright.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js></script> <script src=../../assets/javascripts/toggle-sidebar.js async></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>