<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://www.help-doc.top/cpp/class-obj-other/class-obj-other.html><link rel=prev href=../member-func/member-func.html><link rel=next href=../memory/memory.html><link rel=icon href=../../images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.12"><title>C++类和对象相关内容 - 柯懒的知识库</title><link rel=stylesheet href=../../assets/stylesheets/main.2afb09e1.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=stylesheet href=../../css/timeline.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-9XWRGNRRSY"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-9XWRGNRRSY",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-9XWRGNRRSY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=stylesheet href=../../stylesheets/colors.min.css><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (max-width: 1199px)"><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (min-width: 1200px)" id=theme2-desktop><link rel=stylesheet href=../../stylesheets/theme1.min.css media="screen and (min-width: 1200px)" id=theme1-desktop><link rel=stylesheet href=../../stylesheets/print.min.css><link rel=stylesheet href=../../stylesheets/font-dongguanti.min.css id=font-dongguanti><link rel=stylesheet href=../../stylesheets/font-oppoti.min.css id=font-oppoti disabled><link rel=stylesheet href=../../stylesheets/font-jiangchengti.min.css id=font-jiangchengti disabled><link rel=stylesheet href=../../stylesheets/font-lxgw.min.css id=font-lxgw disabled><link rel=stylesheet href=../../stylesheets/code-font-dejavu-sans-mono.min.css id=code-font-dejavu-sans-mono><link rel=stylesheet href=../../stylesheets/code-font-zsft-hk.min.css id=code-font-zsft-hk disabled><link rel=stylesheet href=https://unpkg.com/@waline/client@v3/dist/waline.css><link rel=stylesheet href=../../stylesheets/waline.min.css><script src=https://cdn.jsdelivr.net/npm/mermaid@11.5.0/dist/mermaid.min.js></script><script src=../../javascripts/start.min.js></script><script type=module src=../../javascripts/waline.min.js></script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#c class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../index.html title=柯懒的知识库 class="md-header__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 柯懒的知识库 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> C++类和对象相关内容 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan aria-label type=radio name=__palette id=__palette_1> </form> <!-- 头像元素 - 直接在HTML中定义 --> <div class=header-avatar> <img src=../../author/作者.assets/20250206-200653.jpg alt=头像> <div class=avatar-dropdown> <p><strong>柯懒不是柯南</strong></p> <a href=../../author/contact/contact.html class=avatar-dropdown-item>吵醒柯懒</a> <div class=avatar-dropdown-divider></div> <a href=../../author/about/about.html class=avatar-dropdown-item>柯懒自传</a> <div class=avatar-dropdown-divider></div> <a href=https://github.com/H0308 class=avatar-dropdown-item>柯懒的零食库</a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=查找> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <!-- 独立的切换按钮 --> <div class=toolbar-toggle-btn id=toolbarToggleBtn onclick=toggleToolbar()> <div class=toggle-icon> <svg class=toggle-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=16 height=16> <path d="M346.538667 1024L170.666667 853.333333l341.333333-341.333333-341.333333-341.333333 175.872-170.666667L853.333333 512z" fill=currentColor></path> </svg> </div> </div> <!-- 右侧固定功能条 - 独立于内容区 --> <div class=floating-toolbar id=floatingToolbar> <!-- 字体切换功能 --> <div class="toolbar-item font-switcher"> <div class=toolbar-icon> <svg class=font-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M913.408 1024l-66.56 0q-29.696 0-51.2-5.12t-36.864-15.872-26.112-27.136-19.968-37.888q-15.36-38.912-28.16-70.656t-22.016-55.296q-11.264-26.624-20.48-49.152l-254.976 0q-7.168 23.552-17.408 51.2-8.192 23.552-21.504 56.832t-30.72 72.192q-20.48 46.08-47.104 63.488t-60.416 17.408l-70.656 0q-45.056 0-60.928-19.968t2.56-68.096q18.432-46.08 43.008-108.544t52.224-132.608 57.344-143.872 57.344-144.384q65.536-164.864 137.216-343.04 7.168-17.408 18.432-31.744 10.24-11.264 27.136-21.504t42.496-10.24q26.624 0 43.52 10.752t28.16 24.064q12.288 15.36 19.456 33.792 72.704 180.224 138.24 345.088 27.648 70.656 57.344 143.872t56.832 142.336 51.2 129.536 41.472 104.448q14.336 34.816 4.096 62.464t-43.008 27.648zM616.448 634.88l-97.28-347.136-1.024 0-108.544 347.136 206.848 0z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>内容字体</div> <div class=font-dropdown-toolbar> <div class=font-current-toolbar onclick=toggleFontDropdownToolbar()> <span class=current-font-name-toolbar>东观体</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=font-options-toolbar> <div class=font-option-toolbar data-font=dongguanti onclick="selectFontToolbar('dongguanti')">上图东观体 </div> <div class=font-option-toolbar data-font=oppoti onclick="selectFontToolbar('oppoti')">OPPO Sans </div> <div class=font-option-toolbar data-font=jiangchengti onclick="selectFontToolbar('jiangchengti')"> 江城黑体</div> <div class=font-option-toolbar data-font=lxgw onclick="selectFontToolbar('lxgw')">霞鹜臻楷</div> </div> </div> </div> <!-- 代码字体切换功能 --> <div class="toolbar-item code-font-switcher"> <div class=toolbar-icon> <svg t=1753672111433 class="icon code-font-icon" viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg p-id=5148 width=20 height=20> <path d="M941.709938 0H82.290062A82.290062 82.290062 0 0 0 0 82.290062v859.419876A82.290062 82.290062 0 0 0 82.290062 1022.53923h859.419876A82.290062 82.290062 0 0 0 1022.53923 941.709938V82.290062A82.290062 82.290062 0 0 0 941.709938 0zM188.439372 553.631954a40.901569 40.901569 0 0 1-29.215406-70.116975L292.154066 351.558726 159.223966 218.628626a40.901569 40.901569 0 0 1 58.430813-57.94389l160.197813 162.145507a40.901569 40.901569 0 0 1 0 57.943889l-160.197813 160.684736a40.901569 40.901569 0 0 1-29.215407 12.173086z m443.587257 0H405.120304a40.901569 40.901569 0 0 1 0-82.290061H633.000476a40.901569 40.901569 0 0 1 0 82.290061z" fill=currentColor p-id=5149></path> </svg> </div> <div class=toolbar-label>代码字体</div> <div class=code-font-dropdown-toolbar> <div class=code-font-current-toolbar onclick=toggleCodeFontDropdownToolbar()> <span class=current-code-font-name-toolbar>DejaVu Sans Mono</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=code-font-options-toolbar> <div class=code-font-option-toolbar data-code-font=dejavu onclick="selectCodeFontToolbar('dejavu')"> DejaVu Sans Mono</div> <div class=code-font-option-toolbar data-code-font=zsft onclick="selectCodeFontToolbar('zsft')"> JetBrains Mono</div> </div> </div> </div> <!-- 主题切换功能 --> <div class="toolbar-item theme-switcher" onclick=switchTheme()> <div class=toolbar-icon> <svg class=theme-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M876.572788 522.301623c-1.886977 12.375865-9.657964 30.331819-35.880185 45.48903-56.489572 32.697703-150.21828 83.990926-174.010149 96.958262-13.143345 24.431435-66.067718 122.221646-98.141204 178.503487-16.117073 28.124548-36.055171 34.041304-50.030463 34.041304-0.031722 0-0.031722 0-0.031722 0-14.613836 0-29.1806-6.460132-43.234687-19.218714-47.183626-42.643216-125.994576-117.105115-146.013515-136.083351-27.757181-4.732791-138.338718-23.743774-200.584388-35.752272-17.924231-3.533476-32.649608-14.07046-40.372499-29.084409-5.78782-11.256368-10.281157-30.05962 1.471514-55.658647 26.989701-59.047838 74.126254-157.557432 85.957721-182.196599-3.437286-27.117614-16.996093-135.060045-23.760147-198.905142-1.886977-17.460674 3.901867-35.096333 15.829524-48.351218 12.791327-14.278191 30.667463-21.48943 49.854455-19.426445 63.669088 6.332219 173.259042 19.426445 200.584388 22.705118 24.335245-11.879562 121.085776-58.936297 180.133613-86.34146 9.91379-4.573155 19.85828-6.92369 29.596062-6.92369 28.748764 0 52.172243 20.642133 58.328453 51.421136 12.599969 62.997799 30.93864 166.70272 35.639708 193.484689 18.851347 19.682271 91.953272 96.031147 135.060045 143.07151C872.72004 487.125473 879.307062 504.71406 876.572788 522.301623L876.572788 522.301623zM825.375755 499.085876C776.017604 445.314205 687.245791 352.977193 686.365748 352.017332c-2.942005-3.069919-4.956895-6.971785-5.676279-11.208273-0.207731-1.215688-22.193465-127.001509-36.551474-198.936865-0.799202-3.917216-4.285606-16.836457-16.196891-16.836457-3.453658 0-7.30743 1.006933-11.464099 2.942005-67.282383 31.179117-183.955662 88.180342-185.170327 88.771813-3.693112 1.790786-7.850805 2.558265-11.975752 2.01489-1.295506-0.224104-133.63765-16.165168-205.988468-23.424502-0.079818 0-0.207731 0-0.287549 0-7.30743 0-11.128455 2.89391-13.319353 5.40408-3.677762 4.124947-5.644557 9.91379-5.068436 15.110139 7.674796 72.623018 24.255427 202.934922 24.463158 204.325595 0.511653 4.109598-0.159636 8.266267-1.966795 11.960403-0.591471 1.215688-57.657164 120.04712-88.339977 187.201589-3.565199 7.754614-4.41352 14.214746-2.350534 18.131963 1.935072 3.725858 6.588045 5.820566 10.360975 6.53995 70.719668 13.718443 204.644867 36.519752 206.036563 36.727483 4.189416 0.671289 8.058536 2.686179 11.112082 5.580089 1.006933 0.87902 96.414887 91.281983 150.090367 139.889027 8.314363 7.563256 13.143345 8.106632 14.437827 8.106632 3.485381 0 8.314363-4.621251 12.727882-12.391215 36.343743-63.828724 100.011808-181.988868 100.636025-183.155437 1.983167-3.64604 5.004991-6.667863 8.650007-8.650007 1.134847-0.671289 114.418936-62.373583 178.6314-99.516528 8.698103-5.036713 14.278191-10.568706 14.94948-14.854313C834.681702 511.845481 831.49922 505.800811 825.375755 499.085876L825.375755 499.085876zM935.333076 935.670256c-4.157693 4.157693-9.689686 6.299473-15.141862 6.299473-5.548366 0-11.048637-2.142803-15.238053-6.299473l-171.915441-171.915441c-8.362458-8.394181-8.362458-21.98471 0-30.426987 8.394181-8.394181 21.98471-8.394181 30.379914 0l171.915441 171.915441C943.727257 913.684522 943.727257 927.275052 935.333076 935.670256L935.333076 935.670256z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>主题切换</div> </div> <!-- 返回顶部功能 --> <div class="toolbar-item back-to-top" onclick=scrollToTop()> <div class=toolbar-icon> <svg class=back-to-top-icon viewbox="0 0 1024 1024" xmlns=http://www.w3.org/2000/svg> <path d="M882.688 624.128l-336.896-583.68c-15.872-27.136-54.784-27.136-70.656 0L138.24 624.128c-15.872 27.136 4.096 61.44 35.328 61.44H317.44c22.528 0 40.96 18.432 40.96 40.96v239.616c0 22.528 18.432 40.96 40.96 40.96h223.232c22.528 0 40.96-18.432 40.96-40.96v-239.616c0-22.528 18.432-40.96 40.96-40.96h143.872c30.208 0 50.176-34.304 34.304-61.44z"> </path> </svg> </div> <div class=toolbar-label>返回顶部</div> </div> </div> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.html class=md-tabs__link> 主页 </a> </li> <li class=md-tabs__item> <a href=../../intro/intro.html class=md-tabs__link> 网站介绍 </a> </li> <li class=md-tabs__item> <a href=../../timeline/timeline.html class=md-tabs__link> 网站时间线 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../c-lang/index.html class=md-tabs__link> 编程语言 </a> </li> <li class=md-tabs__item> <a href=../../data-structure/time-space-complexity/time-space-complexity.html class=md-tabs__link> 数据结构与算法 </a> </li> <li class=md-tabs__item> <a href=../../Linux/options-commands/options-commands.html class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../html-css/html/html.html class=md-tabs__link> 前端 </a> </li> <li class=md-tabs__item> <a href=../../MySQL/JDBC/JDBC-basic/JDBC-basic.html class=md-tabs__link> MySQL </a> </li> <li class=md-tabs__item> <a href=../../JavaEE/Spring/springmvc-basic/springmvc-basic.html class=md-tabs__link> JavaEE应用开发 </a> </li> <li class=md-tabs__item> <a href=../../other/shell/shell.html class=md-tabs__link> 扩展知识 </a> </li> <li class=md-tabs__item> <a href=../../tooltips/vscode-snippets/vscode-snippets.html class=md-tabs__link> 工具帮助 </a> </li> <li class=md-tabs__item> <a href=../../test-encrypt/test-encrypt.html class=md-tabs__link> 测试加密功能 </a> </li> <li class=md-tabs__item> <a href=../../projects/boost-searching-engine/boost-searching-engine.html class=md-tabs__link> 项目 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title=柯懒的知识库 class="md-nav__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> 柯懒的知识库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.html class=md-nav__link> <span class=md-ellipsis> 主页 </span> </a> </li> <li class=md-nav__item> <a href=../../intro/intro.html class=md-nav__link> <span class=md-ellipsis> 网站介绍 </span> </a> </li> <li class=md-nav__item> <a href=../../timeline/timeline.html class=md-nav__link> <span class=md-ellipsis> 网站时间线 </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> 编程语言 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> 编程语言 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../c-lang/index.html class=md-nav__link> <span class=md-ellipsis> C语言 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> C++ </span> </a> <label class="md-nav__link " for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=true> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> C++ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../c-to-cpp/c-to-cpp.html class=md-nav__link> <span class=md-ellipsis> C语言过渡C++基础知识 </span> </a> </li> <li class=md-nav__item> <a href=../class-obj/class-obj.html class=md-nav__link> <span class=md-ellipsis> C++类和对象 </span> </a> </li> <li class=md-nav__item> <a href=../member-func/member-func.html class=md-nav__link> <span class=md-ellipsis> C++默认成员函数 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> C++类和对象相关内容 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=class-obj-other.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> C++类和对象相关内容 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#explicit class=md-nav__link> <span class=md-ellipsis> explicit关键字 </span> </a> </li> <li class=md-nav__item> <a href=#static class=md-nav__link> <span class=md-ellipsis> static成员 </span> </a> <nav class=md-nav aria-label=static成员> <ul class=md-nav__list> <li class=md-nav__item> <a href=#static_1 class=md-nav__link> <span class=md-ellipsis> static成员的介绍 </span> </a> </li> <li class=md-nav__item> <a href=#static_2 class=md-nav__link> <span class=md-ellipsis> static成员的使用 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 友元 </span> </a> <nav class=md-nav aria-label=友元> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 友元函数 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 友元类 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 内部类 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 匿名对象 </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 拷贝对象时编译器做出的一些优化 </span> </a> <nav class=md-nav aria-label=拷贝对象时编译器做出的一些优化> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 参数传递优化 </span> </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 返回值优化 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../memory/memory.html class=md-nav__link> <span class=md-ellipsis> C++内存管理 </span> </a> </li> <li class=md-nav__item> <a href=../template/template.html class=md-nav__link> <span class=md-ellipsis> C++模版 </span> </a> </li> <li class=md-nav__item> <a href=../stl-intro-string/stl-intro-string.html class=md-nav__link> <span class=md-ellipsis> C++STL简介与string类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-string/sim-string.html class=md-nav__link> <span class=md-ellipsis> string类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../vector/vector.html class=md-nav__link> <span class=md-ellipsis> vector类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-vector/sim-vector.html class=md-nav__link> <span class=md-ellipsis> vector类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../list/list.html class=md-nav__link> <span class=md-ellipsis> list类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-list/sim-list.html class=md-nav__link> <span class=md-ellipsis> list类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../stack/stack.html class=md-nav__link> <span class=md-ellipsis> stack类 </span> </a> </li> <li class=md-nav__item> <a href=../queue-priority-queue/queue-priority-queue.html class=md-nav__link> <span class=md-ellipsis> queue与priority_queue类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-stack-queue/sim-stack-queue.html class=md-nav__link> <span class=md-ellipsis> stack和queue模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../sim-priority-queue/sim-priority-queue.html class=md-nav__link> <span class=md-ellipsis> priority_queue模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../reverse-iterator/reverse-iterator.html class=md-nav__link> <span class=md-ellipsis> 反向迭代器设计 </span> </a> </li> <li class=md-nav__item> <a href=../extend/extend.html class=md-nav__link> <span class=md-ellipsis> C++继承 </span> </a> </li> <li class=md-nav__item> <a href=../polymorphic/polymorphic.html class=md-nav__link> <span class=md-ellipsis> C++多态 </span> </a> </li> <li class=md-nav__item> <a href=../set/set.html class=md-nav__link> <span class=md-ellipsis> set类 </span> </a> </li> <li class=md-nav__item> <a href=../map/map.html class=md-nav__link> <span class=md-ellipsis> map类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-map-set/sim-map-set.html class=md-nav__link> <span class=md-ellipsis> map和set类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../sim-unordered-map-set/sim-unordered-map-set.html class=md-nav__link> <span class=md-ellipsis> unordered_map和unordered_set类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../bitset/bitset.html class=md-nav__link> <span class=md-ellipsis> bitset类 </span> </a> </li> <li class=md-nav__item> <a href=../initializer-list/initializer-list.html class=md-nav__link> <span class=md-ellipsis> initializer_list类 </span> </a> </li> <li class=md-nav__item> <a href=../new-in-cpp11/new-in-cpp11.html class=md-nav__link> <span class=md-ellipsis> C++ 11相关新特性 </span> </a> </li> <li class=md-nav__item> <a href=../exception/exception.html class=md-nav__link> <span class=md-ellipsis> C++异常 </span> </a> </li> <li class=md-nav__item> <a href=../smart-ptr/smart-ptr.html class=md-nav__link> <span class=md-ellipsis> C++智能指针 </span> </a> </li> <li class=md-nav__item> <a href=../special-class-design/special-class-design.html class=md-nav__link> <span class=md-ellipsis> 特殊类设计 </span> </a> </li> <li class=md-nav__item> <a href=../type-cast/type-cast.html class=md-nav__link> <span class=md-ellipsis> C++中的类型转换 </span> </a> </li> <li class=md-nav__item> <a href=../cppio/cppio.html class=md-nav__link> <span class=md-ellipsis> C++ IO流 </span> </a> </li> <li class=md-nav__item> <a href=../new-in-cpp17/new-in-cpp17.html class=md-nav__link> <span class=md-ellipsis> C++ 17相关新特性 </span> </a> </li> <li class=md-nav__item> <a href=../time-rand/time-rand.html class=md-nav__link> <span class=md-ellipsis> C++时间和随机数相关库 </span> </a> </li> <li class=md-nav__item> <a href=../multi-thread/multi-thread.html class=md-nav__link> <span class=md-ellipsis> C++并发支持库 </span> </a> </li> <li class=md-nav__item> <a href=../format/format.html class=md-nav__link> <span class=md-ellipsis> C++中的格式化字符串 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Java/java-basic/java-basic.html class=md-nav__link> <span class=md-ellipsis> Java </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../python/python-basic/python-basic.html class=md-nav__link> <span class=md-ellipsis> Python </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../data-structure/time-space-complexity/time-space-complexity.html class=md-nav__link> <span class=md-ellipsis> 数据结构与算法 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Linux/options-commands/options-commands.html class=md-nav__link> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../html-css/html/html.html class=md-nav__link> <span class=md-ellipsis> 前端 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../MySQL/JDBC/JDBC-basic/JDBC-basic.html class=md-nav__link> <span class=md-ellipsis> MySQL </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../JavaEE/Spring/springmvc-basic/springmvc-basic.html class=md-nav__link> <span class=md-ellipsis> JavaEE应用开发 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../other/shell/shell.html class=md-nav__link> <span class=md-ellipsis> 扩展知识 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tooltips/vscode-snippets/vscode-snippets.html class=md-nav__link> <span class=md-ellipsis> 工具帮助 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../test-encrypt/test-encrypt.html class=md-nav__link> <span class=md-ellipsis> 测试加密功能 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../projects/boost-searching-engine/boost-searching-engine.html class=md-nav__link> <span class=md-ellipsis> 项目 </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#explicit class=md-nav__link> <span class=md-ellipsis> explicit关键字 </span> </a> </li> <li class=md-nav__item> <a href=#static class=md-nav__link> <span class=md-ellipsis> static成员 </span> </a> <nav class=md-nav aria-label=static成员> <ul class=md-nav__list> <li class=md-nav__item> <a href=#static_1 class=md-nav__link> <span class=md-ellipsis> static成员的介绍 </span> </a> </li> <li class=md-nav__item> <a href=#static_2 class=md-nav__link> <span class=md-ellipsis> static成员的使用 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 友元 </span> </a> <nav class=md-nav aria-label=友元> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 友元函数 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 友元类 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 内部类 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 匿名对象 </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 拷贝对象时编译器做出的一些优化 </span> </a> <nav class=md-nav aria-label=拷贝对象时编译器做出的一些优化> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 参数传递优化 </span> </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 返回值优化 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=c>C++类和对象相关内容<a class=headerlink href=#c title="Permanent link">&para;</a></h1> <div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;"> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span> 约 3824 个字 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"/></svg></span> 972 行代码 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span> 预计阅读时间 25 分钟</p> </div> <h2 id=explicit><code>explicit</code>关键字<a class=headerlink href=#explicit title="Permanent link">&para;</a></h2> <p>在C++中，给类对象初始化时会调用类的构造函数，但是也可以使用赋值运算符为构造函数只有一个参数（或者只有一个参数没有缺省值）的类对象赋值，如下面代码</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-0-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-0-3>
</span><span id=__span-0-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-0-5><span class=p>{</span>
</span><span id=__span-0-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-0-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-0-8><span class=k>public</span><span class=o>:</span>
</span><span id=__span-0-9><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-0-10><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-0-11><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-0-12>
</span><span id=__span-0-13><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-0-14><span class=w>    </span><span class=p>{</span>
</span><span id=__span-0-15><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-0-16><span class=w>    </span><span class=p>}</span>
</span><span id=__span-0-17><span class=p>};</span>
</span><span id=__span-0-18>
</span><span id=__span-0-19><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-0-20><span class=p>{</span>
</span><span id=__span-0-21><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span><span class=c1>//直接调用构造函数进行对象实例化</span>
</span><span id=__span-0-22><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-0-23>
</span><span id=__span-0-24><span class=w>    </span><span class=n>t</span><span class=p>.</span><span class=n>print</span><span class=p>();</span>
</span><span id=__span-0-25><span class=w>    </span><span class=n>t1</span><span class=p>.</span><span class=n>print</span><span class=p>();</span>
</span><span id=__span-0-26>
</span><span id=__span-0-27><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-0-28><span class=p>}</span>
</span><span id=__span-0-29><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-0-30><span class=mi>1</span>
</span><span id=__span-0-31><span class=mi>1</span>
</span></code></pre></div></td></tr></table></div> <p>在上面的代码中，<code>test</code>类对象初始化时需要调用有一个参数的构造函数（对应<code>test t(1)</code>），而也可以直接使用赋值运算符，将初始化值赋值给类对象，这个过程经历了：调用构造函数使用整型1为临时对象初始化，再调用拷贝构造函数将临时对象拷贝给<code>t1</code>对象，这个过程也是一种类型转换，但是实际上这个过程一般会被编译器优化为直接调用构造函数，使用整型1对类对象初始化，即优化过程：构造函数+拷贝构造函数-&gt;构造函数</p> <p>而如果不想以上面的方式，只用直接调用构造函数的方式对类对象进行初始化时，可以使用<code>explicit</code>关键字对构造函数进行修饰</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-1-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-1-3>
</span><span id=__span-1-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-1-5><span class=p>{</span>
</span><span id=__span-1-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-1-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-1-8><span class=k>public</span><span class=o>:</span>
</span><span id=__span-1-9><span class=w>    </span><span class=k>explicit</span><span class=w> </span><span class=n>test</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-1-10><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-1-11><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-1-12>
</span><span id=__span-1-13><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-1-14><span class=w>    </span><span class=p>{</span>
</span><span id=__span-1-15><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-1-16><span class=w>    </span><span class=p>}</span>
</span><span id=__span-1-17><span class=p>};</span>
</span><span id=__span-1-18>
</span><span id=__span-1-19><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-1-20><span class=p>{</span>
</span><span id=__span-1-21><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span><span class=c1>//直接调用构造函数进行对象实例化</span>
</span><span id=__span-1-22><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-1-23>
</span><span id=__span-1-24><span class=w>    </span><span class=n>t</span><span class=p>.</span><span class=n>print</span><span class=p>();</span>
</span><span id=__span-1-25><span class=w>    </span><span class=n>t1</span><span class=p>.</span><span class=n>print</span><span class=p>();</span>
</span><span id=__span-1-26>
</span><span id=__span-1-27><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-1-28><span class=p>}</span>
</span><span id=__span-1-29><span class=n>报错信息</span><span class=err>：</span>
</span><span id=__span-1-30><span class=n>不存在从</span><span class=w> </span><span class=s>&quot;int&quot;</span><span class=w> </span><span class=n>转换到</span><span class=w> </span><span class=s>&quot;test&quot;</span><span class=w> </span><span class=n>的适当构造函数</span>
</span></code></pre></div></td></tr></table></div> <p>当构造函数被<code>explicit</code>关键字修饰后，<code>test t1 = 1</code>的初始化方式失效</p> <p>在C++11标准规范中，也支持对不只有一个参数的构造函数使用对类对象进行赋值初始化的方式</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-2-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-2-3>
</span><span id=__span-2-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-2-5><span class=p>{</span>
</span><span id=__span-2-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-2-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-2-8><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num1</span><span class=p>;</span>
</span><span id=__span-2-9><span class=k>public</span><span class=o>:</span>
</span><span id=__span-2-10><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>num1</span><span class=p>)</span>
</span><span id=__span-2-11><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-2-12><span class=w>        </span><span class=p>,</span><span class=n>_num1</span><span class=p>(</span><span class=n>num1</span><span class=p>)</span>
</span><span id=__span-2-13><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-2-14>
</span><span id=__span-2-15><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-2-16><span class=w>    </span><span class=p>{</span>
</span><span id=__span-2-17><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot; &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num1</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-2-18><span class=w>    </span><span class=p>}</span>
</span><span id=__span-2-19><span class=p>};</span>
</span><span id=__span-2-20>
</span><span id=__span-2-21><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-2-22><span class=p>{</span>
</span><span id=__span-2-23><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>);</span>
</span><span id=__span-2-24><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-2-25>
</span><span id=__span-2-26><span class=w>    </span><span class=n>t</span><span class=p>.</span><span class=n>print</span><span class=p>();</span>
</span><span id=__span-2-27><span class=w>    </span><span class=n>t1</span><span class=p>.</span><span class=n>print</span><span class=p>();</span>
</span><span id=__span-2-28><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-2-29><span class=p>}</span>
</span><span id=__span-2-30><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-2-31><span class=mi>2</span><span class=w> </span><span class=mi>3</span>
</span><span id=__span-2-32><span class=mi>2</span><span class=w> </span><span class=mi>4</span>
</span></code></pre></div></td></tr></table></div> <p>同样，如果不愿意使用直接赋值的方式为类对象进行初始化时，可以使用<code>explicit</code>关键字修饰构造函数</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-3-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-3-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-3-3>
</span><span id=__span-3-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-3-5><span class=p>{</span>
</span><span id=__span-3-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-3-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-3-8><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num1</span><span class=p>;</span>
</span><span id=__span-3-9><span class=k>public</span><span class=o>:</span>
</span><span id=__span-3-10><span class=w>    </span><span class=k>explicit</span><span class=w> </span><span class=n>test</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>num1</span><span class=p>)</span>
</span><span id=__span-3-11><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-3-12><span class=w>        </span><span class=p>,</span><span class=n>_num1</span><span class=p>(</span><span class=n>num1</span><span class=p>)</span>
</span><span id=__span-3-13><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-3-14>
</span><span id=__span-3-15><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-3-16><span class=w>    </span><span class=p>{</span>
</span><span id=__span-3-17><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot; &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num1</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-3-18><span class=w>    </span><span class=p>}</span>
</span><span id=__span-3-19><span class=p>};</span>
</span><span id=__span-3-20>
</span><span id=__span-3-21><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-3-22><span class=p>{</span>
</span><span id=__span-3-23><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>);</span>
</span><span id=__span-3-24><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-3-25>
</span><span id=__span-3-26><span class=w>    </span><span class=n>t</span><span class=p>.</span><span class=n>print</span><span class=p>();</span>
</span><span id=__span-3-27><span class=w>    </span><span class=n>t1</span><span class=p>.</span><span class=n>print</span><span class=p>();</span>
</span><span id=__span-3-28><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-3-29><span class=p>}</span>
</span><span id=__span-3-30><span class=n>报错信息</span><span class=err>：</span>
</span><span id=__span-3-31><span class=s>&quot;test&quot;</span><span class=w> </span><span class=n>的复制列表初始化不能使用显式构造函数</span>
</span></code></pre></div></td></tr></table></div> <p>但是，如果为已经实例化的对象再次赋值时，则会调用赋值运算符重载函数为对象赋值，如下面代码</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-4-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-4-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-4-3>
</span><span id=__span-4-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-4-5><span class=p>{</span>
</span><span id=__span-4-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-4-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-4-8><span class=k>public</span><span class=o>:</span>
</span><span id=__span-4-9><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-4-10><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-4-11><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-4-12>
</span><span id=__span-4-13><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-4-14><span class=w>    </span><span class=p>{</span>
</span><span id=__span-4-15><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-4-16><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-17>
</span><span id=__span-4-18><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>d</span><span class=p>)</span>
</span><span id=__span-4-19><span class=w>    </span><span class=p>{</span>
</span><span id=__span-4-20><span class=w>        </span><span class=n>_num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>d</span><span class=p>.</span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-4-21><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-22>
</span><span id=__span-4-23><span class=w>    </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=k>operator</span><span class=o>=</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-4-24><span class=w>    </span><span class=p>{</span>
</span><span id=__span-4-25><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=k>this</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=o>&amp;</span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-4-26><span class=w>        </span><span class=p>{</span>
</span><span id=__span-4-27><span class=w>            </span><span class=n>_num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-4-28><span class=w>        </span><span class=p>}</span>
</span><span id=__span-4-29><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=o>*</span><span class=k>this</span><span class=p>;</span>
</span><span id=__span-4-30><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-31><span class=p>};</span>
</span><span id=__span-4-32>
</span><span id=__span-4-33><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-4-34><span class=p>{</span>
</span><span id=__span-4-35><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span><span class=c1>//为对象初始化</span>
</span><span id=__span-4-36><span class=w>    </span><span class=n>t</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=p>;</span>
</span><span id=__span-4-37><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-4-38><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>在上面的代码中，<code>t</code>对象再次赋值时会调用赋值重载，首先会调用拷贝构造函数，但是会被编译器优化为直接调用构造函数，再调用赋值重载函数</p> <h2 id=static><code>static</code>成员<a class=headerlink href=#static title="Permanent link">&para;</a></h2> <h3 id=static_1><code>static</code>成员的介绍<a class=headerlink href=#static_1 title="Permanent link">&para;</a></h3> <p>当需要统计一个类创建了多少个对象时，第一反应是创建一个全局变量，当每一次调用构造函数或者拷贝构造函数时，就让其进行+1操作，但是这个思路的问题是该全局变量不仅是在类中可以访问，也可以在类外访问，此时如果在类外改变了该变量的值，那么此时的计数不一定准确，如果直接放置到类内作为类的成员变量，那么每一个类对象在创建时都会为这个成员变量分配独立的空间，那么每一个类对象的计数器变量都只为1，并没有达到计数的效果</p> <p>为了解决上面的问题，C++支持在类中创建静态成员变量，该成员变量不属于任何一个实例对象，而属于整个类，但是因为在类内，所以类中的成员函数也可以直接访问该静态成员变量。一样的思路，当每一次调用构造函数或者拷贝构造函数时让该变量+1即可实现统计一个类有多少个对象，并且这个方法的好处是保证了类的封装性，如果该成员变量具有<code>private</code>属性，那么在类外也不可以直接修改（要修改时需要类中提供静态<code>set</code>成员函数），但是此时要在类外直接访问该静态成员变量时需要提供<code>get</code>函数，如下面的代码</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-5-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-5-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-5-3>
</span><span id=__span-5-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-5-5><span class=p>{</span>
</span><span id=__span-5-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-5-7><span class=w>    </span><span class=c1>//静态成员变量</span>
</span><span id=__span-5-8><span class=w>    </span><span class=k>static</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>_count</span><span class=p>;</span><span class=c1>//静态成员变量声明</span>
</span><span id=__span-5-9><span class=k>public</span><span class=o>:</span>
</span><span id=__span-5-10><span class=w>    </span><span class=n>test</span><span class=p>()</span>
</span><span id=__span-5-11><span class=w>    </span><span class=p>{</span>
</span><span id=__span-5-12><span class=w>        </span><span class=n>_count</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-5-13><span class=w>    </span><span class=p>}</span>
</span><span id=__span-5-14>
</span><span id=__span-5-15><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-5-16><span class=w>    </span><span class=p>{</span>
</span><span id=__span-5-17><span class=w>        </span><span class=n>_count</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-5-18><span class=w>    </span><span class=p>}</span>
</span><span id=__span-5-19>
</span><span id=__span-5-20><span class=w>    </span><span class=c1>//使用静态成员函数在类外访问静态成员变量</span>
</span><span id=__span-5-21><span class=w>    </span><span class=k>static</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>getCount</span><span class=p>()</span>
</span><span id=__span-5-22><span class=w>    </span><span class=p>{</span>
</span><span id=__span-5-23><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>_count</span><span class=p>;</span>
</span><span id=__span-5-24><span class=w>    </span><span class=p>}</span>
</span><span id=__span-5-25><span class=p>};</span>
</span><span id=__span-5-26>
</span><span id=__span-5-27><span class=kt>int</span><span class=w> </span><span class=n>test</span><span class=o>::</span><span class=n>_count</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=c1>//静态成员变量初始化</span>
</span><span id=__span-5-28>
</span><span id=__span-5-29><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-5-30><span class=p>{</span>
</span><span id=__span-5-31><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t</span><span class=p>;</span>
</span><span id=__span-5-32><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t1</span><span class=p>;</span>
</span><span id=__span-5-33><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t3</span><span class=p>(</span><span class=n>t1</span><span class=p>);</span>
</span><span id=__span-5-34><span class=w>    </span><span class=c1>//统计创建的对象的个数</span>
</span><span id=__span-5-35><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>test</span><span class=o>::</span><span class=n>getCount</span><span class=p>()</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-5-36><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-5-37><span class=p>}</span>
</span><span id=__span-5-38><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-5-39><span class=mi>3</span>
</span></code></pre></div></td></tr></table></div> <p>上面代码的作用是统计创建类对象的个数，基本思路是通过统计调用构造函数或者拷贝构造函数的次数来统计类对象的个数，类中存在一个静态成员变量<code>_count</code>，该成员变量从属于整个类而不是某一个单独的类对象，因为是静态成员变量，所以需要使用静态成员函数才可以在类域外访问（因为具有<code>private</code>属性，所以不可以直接通过类名进行调用）</p> <h3 id=static_2><code>static</code>成员的使用<a class=headerlink href=#static_2 title="Permanent link">&para;</a></h3> <p>在C++中，声明为<code>static</code>的类成员称为类的静态成员，用<code>static</code>修饰的成员变量，称之为静态成员变量</p> <p>同样，用<code>static</code>修饰的成员函数，称之为静态成员函数</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>注意：静态成员变量一定要在类外进行初始化</p> </div> <p><code>static</code>成员的特点</p> <ol> <li>静态成员为所有类对象所共享，不属于某个具体的对象，存放在静态区，在使用<code>sizeof</code>计算类大小时同样不会包括<code>static</code>成员的大小</li> <li>静态成员变量必须在类外定义，定义时不添加<code>static</code>关键字，类中只是声明</li> <li>类静态成员即可用 类名<code>::</code>静态成员 或者 <code>对象.静态成员</code> 来访问（前提是非<code>private</code>属性）</li> <li>静态成员函数没有隐藏的<code>this</code>指针，不能访问任何非静态成员</li> <li>静态成员也是类的成员，受<code>public</code>、<code>protected</code>、<code>private</code> 访问限定符的限制</li> </ol> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-6-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-6-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-6-3>
</span><span id=__span-6-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-6-5><span class=p>{</span>
</span><span id=__span-6-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-6-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span><span class=c1>//非静态成员变量</span>
</span><span id=__span-6-8><span class=w>    </span><span class=k>static</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>_count</span><span class=p>;</span><span class=c1>//静态成员变量</span>
</span><span id=__span-6-9><span class=k>public</span><span class=o>:</span>
</span><span id=__span-6-10><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-6-11><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-6-12><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-6-13>
</span><span id=__span-6-14><span class=w>    </span><span class=k>static</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>getCount</span><span class=p>()</span>
</span><span id=__span-6-15><span class=w>    </span><span class=p>{</span>
</span><span id=__span-6-16><span class=w>        </span><span class=n>_num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=c1>//无法访问非静态成员变量</span>
</span><span id=__span-6-17><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>_count</span><span class=p>;</span>
</span><span id=__span-6-18><span class=w>    </span><span class=p>}</span>
</span><span id=__span-6-19><span class=p>};</span>
</span><span id=__span-6-20>
</span><span id=__span-6-21><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-6-22><span class=p>{</span>
</span><span id=__span-6-23><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-6-24>
</span><span id=__span-6-25><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-6-26><span class=p>}</span>
</span><span id=__span-6-27><span class=n>报错信息</span><span class=err>：</span>
</span><span id=__span-6-28><span class=n>非静态成员引用必须与特定对象相对</span>
</span></code></pre></div></td></tr></table></div> <p>例如下面的题目：</p> <p>求1+2+3+...+n</p> <p>题目链接：<a href="https://www.nowcoder.com/practice/7a0da8fc483247ff8800059e12d7caf1?tpId=13&tqId=11200&tPage=3&rp=3&ru=/ta/coding-interviews&qru=/ta/coding-interviews/question-ranking">求1+2+3+...+n_牛客题霸_牛客网 (nowcoder.com)</a></p> <div class="admonition quote"> <p class=admonition-title>Quote</p> <p><strong>描述：</strong></p> <p>求1+2+3+...+n，要求不能使用乘除法、<code>for</code>、<code>while</code>、<code>if</code>、<code>else</code>、<code>switch</code>、<code>case</code>等关键字及条件判断语句（<code>A?B:C</code>）。</p> <p>数据范围：0&lt;<strong><em>n</em></strong>≤200 进阶： 空间复杂度<strong>O(1)</strong> ，时间复杂度 <strong>O(n)</strong></p> </div> <p>参考代码</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1><span class=k>class</span><span class=w> </span><span class=nc>Sum</span>
</span><span id=__span-7-2><span class=p>{</span>
</span><span id=__span-7-3><span class=k>private</span><span class=o>:</span>
</span><span id=__span-7-4><span class=w>    </span><span class=k>static</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>_sum</span><span class=p>;</span>
</span><span id=__span-7-5><span class=w>    </span><span class=k>static</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>_i</span><span class=p>;</span>
</span><span id=__span-7-6><span class=k>public</span><span class=o>:</span>
</span><span id=__span-7-7><span class=w>    </span><span class=n>Sum</span><span class=p>()</span>
</span><span id=__span-7-8><span class=w>    </span><span class=p>{</span>
</span><span id=__span-7-9><span class=w>        </span><span class=n>_sum</span><span class=o>+=</span><span class=n>_i</span><span class=p>;</span>
</span><span id=__span-7-10><span class=w>        </span><span class=n>_i</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-7-11><span class=w>    </span><span class=p>}</span>
</span><span id=__span-7-12><span class=w>    </span><span class=k>static</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>getSum</span><span class=p>()</span>
</span><span id=__span-7-13><span class=w>    </span><span class=p>{</span>
</span><span id=__span-7-14><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>_sum</span><span class=p>;</span>
</span><span id=__span-7-15><span class=w>    </span><span class=p>}</span>
</span><span id=__span-7-16><span class=p>};</span>
</span><span id=__span-7-17><span class=kt>int</span><span class=w> </span><span class=n>Sum</span><span class=o>::</span><span class=n>_i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-7-18><span class=kt>int</span><span class=w> </span><span class=n>Sum</span><span class=o>::</span><span class=n>_sum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-7-19>
</span><span id=__span-7-20><span class=k>class</span><span class=w> </span><span class=nc>Solution</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-7-21><span class=k>public</span><span class=o>:</span>
</span><span id=__span-7-22><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>Sum_Solution</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-7-23><span class=w>        </span><span class=n>Sum</span><span class=w> </span><span class=n>s</span><span class=p>[</span><span class=n>n</span><span class=p>];</span>
</span><span id=__span-7-24><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>Sum</span><span class=o>::</span><span class=n>getSum</span><span class=p>();</span>
</span><span id=__span-7-25><span class=w>    </span><span class=p>}</span>
</span><span id=__span-7-26><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p>优化为：</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-8-1><span class=k>class</span><span class=w> </span><span class=nc>Solution</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-8-2><span class=w>  </span><span class=k>public</span><span class=o>:</span>
</span><span id=__span-8-3><span class=w>    </span><span class=k>class</span><span class=w> </span><span class=nc>Sum</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-8-4><span class=w>      </span><span class=k>public</span><span class=o>:</span>
</span><span id=__span-8-5><span class=w>        </span><span class=n>Sum</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-8-6><span class=w>            </span><span class=n>_sum</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>_i</span><span class=p>;</span>
</span><span id=__span-8-7><span class=w>            </span><span class=n>_i</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-8-8><span class=w>        </span><span class=p>}</span>
</span><span id=__span-8-9><span class=w>    </span><span class=p>};</span>
</span><span id=__span-8-10><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=nf>Sum_Solution</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-8-11><span class=w>        </span><span class=n>Sum</span><span class=w> </span><span class=n>s</span><span class=p>[</span><span class=n>n</span><span class=p>];</span>
</span><span id=__span-8-12><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>_sum</span><span class=p>;</span>
</span><span id=__span-8-13><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-14><span class=w>  </span><span class=k>private</span><span class=o>:</span>
</span><span id=__span-8-15><span class=w>    </span><span class=k>static</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>_sum</span><span class=p>;</span>
</span><span id=__span-8-16><span class=w>    </span><span class=k>static</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>_i</span><span class=p>;</span>
</span><span id=__span-8-17><span class=p>};</span>
</span><span id=__span-8-18><span class=kt>int</span><span class=w> </span><span class=n>Solution</span><span class=o>::</span><span class=n>_i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-8-19><span class=kt>int</span><span class=w> </span><span class=n>Solution</span><span class=o>::</span><span class=n>_sum</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_1>友元<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <p>在C++中，友元提供了一种突破封装的方式，有时提供了便利。但是友元会增加耦合度，破坏了封装，所以友元不宜多用。</p> <p>友元分为：友元函数和友元类</p> <h3 id=_2>友元函数<a class=headerlink href=#_2 title="Permanent link">&para;</a></h3> <p>在默认构造函数章节中，对流插入运算符和流提取运算符进行重载时，如果将这两个运算符重载函数放置在类中时，那么<code>ostream</code>和<code>istream</code>的对象将与<code>this</code>指针抢占第一个参数的位置，导致最后调用时和正常的输出输入参数相反，而解决这个问题时考虑到将这两个重载函数放置到全局，但是放置到全局时将无法看到类成员变量，此时为了同时解决前面两个问题，考虑使用友元函数，如下面代码</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-9-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-9-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-9-3>
</span><span id=__span-9-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-9-5><span class=p>{</span>
</span><span id=__span-9-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-9-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-9-8><span class=k>public</span><span class=o>:</span>
</span><span id=__span-9-9><span class=w>    </span><span class=n>test</span><span class=p>()</span>
</span><span id=__span-9-10><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>()</span>
</span><span id=__span-9-11><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-9-12>
</span><span id=__span-9-13><span class=w>    </span><span class=c1>//友元函数声明</span>
</span><span id=__span-9-14><span class=w>    </span><span class=c1>//友元函数声明可以放在任意位置</span>
</span><span id=__span-9-15><span class=w>    </span><span class=k>friend</span><span class=w> </span><span class=n>ostream</span><span class=o>&amp;</span><span class=w> </span><span class=k>operator</span><span class=o>&lt;&lt;</span><span class=p>(</span><span class=n>ostream</span><span class=o>&amp;</span><span class=w> </span><span class=n>cout</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>d</span><span class=p>);</span>
</span><span id=__span-9-16><span class=w>    </span><span class=k>friend</span><span class=w> </span><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=k>operator</span><span class=o>&gt;&gt;</span><span class=p>(</span><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=n>cin</span><span class=p>,</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>);</span>
</span><span id=__span-9-17><span class=p>};</span>
</span><span id=__span-9-18>
</span><span id=__span-9-19><span class=c1>//重载流插入运算符</span>
</span><span id=__span-9-20><span class=n>ostream</span><span class=o>&amp;</span><span class=w> </span><span class=k>operator</span><span class=o>&lt;&lt;</span><span class=p>(</span><span class=n>ostream</span><span class=o>&amp;</span><span class=w> </span><span class=n>cout</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-9-21><span class=p>{</span>
</span><span id=__span-9-22><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-9-23><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>cout</span><span class=p>;</span>
</span><span id=__span-9-24><span class=p>}</span>
</span><span id=__span-9-25>
</span><span id=__span-9-26><span class=c1>//重载流提取运算符</span>
</span><span id=__span-9-27><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=k>operator</span><span class=o>&gt;&gt;</span><span class=p>(</span><span class=n>istream</span><span class=o>&amp;</span><span class=w> </span><span class=n>cin</span><span class=p>,</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-9-28><span class=p>{</span>
</span><span id=__span-9-29><span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-9-30><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>cin</span><span class=p>;</span>
</span><span id=__span-9-31><span class=p>}</span>
</span><span id=__span-9-32>
</span><span id=__span-9-33><span class=kt>int</span><span class=w> </span><span class=n>main</span><span class=p>()</span>
</span><span id=__span-9-34><span class=p>{</span>
</span><span id=__span-9-35><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t</span><span class=p>;</span>
</span><span id=__span-9-36><span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>t</span><span class=p>;</span>
</span><span id=__span-9-37><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>t</span><span class=p>;</span>
</span><span id=__span-9-38><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-9-39><span class=p>}</span>
</span><span id=__span-9-40><span class=n>输入</span><span class=err>：</span>
</span><span id=__span-9-41><span class=mi>2</span>
</span><span id=__span-9-42><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-9-43><span class=mi>2</span>
</span></code></pre></div></td></tr></table></div> <p>友元函数可以直接访问类的私有成员，它是定义在类外部的普通函数，不属于任何类，但需要在类的内部声明，声明时需要加<code>friend</code>关键字</p> <p>友元函数的特点：</p> <ol> <li>友元函数可访问类的私有和保护成员，但不是类的成员函数</li> <li>友元函数不能用<code>const</code>修饰</li> <li>友元函数可以在类定义的任何地方声明，不受类访问限定符限制</li> <li>一个函数可以是多个类的友元函数</li> <li>友元函数的调用与普通函数的调用原理相同</li> </ol> <h3 id=_3>友元类<a class=headerlink href=#_3 title="Permanent link">&para;</a></h3> <p>友元类的所有成员函数都可以是另一个类的友元函数，都可以访问另一个类中的非公有成员。</p> <p>友元类的特点：</p> <ol> <li>友元关系是单向的，不具有交换性</li> <li> <p>友元关系不能传递</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>若C是B的友元类（即C想使用B类中的成员），B是A的友元类（即B想使用A类中的成员），不能推出C是A的友元类（即C依旧无法使用A中的成员）</p> </div> </li> <li> <p>友元关系不能继承（<a href=https://www.help-doc.top/cpp/extend/extend.html#_10>见继承章节</a>）</p> </li> </ol> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-10-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-10-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-10-3>
</span><span id=__span-10-4><span class=k>class</span><span class=w> </span><span class=nc>B</span>
</span><span id=__span-10-5><span class=p>{</span>
</span><span id=__span-10-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-10-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_numB</span><span class=p>;</span>
</span><span id=__span-10-8><span class=w>    </span><span class=k>friend</span><span class=w> </span><span class=k>class</span><span class=w> </span><span class=nc>A</span><span class=p>;</span><span class=c1>//声明A是B的友元类</span>
</span><span id=__span-10-9><span class=k>public</span><span class=o>:</span>
</span><span id=__span-10-10><span class=w>    </span><span class=n>B</span><span class=p>()</span>
</span><span id=__span-10-11><span class=w>        </span><span class=o>:</span><span class=n>_numB</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span><span id=__span-10-12><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-10-13><span class=p>};</span>
</span><span id=__span-10-14>
</span><span id=__span-10-15><span class=k>class</span><span class=w> </span><span class=nc>A</span>
</span><span id=__span-10-16><span class=p>{</span>
</span><span id=__span-10-17><span class=k>private</span><span class=o>:</span>
</span><span id=__span-10-18><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_numA</span><span class=p>;</span>
</span><span id=__span-10-19><span class=w>    </span><span class=n>B</span><span class=w> </span><span class=n>_b</span><span class=p>;</span>
</span><span id=__span-10-20><span class=k>public</span><span class=o>:</span>
</span><span id=__span-10-21><span class=w>    </span><span class=n>A</span><span class=p>()</span>
</span><span id=__span-10-22><span class=w>        </span><span class=o>:</span><span class=n>_numA</span><span class=p>()</span>
</span><span id=__span-10-23><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-10-24>
</span><span id=__span-10-25><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-10-26><span class=w>    </span><span class=p>{</span>
</span><span id=__span-10-27><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_b</span><span class=p>.</span><span class=n>_numB</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-10-28><span class=w>    </span><span class=p>}</span>
</span><span id=__span-10-29><span class=p>};</span>
</span><span id=__span-10-30>
</span><span id=__span-10-31><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-10-32><span class=p>{</span>
</span><span id=__span-10-33><span class=w>    </span><span class=n>A</span><span class=w> </span><span class=n>a</span><span class=p>;</span>
</span><span id=__span-10-34><span class=w>    </span><span class=n>a</span><span class=p>.</span><span class=n>print</span><span class=p>();</span>
</span><span id=__span-10-35><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-10-36><span class=p>}</span>
</span><span id=__span-10-37><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-10-38><span class=mi>2</span>
</span></code></pre></div></td></tr></table></div> <p>在上面的代码中，定义了两个类A和B，在类B中声明了类A为B的友元类，则A类中可以访问B中的成员</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>注意，尽管A类是B类的友元类，但是B类不可以访问A类中的成员，即单向传递</p> </div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>友元类的声明规则：当某个类想使用另一个类中的成员时，就在另一个类中声明友元类，例如在上面的代码中，A类想使用B类的成员，则A类在B类声明友元类（即想用哪一个类就在哪个类声明友元类）</p> </div> <h2 id=_4>内部类<a class=headerlink href=#_4 title="Permanent link">&para;</a></h2> <p>如果一个类定义在另一个类的内部，这个内部类就叫做内部类。内部类是一个独立的类，它不属于外部类，更不能通过外部类的对象去访问内部类的成员。</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>内部类就是外部类的友元类，内部类可以通过外部类的对象参数来访问外部类中的所有成员。但是外部类不是内部类的友元，即外部类不可以访问内部类成员</p> </div> <p>内部类特点：</p> <ol> <li>内部类可以定义在外部类的<code>public</code>、<code>protected</code>、<code>private</code>都是可以的（若内部类具有private属性，则不能使用<code>外部类::内部类 对象名</code> 的方式创建对象）</li> <li>注意内部类可以直接访问外部类中的<code>static</code>成员，不需要外部类的对象/类名</li> <li><code>sizeof(外部类)=外部类</code>，和内部类没有任何关系</li> <li>内部类虽然与外部类独立，但是内部类的生命周期还是外部类域</li> </ol> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-11-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-11-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-11-3>
</span><span id=__span-11-4><span class=k>class</span><span class=w> </span><span class=nc>outer</span>
</span><span id=__span-11-5><span class=p>{</span>
</span><span id=__span-11-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-11-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-11-8><span class=w>    </span><span class=k>static</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>_num1</span><span class=p>;</span>
</span><span id=__span-11-9>
</span><span id=__span-11-10><span class=k>public</span><span class=o>:</span>
</span><span id=__span-11-11><span class=w>    </span><span class=n>outer</span><span class=p>()</span>
</span><span id=__span-11-12><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>()</span>
</span><span id=__span-11-13><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-11-14><span class=w>    </span><span class=k>class</span><span class=w> </span><span class=nc>inner</span>
</span><span id=__span-11-15><span class=w>    </span><span class=p>{</span>
</span><span id=__span-11-16><span class=w>    </span><span class=k>private</span><span class=o>:</span>
</span><span id=__span-11-17><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>_num2</span><span class=p>;</span>
</span><span id=__span-11-18><span class=w>    </span><span class=k>public</span><span class=o>:</span>
</span><span id=__span-11-19><span class=w>        </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>outer</span><span class=o>&amp;</span><span class=w> </span><span class=n>o</span><span class=p>)</span>
</span><span id=__span-11-20><span class=w>        </span><span class=p>{</span>
</span><span id=__span-11-21><span class=w>            </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span><span class=c1>//非静态成员需要外部类对象</span>
</span><span id=__span-11-22><span class=w>            </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num1</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span><span class=c1>//静态成员可以不使用外部类对象</span>
</span><span id=__span-11-23><span class=w>        </span><span class=p>}</span>
</span><span id=__span-11-24><span class=w>    </span><span class=p>};</span>
</span><span id=__span-11-25><span class=p>};</span>
</span><span id=__span-11-26>
</span><span id=__span-11-27><span class=kt>int</span><span class=w> </span><span class=n>outer</span><span class=o>::</span><span class=n>_num1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=p>;</span>
</span><span id=__span-11-28>
</span><span id=__span-11-29><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-11-30><span class=p>{</span>
</span><span id=__span-11-31><span class=w>    </span><span class=n>outer</span><span class=w> </span><span class=n>o</span><span class=p>;</span>
</span><span id=__span-11-32><span class=w>    </span><span class=n>outer</span><span class=o>::</span><span class=n>inner</span><span class=w> </span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-11-33><span class=w>    </span><span class=n>i</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=n>o</span><span class=p>);</span>
</span><span id=__span-11-34><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-11-35><span class=p>}</span>
</span><span id=__span-11-36><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-11-37><span class=mi>0</span>
</span><span id=__span-11-38><span class=mi>2</span>
</span></code></pre></div></td></tr></table></div> <p>在上面的代码中，外部类<code>outer</code>中有一个<code>inner</code>内部类，该内部类中可以通过外部类的对象o访问外部类的成员，而对于外部类的静态成员则可以直接访问</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>注意，内部类中不可以创建外部类对象</p> </div> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-12-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-12-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-12-3>
</span><span id=__span-12-4><span class=k>class</span><span class=w> </span><span class=nc>outer</span>
</span><span id=__span-12-5><span class=p>{</span>
</span><span id=__span-12-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-12-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-12-8><span class=w>    </span><span class=k>static</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>_num1</span><span class=p>;</span>
</span><span id=__span-12-9><span class=k>public</span><span class=o>:</span>
</span><span id=__span-12-10><span class=w>    </span><span class=n>outer</span><span class=p>()</span>
</span><span id=__span-12-11><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>()</span>
</span><span id=__span-12-12><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-12-13><span class=w>    </span><span class=k>class</span><span class=w> </span><span class=nc>inner</span>
</span><span id=__span-12-14><span class=w>    </span><span class=p>{</span>
</span><span id=__span-12-15><span class=w>    </span><span class=k>private</span><span class=o>:</span>
</span><span id=__span-12-16><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>_num2</span><span class=p>;</span>
</span><span id=__span-12-17><span class=w>    </span><span class=k>public</span><span class=o>:</span>
</span><span id=__span-12-18><span class=w>        </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>outer</span><span class=o>&amp;</span><span class=w> </span><span class=n>o</span><span class=p>)</span>
</span><span id=__span-12-19><span class=w>        </span><span class=p>{</span>
</span><span id=__span-12-20><span class=w>            </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span><span class=c1>//非静态成员需要外部类对象</span>
</span><span id=__span-12-21><span class=w>            </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num1</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span><span class=c1>//静态成员可以不使用外部类对象</span>
</span><span id=__span-12-22><span class=w>        </span><span class=p>}</span>
</span><span id=__span-12-23><span class=w>    </span><span class=p>};</span>
</span><span id=__span-12-24><span class=p>};</span>
</span><span id=__span-12-25>
</span><span id=__span-12-26><span class=kt>int</span><span class=w> </span><span class=n>outer</span><span class=o>::</span><span class=n>_num1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=p>;</span>
</span><span id=__span-12-27>
</span><span id=__span-12-28><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-12-29><span class=p>{</span>
</span><span id=__span-12-30><span class=w>    </span><span class=n>outer</span><span class=w> </span><span class=n>o</span><span class=p>;</span>
</span><span id=__span-12-31><span class=w>    </span><span class=n>outer</span><span class=o>::</span><span class=n>inner</span><span class=w> </span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-12-32><span class=w>    </span><span class=n>i</span><span class=p>.</span><span class=n>print</span><span class=p>(</span><span class=n>o</span><span class=p>);</span>
</span><span id=__span-12-33><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-12-34><span class=p>}</span>
</span><span id=__span-12-35><span class=n>报错信息</span><span class=err>：</span>
</span><span id=__span-12-36><span class=err>“</span><span class=n>outer</span><span class=o>::</span><span class=n>inner</span><span class=o>::</span><span class=n>_o</span><span class=err>”</span><span class=n>使用未定义的</span><span class=w> </span><span class=k>class</span><span class=err>“</span><span class=n>outer</span><span class=err>”</span>
</span></code></pre></div></td></tr></table></div> <p>因为内部类和外部类是两个单独的类，所以在使用<code>sizeof</code>计算外部类大小时不会包括内部类的大小</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-13-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-13-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-13-3>
</span><span id=__span-13-4><span class=k>class</span><span class=w> </span><span class=nc>outer</span>
</span><span id=__span-13-5><span class=p>{</span>
</span><span id=__span-13-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-13-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-13-8><span class=w>    </span><span class=k>static</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>_num1</span><span class=p>;</span>
</span><span id=__span-13-9><span class=k>public</span><span class=o>:</span>
</span><span id=__span-13-10><span class=w>    </span><span class=n>outer</span><span class=p>()</span>
</span><span id=__span-13-11><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>()</span>
</span><span id=__span-13-12><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-13-13><span class=w>    </span><span class=k>class</span><span class=w> </span><span class=nc>inner</span>
</span><span id=__span-13-14><span class=w>    </span><span class=p>{</span>
</span><span id=__span-13-15><span class=w>    </span><span class=k>private</span><span class=o>:</span>
</span><span id=__span-13-16><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>_num2</span><span class=p>;</span>
</span><span id=__span-13-17><span class=w>    </span><span class=p>};</span>
</span><span id=__span-13-18><span class=p>};</span>
</span><span id=__span-13-19>
</span><span id=__span-13-20><span class=kt>int</span><span class=w> </span><span class=n>outer</span><span class=o>::</span><span class=n>_num1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>2</span><span class=p>;</span>
</span><span id=__span-13-21>
</span><span id=__span-13-22><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-13-23><span class=p>{</span>
</span><span id=__span-13-24><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>outer</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-13-25><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-13-26><span class=p>}</span>
</span><span id=__span-13-27><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-13-28><span class=mi>4</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_5>匿名对象<a class=headerlink href=#_5 title="Permanent link">&para;</a></h2> <p>所谓匿名对象，即类对象在实例化时不给名称</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-14-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-14-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-14-3>
</span><span id=__span-14-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-14-5><span class=p>{</span>
</span><span id=__span-14-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-14-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-14-8><span class=k>public</span><span class=o>:</span>
</span><span id=__span-14-9><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-14-10><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-14-11><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-14-12>
</span><span id=__span-14-13><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-14-14><span class=w>    </span><span class=p>{</span>
</span><span id=__span-14-15><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-14-16><span class=w>    </span><span class=p>}</span>
</span><span id=__span-14-17><span class=p>};</span>
</span><span id=__span-14-18>
</span><span id=__span-14-19><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-14-20><span class=p>{</span>
</span><span id=__span-14-21><span class=w>    </span><span class=c1>//普通对象</span>
</span><span id=__span-14-22><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-14-23><span class=w>    </span><span class=n>t</span><span class=p>.</span><span class=n>print</span><span class=p>();</span>
</span><span id=__span-14-24><span class=w>    </span><span class=c1>//匿名对象</span>
</span><span id=__span-14-25><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=mi>2</span><span class=p>).</span><span class=n>print</span><span class=p>();</span>
</span><span id=__span-14-26>
</span><span id=__span-14-27><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-14-28><span class=p>}</span>
</span><span id=__span-14-29><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-14-30><span class=mi>1</span>
</span><span id=__span-14-31><span class=mi>2</span>
</span></code></pre></div></td></tr></table></div> <p>在上面的代码中，创建了两个对象，一个对象是普通对象，普通对象的生命周期为当前函数栈帧空间销毁之前，另外一个对象是匿名对象，匿名对象的生命周期为所在行，当匿名对象执行完所在行之后就会被销毁</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>注意：匿名对象与常量一样，当给自定义类型的引用变量时需要有<code>const</code></p> </div> <p>但是如果使用一个常量引用接受匿名对象时，匿名对象不会在当前行执行完毕后销毁</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-15-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-15-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-15-3>
</span><span id=__span-15-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-15-5><span class=p>{</span>
</span><span id=__span-15-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-15-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-15-8><span class=k>public</span><span class=o>:</span>
</span><span id=__span-15-9><span class=w>    </span><span class=n>test</span><span class=p>()</span>
</span><span id=__span-15-10><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>()</span>
</span><span id=__span-15-11><span class=w>    </span><span class=p>{</span>
</span><span id=__span-15-12><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-15-13><span class=w>    </span><span class=p>}</span>
</span><span id=__span-15-14>
</span><span id=__span-15-15><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-15-16><span class=w>    </span><span class=p>{</span>
</span><span id=__span-15-17><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-15-18><span class=w>    </span><span class=p>}</span>
</span><span id=__span-15-19>
</span><span id=__span-15-20><span class=w>    </span><span class=o>~</span><span class=n>test</span><span class=p>()</span>
</span><span id=__span-15-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-15-22><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;析构函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-15-23><span class=w>    </span><span class=p>}</span>
</span><span id=__span-15-24><span class=p>};</span>
</span><span id=__span-15-25>
</span><span id=__span-15-26><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-15-27><span class=p>{</span>
</span><span id=__span-15-28><span class=w>    </span><span class=c1>//无常量引用的匿名对象</span>
</span><span id=__span-15-29><span class=w>    </span><span class=n>test</span><span class=p>();</span>
</span><span id=__span-15-30><span class=w>    </span><span class=c1>//常量引用的匿名对象</span>
</span><span id=__span-15-31><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>test</span><span class=p>();</span>
</span><span id=__span-15-32>
</span><span id=__span-15-33><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t1</span><span class=p>;</span>
</span><span id=__span-15-34><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-15-35><span class=p>}</span>
</span><span id=__span-15-36><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-15-37><span class=n>构造函数</span>
</span><span id=__span-15-38><span class=n>析构函数</span>
</span><span id=__span-15-39><span class=n>构造函数</span>
</span><span id=__span-15-40><span class=n>构造函数</span>
</span><span id=__span-15-41><span class=n>析构函数</span>
</span><span id=__span-15-42><span class=n>析构函数</span>
</span></code></pre></div></td></tr></table></div> <p>在上面的代码中，对于无常量引用的匿名对象来说，当前行执行完毕后将会调用析构函数进行销毁，而常量引用的匿名对象则是在准备出当前作用域时销毁</p> <h2 id=_6>拷贝对象时编译器做出的一些优化<a class=headerlink href=#_6 title="Permanent link">&para;</a></h2> <div class="admonition note"> <p class=admonition-title>Note</p> <p>下面的优化结果由编译器决定，不同的编译器优化结果可能不同，视具体情况而定</p> </div> <h3 id=_7>参数传递优化<a class=headerlink href=#_7 title="Permanent link">&para;</a></h3> <ol> <li> <p>在前面的<code>explicit</code>关键字部分提到过编译器会对在单行的构造+拷贝构造优化为构造</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-16-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-16-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-16-3>
</span><span id=__span-16-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-16-5><span class=p>{</span>
</span><span id=__span-16-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-16-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-16-8><span class=k>public</span><span class=o>:</span>
</span><span id=__span-16-9><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-16-10><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-16-11><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-16-12>
</span><span id=__span-16-13><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-16-14><span class=w>    </span><span class=p>{</span>
</span><span id=__span-16-15><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-16-16><span class=w>    </span><span class=p>}</span>
</span><span id=__span-16-17><span class=p>};</span>
</span><span id=__span-16-18>
</span><span id=__span-16-19><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-16-20><span class=p>{</span>
</span><span id=__span-16-21><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-16-22><span class=w>    </span><span class=n>t</span><span class=p>.</span><span class=n>print</span><span class=p>();</span>
</span><span id=__span-16-23><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-16-24><span class=p>}</span>
</span><span id=__span-16-25><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-16-26><span class=mi>1</span>
</span></code></pre></div></td></tr></table></div> </li> <li> <p>在给函数形参传递实参时，如果直接传递已经创建的对象时，编译器不会对其进行优化</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-17-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-17-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-17-3>
</span><span id=__span-17-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-17-5><span class=p>{</span>
</span><span id=__span-17-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-17-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-17-8><span class=k>public</span><span class=o>:</span>
</span><span id=__span-17-9><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-17-10><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-17-11><span class=w>    </span><span class=p>{</span>
</span><span id=__span-17-12><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-17-13><span class=w>    </span><span class=p>}</span>
</span><span id=__span-17-14>
</span><span id=__span-17-15><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-17-16><span class=w>    </span><span class=p>{</span>
</span><span id=__span-17-17><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-17-18><span class=w>    </span><span class=p>}</span>
</span><span id=__span-17-19>
</span><span id=__span-17-20><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-17-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-17-22><span class=w>        </span><span class=n>_num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-17-23><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;拷贝构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-17-24><span class=w>    </span><span class=p>}</span>
</span><span id=__span-17-25>
</span><span id=__span-17-26><span class=w>    </span><span class=o>~</span><span class=n>test</span><span class=p>()</span>
</span><span id=__span-17-27><span class=w>    </span><span class=p>{</span>
</span><span id=__span-17-28><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;析构函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-17-29><span class=w>    </span><span class=p>}</span>
</span><span id=__span-17-30><span class=p>};</span>
</span><span id=__span-17-31>
</span><span id=__span-17-32><span class=kt>void</span><span class=w> </span><span class=nf>func1</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-17-33><span class=p>{</span>
</span><span id=__span-17-34><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;func1&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-17-35><span class=p>}</span>
</span><span id=__span-17-36>
</span><span id=__span-17-37><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-17-38><span class=p>{</span>
</span><span id=__span-17-39><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t1</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-17-40><span class=w>    </span><span class=n>func1</span><span class=p>(</span><span class=n>t1</span><span class=p>);</span>
</span><span id=__span-17-41><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-17-42><span class=p>}</span>
</span><span id=__span-17-43><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-17-44><span class=n>构造函数</span>
</span><span id=__span-17-45><span class=n>拷贝构造函数</span>
</span><span id=__span-17-46><span class=n>func1</span>
</span><span id=__span-17-47><span class=n>析构函数</span>
</span><span id=__span-17-48><span class=n>析构函数</span>
</span></code></pre></div></td></tr></table></div> <p>在上面的代码中，首先<code>test</code>类创建了一个对象为<code>t1</code>，此时调用构造函数，当<code>t1</code>作为函数实参传递给<code>func1</code>函数，此时会调用拷贝构造函数将<code>t1</code>对象拷贝给形参<code>t</code>，接着进入<code>func1</code>函数栈帧空间执行<code>func1</code>函数体的语句，当<code>func1</code>函数结束执行后调用析构函数销毁形式参数对象<code>t</code>，最后调用析构函数销毁局部对象<code>t1</code></p> <p>对上面的代码进行改进，直接传递整型1给<code>func1</code>函数，如下面代码</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-18-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-18-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-18-3>
</span><span id=__span-18-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-18-5><span class=p>{</span>
</span><span id=__span-18-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-18-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-18-8><span class=k>public</span><span class=o>:</span>
</span><span id=__span-18-9><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-18-10><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-18-11><span class=w>    </span><span class=p>{</span>
</span><span id=__span-18-12><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-18-13><span class=w>    </span><span class=p>}</span>
</span><span id=__span-18-14>
</span><span id=__span-18-15><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-18-16><span class=w>    </span><span class=p>{</span>
</span><span id=__span-18-17><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-18-18><span class=w>    </span><span class=p>}</span>
</span><span id=__span-18-19>
</span><span id=__span-18-20><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-18-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-18-22><span class=w>        </span><span class=n>_num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-18-23><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;拷贝构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-18-24><span class=w>    </span><span class=p>}</span>
</span><span id=__span-18-25>
</span><span id=__span-18-26><span class=w>    </span><span class=o>~</span><span class=n>test</span><span class=p>()</span>
</span><span id=__span-18-27><span class=w>    </span><span class=p>{</span>
</span><span id=__span-18-28><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;析构函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-18-29><span class=w>    </span><span class=p>}</span>
</span><span id=__span-18-30><span class=p>};</span>
</span><span id=__span-18-31>
</span><span id=__span-18-32><span class=kt>void</span><span class=w> </span><span class=nf>func1</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-18-33><span class=p>{</span>
</span><span id=__span-18-34><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;func1&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-18-35><span class=p>}</span>
</span><span id=__span-18-36>
</span><span id=__span-18-37><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-18-38><span class=p>{</span>
</span><span id=__span-18-39><span class=w>    </span><span class=n>func1</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-18-40><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-18-41><span class=p>}</span>
</span><span id=__span-18-42><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-18-43><span class=n>构造函数</span>
</span><span id=__span-18-44><span class=n>func1</span>
</span><span id=__span-18-45><span class=n>析构函数</span>
</span></code></pre></div></td></tr></table></div> <p>在上面的代码中，直接将1作为对象传递给自定义类型的形参<code>t</code>时，常规的步骤为：调用构造函数用整型1初始化一个临时对象，再调用拷贝构造函数将临时对象中的内容拷贝给形参对象，但是此处编译器会对其进行优化为直接调用构造函数，用整型1初始化形参对象<code>t</code></p> <p>同理，使用匿名对象作为实际参数传递给自定义类型的形参时，编译器也会有所优化</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-19-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-19-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-19-3>
</span><span id=__span-19-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-19-5><span class=p>{</span>
</span><span id=__span-19-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-19-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-19-8><span class=k>public</span><span class=o>:</span>
</span><span id=__span-19-9><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-19-10><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-19-11><span class=w>    </span><span class=p>{</span>
</span><span id=__span-19-12><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-19-13><span class=w>    </span><span class=p>}</span>
</span><span id=__span-19-14>
</span><span id=__span-19-15><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-19-16><span class=w>    </span><span class=p>{</span>
</span><span id=__span-19-17><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-19-18><span class=w>    </span><span class=p>}</span>
</span><span id=__span-19-19>
</span><span id=__span-19-20><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-19-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-19-22><span class=w>        </span><span class=n>_num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-19-23><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;拷贝构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-19-24><span class=w>    </span><span class=p>}</span>
</span><span id=__span-19-25>
</span><span id=__span-19-26><span class=w>    </span><span class=o>~</span><span class=n>test</span><span class=p>()</span>
</span><span id=__span-19-27><span class=w>    </span><span class=p>{</span>
</span><span id=__span-19-28><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;析构函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-19-29><span class=w>    </span><span class=p>}</span>
</span><span id=__span-19-30><span class=p>};</span>
</span><span id=__span-19-31>
</span><span id=__span-19-32><span class=kt>void</span><span class=w> </span><span class=nf>func1</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-19-33><span class=p>{</span>
</span><span id=__span-19-34><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;func1&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-19-35><span class=p>}</span>
</span><span id=__span-19-36>
</span><span id=__span-19-37><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-19-38><span class=p>{</span>
</span><span id=__span-19-39><span class=w>    </span><span class=n>func1</span><span class=p>(</span><span class=n>test</span><span class=p>(</span><span class=mi>2</span><span class=p>));</span>
</span><span id=__span-19-40>
</span><span id=__span-19-41><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-19-42><span class=p>}</span>
</span><span id=__span-19-43><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-19-44><span class=n>构造函数</span>
</span><span id=__span-19-45><span class=n>func1</span>
</span><span id=__span-19-46><span class=n>析构函数</span>
</span></code></pre></div></td></tr></table></div> <p>在上面的代码中，使用整型2创建了一个匿名对象，常规步骤为：调用构造函数使用整型2创建匿名对象，接着调用拷贝构造函数将匿名对象中的内容拷贝给形式参数，但是编译器优化为直接使用整型2为形式参数初始化</p> <p>但是如果函数的形式参数为引用时，则不会有任何优化，直接调用构造函数进行初始化对象再由自定义类型的引用形参接收实参对象的地址</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>注意：使用引用传参时一定要在形式参数处加<code>const</code>修饰</p> </div> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-20-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-20-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-20-3>
</span><span id=__span-20-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-20-5><span class=p>{</span>
</span><span id=__span-20-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-20-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-20-8><span class=k>public</span><span class=o>:</span>
</span><span id=__span-20-9><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-20-10><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-20-11><span class=w>    </span><span class=p>{</span>
</span><span id=__span-20-12><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-20-13><span class=w>    </span><span class=p>}</span>
</span><span id=__span-20-14>
</span><span id=__span-20-15><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-20-16><span class=w>    </span><span class=p>{</span>
</span><span id=__span-20-17><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-20-18><span class=w>    </span><span class=p>}</span>
</span><span id=__span-20-19>
</span><span id=__span-20-20><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-20-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-20-22><span class=w>        </span><span class=n>_num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-20-23><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;拷贝构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-20-24><span class=w>    </span><span class=p>}</span>
</span><span id=__span-20-25>
</span><span id=__span-20-26><span class=w>    </span><span class=o>~</span><span class=n>test</span><span class=p>()</span>
</span><span id=__span-20-27><span class=w>    </span><span class=p>{</span>
</span><span id=__span-20-28><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;析构函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-20-29><span class=w>    </span><span class=p>}</span>
</span><span id=__span-20-30><span class=p>};</span>
</span><span id=__span-20-31>
</span><span id=__span-20-32><span class=kt>void</span><span class=w> </span><span class=nf>func1</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-20-33><span class=p>{</span>
</span><span id=__span-20-34><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;func1&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-20-35><span class=p>}</span>
</span><span id=__span-20-36>
</span><span id=__span-20-37><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-20-38><span class=p>{</span>
</span><span id=__span-20-39><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t1</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-20-40><span class=w>    </span><span class=n>func1</span><span class=p>(</span><span class=n>t1</span><span class=p>);</span>
</span><span id=__span-20-41><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-20-42><span class=w>    </span><span class=n>func1</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-20-43><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-20-44><span class=w>    </span><span class=n>func1</span><span class=p>(</span><span class=n>test</span><span class=p>(</span><span class=mi>1</span><span class=p>));</span>
</span><span id=__span-20-45>
</span><span id=__span-20-46><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-20-47><span class=p>}</span>
</span><span id=__span-20-48><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-20-49><span class=n>构造函数</span>
</span><span id=__span-20-50><span class=n>func1</span>
</span><span id=__span-20-51>
</span><span id=__span-20-52><span class=n>构造函数</span>
</span><span id=__span-20-53><span class=n>func1</span>
</span><span id=__span-20-54><span class=n>析构函数</span>
</span><span id=__span-20-55>
</span><span id=__span-20-56><span class=n>构造函数</span>
</span><span id=__span-20-57><span class=n>func1</span>
</span><span id=__span-20-58><span class=n>析构函数</span>
</span><span id=__span-20-59><span class=n>析构函数</span>
</span></code></pre></div></td></tr></table></div> </li> </ol> <h3 id=_8>返回值优化<a class=headerlink href=#_8 title="Permanent link">&para;</a></h3> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-21-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-21-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-21-3>
</span><span id=__span-21-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-21-5><span class=p>{</span>
</span><span id=__span-21-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-21-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-21-8><span class=k>public</span><span class=o>:</span>
</span><span id=__span-21-9><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-21-10><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-21-11><span class=w>    </span><span class=p>{</span>
</span><span id=__span-21-12><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-21-13><span class=w>    </span><span class=p>}</span>
</span><span id=__span-21-14>
</span><span id=__span-21-15><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-21-16><span class=w>    </span><span class=p>{</span>
</span><span id=__span-21-17><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-21-18><span class=w>    </span><span class=p>}</span>
</span><span id=__span-21-19>
</span><span id=__span-21-20><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-21-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-21-22><span class=w>        </span><span class=n>_num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-21-23><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;拷贝构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-21-24><span class=w>    </span><span class=p>}</span>
</span><span id=__span-21-25>
</span><span id=__span-21-26><span class=w>    </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=k>operator</span><span class=o>=</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-21-27><span class=w>    </span><span class=p>{</span>
</span><span id=__span-21-28><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;赋值运算符重载函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-21-29><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=k>this</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=o>&amp;</span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-21-30><span class=w>        </span><span class=p>{</span>
</span><span id=__span-21-31><span class=w>            </span><span class=n>_num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-21-32><span class=w>        </span><span class=p>}</span>
</span><span id=__span-21-33><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=o>*</span><span class=k>this</span><span class=p>;</span>
</span><span id=__span-21-34><span class=w>    </span><span class=p>}</span>
</span><span id=__span-21-35>
</span><span id=__span-21-36><span class=w>    </span><span class=o>~</span><span class=n>test</span><span class=p>()</span>
</span><span id=__span-21-37><span class=w>    </span><span class=p>{</span>
</span><span id=__span-21-38><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;析构函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-21-39><span class=w>    </span><span class=p>}</span>
</span><span id=__span-21-40><span class=p>};</span>
</span><span id=__span-21-41>
</span><span id=__span-21-42><span class=n>test</span><span class=w> </span><span class=nf>func</span><span class=p>()</span>
</span><span id=__span-21-43><span class=p>{</span>
</span><span id=__span-21-44><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;func&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-21-45><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-21-46><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>t</span><span class=p>;</span>
</span><span id=__span-21-47><span class=p>}</span>
</span><span id=__span-21-48>
</span><span id=__span-21-49><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-21-50><span class=p>{</span>
</span><span id=__span-21-51><span class=w>    </span><span class=n>func</span><span class=p>();</span>
</span><span id=__span-21-52>
</span><span id=__span-21-53><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-21-54><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <ol> <li> <p>当调用的函数有返回对象时，使用该对象初始化对象</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-22-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-22-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-22-3>
</span><span id=__span-22-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-22-5><span class=p>{</span>
</span><span id=__span-22-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-22-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-22-8><span class=k>public</span><span class=o>:</span>
</span><span id=__span-22-9><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-22-10><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>(</span><span class=n>num</span><span class=p>)</span>
</span><span id=__span-22-11><span class=w>    </span><span class=p>{</span>
</span><span id=__span-22-12><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-22-13><span class=w>    </span><span class=p>}</span>
</span><span id=__span-22-14>
</span><span id=__span-22-15><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-22-16><span class=w>    </span><span class=p>{</span>
</span><span id=__span-22-17><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-22-18><span class=w>    </span><span class=p>}</span>
</span><span id=__span-22-19>
</span><span id=__span-22-20><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-22-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-22-22><span class=w>        </span><span class=n>_num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-22-23><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;拷贝构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-22-24><span class=w>    </span><span class=p>}</span>
</span><span id=__span-22-25>
</span><span id=__span-22-26><span class=w>    </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=k>operator</span><span class=o>=</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-22-27><span class=w>    </span><span class=p>{</span>
</span><span id=__span-22-28><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;赋值运算符重载函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-22-29><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=k>this</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=o>&amp;</span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-22-30><span class=w>        </span><span class=p>{</span>
</span><span id=__span-22-31><span class=w>            </span><span class=n>_num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-22-32><span class=w>        </span><span class=p>}</span>
</span><span id=__span-22-33><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=o>*</span><span class=k>this</span><span class=p>;</span>
</span><span id=__span-22-34><span class=w>    </span><span class=p>}</span>
</span><span id=__span-22-35>
</span><span id=__span-22-36><span class=w>    </span><span class=o>~</span><span class=n>test</span><span class=p>()</span>
</span><span id=__span-22-37><span class=w>    </span><span class=p>{</span>
</span><span id=__span-22-38><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;析构函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-22-39><span class=w>    </span><span class=p>}</span>
</span><span id=__span-22-40><span class=p>};</span>
</span><span id=__span-22-41>
</span><span id=__span-22-42><span class=n>test</span><span class=w> </span><span class=nf>func</span><span class=p>()</span>
</span><span id=__span-22-43><span class=p>{</span>
</span><span id=__span-22-44><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;func&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-22-45><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-22-46><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>t</span><span class=p>;</span>
</span><span id=__span-22-47><span class=p>}</span>
</span><span id=__span-22-48>
</span><span id=__span-22-49><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-22-50><span class=p>{</span>
</span><span id=__span-22-51><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>func</span><span class=p>();</span>
</span><span id=__span-22-52>
</span><span id=__span-22-53><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-22-54><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>在上面的代码中，使用<code>func</code>函数的返回值初始化<code>t1</code>对象，常规的过程为：调用拷贝构造函数将<code>func</code>函数的返回值放入一个自定义类型的临时变量中，再通过拷贝构造函数将临时变量中的内容拷贝给<code>t1</code>对象，但是这里编译器会优化为调用一个构造函数将<code>func</code>的返回值作为初始化值直接初始化<code>t1</code>对象</p> <p>但是如果将两个步骤分开，如下面的代码</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-23-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-23-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-23-3>
</span><span id=__span-23-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-23-5><span class=p>{</span>
</span><span id=__span-23-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-23-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-23-8><span class=k>public</span><span class=o>:</span>
</span><span id=__span-23-9><span class=w>    </span><span class=n>test</span><span class=p>()</span>
</span><span id=__span-23-10><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>()</span>
</span><span id=__span-23-11><span class=w>    </span><span class=p>{</span>
</span><span id=__span-23-12><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-23-13><span class=w>    </span><span class=p>}</span>
</span><span id=__span-23-14>
</span><span id=__span-23-15><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-23-16><span class=w>    </span><span class=p>{</span>
</span><span id=__span-23-17><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-23-18><span class=w>    </span><span class=p>}</span>
</span><span id=__span-23-19>
</span><span id=__span-23-20><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-23-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-23-22><span class=w>        </span><span class=n>_num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-23-23><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;拷贝构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-23-24><span class=w>    </span><span class=p>}</span>
</span><span id=__span-23-25>
</span><span id=__span-23-26><span class=w>    </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=k>operator</span><span class=o>=</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-23-27><span class=w>    </span><span class=p>{</span>
</span><span id=__span-23-28><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;赋值运算符重载函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-23-29><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=k>this</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=o>&amp;</span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-23-30><span class=w>        </span><span class=p>{</span>
</span><span id=__span-23-31><span class=w>            </span><span class=n>_num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-23-32><span class=w>        </span><span class=p>}</span>
</span><span id=__span-23-33><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=o>*</span><span class=k>this</span><span class=p>;</span>
</span><span id=__span-23-34><span class=w>    </span><span class=p>}</span>
</span><span id=__span-23-35>
</span><span id=__span-23-36><span class=w>    </span><span class=o>~</span><span class=n>test</span><span class=p>()</span>
</span><span id=__span-23-37><span class=w>    </span><span class=p>{</span>
</span><span id=__span-23-38><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;析构函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-23-39><span class=w>    </span><span class=p>}</span>
</span><span id=__span-23-40><span class=p>};</span>
</span><span id=__span-23-41>
</span><span id=__span-23-42><span class=n>test</span><span class=w> </span><span class=nf>func</span><span class=p>()</span>
</span><span id=__span-23-43><span class=p>{</span>
</span><span id=__span-23-44><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;func&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-23-45><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t</span><span class=p>;</span>
</span><span id=__span-23-46><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>t</span><span class=p>;</span>
</span><span id=__span-23-47><span class=p>}</span>
</span><span id=__span-23-48>
</span><span id=__span-23-49><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-23-50><span class=p>{</span>
</span><span id=__span-23-51><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t1</span><span class=p>;</span>
</span><span id=__span-23-52><span class=w>    </span><span class=n>t1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>func</span><span class=p>();</span>
</span><span id=__span-23-53><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-23-54><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>在上面的代码中，因为<code>t1</code>对象需要完成实例化，所以会调用构造函数，接着执行<code>t1 = func()</code>语句，因为赋值运算符有从右往左的结合性，所以先执行<code>func</code>函数，在<code>func</code>函数中会再次调用构造函数创建一个对象，（注意中间有一个过程为：调用拷贝构造将返回对象拷贝到临时对象中，再调用析构函数销毁局部对象<code>t</code>）此时执行赋值语句，此时调用赋值运算符重载函数，将<code>t</code>对象的内容给<code>t1</code>对象</p> </li> <li> <p>当返回的是匿名对象，使用该匿名对象初始化对象</p> <div class="language-C++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-24-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-24-2><span class=k>using</span><span class=w> </span><span class=k>namespace</span><span class=w> </span><span class=nn>std</span><span class=p>;</span>
</span><span id=__span-24-3>
</span><span id=__span-24-4><span class=k>class</span><span class=w> </span><span class=nc>test</span>
</span><span id=__span-24-5><span class=p>{</span>
</span><span id=__span-24-6><span class=k>private</span><span class=o>:</span>
</span><span id=__span-24-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-24-8><span class=k>public</span><span class=o>:</span>
</span><span id=__span-24-9><span class=w>    </span><span class=n>test</span><span class=p>()</span>
</span><span id=__span-24-10><span class=w>        </span><span class=o>:</span><span class=n>_num</span><span class=p>()</span>
</span><span id=__span-24-11><span class=w>    </span><span class=p>{</span>
</span><span id=__span-24-12><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-24-13><span class=w>    </span><span class=p>}</span>
</span><span id=__span-24-14>
</span><span id=__span-24-15><span class=w>    </span><span class=kt>void</span><span class=w> </span><span class=n>print</span><span class=p>()</span>
</span><span id=__span-24-16><span class=w>    </span><span class=p>{</span>
</span><span id=__span-24-17><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>_num</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-24-18><span class=w>    </span><span class=p>}</span>
</span><span id=__span-24-19>
</span><span id=__span-24-20><span class=w>    </span><span class=n>test</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-24-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-24-22><span class=w>        </span><span class=n>_num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-24-23><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;拷贝构造函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-24-24><span class=w>    </span><span class=p>}</span>
</span><span id=__span-24-25>
</span><span id=__span-24-26><span class=w>    </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=k>operator</span><span class=o>=</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>test</span><span class=o>&amp;</span><span class=w> </span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-24-27><span class=w>    </span><span class=p>{</span>
</span><span id=__span-24-28><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;赋值运算符重载函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-24-29><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=k>this</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=o>&amp;</span><span class=n>t</span><span class=p>)</span>
</span><span id=__span-24-30><span class=w>        </span><span class=p>{</span>
</span><span id=__span-24-31><span class=w>            </span><span class=n>_num</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>_num</span><span class=p>;</span>
</span><span id=__span-24-32><span class=w>        </span><span class=p>}</span>
</span><span id=__span-24-33><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=o>*</span><span class=k>this</span><span class=p>;</span>
</span><span id=__span-24-34><span class=w>    </span><span class=p>}</span>
</span><span id=__span-24-35>
</span><span id=__span-24-36><span class=w>    </span><span class=o>~</span><span class=n>test</span><span class=p>()</span>
</span><span id=__span-24-37><span class=w>    </span><span class=p>{</span>
</span><span id=__span-24-38><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;析构函数&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-24-39><span class=w>    </span><span class=p>}</span>
</span><span id=__span-24-40><span class=p>};</span>
</span><span id=__span-24-41>
</span><span id=__span-24-42><span class=n>test</span><span class=w> </span><span class=nf>func</span><span class=p>()</span>
</span><span id=__span-24-43><span class=p>{</span>
</span><span id=__span-24-44><span class=w>    </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;func&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-24-45><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>test</span><span class=p>();</span>
</span><span id=__span-24-46><span class=p>}</span>
</span><span id=__span-24-47>
</span><span id=__span-24-48><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-24-49><span class=p>{</span>
</span><span id=__span-24-50><span class=w>    </span><span class=n>test</span><span class=w> </span><span class=n>t1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>func</span><span class=p>();</span>
</span><span id=__span-24-51><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-24-52><span class=p>}</span>
</span><span id=__span-24-53><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-24-54><span class=n>func</span>
</span><span id=__span-24-55><span class=n>构造函数</span>
</span><span id=__span-24-56><span class=n>析构函数</span>
</span></code></pre></div></td></tr></table></div> <p>在上面的代码中，先执行<code>func</code>函数，常规步骤为：执行<code>test</code>类中的构造函数创建一个匿名对象，接着调用拷贝构造将匿名对象拷贝到临时对象中返回，接着调用拷贝构造将返回值拷贝给<code>t1</code>对象，但是此处编译器会优化为直接用返回的匿名对象的内容作为初始值初始化对象<code>t1</code></p> </li> </ol> <p>总结：</p> <ol> <li>为了编译器更好得优化，在传参数时，可以考虑使用引用变量作为参数</li> <li>当使用到返回值时，如果能用引用就使用引用，不能使用引用需要返回值时，可以考虑返回匿名对象</li> </ol> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2025年7月30日</span> </span> </aside> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> 页面有帮助吗？ </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title=页面对我有帮助 data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title=页面没有帮助到我 data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> 谢谢你的反馈！ </div> <div data-md-value=0 hidden> 谢谢你的反馈！联系<a href=https://www.help-doc.top/author/contact/contact.html>作者</a>提供更详细的信息 </div> </div> </div> </fieldset> </form> <!-- Waline 评论系统 --> <div id=waline></div> <!-- 阅读进度条 - 直接在HTML中定义 --> <div class=reading-progress></div> <!-- 滚动指示器 - 直接在HTML中定义 --> <div class=scroll-indicator></div> <!-- 评论系统 --> <!-- Waline 评论系统 --> <div id=waline></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Footer --> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2024-2025 柯懒不是柯南 </div> </div> <div class="md-footer-love md-typeset"> 一闪一闪亮晶晶，不及<span class=love-highlight>小亮</span><span class=love-heart>♥</span>照我心。To Li Liang </div> <div class=md-social> <a href=https://github.com/H0308 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.help-doc.top/author/contact/contact.html target=_blank rel=noopener title=www.help-doc.top class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.indexes", "navigation.prune", "navigation.tabs", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src=../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../javascripts/katex.min.js></script> <script src=../../javascripts/other.min.js></script> <script src=../../javascripts/copyright.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js></script> <script src=../../assets/javascripts/toggle-sidebar.js async></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>