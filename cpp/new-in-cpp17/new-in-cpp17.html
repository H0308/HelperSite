<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://www.help-doc.top/cpp/new-in-cpp17/new-in-cpp17.html><link rel=prev href=../cppio/cppio.html><link rel=next href=../time-rand/time-rand.html><link rel=icon href=../../images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.12"><title>C++ 17相关新特性 - 柯懒的知识库</title><link rel=stylesheet href=../../assets/stylesheets/main.2afb09e1.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=stylesheet href=../../css/timeline.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-9XWRGNRRSY"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-9XWRGNRRSY",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-9XWRGNRRSY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=stylesheet href=../../stylesheets/colors.min.css><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (max-width: 1199px)"><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (min-width: 1200px)" id=theme2-desktop><link rel=stylesheet href=../../stylesheets/theme1.min.css media="screen and (min-width: 1200px)" id=theme1-desktop><link rel=stylesheet href=../../stylesheets/print.min.css><link rel=stylesheet href=../../stylesheets/font-dongguanti.min.css id=font-dongguanti><link rel=stylesheet href=../../stylesheets/font-oppoti.min.css id=font-oppoti disabled><link rel=stylesheet href=../../stylesheets/font-jiangchengti.min.css id=font-jiangchengti disabled><link rel=stylesheet href=../../stylesheets/font-lxgw.min.css id=font-lxgw disabled><link rel=stylesheet href=../../stylesheets/code-font-dejavu-sans-mono.min.css id=code-font-dejavu-sans-mono><link rel=stylesheet href=../../stylesheets/code-font-zsft-hk.min.css id=code-font-zsft-hk disabled><link rel=stylesheet href=../../stylesheets/code-font-google-sans-code.min.css id=code-font-google-sans-code disabled><link rel=stylesheet href=https://unpkg.com/@waline/client@v3/dist/waline.css><link rel=stylesheet href=../../stylesheets/waline.min.css><script src=../../javascripts/start.min.js></script><script defer src=https://cloud.umami.is/script.js data-website-id=02f9b8b7-93d4-4026-bdd8-221f2fcea2cf></script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#c17 class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../index.html title=柯懒的知识库 class="md-header__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 柯懒的知识库 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> C++ 17相关新特性 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan aria-label type=radio name=__palette id=__palette_1> </form> <div class=header-avatar> <img src=../../author/作者.assets/20250206-200653.jpg alt=头像> <div class=avatar-dropdown> <p><strong>柯懒不是柯南</strong></p> <a href=../../author/contact/contact.html class=avatar-dropdown-item>联系作者</a> <div class=avatar-dropdown-divider></div> <a href=../../author/about/about.html class=avatar-dropdown-item>关于作者</a> <div class=avatar-dropdown-divider></div> <a href=https://github.com/H0308 class=avatar-dropdown-item>Github仓库</a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=查找> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=toolbar-toggle-btn id=toolbarToggleBtn onclick=toggleToolbar()> <div class=toggle-icon> <svg class=toggle-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=16 height=16> <path d="M346.538667 1024L170.666667 853.333333l341.333333-341.333333-341.333333-341.333333 175.872-170.666667L853.333333 512z" fill=currentColor></path> </svg> </div> </div> <div class=floating-toolbar id=floatingToolbar> <div class="toolbar-item font-switcher"> <div class=toolbar-icon> <svg class=font-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M913.408 1024l-66.56 0q-29.696 0-51.2-5.12t-36.864-15.872-26.112-27.136-19.968-37.888q-15.36-38.912-28.16-70.656t-22.016-55.296q-11.264-26.624-20.48-49.152l-254.976 0q-7.168 23.552-17.408 51.2-8.192 23.552-21.504 56.832t-30.72 72.192q-20.48 46.08-47.104 63.488t-60.416 17.408l-70.656 0q-45.056 0-60.928-19.968t2.56-68.096q18.432-46.08 43.008-108.544t52.224-132.608 57.344-143.872 57.344-144.384q65.536-164.864 137.216-343.04 7.168-17.408 18.432-31.744 10.24-11.264 27.136-21.504t42.496-10.24q26.624 0 43.52 10.752t28.16 24.064q12.288 15.36 19.456 33.792 72.704 180.224 138.24 345.088 27.648 70.656 57.344 143.872t56.832 142.336 51.2 129.536 41.472 104.448q14.336 34.816 4.096 62.464t-43.008 27.648zM616.448 634.88l-97.28-347.136-1.024 0-108.544 347.136 206.848 0z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>内容字体</div> <div class=font-dropdown-toolbar> <div class=font-current-toolbar onclick=toggleFontDropdownToolbar()> <span class=current-font-name-toolbar>东观体</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=font-options-toolbar> <div class=font-option-toolbar data-font=dongguanti onclick="selectFontToolbar('dongguanti')">上图东观体 </div> <div class=font-option-toolbar data-font=oppoti onclick="selectFontToolbar('oppoti')">OPPO Sans </div> <div class=font-option-toolbar data-font=jiangchengti onclick="selectFontToolbar('jiangchengti')"> 江城黑体</div> <div class=font-option-toolbar data-font=lxgw onclick="selectFontToolbar('lxgw')">霞鹜臻楷</div> </div> </div> </div> <div class="toolbar-item code-font-switcher"> <div class=toolbar-icon> <svg t=1753672111433 class="icon code-font-icon" viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg p-id=5148 width=20 height=20> <path d="M941.709938 0H82.290062A82.290062 82.290062 0 0 0 0 82.290062v859.419876A82.290062 82.290062 0 0 0 82.290062 1022.53923h859.419876A82.290062 82.290062 0 0 0 1022.53923 941.709938V82.290062A82.290062 82.290062 0 0 0 941.709938 0zM188.439372 553.631954a40.901569 40.901569 0 0 1-29.215406-70.116975L292.154066 351.558726 159.223966 218.628626a40.901569 40.901569 0 0 1 58.430813-57.94389l160.197813 162.145507a40.901569 40.901569 0 0 1 0 57.943889l-160.197813 160.684736a40.901569 40.901569 0 0 1-29.215407 12.173086z m443.587257 0H405.120304a40.901569 40.901569 0 0 1 0-82.290061H633.000476a40.901569 40.901569 0 0 1 0 82.290061z" fill=currentColor p-id=5149></path> </svg> </div> <div class=toolbar-label>代码字体</div> <div class=code-font-dropdown-toolbar> <div class=code-font-current-toolbar onclick=toggleCodeFontDropdownToolbar()> <span class=current-code-font-name-toolbar>DejaVu Sans Mono</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=code-font-options-toolbar> <div class=code-font-option-toolbar data-code-font=dejavu onclick="selectCodeFontToolbar('dejavu')"> DejaVu Sans Mono</div> <div class=code-font-option-toolbar data-code-font=google-sans-code onclick="selectCodeFontToolbar('google-sans-code')"> Google Sans Code</div> <div class=code-font-option-toolbar data-code-font=zsft onclick="selectCodeFontToolbar('zsft')"> JetBrains Mono</div> </div> </div> </div> <div class="toolbar-item theme-switcher" onclick=switchTheme()> <div class=toolbar-icon> <svg class=theme-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M876.572788 522.301623c-1.886977 12.375865-9.657964 30.331819-35.880185 45.48903-56.489572 32.697703-150.21828 83.990926-174.010149 96.958262-13.143345 24.431435-66.067718 122.221646-98.141204 178.503487-16.117073 28.124548-36.055171 34.041304-50.030463 34.041304-0.031722 0-0.031722 0-0.031722 0-14.613836 0-29.1806-6.460132-43.234687-19.218714-47.183626-42.643216-125.994576-117.105115-146.013515-136.083351-27.757181-4.732791-138.338718-23.743774-200.584388-35.752272-17.924231-3.533476-32.649608-14.07046-40.372499-29.084409-5.78782-11.256368-10.281157-30.05962 1.471514-55.658647 26.989701-59.047838 74.126254-157.557432 85.957721-182.196599-3.437286-27.117614-16.996093-135.060045-23.760147-198.905142-1.886977-17.460674 3.901867-35.096333 15.829524-48.351218 12.791327-14.278191 30.667463-21.48943 49.854455-19.426445 63.669088 6.332219 173.259042 19.426445 200.584388 22.705118 24.335245-11.879562 121.085776-58.936297 180.133613-86.34146 9.91379-4.573155 19.85828-6.92369 29.596062-6.92369 28.748764 0 52.172243 20.642133 58.328453 51.421136 12.599969 62.997799 30.93864 166.70272 35.639708 193.484689 18.851347 19.682271 91.953272 96.031147 135.060045 143.07151C872.72004 487.125473 879.307062 504.71406 876.572788 522.301623L876.572788 522.301623zM825.375755 499.085876C776.017604 445.314205 687.245791 352.977193 686.365748 352.017332c-2.942005-3.069919-4.956895-6.971785-5.676279-11.208273-0.207731-1.215688-22.193465-127.001509-36.551474-198.936865-0.799202-3.917216-4.285606-16.836457-16.196891-16.836457-3.453658 0-7.30743 1.006933-11.464099 2.942005-67.282383 31.179117-183.955662 88.180342-185.170327 88.771813-3.693112 1.790786-7.850805 2.558265-11.975752 2.01489-1.295506-0.224104-133.63765-16.165168-205.988468-23.424502-0.079818 0-0.207731 0-0.287549 0-7.30743 0-11.128455 2.89391-13.319353 5.40408-3.677762 4.124947-5.644557 9.91379-5.068436 15.110139 7.674796 72.623018 24.255427 202.934922 24.463158 204.325595 0.511653 4.109598-0.159636 8.266267-1.966795 11.960403-0.591471 1.215688-57.657164 120.04712-88.339977 187.201589-3.565199 7.754614-4.41352 14.214746-2.350534 18.131963 1.935072 3.725858 6.588045 5.820566 10.360975 6.53995 70.719668 13.718443 204.644867 36.519752 206.036563 36.727483 4.189416 0.671289 8.058536 2.686179 11.112082 5.580089 1.006933 0.87902 96.414887 91.281983 150.090367 139.889027 8.314363 7.563256 13.143345 8.106632 14.437827 8.106632 3.485381 0 8.314363-4.621251 12.727882-12.391215 36.343743-63.828724 100.011808-181.988868 100.636025-183.155437 1.983167-3.64604 5.004991-6.667863 8.650007-8.650007 1.134847-0.671289 114.418936-62.373583 178.6314-99.516528 8.698103-5.036713 14.278191-10.568706 14.94948-14.854313C834.681702 511.845481 831.49922 505.800811 825.375755 499.085876L825.375755 499.085876zM935.333076 935.670256c-4.157693 4.157693-9.689686 6.299473-15.141862 6.299473-5.548366 0-11.048637-2.142803-15.238053-6.299473l-171.915441-171.915441c-8.362458-8.394181-8.362458-21.98471 0-30.426987 8.394181-8.394181 21.98471-8.394181 30.379914 0l171.915441 171.915441C943.727257 913.684522 943.727257 927.275052 935.333076 935.670256L935.333076 935.670256z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>主题切换</div> </div> <div class="toolbar-item back-to-top" onclick=scrollToTop()> <div class=toolbar-icon> <svg class=back-to-top-icon viewbox="0 0 1024 1024" xmlns=http://www.w3.org/2000/svg> <path d="M882.688 624.128l-336.896-583.68c-15.872-27.136-54.784-27.136-70.656 0L138.24 624.128c-15.872 27.136 4.096 61.44 35.328 61.44H317.44c22.528 0 40.96 18.432 40.96 40.96v239.616c0 22.528 18.432 40.96 40.96 40.96h223.232c22.528 0 40.96-18.432 40.96-40.96v-239.616c0-22.528 18.432-40.96 40.96-40.96h143.872c30.208 0 50.176-34.304 34.304-61.44z"> </path> </svg> </div> <div class=toolbar-label>返回顶部</div> </div> </div> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.html class=md-tabs__link> 主页 </a> </li> <li class=md-tabs__item> <a href=../../timeline/timeline.html class=md-tabs__link> 网站时间线 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../languages/index.html class=md-tabs__link> 编程语言 </a> </li> <li class=md-tabs__item> <a href=../../data-structure-algo/index.html class=md-tabs__link> 数据结构与算法 </a> </li> <li class=md-tabs__item> <a href=../../Linux/index.html class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../front-end/index.html class=md-tabs__link> 前端 </a> </li> <li class=md-tabs__item> <a href=../../MySQL/index.html class=md-tabs__link> MySQL </a> </li> <li class=md-tabs__item> <a href=../../JavaEE/index.html class=md-tabs__link> JavaEE应用开发 </a> </li> <li class=md-tabs__item> <a href=../../software-test/index.html class=md-tabs__link> 软件测试 </a> </li> <li class=md-tabs__item> <a href=../../other/index.html class=md-tabs__link> 扩展知识 </a> </li> <li class=md-tabs__item> <a href=../../tooltips/index.html class=md-tabs__link> 工具帮助 </a> </li> <li class=md-tabs__item> <a href=../../test-encrypt/test-encrypt.html class=md-tabs__link> 测试加密功能 </a> </li> <li class=md-tabs__item> <a href=../../projects/index.html class=md-tabs__link> 项目 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title=柯懒的知识库 class="md-nav__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> 柯懒的知识库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.html class=md-nav__link> <span class=md-ellipsis> 主页 </span> </a> </li> <li class=md-nav__item> <a href=../../timeline/timeline.html class=md-nav__link> <span class=md-ellipsis> 网站时间线 </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <div class="md-nav__link md-nav__container"> <a href=../../languages/index.html class="md-nav__link "> <span class=md-ellipsis> 编程语言 </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> 编程语言 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../c-lang/index.html class=md-nav__link> <span class=md-ellipsis> C语言 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> C++ </span> </a> <label class="md-nav__link " for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> C++ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../c-to-cpp/c-to-cpp.html class=md-nav__link> <span class=md-ellipsis> C语言过渡C++基础知识 </span> </a> </li> <li class=md-nav__item> <a href=../class-obj/class-obj.html class=md-nav__link> <span class=md-ellipsis> C++类和对象 </span> </a> </li> <li class=md-nav__item> <a href=../member-func/member-func.html class=md-nav__link> <span class=md-ellipsis> C++默认成员函数 </span> </a> </li> <li class=md-nav__item> <a href=../class-obj-other/class-obj-other.html class=md-nav__link> <span class=md-ellipsis> C++类和对象相关内容 </span> </a> </li> <li class=md-nav__item> <a href=../memory/memory.html class=md-nav__link> <span class=md-ellipsis> C++内存管理 </span> </a> </li> <li class=md-nav__item> <a href=../template/template.html class=md-nav__link> <span class=md-ellipsis> C++模版 </span> </a> </li> <li class=md-nav__item> <a href=../stl-intro-string/stl-intro-string.html class=md-nav__link> <span class=md-ellipsis> C++STL简介与string类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-string/sim-string.html class=md-nav__link> <span class=md-ellipsis> string类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../vector/vector.html class=md-nav__link> <span class=md-ellipsis> vector类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-vector/sim-vector.html class=md-nav__link> <span class=md-ellipsis> vector类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../list/list.html class=md-nav__link> <span class=md-ellipsis> list类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-list/sim-list.html class=md-nav__link> <span class=md-ellipsis> list类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../stack/stack.html class=md-nav__link> <span class=md-ellipsis> stack类 </span> </a> </li> <li class=md-nav__item> <a href=../queue-priority-queue/queue-priority-queue.html class=md-nav__link> <span class=md-ellipsis> queue与priority_queue类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-stack-queue/sim-stack-queue.html class=md-nav__link> <span class=md-ellipsis> stack和queue模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../sim-priority-queue/sim-priority-queue.html class=md-nav__link> <span class=md-ellipsis> priority_queue模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../reverse-iterator/reverse-iterator.html class=md-nav__link> <span class=md-ellipsis> 反向迭代器设计 </span> </a> </li> <li class=md-nav__item> <a href=../extend/extend.html class=md-nav__link> <span class=md-ellipsis> C++继承 </span> </a> </li> <li class=md-nav__item> <a href=../polymorphic/polymorphic.html class=md-nav__link> <span class=md-ellipsis> C++多态 </span> </a> </li> <li class=md-nav__item> <a href=../set/set.html class=md-nav__link> <span class=md-ellipsis> set类 </span> </a> </li> <li class=md-nav__item> <a href=../map/map.html class=md-nav__link> <span class=md-ellipsis> map类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-map-set/sim-map-set.html class=md-nav__link> <span class=md-ellipsis> map和set类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../sim-unordered-map-set/sim-unordered-map-set.html class=md-nav__link> <span class=md-ellipsis> unordered_map和unordered_set类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../bitset/bitset.html class=md-nav__link> <span class=md-ellipsis> bitset类 </span> </a> </li> <li class=md-nav__item> <a href=../initializer-list/initializer-list.html class=md-nav__link> <span class=md-ellipsis> initializer_list类 </span> </a> </li> <li class=md-nav__item> <a href=../new-in-cpp11/new-in-cpp11.html class=md-nav__link> <span class=md-ellipsis> C++ 11相关新特性 </span> </a> </li> <li class=md-nav__item> <a href=../exception/exception.html class=md-nav__link> <span class=md-ellipsis> C++异常 </span> </a> </li> <li class=md-nav__item> <a href=../smart-ptr/smart-ptr.html class=md-nav__link> <span class=md-ellipsis> C++智能指针 </span> </a> </li> <li class=md-nav__item> <a href=../special-class-design/special-class-design.html class=md-nav__link> <span class=md-ellipsis> 特殊类设计 </span> </a> </li> <li class=md-nav__item> <a href=../type-cast/type-cast.html class=md-nav__link> <span class=md-ellipsis> C++中的类型转换 </span> </a> </li> <li class=md-nav__item> <a href=../cppio/cppio.html class=md-nav__link> <span class=md-ellipsis> C++ IO流 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> C++ 17相关新特性 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=new-in-cpp17.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> C++ 17相关新特性 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=本节目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 本节目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#filesystem class=md-nav__link> <span class=md-ellipsis> filesystem库 </span> </a> <nav class=md-nav aria-label=filesystem库> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 概述 </span> </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 包含方式 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 核心组件 </span> </a> <nav class=md-nav aria-label=核心组件> <ul class=md-nav__list> <li class=md-nav__item> <a href=#path class=md-nav__link> <span class=md-ellipsis> 路径类 (path) </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 文件状态和属性 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 文件和目录操作 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 实用功能 </span> </a> <nav class=md-nav aria-label=实用功能> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 空间查询 </span> </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 当前路径操作 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 返回当前路径字符串操作 </span> </a> <nav class=md-nav aria-label=返回当前路径字符串操作> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 临时目录 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 完整示例 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#string_view class=md-nav__link> <span class=md-ellipsis> string_view库 </span> </a> <nav class=md-nav aria-label=string_view库> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 概述 </span> </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 本质 </span> </a> <nav class=md-nav aria-label=本质> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 核心实现结构 </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 基本特征 </span> </a> </li> <li class=md-nav__item> <a href=#c class=md-nav__link> <span class=md-ellipsis> 与C字符串的对比 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 设计目的 </span> </a> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> <span class=md-ellipsis> 主要特性 </span> </a> </li> <li class=md-nav__item> <a href=#_18 class=md-nav__link> <span class=md-ellipsis> 基本用法 </span> </a> <nav class=md-nav aria-label=基本用法> <ul class=md-nav__list> <li class=md-nav__item> <a href=#string_view_1 class=md-nav__link> <span class=md-ellipsis> 创建string_view </span> </a> </li> <li class=md-nav__item> <a href=#_19 class=md-nav__link> <span class=md-ellipsis> 常用操作 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_20 class=md-nav__link> <span class=md-ellipsis> 性能优势 </span> </a> </li> <li class=md-nav__item> <a href=#_21 class=md-nav__link> <span class=md-ellipsis> 注意事项和最佳实践 </span> </a> <nav class=md-nav aria-label=注意事项和最佳实践> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_22 class=md-nav__link> <span class=md-ellipsis> 生命周期问题 </span> </a> </li> <li class=md-nav__item> <a href=#capi class=md-nav__link> <span class=md-ellipsis> 与C风格API的交互 </span> </a> </li> <li class=md-nav__item> <a href=#_23 class=md-nav__link> <span class=md-ellipsis> 适合传递参数，不适合返回值 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#any class=md-nav__link> <span class=md-ellipsis> 通用类型any </span> </a> <nav class=md-nav aria-label=通用类型any> <ul class=md-nav__list> <li class=md-nav__item> <a href=#any_1 class=md-nav__link> <span class=md-ellipsis> 标准库中any的介绍 </span> </a> </li> <li class=md-nav__item> <a href=#any_2 class=md-nav__link> <span class=md-ellipsis> any的实现原理 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../time-rand/time-rand.html class=md-nav__link> <span class=md-ellipsis> C++时间和随机数相关库 </span> </a> </li> <li class=md-nav__item> <a href=../multi-thread/multi-thread.html class=md-nav__link> <span class=md-ellipsis> C++并发支持库 </span> </a> </li> <li class=md-nav__item> <a href=../format/format.html class=md-nav__link> <span class=md-ellipsis> C++中的格式化字符串 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Java/index.html class=md-nav__link> <span class=md-ellipsis> Java </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../python/index.html class=md-nav__link> <span class=md-ellipsis> Python </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../data-structure-algo/index.html class=md-nav__link> <span class=md-ellipsis> 数据结构与算法 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Linux/index.html class=md-nav__link> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../front-end/index.html class=md-nav__link> <span class=md-ellipsis> 前端 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../MySQL/index.html class=md-nav__link> <span class=md-ellipsis> MySQL </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../JavaEE/index.html class=md-nav__link> <span class=md-ellipsis> JavaEE应用开发 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../software-test/index.html class=md-nav__link> <span class=md-ellipsis> 软件测试 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../other/index.html class=md-nav__link> <span class=md-ellipsis> 扩展知识 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tooltips/index.html class=md-nav__link> <span class=md-ellipsis> 工具帮助 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../test-encrypt/test-encrypt.html class=md-nav__link> <span class=md-ellipsis> 测试加密功能 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../projects/index.html class=md-nav__link> <span class=md-ellipsis> 项目 </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=本节目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 本节目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#filesystem class=md-nav__link> <span class=md-ellipsis> filesystem库 </span> </a> <nav class=md-nav aria-label=filesystem库> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 概述 </span> </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 包含方式 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 核心组件 </span> </a> <nav class=md-nav aria-label=核心组件> <ul class=md-nav__list> <li class=md-nav__item> <a href=#path class=md-nav__link> <span class=md-ellipsis> 路径类 (path) </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 文件状态和属性 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 文件和目录操作 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 实用功能 </span> </a> <nav class=md-nav aria-label=实用功能> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 空间查询 </span> </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 当前路径操作 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 返回当前路径字符串操作 </span> </a> <nav class=md-nav aria-label=返回当前路径字符串操作> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 临时目录 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 完整示例 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#string_view class=md-nav__link> <span class=md-ellipsis> string_view库 </span> </a> <nav class=md-nav aria-label=string_view库> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 概述 </span> </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 本质 </span> </a> <nav class=md-nav aria-label=本质> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 核心实现结构 </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 基本特征 </span> </a> </li> <li class=md-nav__item> <a href=#c class=md-nav__link> <span class=md-ellipsis> 与C字符串的对比 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 设计目的 </span> </a> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> <span class=md-ellipsis> 主要特性 </span> </a> </li> <li class=md-nav__item> <a href=#_18 class=md-nav__link> <span class=md-ellipsis> 基本用法 </span> </a> <nav class=md-nav aria-label=基本用法> <ul class=md-nav__list> <li class=md-nav__item> <a href=#string_view_1 class=md-nav__link> <span class=md-ellipsis> 创建string_view </span> </a> </li> <li class=md-nav__item> <a href=#_19 class=md-nav__link> <span class=md-ellipsis> 常用操作 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_20 class=md-nav__link> <span class=md-ellipsis> 性能优势 </span> </a> </li> <li class=md-nav__item> <a href=#_21 class=md-nav__link> <span class=md-ellipsis> 注意事项和最佳实践 </span> </a> <nav class=md-nav aria-label=注意事项和最佳实践> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_22 class=md-nav__link> <span class=md-ellipsis> 生命周期问题 </span> </a> </li> <li class=md-nav__item> <a href=#capi class=md-nav__link> <span class=md-ellipsis> 与C风格API的交互 </span> </a> </li> <li class=md-nav__item> <a href=#_23 class=md-nav__link> <span class=md-ellipsis> 适合传递参数，不适合返回值 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#any class=md-nav__link> <span class=md-ellipsis> 通用类型any </span> </a> <nav class=md-nav aria-label=通用类型any> <ul class=md-nav__list> <li class=md-nav__item> <a href=#any_1 class=md-nav__link> <span class=md-ellipsis> 标准库中any的介绍 </span> </a> </li> <li class=md-nav__item> <a href=#any_2 class=md-nav__link> <span class=md-ellipsis> any的实现原理 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=c17>C++17相关新特性<a class=headerlink href=#c17 title="Permanent link">&para;</a></h1> <div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;"> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span> 约 2663 个字 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"/></svg></span> 425 行代码 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span> 预计阅读时间 14 分钟</p> </div> <h2 id=filesystem>filesystem库<a class=headerlink href=#filesystem title="Permanent link">&para;</a></h2> <h3 id=_1>概述<a class=headerlink href=#_1 title="Permanent link">&para;</a></h3> <p>C++17引入的<a href=https://en.cppreference.com/w/cpp/filesystem><code>filesystem</code>库</a>提供了跨平台的文件系统操作功能，使开发者能够以统一的方式处理路径、文件和目录操作，而不必担心不同操作系统间的差异。这个库最初源自<code>Boost.Filesystem</code>，现已成为C++标准的一部分</p> <p>下面是基于官方文档对<code>filesystem</code>的介绍：</p> <p><strong>Classes：</strong></p> <p>定义在头文件<code>&lt;filesystem&gt;</code>，定义在命名空间<code>std::filesystem</code>：</p> <table> <thead> <tr> <th>类名</th> <th>描述</th> <th>类型</th> </tr> </thead> <tbody> <tr> <td><strong>path</strong> (C++17)</td> <td>表示一个路径</td> <td>class</td> </tr> <tr> <td><strong>filesystem_error</strong> (C++17)</td> <td>文件系统错误时抛出的异常</td> <td>class</td> </tr> <tr> <td><strong>directory_entry</strong> (C++17)</td> <td>一个目录项</td> <td>class</td> </tr> <tr> <td><strong>directory_iterator</strong> (C++17)</td> <td>目录内容的迭代器</td> <td>class</td> </tr> <tr> <td><strong>recursive_directory_iterator</strong> (C++17)</td> <td>目录及其子目录内容的迭代器</td> <td>class</td> </tr> <tr> <td><strong>file_status</strong> (C++17)</td> <td>表示文件类型和权限</td> <td>class</td> </tr> <tr> <td><strong>space_info</strong> (C++17)</td> <td>文件系统上可用和空闲空间的信息</td> <td>class</td> </tr> <tr> <td><strong>file_type</strong> (C++17)</td> <td>文件的类型</td> <td>enum</td> </tr> <tr> <td><strong>perms</strong> (C++17)</td> <td>标识文件系统权限</td> <td>enum</td> </tr> <tr> <td><strong>perm_options</strong> (C++17)</td> <td>指定权限操作的语义</td> <td>enum</td> </tr> <tr> <td><strong>copy_options</strong> (C++17)</td> <td>指定复制操作的语义</td> <td>enum</td> </tr> <tr> <td><strong>directory_options</strong> (C++17)</td> <td>遍历目录内容的选项</td> <td>enum</td> </tr> <tr> <td><strong>file_time_type</strong> (C++17)</td> <td>表示文件时间值</td> <td>typedef</td> </tr> </tbody> </table> <p><strong>非成员函数：</strong></p> <p>定义在头文件<code>&lt;filesystem&gt;</code>，定义在命名空间<code>std::filesystem</code></p> <table> <thead> <tr> <th>函数名</th> <th>描述</th> <th>类型</th> </tr> </thead> <tbody> <tr> <td><strong>absolute</strong> (C++17)</td> <td>组合成一个绝对路径</td> <td>function</td> </tr> <tr> <td><strong>canonical</strong> (C++17)</td> <td>组合成一个规范路径</td> <td>function</td> </tr> <tr> <td><strong>weakly_canonical</strong> (C++17)</td> <td>组合成一个弱规范路径</td> <td>function</td> </tr> <tr> <td><strong>relative</strong> (C++17)</td> <td>组合成一个相对路径</td> <td>function</td> </tr> <tr> <td><strong>proximate</strong> (C++17)</td> <td>组合成一个邻近路径</td> <td>function</td> </tr> <tr> <td><strong>copy</strong> (C++17)</td> <td>复制文件或目录</td> <td>function</td> </tr> <tr> <td><strong>copy_file</strong> (C++17)</td> <td>复制文件内容</td> <td>function</td> </tr> <tr> <td><strong>copy_symlink</strong> (C++17)</td> <td>复制符号链接</td> <td>function</td> </tr> <tr> <td><strong>create_directory</strong> (C++17)</td> <td>创建新目录</td> <td>function</td> </tr> <tr> <td><strong>create_directories</strong> (C++17)</td> <td>创建多级目录</td> <td>function</td> </tr> <tr> <td><strong>create_hard_link</strong> (C++17)</td> <td>创建硬链接</td> <td>function</td> </tr> <tr> <td><strong>create_symlink</strong> (C++17)</td> <td>创建符号链接</td> <td>function</td> </tr> <tr> <td><strong>create_directory_symlink</strong> (C++17)</td> <td>创建目录符号链接</td> <td>function</td> </tr> <tr> <td><strong>current_path</strong> (C++17)</td> <td>返回或设置当前工作目录</td> <td>function</td> </tr> <tr> <td><strong>exists</strong> (C++17)</td> <td>检查路径是否引用现有的文件系统对象</td> <td>function</td> </tr> <tr> <td><strong>equivalent</strong> (C++17)</td> <td>检查两个路径是否引用相同的文件系统对象</td> <td>function</td> </tr> <tr> <td><strong>file_size</strong> (C++17)</td> <td>返回文件大小</td> <td>function</td> </tr> <tr> <td><strong>hard_link_count</strong> (C++17)</td> <td>返回指向特定文件的硬链接数量</td> <td>function</td> </tr> <tr> <td><strong>last_write_time</strong> (C++17)</td> <td>获取或设置最后一次数据修改的时间</td> <td>function</td> </tr> <tr> <td><strong>permissions</strong> (C++17)</td> <td>修改文件访问权限</td> <td>function</td> </tr> <tr> <td><strong>read_symlink</strong> (C++17)</td> <td>获取符号链接的目标</td> <td>function</td> </tr> <tr> <td><strong>remove</strong> (C++17)</td> <td>移除文件或空目录</td> <td>function</td> </tr> <tr> <td><strong>remove_all</strong> (C++17)</td> <td>递归地移除文件或目录及其所有内容</td> <td>function</td> </tr> <tr> <td><strong>rename</strong> (C++17)</td> <td>移动或重命名文件或目录</td> <td>function</td> </tr> <tr> <td><strong>resize_file</strong> (C++17)</td> <td>通过截断或零填充更改常规文件的大小</td> <td>function</td> </tr> <tr> <td><strong>space</strong> (C++17)</td> <td>确定文件系统上的可用空闲空间</td> <td>function</td> </tr> <tr> <td><strong>status</strong> (C++17)</td> <td>确定文件属性</td> <td>function</td> </tr> <tr> <td><strong>symlink_status</strong> (C++17)</td> <td>确定文件属性，检查符号链接目标</td> <td>function</td> </tr> <tr> <td><strong>temp_directory_path</strong> (C++17)</td> <td>返回一个适合临时文件的目录</td> <td>function</td> </tr> </tbody> </table> <p><strong>文件类型：</strong></p> <table> <thead> <tr> <th>函数名</th> <th>描述</th> <th>类型</th> </tr> </thead> <tbody> <tr> <td><strong>is_block_file</strong> (C++17)</td> <td>检查给定路径是否引用块设备</td> <td>function</td> </tr> <tr> <td><strong>is_character_file</strong> (C++17)</td> <td>检查给定路径是否引用字符设备</td> <td>function</td> </tr> <tr> <td><strong>is_directory</strong> (C++17)</td> <td>检查给定路径是否引用目录</td> <td>function</td> </tr> <tr> <td><strong>is_empty</strong> (C++17)</td> <td>检查给定路径是否引用空文件或目录</td> <td>function</td> </tr> <tr> <td><strong>is_fifo</strong> (C++17)</td> <td>检查给定路径是否引用命名管道</td> <td>function</td> </tr> <tr> <td><strong>is_other</strong> (C++17)</td> <td>检查参数是否引用其他类型的文件</td> <td>function</td> </tr> <tr> <td><strong>is_regular_file</strong> (C++17)</td> <td>检查参数是否引用常规文件</td> <td>function</td> </tr> <tr> <td><strong>is_socket</strong> (C++17)</td> <td>检查参数是否引用命名 IPC 套接字</td> <td>function</td> </tr> <tr> <td><strong>is_symlink</strong> (C++17)</td> <td>检查参数是否引用符号链接</td> <td>function</td> </tr> <tr> <td><strong>status_known</strong> (C++17)</td> <td>检查文件状态是否已知</td> <td>function</td> </tr> </tbody> </table> <h3 id=_2>包含方式<a class=headerlink href=#_2 title="Permanent link">&para;</a></h3> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;filesystem&gt;</span>
</span><span id=__span-0-2><span class=k>namespace</span><span class=w> </span><span class=nn>fs</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nn>std</span><span class=o>::</span><span class=nn>filesystem</span><span class=p>;</span><span class=w> </span><span class=c1>// 常用的命名空间别名</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_3>核心组件<a class=headerlink href=#_3 title="Permanent link">&para;</a></h3> <h4 id=path>路径类 (path)<a class=headerlink href=#path title="Permanent link">&para;</a></h4> <p><code>std::filesystem::path</code>是该库的核心类，用于表示文件系统路径：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><span class=c1>// 直接使用string进行构造</span>
</span><span id=__span-1-2><span class=n>fs</span><span class=o>::</span><span class=n>path</span><span class=w> </span><span class=n>p1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;C:/Users/Documents/file.txt&quot;</span><span class=p>;</span><span class=w>  </span><span class=c1>// Windows路径</span>
</span><span id=__span-1-3><span class=n>fs</span><span class=o>::</span><span class=n>path</span><span class=w> </span><span class=n>p2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;/home/user/documents/file.txt&quot;</span><span class=p>;</span><span class=w> </span><span class=c1>// Unix路径</span>
</span></code></pre></div></td></tr></table></div> <p><strong>主要特性</strong>：</p> <ul> <li>自动处理不同平台的路径分隔符</li> <li>提供路径组合、分解和规范化功能</li> <li>支持Unicode</li> </ul> <p><strong>常用操作</strong>： <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><span class=n>fs</span><span class=o>::</span><span class=n>path</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;/home/user/documents/file.txt&quot;</span><span class=p>;</span>
</span><span id=__span-2-2>
</span><span id=__span-2-3><span class=n>p</span><span class=p>.</span><span class=n>filename</span><span class=p>();</span><span class=w>    </span><span class=c1>// &quot;file.txt&quot;</span>
</span><span id=__span-2-4><span class=n>p</span><span class=p>.</span><span class=n>extension</span><span class=p>();</span><span class=w>   </span><span class=c1>// &quot;.txt&quot;</span>
</span><span id=__span-2-5><span class=n>p</span><span class=p>.</span><span class=n>stem</span><span class=p>();</span><span class=w>        </span><span class=c1>// &quot;file&quot;</span>
</span><span id=__span-2-6><span class=n>p</span><span class=p>.</span><span class=n>parent_path</span><span class=p>();</span><span class=w> </span><span class=c1>// &quot;/home/user/documents&quot;</span>
</span><span id=__span-2-7><span class=n>p</span><span class=p>.</span><span class=n>root_name</span><span class=p>();</span><span class=w>   </span><span class=c1>// 返回根名称</span>
</span><span id=__span-2-8><span class=n>p</span><span class=p>.</span><span class=n>is_absolute</span><span class=p>();</span><span class=w> </span><span class=c1>// 是否是绝对路径</span>
</span><span id=__span-2-9><span class=n>p</span><span class=p>.</span><span class=n>is_relative</span><span class=p>();</span><span class=w> </span><span class=c1>// 是否是相对路径</span>
</span><span id=__span-2-10><span class=n>p</span><span class=p>.</span><span class=n>string</span><span class=p>();</span><span class=w> </span><span class=c1>// 返回当前路径字符串&quot;/home/user/documents/file.txt&quot;</span>
</span></code></pre></div></td></tr></table></div></p> <p><strong>路径连接</strong>： <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-3-1><span class=n>fs</span><span class=o>::</span><span class=n>path</span><span class=w> </span><span class=n>dir</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;/home/user&quot;</span><span class=p>;</span>
</span><span id=__span-3-2><span class=n>fs</span><span class=o>::</span><span class=n>path</span><span class=w> </span><span class=n>full</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>dir</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=s>&quot;documents&quot;</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=s>&quot;file.txt&quot;</span><span class=p>;</span><span class=w> </span><span class=c1>// 使用/操作符连接路径</span>
</span></code></pre></div></td></tr></table></div></p> <h4 id=_4>文件状态和属性<a class=headerlink href=#_4 title="Permanent link">&para;</a></h4> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-4-1><span class=n>fs</span><span class=o>::</span><span class=n>file_status</span><span class=w> </span><span class=n>status</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fs</span><span class=o>::</span><span class=n>status</span><span class=p>(</span><span class=n>path</span><span class=p>);</span>
</span><span id=__span-4-2><span class=kt>bool</span><span class=w> </span><span class=n>isDir</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fs</span><span class=o>::</span><span class=n>is_directory</span><span class=p>(</span><span class=n>path</span><span class=p>);</span>
</span><span id=__span-4-3><span class=kt>bool</span><span class=w> </span><span class=n>isFile</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fs</span><span class=o>::</span><span class=n>is_regular_file</span><span class=p>(</span><span class=n>path</span><span class=p>);</span>
</span><span id=__span-4-4><span class=kt>bool</span><span class=w> </span><span class=n>exists</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fs</span><span class=o>::</span><span class=n>exists</span><span class=p>(</span><span class=n>path</span><span class=p>);</span>
</span><span id=__span-4-5><span class=kt>uintmax_t</span><span class=w> </span><span class=n>size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fs</span><span class=o>::</span><span class=n>file_size</span><span class=p>(</span><span class=n>path</span><span class=p>);</span>
</span><span id=__span-4-6><span class=n>fs</span><span class=o>::</span><span class=n>file_time_type</span><span class=w> </span><span class=n>time</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fs</span><span class=o>::</span><span class=n>last_write_time</span><span class=p>(</span><span class=n>path</span><span class=p>);</span>
</span></code></pre></div></td></tr></table></div> <h4 id=_5>文件和目录操作<a class=headerlink href=#_5 title="Permanent link">&para;</a></h4> <p><strong>创建目录</strong>： <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-5-1><span class=n>fs</span><span class=o>::</span><span class=n>create_directory</span><span class=p>(</span><span class=n>path</span><span class=p>);</span>
</span><span id=__span-5-2><span class=n>fs</span><span class=o>::</span><span class=n>create_directories</span><span class=p>(</span><span class=n>path</span><span class=p>);</span><span class=w> </span><span class=c1>// 创建多级目录</span>
</span></code></pre></div></td></tr></table></div></p> <p><strong>复制、移动和删除</strong>： <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-6-1><span class=n>fs</span><span class=o>::</span><span class=n>copy</span><span class=p>(</span><span class=n>from</span><span class=p>,</span><span class=w> </span><span class=n>to</span><span class=p>,</span><span class=w> </span><span class=n>fs</span><span class=o>::</span><span class=n>copy_options</span><span class=o>::</span><span class=n>recursive</span><span class=p>);</span>
</span><span id=__span-6-2><span class=n>fs</span><span class=o>::</span><span class=n>rename</span><span class=p>(</span><span class=n>from</span><span class=p>,</span><span class=w> </span><span class=n>to</span><span class=p>);</span>
</span><span id=__span-6-3><span class=n>fs</span><span class=o>::</span><span class=n>remove</span><span class=p>(</span><span class=n>path</span><span class=p>);</span>
</span><span id=__span-6-4><span class=n>fs</span><span class=o>::</span><span class=n>remove_all</span><span class=p>(</span><span class=n>path</span><span class=p>);</span><span class=w> </span><span class=c1>// 递归删除</span>
</span></code></pre></div></td></tr></table></div></p> <p><strong>目录遍历</strong>：</p> <p>目录遍历使用两种迭代器，分别是只遍历当前目录的<code>directory_iterator</code>和遍历当前位置开始的所有目录的<code>recursive_directory_iterator</code>，<code>directory_iterator</code>和<code>recursive_directory_iterator</code>返回的都是<code>directory_entry</code>对象，调用<code>directory_entry</code>类中的<code>path</code>方法可以获取到<code>path</code>类对象：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1><span class=c1>// 遍历单个目录</span>
</span><span id=__span-7-2><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=k>auto</span><span class=o>&amp;</span><span class=w> </span><span class=n>entry</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>fs</span><span class=o>::</span><span class=n>directory_iterator</span><span class=p>(</span><span class=n>path</span><span class=p>))</span><span class=w> </span>
</span><span id=__span-7-3><span class=p>{</span>
</span><span id=__span-7-4><span class=w>    </span><span class=c1>// 显式将entry转换为path对象</span>
</span><span id=__span-7-5><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>entry</span><span class=p>.</span><span class=n>path</span><span class=p>()</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-7-6><span class=p>}</span>
</span><span id=__span-7-7>
</span><span id=__span-7-8><span class=c1>// 递归遍历目录</span>
</span><span id=__span-7-9><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=k>auto</span><span class=o>&amp;</span><span class=w> </span><span class=n>entry</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>fs</span><span class=o>::</span><span class=n>recursive_directory_iterator</span><span class=p>(</span><span class=n>path</span><span class=p>))</span><span class=w> </span>
</span><span id=__span-7-10><span class=p>{</span>
</span><span id=__span-7-11><span class=w>    </span><span class=c1>// 显式将entry转换为path对象</span>
</span><span id=__span-7-12><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>entry</span><span class=p>.</span><span class=n>path</span><span class=p>()</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-7-13><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>另外，<code>directory_entry</code>还提供了<code>operator const std::filesystem::path&amp; () const noexcept;</code>，意味着这个类的对象都可以隐式类型转换为<code>path</code>类对象，例如前面判断文件类型的函数<code>is_regular_file</code>就可以直接传递<code>directory_entry</code>类对象：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-8-1><span class=c1>// 遍历单个目录</span>
</span><span id=__span-8-2><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=k>auto</span><span class=o>&amp;</span><span class=w> </span><span class=n>entry</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>fs</span><span class=o>::</span><span class=n>directory_iterator</span><span class=p>(</span><span class=n>path</span><span class=p>))</span><span class=w> </span>
</span><span id=__span-8-3><span class=p>{</span>
</span><span id=__span-8-4><span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=n>fs</span><span class=o>:</span><span class=n>is_regular_file</span><span class=p>(</span><span class=n>entry</span><span class=p>))</span>
</span><span id=__span-8-5><span class=w>    </span><span class=p>{</span>
</span><span id=__span-8-6><span class=w>        </span><span class=c1>// 判断是否是普通文件</span>
</span><span id=__span-8-7><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-8><span class=p>}</span>
</span><span id=__span-8-9>
</span><span id=__span-8-10><span class=c1>// 递归遍历目录</span>
</span><span id=__span-8-11><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=k>auto</span><span class=o>&amp;</span><span class=w> </span><span class=n>entry</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>fs</span><span class=o>::</span><span class=n>recursive_directory_iterator</span><span class=p>(</span><span class=n>path</span><span class=p>))</span><span class=w> </span>
</span><span id=__span-8-12><span class=p>{</span>
</span><span id=__span-8-13><span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=n>fs</span><span class=o>:</span><span class=n>is_regular_file</span><span class=p>(</span><span class=n>entry</span><span class=p>))</span>
</span><span id=__span-8-14><span class=w>    </span><span class=p>{</span>
</span><span id=__span-8-15><span class=w>        </span><span class=c1>// 判断是否是普通文件</span>
</span><span id=__span-8-16><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-17><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p><code>directory_entry</code>可以理解为一个目录中的一个条目（例如可以是普通文件、目录、符号链接等），这个类的对象保存了当前路径，因为是目录所以其中还有一些有关当前面目录中的文件信息，所以这个类还提供了判断文件类型的函数：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-9-1><span class=c1>// entry是一个directory_entry对象</span>
</span><span id=__span-9-2><span class=c1>// 例如is_regular_file</span>
</span><span id=__span-9-3><span class=n>entry</span><span class=p>.</span><span class=n>is_regular_file</span><span class=p>();</span>
</span><span id=__span-9-4><span class=n>entry</span><span class=p>.</span><span class=n>is_directory</span><span class=p>();</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_6>实用功能<a class=headerlink href=#_6 title="Permanent link">&para;</a></h3> <h4 id=_7>空间查询<a class=headerlink href=#_7 title="Permanent link">&para;</a></h4> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-10-1><span class=n>fs</span><span class=o>::</span><span class=n>space_info</span><span class=w> </span><span class=n>info</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fs</span><span class=o>::</span><span class=n>space</span><span class=p>(</span><span class=s>&quot;/home&quot;</span><span class=p>);</span>
</span><span id=__span-10-2><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;可用空间: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>info</span><span class=p>.</span><span class=n>available</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot; 字节</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>;</span>
</span><span id=__span-10-3><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;总空间: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>info</span><span class=p>.</span><span class=n>capacity</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot; 字节</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>;</span>
</span><span id=__span-10-4><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;空闲空间: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>info</span><span class=p>.</span><span class=n>free</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot; 字节</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <h4 id=_8>当前路径操作<a class=headerlink href=#_8 title="Permanent link">&para;</a></h4> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-11-1><span class=n>fs</span><span class=o>::</span><span class=n>path</span><span class=w> </span><span class=n>current</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fs</span><span class=o>::</span><span class=n>current_path</span><span class=p>();</span><span class=w> </span><span class=c1>// 获取当前工作目录</span>
</span><span id=__span-11-2><span class=n>fs</span><span class=o>::</span><span class=n>current_path</span><span class=p>(</span><span class=n>newPath</span><span class=p>);</span><span class=w> </span><span class=c1>// 修改当前工作目录</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_9>返回当前路径字符串操作<a class=headerlink href=#_9 title="Permanent link">&para;</a></h3> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-12-1><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>path_str</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>current</span><span class=p>.</span><span class=n>string</span><span class=p>();</span>
</span></code></pre></div></td></tr></table></div> <h4 id=_10>临时目录<a class=headerlink href=#_10 title="Permanent link">&para;</a></h4> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-13-1><span class=n>fs</span><span class=o>::</span><span class=n>path</span><span class=w> </span><span class=n>temp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fs</span><span class=o>::</span><span class=n>temp_directory_path</span><span class=p>();</span><span class=w> </span><span class=c1>// 获取临时目录</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_11>完整示例<a class=headerlink href=#_11 title="Permanent link">&para;</a></h3> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-14-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-14-2><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;filesystem&gt;</span>
</span><span id=__span-14-3><span class=k>namespace</span><span class=w> </span><span class=nn>fs</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nn>std</span><span class=o>::</span><span class=nn>filesystem</span><span class=p>;</span>
</span><span id=__span-14-4>
</span><span id=__span-14-5><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span>
</span><span id=__span-14-6><span class=p>{</span>
</span><span id=__span-14-7><span class=w>    </span><span class=c1>// 创建目录</span>
</span><span id=__span-14-8><span class=w>    </span><span class=n>fs</span><span class=o>::</span><span class=n>path</span><span class=w> </span><span class=n>dir</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;example_directory&quot;</span><span class=p>;</span>
</span><span id=__span-14-9><span class=w>    </span><span class=n>fs</span><span class=o>::</span><span class=n>create_directory</span><span class=p>(</span><span class=n>dir</span><span class=p>);</span>
</span><span id=__span-14-10>
</span><span id=__span-14-11><span class=w>    </span><span class=c1>// 创建文件</span>
</span><span id=__span-14-12><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>ofstream</span><span class=p>(</span><span class=n>dir</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=s>&quot;file1.txt&quot;</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;Hello, filesystem!&quot;</span><span class=p>;</span>
</span><span id=__span-14-13><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>ofstream</span><span class=p>(</span><span class=n>dir</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=s>&quot;file2.txt&quot;</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;Another file&quot;</span><span class=p>;</span>
</span><span id=__span-14-14>
</span><span id=__span-14-15><span class=w>    </span><span class=c1>// 创建子目录</span>
</span><span id=__span-14-16><span class=w>    </span><span class=n>fs</span><span class=o>::</span><span class=n>create_directory</span><span class=p>(</span><span class=n>dir</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=s>&quot;subdir&quot;</span><span class=p>);</span>
</span><span id=__span-14-17>
</span><span id=__span-14-18><span class=w>    </span><span class=c1>// 递归遍历并显示所有条目</span>
</span><span id=__span-14-19><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;目录内容:</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>;</span>
</span><span id=__span-14-20><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=k>auto</span><span class=o>&amp;</span><span class=w> </span><span class=n>entry</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>fs</span><span class=o>::</span><span class=n>recursive_directory_iterator</span><span class=p>(</span><span class=n>dir</span><span class=p>))</span><span class=w> </span>
</span><span id=__span-14-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-14-22><span class=w>        </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>entry</span><span class=p>.</span><span class=n>path</span><span class=p>()</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot; - &quot;</span><span class=p>;</span>
</span><span id=__span-14-23><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>fs</span><span class=o>::</span><span class=n>is_regular_file</span><span class=p>(</span><span class=n>entry</span><span class=p>.</span><span class=n>path</span><span class=p>()))</span>
</span><span id=__span-14-24><span class=w>            </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>fs</span><span class=o>::</span><span class=n>file_size</span><span class=p>(</span><span class=n>entry</span><span class=p>.</span><span class=n>path</span><span class=p>())</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot; 字节&quot;</span><span class=p>;</span>
</span><span id=__span-14-25><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>fs</span><span class=o>::</span><span class=n>is_directory</span><span class=p>(</span><span class=n>entry</span><span class=p>.</span><span class=n>path</span><span class=p>()))</span><span class=w> </span>
</span><span id=__span-14-26><span class=w>            </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;目录&quot;</span><span class=p>;</span>
</span><span id=__span-14-27><span class=w>        </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-14-28><span class=w>    </span><span class=p>}</span>
</span><span id=__span-14-29>
</span><span id=__span-14-30><span class=w>    </span><span class=c1>// 复制文件</span>
</span><span id=__span-14-31><span class=w>    </span><span class=n>fs</span><span class=o>::</span><span class=n>copy</span><span class=p>(</span><span class=n>dir</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=s>&quot;file1.txt&quot;</span><span class=p>,</span><span class=w> </span><span class=n>dir</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=s>&quot;file1_copy.txt&quot;</span><span class=p>);</span>
</span><span id=__span-14-32>
</span><span id=__span-14-33><span class=w>    </span><span class=c1>// 删除整个目录</span>
</span><span id=__span-14-34><span class=w>    </span><span class=n>fs</span><span class=o>::</span><span class=n>remove_all</span><span class=p>(</span><span class=n>dir</span><span class=p>);</span>
</span><span id=__span-14-35>
</span><span id=__span-14-36><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;操作完成&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-14-37>
</span><span id=__span-14-38>
</span><span id=__span-14-39><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-14-40><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=string_view>string_view库<a class=headerlink href=#string_view title="Permanent link">&para;</a></h2> <h3 id=_12>概述<a class=headerlink href=#_12 title="Permanent link">&para;</a></h3> <p>C++17引入的<code>std::string_view</code>是一个轻量级的、非拥有型（non-owning）的字符串引用类型，它提供了一个只读视图，指向已经存在的字符序列（如字符数组、<code>std::string</code>等）。<code>string_view</code>定义在<code>&lt;string_view&gt;</code>头文件中，属于<code>std</code>命名空间</p> <h3 id=_13>本质<a class=headerlink href=#_13 title="Permanent link">&para;</a></h3> <h4 id=_14>核心实现结构<a class=headerlink href=#_14 title="Permanent link">&para;</a></h4> <p><code>std::string_view</code> 本质上是对字符串的<strong>轻量级引用视图</strong>，其内部实现极其简单，通常只包含两个成员变量：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-15-1><span class=k>class</span><span class=w> </span><span class=nc>string_view</span><span class=w> </span>
</span><span id=__span-15-2><span class=p>{</span>
</span><span id=__span-15-3><span class=k>private</span><span class=o>:</span>
</span><span id=__span-15-4><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=o>*</span><span class=w> </span><span class=n>_data</span><span class=p>;</span><span class=w>   </span><span class=c1>// 指向字符序列的指针</span>
</span><span id=__span-15-5><span class=w>    </span><span class=kt>size_t</span><span class=w> </span><span class=n>_size</span><span class=p>;</span><span class=w>        </span><span class=c1>// 序列的长度</span>
</span><span id=__span-15-6><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <h4 id=_15>基本特征<a class=headerlink href=#_15 title="Permanent link">&para;</a></h4> <ol> <li> <p><strong>指针语义</strong>：</p> <ul> <li>本质上是一个"智能指针+长度"的组合</li> <li>不会复制字符串内容，只维护引用关系</li> <li>可以理解为对C风格字符串概念的现代化改进</li> </ul> </li> <li> <p><strong>轻量级结构</strong>：</p> <ul> <li>通常只占16字节内存（一个指针和一个<code>size_t</code>）</li> <li>拷贝和传递成本极低，等同于传递两个基本类型值</li> </ul> </li> <li> <p><strong>视图特性</strong>：</p> <ul> <li>只提供观察窗口，不拥有底层数据</li> <li>视图可调整（<code>remove_prefix</code>/<code>remove_suffix</code>），但底层数据不变</li> <li>不保证字符串以<code>\0</code>结尾</li> </ul> </li> </ol> <h4 id=c>与C字符串的对比<a class=headerlink href=#c title="Permanent link">&para;</a></h4> <p>传统C字符串有两种表示方式：</p> <ul> <li><code>char*</code>（需要手动管理内存，依赖<code>\0</code>结尾）</li> <li><code>char[]</code>（大小固定，无法动态调整）</li> </ul> <p>而<code>string_view</code>结合了两者优点：</p> <ul> <li>不需要尾部结束符</li> <li>知道确切长度</li> <li>可以引用任何字符序列的子串（无需复制）</li> </ul> <div class="admonition note"> <p class=admonition-title><code>string_view</code>的设计哲学</p> <p><code>string_view</code>体现了现代C++的一个核心设计理念：<strong>分离所有权和视图</strong>。当只需要读取访问时，借用视图比拥有副本更有效率</p> </div> <h3 id=_16>设计目的<a class=headerlink href=#_16 title="Permanent link">&para;</a></h3> <p><code>string_view</code>的主要设计目的是提高字符串处理的性能，特别适用于以下场景：</p> <ul> <li>函数参数中需要接受各种形式的字符串（如C风格字符串、<code>std::string</code>等）</li> <li>需要处理字符串子串而不希望产生内存分配</li> <li>只需要读取而不需要修改字符串内容的场景</li> </ul> <h3 id=_17>主要特性<a class=headerlink href=#_17 title="Permanent link">&para;</a></h3> <ul> <li><strong>零拷贝</strong>：不会复制原始字符串数据</li> <li><strong>轻量级</strong>：只保存指针和长度（通常为16字节）</li> <li><strong>只读接口</strong>：不能修改底层字符串内容</li> <li><strong>跨平台兼容</strong>：支持各种字符类型</li> </ul> <h3 id=_18>基本用法<a class=headerlink href=#_18 title="Permanent link">&para;</a></h3> <h4 id=string_view_1>创建string_view<a class=headerlink href=#string_view_1 title="Permanent link">&para;</a></h4> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-16-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;string_view&gt;</span>
</span><span id=__span-16-2><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-16-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;string&gt;</span>
</span><span id=__span-16-4>
</span><span id=__span-16-5><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span>
</span><span id=__span-16-6><span class=p>{</span>
</span><span id=__span-16-7><span class=w>    </span><span class=c1>// 从字符串字面量创建</span>
</span><span id=__span-16-8><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=w> </span><span class=n>sv1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Hello, string_view!&quot;</span><span class=p>;</span>
</span><span id=__span-16-9>
</span><span id=__span-16-10><span class=w>    </span><span class=c1>// 从std::string创建</span>
</span><span id=__span-16-11><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>str</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Hello, string!&quot;</span><span class=p>;</span>
</span><span id=__span-16-12><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=w> </span><span class=n>sv2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>str</span><span class=p>;</span>
</span><span id=__span-16-13>
</span><span id=__span-16-14><span class=w>    </span><span class=c1>// 从字符数组创建</span>
</span><span id=__span-16-15><span class=w>    </span><span class=kt>char</span><span class=w> </span><span class=n>arr</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=sc>&#39;H&#39;</span><span class=p>,</span><span class=w> </span><span class=sc>&#39;e&#39;</span><span class=p>,</span><span class=w> </span><span class=sc>&#39;l&#39;</span><span class=p>,</span><span class=w> </span><span class=sc>&#39;l&#39;</span><span class=p>,</span><span class=w> </span><span class=sc>&#39;o&#39;</span><span class=p>};</span>
</span><span id=__span-16-16><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=w> </span><span class=n>sv3</span><span class=p>(</span><span class=n>arr</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>);</span><span class=w>  </span><span class=c1>// 必须指定长度</span>
</span><span id=__span-16-17>
</span><span id=__span-16-18><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;sv1: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>sv1</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-16-19><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;sv2: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>sv2</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-16-20><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;sv3: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>sv3</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-16-21>
</span><span id=__span-16-22><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-16-23><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h4 id=_19>常用操作<a class=headerlink href=#_19 title="Permanent link">&para;</a></h4> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-17-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;string_view&gt;</span>
</span><span id=__span-17-2><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-17-3>
</span><span id=__span-17-4><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span>
</span><span id=__span-17-5><span class=p>{</span>
</span><span id=__span-17-6><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=w> </span><span class=n>sv</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Hello, string_view world!&quot;</span><span class=p>;</span>
</span><span id=__span-17-7>
</span><span id=__span-17-8><span class=w>    </span><span class=c1>// 基本属性</span>
</span><span id=__span-17-9><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;长度: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>sv</span><span class=p>.</span><span class=n>size</span><span class=p>()</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span><span class=w>  </span><span class=c1>// 或 sv.length()</span>
</span><span id=__span-17-10><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;是否为空: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=p>(</span><span class=n>sv</span><span class=p>.</span><span class=n>empty</span><span class=p>()</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s>&quot;是&quot;</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s>&quot;否&quot;</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-17-11>
</span><span id=__span-17-12><span class=w>    </span><span class=c1>// 访问元素</span>
</span><span id=__span-17-13><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;首字符: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>sv</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-17-14><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;末字符: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>sv</span><span class=p>.</span><span class=n>back</span><span class=p>()</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-17-15>
</span><span id=__span-17-16><span class=w>    </span><span class=c1>// 子串操作（不产生新内存分配）</span>
</span><span id=__span-17-17><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=w> </span><span class=n>sv_sub</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sv</span><span class=p>.</span><span class=n>substr</span><span class=p>(</span><span class=mi>7</span><span class=p>,</span><span class=w> </span><span class=mi>11</span><span class=p>);</span><span class=w>  </span><span class=c1>// &quot;string_view&quot;</span>
</span><span id=__span-17-18><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;子串: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>sv_sub</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-17-19>
</span><span id=__span-17-20><span class=w>    </span><span class=c1>// 查找操作</span>
</span><span id=__span-17-21><span class=w>    </span><span class=kt>size_t</span><span class=w> </span><span class=n>pos</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sv</span><span class=p>.</span><span class=n>find</span><span class=p>(</span><span class=s>&quot;world&quot;</span><span class=p>);</span>
</span><span id=__span-17-22><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>pos</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=o>::</span><span class=n>npos</span><span class=p>)</span><span class=w> </span>
</span><span id=__span-17-23><span class=w>        </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;&#39;world&#39;在位置: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>pos</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-17-24>
</span><span id=__span-17-25><span class=w>    </span><span class=c1>// 移除前缀和后缀</span>
</span><span id=__span-17-26><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=w> </span><span class=n>sv2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sv</span><span class=p>;</span>
</span><span id=__span-17-27><span class=w>    </span><span class=n>sv2</span><span class=p>.</span><span class=n>remove_prefix</span><span class=p>(</span><span class=mi>7</span><span class=p>);</span><span class=w>  </span><span class=c1>// 移除&quot;Hello, &quot;</span>
</span><span id=__span-17-28><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;移除前缀后: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>sv2</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-17-29>
</span><span id=__span-17-30><span class=w>    </span><span class=n>sv2</span><span class=p>.</span><span class=n>remove_suffix</span><span class=p>(</span><span class=mi>7</span><span class=p>);</span><span class=w>  </span><span class=c1>// 移除&quot; world!&quot;</span>
</span><span id=__span-17-31><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;移除后缀后: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>sv2</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-17-32>
</span><span id=__span-17-33><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-17-34><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_20>性能优势<a class=headerlink href=#_20 title="Permanent link">&para;</a></h3> <p><code>string_view</code>相比<code>std::string</code>的主要优势在于避免了不必要的内存分配和复制操作。下面是一个性能对比示例：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-18-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;string&gt;</span>
</span><span id=__span-18-2><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;string_view&gt;</span>
</span><span id=__span-18-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;iostream&gt;</span>
</span><span id=__span-18-4><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;chrono&gt;</span>
</span><span id=__span-18-5>
</span><span id=__span-18-6><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span>
</span><span id=__span-18-7><span class=p>{</span>
</span><span id=__span-18-8><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>iterations</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1000000</span><span class=p>;</span>
</span><span id=__span-18-9><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>str</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;这是一个测试字符串，用于演示string_view和string的性能差异&quot;</span><span class=p>;</span>
</span><span id=__span-18-10>
</span><span id=__span-18-11><span class=w>    </span><span class=c1>// 测试std::string</span>
</span><span id=__span-18-12><span class=w>    </span><span class=k>auto</span><span class=w> </span><span class=n>start1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>chrono</span><span class=o>::</span><span class=n>high_resolution_clock</span><span class=o>::</span><span class=n>now</span><span class=p>();</span>
</span><span id=__span-18-13><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>iterations</span><span class=p>;</span><span class=w> </span><span class=o>++</span><span class=n>i</span><span class=p>)</span><span class=w> </span>
</span><span id=__span-18-14><span class=w>        </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>substring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>str</span><span class=p>.</span><span class=n>substr</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=p>);</span><span class=w>  </span><span class=c1>// 创建新字符串，分配内存</span>
</span><span id=__span-18-15>
</span><span id=__span-18-16><span class=w>    </span><span class=k>auto</span><span class=w> </span><span class=n>end1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>chrono</span><span class=o>::</span><span class=n>high_resolution_clock</span><span class=o>::</span><span class=n>now</span><span class=p>();</span>
</span><span id=__span-18-17>
</span><span id=__span-18-18><span class=w>    </span><span class=c1>// 测试std::string_view</span>
</span><span id=__span-18-19><span class=w>    </span><span class=k>auto</span><span class=w> </span><span class=n>start2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>chrono</span><span class=o>::</span><span class=n>high_resolution_clock</span><span class=o>::</span><span class=n>now</span><span class=p>();</span>
</span><span id=__span-18-20><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>iterations</span><span class=p>;</span><span class=w> </span><span class=o>++</span><span class=n>i</span><span class=p>)</span><span class=w> </span>
</span><span id=__span-18-21><span class=w>        </span><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=w> </span><span class=n>substring</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=p>(</span><span class=n>str</span><span class=p>).</span><span class=n>substr</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span><span class=w> </span><span class=mi>10</span><span class=p>);</span><span class=w>  </span><span class=c1>// 无内存分配</span>
</span><span id=__span-18-22>
</span><span id=__span-18-23><span class=k>auto</span><span class=w> </span><span class=n>end2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>chrono</span><span class=o>::</span><span class=n>high_resolution_clock</span><span class=o>::</span><span class=n>now</span><span class=p>();</span>
</span><span id=__span-18-24>
</span><span id=__span-18-25><span class=w>    </span><span class=k>auto</span><span class=w> </span><span class=n>duration1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>chrono</span><span class=o>::</span><span class=n>duration_cast</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>chrono</span><span class=o>::</span><span class=n>milliseconds</span><span class=o>&gt;</span><span class=p>(</span><span class=n>end1</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>start1</span><span class=p>).</span><span class=n>count</span><span class=p>();</span>
</span><span id=__span-18-26><span class=w>    </span><span class=k>auto</span><span class=w> </span><span class=n>duration2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>chrono</span><span class=o>::</span><span class=n>duration_cast</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>chrono</span><span class=o>::</span><span class=n>milliseconds</span><span class=o>&gt;</span><span class=p>(</span><span class=n>end2</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>start2</span><span class=p>).</span><span class=n>count</span><span class=p>();</span>
</span><span id=__span-18-27>
</span><span id=__span-18-28><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;std::string 耗时: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>duration1</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot; 毫秒&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-18-29><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;std::string_view 耗时: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>duration2</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot; 毫秒&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-18-30><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;性能提升: &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=p>(</span><span class=kt>float</span><span class=p>)</span><span class=n>duration1</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>duration2</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;倍&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-18-31>
</span><span id=__span-18-32><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-18-33><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_21>注意事项和最佳实践<a class=headerlink href=#_21 title="Permanent link">&para;</a></h3> <h4 id=_22>生命周期问题<a class=headerlink href=#_22 title="Permanent link">&para;</a></h4> <p><code>string_view</code>不拥有数据，所以必须确保它引用的字符串在使用期间保持有效：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-19-1><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=w> </span><span class=nf>get_dangerous_view</span><span class=p>()</span><span class=w> </span>
</span><span id=__span-19-2><span class=p>{</span>
</span><span id=__span-19-3><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>local_str</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;临时字符串&quot;</span><span class=p>;</span>
</span><span id=__span-19-4><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>local_str</span><span class=p>;</span><span class=w>  </span><span class=c1>// 危险！返回了引用临时对象的视图</span>
</span><span id=__span-19-5><span class=p>}</span><span class=w>  </span><span class=c1>// local_str被销毁，string_view变为无效</span>
</span><span id=__span-19-6>
</span><span id=__span-19-7><span class=kt>void</span><span class=w> </span><span class=nf>safer_usage</span><span class=p>()</span><span class=w> </span>
</span><span id=__span-19-8><span class=p>{</span>
</span><span id=__span-19-9><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>stored_str</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;安全的字符串&quot;</span><span class=p>;</span>
</span><span id=__span-19-10><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=w> </span><span class=n>sv</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>stored_str</span><span class=p>;</span><span class=w>  </span><span class=c1>// 安全，只要stored_str存在</span>
</span><span id=__span-19-11><span class=w>    </span><span class=c1>// 使用sv...</span>
</span><span id=__span-19-12><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h4 id=capi>与C风格API的交互<a class=headerlink href=#capi title="Permanent link">&para;</a></h4> <p><code>string_view</code>不保证以<code>'\0'</code>结尾，所以不能直接用于C风格API：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-20-1><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=w> </span><span class=n>sv</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Hello&quot;</span><span class=p>;</span>
</span><span id=__span-20-2><span class=n>sv</span><span class=p>.</span><span class=n>remove_suffix</span><span class=p>(</span><span class=mi>2</span><span class=p>);</span><span class=w>  </span><span class=c1>// 现在sv指向&quot;Hel&quot;</span>
</span><span id=__span-20-3>
</span><span id=__span-20-4><span class=c1>// 错误用法</span>
</span><span id=__span-20-5><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%s&quot;</span><span class=p>,</span><span class=w> </span><span class=n>sv</span><span class=p>.</span><span class=n>data</span><span class=p>());</span><span class=w>  </span><span class=c1>// 可能不以&#39;\0&#39;结尾！</span>
</span><span id=__span-20-6>
</span><span id=__span-20-7><span class=c1>// 正确用法</span>
</span><span id=__span-20-8><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=nf>temp</span><span class=p>(</span><span class=n>sv</span><span class=p>);</span><span class=w>  </span><span class=c1>// 转换为std::string</span>
</span><span id=__span-20-9><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%s&quot;</span><span class=p>,</span><span class=w> </span><span class=n>temp</span><span class=p>.</span><span class=n>c_str</span><span class=p>());</span>
</span></code></pre></div></td></tr></table></div> <p>需要注意，尽管<code>data</code>函数返回的是<code>const char*</code>，但是这个返回结果可能不包含<code>\0</code>，也就是说<code>Hello</code>可能并不是<code>Hello\0</code>，这就可能造成使用<code>%s</code>无法找到结尾的位置</p> <h4 id=_23>适合传递参数，不适合返回值<a class=headerlink href=#_23 title="Permanent link">&para;</a></h4> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-21-1><span class=c1>// 好的用法 - 参数使用string_view</span>
</span><span id=__span-21-2><span class=kt>void</span><span class=w> </span><span class=nf>process_data</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=w> </span><span class=n>data</span><span class=p>)</span><span class=w> </span>
</span><span id=__span-21-3><span class=p>{</span>
</span><span id=__span-21-4><span class=w>    </span><span class=c1>// 处理数据...</span>
</span><span id=__span-21-5><span class=p>}</span>
</span><span id=__span-21-6>
</span><span id=__span-21-7><span class=c1>// 避免的用法 - 返回string_view</span>
</span><span id=__span-21-8><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=w> </span><span class=nf>get_data</span><span class=p>()</span><span class=w> </span>
</span><span id=__span-21-9><span class=p>{</span>
</span><span id=__span-21-10><span class=w>    </span><span class=k>static</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>data</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;持久数据&quot;</span><span class=p>;</span><span class=w>  </span><span class=c1>// 必须确保数据比view生命周期长</span>
</span><span id=__span-21-11><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>data</span><span class=p>;</span>
</span><span id=__span-21-12><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>需要注意，如果一个函数的返回值为string类型，并且需要将局部的<code>string_view</code>成员返回，一定要先构造出string对象才能返回，因为string_view不允许隐式类型构造为一个string，例如：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-22-1><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=nf>get_data</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=w> </span><span class=n>data</span><span class=p>)</span><span class=w> </span>
</span><span id=__span-22-2><span class=p>{</span>
</span><span id=__span-22-3><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>data</span><span class=p>;</span><span class=w> </span><span class=c1>// 错误，不允许隐式构造为string</span>
</span><span id=__span-22-4><span class=p>}</span>
</span><span id=__span-22-5>
</span><span id=__span-22-6><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=nf>get_data</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=w> </span><span class=n>data</span><span class=p>)</span><span class=w> </span>
</span><span id=__span-22-7><span class=p>{</span>
</span><span id=__span-22-8><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=p>(</span><span class=n>data</span><span class=p>);</span><span class=w> </span><span class=c1>// 正确</span>
</span><span id=__span-22-9><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=any>通用类型<code>any</code><a class=headerlink href=#any title="Permanent link">&para;</a></h2> <h3 id=any_1>标准库中<code>any</code>的介绍<a class=headerlink href=#any_1 title="Permanent link">&para;</a></h3> <p>在C++中，定义一个变量需要指定该变量的具体类型，如果不确定类型，但是又需要这个变量，就可以使用<code>any</code>类型，基本使用如下：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-23-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;any&gt;</span>
</span><span id=__span-23-2>
</span><span id=__span-23-3><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-23-4><span class=p>{</span>
</span><span id=__span-23-5><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>any</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>10</span><span class=p>;</span>
</span><span id=__span-23-6><span class=w>    </span><span class=c1>// 转换为指定类型的数据</span>
</span><span id=__span-23-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>any_cast</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>(</span><span class=n>a</span><span class=p>);</span>
</span><span id=__span-23-8><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-23-9>
</span><span id=__span-23-10><span class=w>    </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;hello world&quot;</span><span class=p>;</span>
</span><span id=__span-23-11><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>any_cast</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=o>&gt;</span><span class=p>(</span><span class=n>a</span><span class=p>);</span>
</span><span id=__span-23-12><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-23-13>
</span><span id=__span-23-14><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-23-15><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>关于<code>any</code>类型更多的用法参考<a href=https://en.cppreference.com/w/cpp/utility/any.html>官方文档</a></p> <h3 id=any_2><code>any</code>的实现原理<a class=headerlink href=#any_2 title="Permanent link">&para;</a></h3> <p>要实现任意类型，那么少不了的就是用到模版，如果直接写成模版，那么就是下面的写法：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-24-1><span class=k>template</span><span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
</span><span id=__span-24-2><span class=k>class</span><span class=w> </span><span class=nc>Any</span>
</span><span id=__span-24-3><span class=p>{</span>
</span><span id=__span-24-4>
</span><span id=__span-24-5><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p>但是这种写法存在一个问题，因为所谓的任意类型，实际上在创建对象时就无法确定具体类型，而使用模板就意味着定义对象时需要指定类型，这一做法与设计这个类的初衷就是不一致的。基于<strong>创建对象时就无法确定具体类型</strong>这个问题，那么<code>Any</code>类就不应该使用模版，但是为了存储任意类型，那么就需要在类内创建一个模版类，如下：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-25-1><span class=k>class</span><span class=w> </span><span class=nc>Any</span>
</span><span id=__span-25-2><span class=p>{</span>
</span><span id=__span-25-3>
</span><span id=__span-25-4><span class=k>private</span><span class=o>:</span>
</span><span id=__span-25-5><span class=w>    </span><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
</span><span id=__span-25-6><span class=w>    </span><span class=k>class</span><span class=w> </span><span class=nc>PlaceHolder</span>
</span><span id=__span-25-7><span class=w>    </span><span class=p>{</span>
</span><span id=__span-25-8>
</span><span id=__span-25-9><span class=w>    </span><span class=p>};</span>
</span><span id=__span-25-10><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p>但是上面的写法还有一个问题，既然<code>PlaceHolder</code>是一个模版类，那么在创建对象时需要指定具体类型，也就是说，在<code>Any</code>类就需要存在下面的成员：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-26-1><span class=n>PlaceHolder</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=n>_holder</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>但是，类成员要使用模板，那么为了确定类型，类同样需要使用到模板，现在又回到了最开始的问题，<code>Any</code>类不能为模板类，此时可以考虑使用多态来解决，即让<code>PlaceHolder</code>这个模版类继承自一个基类，然后让<code>Any</code>类的成员为基类的指针，这样就可以实现任意类型的存储，如下：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-27-1><span class=k>class</span><span class=w> </span><span class=nc>Any</span>
</span><span id=__span-27-2><span class=p>{</span>
</span><span id=__span-27-3><span class=k>private</span><span class=o>:</span>
</span><span id=__span-27-4><span class=w>    </span><span class=k>class</span><span class=w> </span><span class=nc>Holder</span>
</span><span id=__span-27-5><span class=w>    </span><span class=p>{</span>
</span><span id=__span-27-6><span class=w>    </span><span class=k>public</span><span class=o>:</span>
</span><span id=__span-27-7>
</span><span id=__span-27-8><span class=w>    </span><span class=p>};</span>
</span><span id=__span-27-9>
</span><span id=__span-27-10><span class=w>    </span><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
</span><span id=__span-27-11><span class=w>    </span><span class=k>class</span><span class=w> </span><span class=nc>PlaceHolder</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Holder</span>
</span><span id=__span-27-12><span class=w>    </span><span class=p>{</span>
</span><span id=__span-27-13>
</span><span id=__span-27-14><span class=w>    </span><span class=p>};</span>
</span><span id=__span-27-15>
</span><span id=__span-27-16><span class=w>    </span><span class=n>Holder</span><span class=w> </span><span class=o>*</span><span class=n>content_</span><span class=p>;</span><span class=w> </span><span class=c1>// Any类保存的数据</span>
</span><span id=__span-27-17><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p>在父类的<code>Holder</code>中，需要提供一系列纯虚函数，本次提供下面的函数：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-28-1><span class=k>class</span><span class=w> </span><span class=nc>Holder</span>
</span><span id=__span-28-2><span class=p>{</span>
</span><span id=__span-28-3><span class=k>public</span><span class=o>:</span>
</span><span id=__span-28-4><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=o>~</span><span class=n>Holder</span><span class=p>()</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>default</span><span class=p>;</span>
</span><span id=__span-28-5><span class=w>    </span><span class=c1>// 获取保存内容的类型</span>
</span><span id=__span-28-6><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>type_info</span><span class=w> </span><span class=o>&amp;</span><span class=nf>getType</span><span class=p>()</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-28-7><span class=w>    </span><span class=c1>// 克隆当前对象，用于拷贝构造和赋值</span>
</span><span id=__span-28-8><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=n>Holder</span><span class=w> </span><span class=o>*</span><span class=nf>clone</span><span class=p>()</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-28-9><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p>接着，子类中实现这些函数，并提供对应的构造函数：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-29-1><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
</span><span id=__span-29-2><span class=k>class</span><span class=w> </span><span class=nc>PlaceHolder</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Holder</span>
</span><span id=__span-29-3><span class=p>{</span>
</span><span id=__span-29-4><span class=k>public</span><span class=o>:</span>
</span><span id=__span-29-5><span class=w>    </span><span class=n>PlaceHolder</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>T</span><span class=w> </span><span class=o>&amp;</span><span class=n>val</span><span class=p>)</span>
</span><span id=__span-29-6><span class=w>        </span><span class=o>:</span><span class=w> </span><span class=n>val_</span><span class=p>(</span><span class=n>val</span><span class=p>)</span>
</span><span id=__span-29-7><span class=w>    </span><span class=p>{</span>
</span><span id=__span-29-8><span class=w>    </span><span class=p>}</span>
</span><span id=__span-29-9>
</span><span id=__span-29-10><span class=w>    </span><span class=c1>// 获取数据类型</span>
</span><span id=__span-29-11><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>type_info</span><span class=w> </span><span class=o>&amp;</span><span class=n>getType</span><span class=p>()</span><span class=w> </span><span class=k>override</span>
</span><span id=__span-29-12><span class=w>    </span><span class=p>{</span>
</span><span id=__span-29-13><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>typeid</span><span class=p>(</span><span class=n>val_</span><span class=p>);</span>
</span><span id=__span-29-14><span class=w>    </span><span class=p>}</span>
</span><span id=__span-29-15>
</span><span id=__span-29-16><span class=w>    </span><span class=c1>// 根据具体值构造一个新的父类对象</span>
</span><span id=__span-29-17><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=n>Holder</span><span class=w> </span><span class=o>*</span><span class=n>clone</span><span class=p>()</span><span class=w> </span><span class=k>override</span>
</span><span id=__span-29-18><span class=w>    </span><span class=p>{</span>
</span><span id=__span-29-19><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>PlaceHolder</span><span class=p>(</span><span class=n>val_</span><span class=p>);</span>
</span><span id=__span-29-20><span class=w>    </span><span class=p>}</span>
</span><span id=__span-29-21>
</span><span id=__span-29-22><span class=w>    </span><span class=n>T</span><span class=w> </span><span class=n>val_</span><span class=p>;</span>
</span><span id=__span-29-23><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p>接着，在<code>Any</code>类中，分别实现下面的函数：</p> <div class="tabbed-set tabbed-alternate" data-tabs=1:10><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><input id=__tabbed_1_3 name=__tabbed_1 type=radio><input id=__tabbed_1_4 name=__tabbed_1 type=radio><input id=__tabbed_1_5 name=__tabbed_1 type=radio><input id=__tabbed_1_6 name=__tabbed_1 type=radio><input id=__tabbed_1_7 name=__tabbed_1 type=radio><input id=__tabbed_1_8 name=__tabbed_1 type=radio><input id=__tabbed_1_9 name=__tabbed_1 type=radio><input id=__tabbed_1_10 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>无参构造</label><label for=__tabbed_1_2>基于值的构造</label><label for=__tabbed_1_3>基于当前类对象的拷贝构造</label><label for=__tabbed_1_4>移动构造</label><label for=__tabbed_1_5>基于值的赋值重载</label><label for=__tabbed_1_6>基于当前类对象的赋值</label><label for=__tabbed_1_7>基于当前类对象的移动赋值</label><label for=__tabbed_1_8>析构函数</label><label for=__tabbed_1_9>获取保存的内容</label><label for=__tabbed_1_10>交换函数</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-30-1><span class=c1>// 无参构造</span>
</span><span id=__span-30-2><span class=n>Any</span><span class=p>()</span>
</span><span id=__span-30-3><span class=w>    </span><span class=o>:</span><span class=w> </span><span class=n>content_</span><span class=p>(</span><span class=k>nullptr</span><span class=p>)</span>
</span><span id=__span-30-4><span class=p>{</span>
</span><span id=__span-30-5><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-31-1><span class=c1>// 指定类型数据</span>
</span><span id=__span-31-2><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
</span><span id=__span-31-3><span class=n>Any</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>T</span><span class=w> </span><span class=o>&amp;</span><span class=n>val</span><span class=p>)</span>
</span><span id=__span-31-4><span class=w>    </span><span class=o>:</span><span class=w> </span><span class=n>content_</span><span class=p>(</span><span class=k>new</span><span class=w> </span><span class=n>PlaceHolder</span><span class=p>(</span><span class=n>val</span><span class=p>))</span>
</span><span id=__span-31-5><span class=p>{</span>
</span><span id=__span-31-6><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-32-1><span class=c1>// 拷贝构造</span>
</span><span id=__span-32-2><span class=c1>// 注意，不能直接通过外部的Any对象content_构造当前的content_</span>
</span><span id=__span-32-3><span class=c1>// 此时可能会产生野指针问题</span>
</span><span id=__span-32-4><span class=n>Any</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>Any</span><span class=w> </span><span class=o>&amp;</span><span class=n>other</span><span class=p>)</span>
</span><span id=__span-32-5><span class=w>    </span><span class=o>:</span><span class=w> </span><span class=n>content_</span><span class=p>(</span><span class=o>!</span><span class=n>other</span><span class=p>.</span><span class=n>content_</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=k>nullptr</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>other</span><span class=p>.</span><span class=n>content_</span><span class=o>-&gt;</span><span class=n>clone</span><span class=p>())</span>
</span><span id=__span-32-6><span class=p>{</span>
</span><span id=__span-32-7><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-33-1><span class=c1>// 移动构造</span>
</span><span id=__span-33-2><span class=n>Any</span><span class=p>(</span><span class=n>Any</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=n>other</span><span class=p>)</span>
</span><span id=__span-33-3><span class=p>{</span>
</span><span id=__span-33-4><span class=w>    </span><span class=n>swap</span><span class=p>(</span><span class=n>other</span><span class=p>);</span>
</span><span id=__span-33-5><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-34-1><span class=c1>// 重载赋值运算符——针对具体数据</span>
</span><span id=__span-34-2><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
</span><span id=__span-34-3><span class=n>Any</span><span class=w> </span><span class=o>&amp;</span><span class=k>operator</span><span class=o>=</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>T</span><span class=w> </span><span class=o>&amp;</span><span class=n>val</span><span class=p>)</span>
</span><span id=__span-34-4><span class=p>{</span>
</span><span id=__span-34-5><span class=w>    </span><span class=c1>// 构造一个匿名对象，直接调用交换函数</span>
</span><span id=__span-34-6><span class=w>    </span><span class=c1>// 此时外部对象就会与临时对象进行数据交换，交换完成后匿名对象会销毁</span>
</span><span id=__span-34-7><span class=w>    </span><span class=n>Any</span><span class=p>(</span><span class=n>val</span><span class=p>).</span><span class=n>swap</span><span class=p>(</span><span class=o>*</span><span class=k>this</span><span class=p>);</span>
</span><span id=__span-34-8><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=o>*</span><span class=k>this</span><span class=p>;</span>
</span><span id=__span-34-9><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-35-1><span class=c1>// 重载赋值运算符——针对当前类对象</span>
</span><span id=__span-35-2><span class=n>Any</span><span class=w> </span><span class=o>&amp;</span><span class=k>operator</span><span class=o>=</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>Any</span><span class=w> </span><span class=o>&amp;</span><span class=n>other</span><span class=p>)</span>
</span><span id=__span-35-3><span class=p>{</span>
</span><span id=__span-35-4><span class=w>    </span><span class=n>Any</span><span class=p>(</span><span class=n>other</span><span class=p>).</span><span class=n>swap</span><span class=p>(</span><span class=o>*</span><span class=k>this</span><span class=p>);</span>
</span><span id=__span-35-5><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=o>*</span><span class=k>this</span><span class=p>;</span>
</span><span id=__span-35-6><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-36-1><span class=c1>// 移动赋值</span>
</span><span id=__span-36-2><span class=n>Any</span><span class=w> </span><span class=o>&amp;</span><span class=k>operator</span><span class=o>=</span><span class=p>(</span><span class=n>Any</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=n>other</span><span class=p>)</span>
</span><span id=__span-36-3><span class=p>{</span>
</span><span id=__span-36-4><span class=w>    </span><span class=n>Any</span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>move</span><span class=p>(</span><span class=n>other</span><span class=p>)).</span><span class=n>swap</span><span class=p>(</span><span class=o>*</span><span class=k>this</span><span class=p>);</span>
</span><span id=__span-36-5><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=o>*</span><span class=k>this</span><span class=p>;</span>
</span><span id=__span-36-6><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-37-1><span class=o>~</span><span class=n>Any</span><span class=p>()</span>
</span><span id=__span-37-2><span class=p>{</span>
</span><span id=__span-37-3><span class=w>    </span><span class=k>delete</span><span class=w> </span><span class=n>content_</span><span class=p>;</span>
</span><span id=__span-37-4><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-38-1><span class=c1>// 获取数值</span>
</span><span id=__span-38-2><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
</span><span id=__span-38-3><span class=n>T</span><span class=w> </span><span class=o>*</span><span class=n>getVal</span><span class=p>()</span>
</span><span id=__span-38-4><span class=p>{</span>
</span><span id=__span-38-5><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=k>typeid</span><span class=p>(</span><span class=n>T</span><span class=p>)</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>content_</span><span class=o>-&gt;</span><span class=n>getType</span><span class=p>());</span>
</span><span id=__span-38-6><span class=w>    </span><span class=c1>// 转换为子类对象访问其中的成员</span>
</span><span id=__span-38-7><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=o>&amp;</span><span class=p>(</span><span class=k>dynamic_cast</span><span class=o>&lt;</span><span class=n>PlaceHolder</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=o>*&gt;</span><span class=p>(</span><span class=n>content_</span><span class=p>)</span><span class=o>-&gt;</span><span class=n>val_</span><span class=p>);</span>
</span><span id=__span-38-8><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> </div> <div class=tabbed-block> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-39-1><span class=n>Any</span><span class=w> </span><span class=o>&amp;</span><span class=nf>swap</span><span class=p>(</span><span class=n>Any</span><span class=w> </span><span class=o>&amp;</span><span class=n>other</span><span class=p>)</span>
</span><span id=__span-39-2><span class=p>{</span>
</span><span id=__span-39-3><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>swap</span><span class=p>(</span><span class=n>content_</span><span class=p>,</span><span class=w> </span><span class=n>other</span><span class=p>.</span><span class=n>content_</span><span class=p>);</span>
</span><span id=__span-39-4><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=o>*</span><span class=k>this</span><span class=p>;</span>
</span><span id=__span-39-5><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> </div> </div> </div> <p>测试代码如下：</p> <div class="language-cpp highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-40-1><span class=k>class</span><span class=w> </span><span class=nc>Test</span>
</span><span id=__span-40-2><span class=p>{</span>
</span><span id=__span-40-3><span class=k>public</span><span class=o>:</span>
</span><span id=__span-40-4><span class=w>    </span><span class=n>Test</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;构造&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
</span><span id=__span-40-5><span class=w>    </span><span class=n>Test</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>Test</span><span class=w> </span><span class=o>&amp;</span><span class=n>t</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;拷贝&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
</span><span id=__span-40-6><span class=w>    </span><span class=o>~</span><span class=n>Test</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;析构&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span><span class=w> </span><span class=p>}</span>
</span><span id=__span-40-7><span class=p>};</span>
</span><span id=__span-40-8><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-40-9><span class=p>{</span>
</span><span id=__span-40-10>
</span><span id=__span-40-11><span class=w>    </span><span class=n>my_any</span><span class=o>::</span><span class=n>Any</span><span class=w> </span><span class=n>a</span><span class=p>;</span>
</span><span id=__span-40-12><span class=w>    </span><span class=p>{</span>
</span><span id=__span-40-13><span class=w>        </span><span class=n>Test</span><span class=w> </span><span class=n>t</span><span class=p>;</span>
</span><span id=__span-40-14><span class=w>        </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>t</span><span class=p>;</span>
</span><span id=__span-40-15><span class=w>    </span><span class=p>}</span>
</span><span id=__span-40-16>
</span><span id=__span-40-17><span class=w>    </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>10</span><span class=p>;</span>
</span><span id=__span-40-18><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=o>*</span><span class=n>pa</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>getVal</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span><span class=p>();</span>
</span><span id=__span-40-19><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=o>*</span><span class=n>pa</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-40-20><span class=w>    </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=p>(</span><span class=s>&quot;nihao&quot;</span><span class=p>);</span>
</span><span id=__span-40-21><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=w> </span><span class=o>*</span><span class=n>ps</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>getVal</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=o>&gt;</span><span class=p>();</span>
</span><span id=__span-40-22><span class=w>    </span><span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=o>*</span><span class=n>ps</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-40-23>
</span><span id=__span-40-24><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span><span id=__span-40-25><span class=w>        </span><span class=n>sleep</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-40-26><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-40-27><span class=p>}</span>
</span><span id=__span-40-28>
</span><span id=__span-40-29><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-40-30><span class=n>构造</span>
</span><span id=__span-40-31><span class=n>拷贝</span>
</span><span id=__span-40-32><span class=n>析构</span>
</span><span id=__span-40-33><span class=n>析构</span>
</span><span id=__span-40-34><span class=mi>10</span>
</span><span id=__span-40-35><span class=n>nihao</span>
</span></code></pre></div></td></tr></table></div> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2025年6月3日</span> </span> </aside> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> 页面有帮助吗？ </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title=页面对我有帮助 data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title=页面没有帮助到我 data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> 谢谢你的反馈！ </div> <div data-md-value=0 hidden> 谢谢你的反馈！联系<a href=https://www.help-doc.top/author/contact/contact.html>作者</a>提供更详细的信息 </div> </div> </div> </fieldset> </form> <!-- Waline 评论系统 --> <div id=waline></div> <!-- 评论系统 --> <!-- Waline 评论系统 --> <div id=waline></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2024-2025 柯懒不是柯南 </div> </div> <div class="md-footer-love md-typeset"> 一闪一闪亮晶晶，不及<span class=love-highlight>小亮</span><span class=love-heart>♥</span>照我心。To Li Liang </div> <div class=md-social> <a href=https://github.com/H0308 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.help-doc.top/author/contact/contact.html target=_blank rel=noopener title=www.help-doc.top class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.indexes", "navigation.prune", "navigation.tabs", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src=../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../javascripts/katex.min.js></script> <script src=../../javascripts/other.min.js></script> <script src=../../javascripts/copyright.min.js></script> <script src=../../javascripts/waline.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js></script> <script src=https://cdn.jsdelivr.net/npm/mermaid@11.5.0/dist/mermaid.min.js></script> <script src=../../assets/javascripts/toggle-sidebar.js async></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>