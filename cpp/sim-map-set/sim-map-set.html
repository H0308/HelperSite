<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://www.help-doc.top/cpp/sim-map-set/sim-map-set.html><link rel=prev href=../map/map.html><link rel=next href=../sim-unordered-map-set/sim-unordered-map-set.html><link rel=icon href=../../images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.12"><title>map和set类模拟实现 - 柯懒的知识库</title><link rel=stylesheet href=../../assets/stylesheets/main.2afb09e1.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=stylesheet href=../../css/timeline.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-9XWRGNRRSY"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-9XWRGNRRSY",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-9XWRGNRRSY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=stylesheet href=../../stylesheets/colors.min.css><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (max-width: 1199px)"><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (min-width: 1200px)" id=theme2-desktop><link rel=stylesheet href=../../stylesheets/theme1.min.css media="screen and (min-width: 1200px)" id=theme1-desktop><link rel=stylesheet href=../../stylesheets/print.min.css><link rel=stylesheet href=../../stylesheets/font-dongguanti.min.css id=font-dongguanti><link rel=stylesheet href=../../stylesheets/font-oppoti.min.css id=font-oppoti disabled><link rel=stylesheet href=../../stylesheets/font-jiangchengti.min.css id=font-jiangchengti disabled><link rel=stylesheet href=../../stylesheets/font-lxgw.min.css id=font-lxgw disabled><link rel=stylesheet href=../../stylesheets/code-font-dejavu-sans-mono.min.css id=code-font-dejavu-sans-mono><link rel=stylesheet href=../../stylesheets/code-font-zsft-hk.min.css id=code-font-zsft-hk disabled><link rel=stylesheet href=../../stylesheets/code-font-google-sans-code.min.css id=code-font-google-sans-code disabled><link rel=stylesheet href=https://unpkg.com/@waline/client@v3/dist/waline.css><link rel=stylesheet href=../../stylesheets/waline.min.css><script src=../../javascripts/start.min.js></script><link rel=preload href=../../stylesheets/colors.min.css as=style><link rel=preload href=../../stylesheets/theme2.min.css as=style><link rel=preload href=../../javascripts/start.min.js as=script><link rel=preload href=../../assets/logo.png as=image><link rel=preload href=../../images/favicon.png as=image><link rel=preload href=../../author/作者.assets/20250206-200653.jpg as=image><link rel=dns-prefetch href=//unpkg.com><link rel=dns-prefetch href=//cloud.umami.is><script defer src=https://cloud.umami.is/script.js data-website-id=02f9b8b7-93d4-4026-bdd8-221f2fcea2cf></script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#mapset class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../index.html title=柯懒的知识库 class="md-header__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 柯懒的知识库 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> map和set类模拟实现 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan aria-label type=radio name=__palette id=__palette_1> </form> <div class=header-avatar> <img src=../../author/作者.assets/20250206-200653.jpg alt=头像> <div class=avatar-dropdown> <p><strong>柯懒不是柯南</strong></p> <a href=../../author/contact/contact.html class=avatar-dropdown-item>联系作者</a> <div class=avatar-dropdown-divider></div> <a href=../../author/about/about.html class=avatar-dropdown-item>关于作者</a> <div class=avatar-dropdown-divider></div> <a href=https://github.com/H0308 class=avatar-dropdown-item>Github仓库</a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=查找> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=toolbar-toggle-btn id=toolbarToggleBtn onclick=toggleToolbar()> <div class=toggle-icon> <svg class=toggle-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=16 height=16> <path d="M346.538667 1024L170.666667 853.333333l341.333333-341.333333-341.333333-341.333333 175.872-170.666667L853.333333 512z" fill=currentColor></path> </svg> </div> </div> <div class=floating-toolbar id=floatingToolbar> <div class="toolbar-item font-switcher"> <div class=toolbar-icon> <svg class=font-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M913.408 1024l-66.56 0q-29.696 0-51.2-5.12t-36.864-15.872-26.112-27.136-19.968-37.888q-15.36-38.912-28.16-70.656t-22.016-55.296q-11.264-26.624-20.48-49.152l-254.976 0q-7.168 23.552-17.408 51.2-8.192 23.552-21.504 56.832t-30.72 72.192q-20.48 46.08-47.104 63.488t-60.416 17.408l-70.656 0q-45.056 0-60.928-19.968t2.56-68.096q18.432-46.08 43.008-108.544t52.224-132.608 57.344-143.872 57.344-144.384q65.536-164.864 137.216-343.04 7.168-17.408 18.432-31.744 10.24-11.264 27.136-21.504t42.496-10.24q26.624 0 43.52 10.752t28.16 24.064q12.288 15.36 19.456 33.792 72.704 180.224 138.24 345.088 27.648 70.656 57.344 143.872t56.832 142.336 51.2 129.536 41.472 104.448q14.336 34.816 4.096 62.464t-43.008 27.648zM616.448 634.88l-97.28-347.136-1.024 0-108.544 347.136 206.848 0z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>内容字体</div> <div class=font-dropdown-toolbar> <div class=font-current-toolbar onclick=toggleFontDropdownToolbar()> <span class=current-font-name-toolbar>东观体</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=font-options-toolbar> <div class=font-option-toolbar data-font=dongguanti onclick="selectFontToolbar('dongguanti')">上图东观体 </div> <div class=font-option-toolbar data-font=oppoti onclick="selectFontToolbar('oppoti')">OPPO Sans </div> <div class=font-option-toolbar data-font=jiangchengti onclick="selectFontToolbar('jiangchengti')"> 江城黑体</div> <div class=font-option-toolbar data-font=lxgw onclick="selectFontToolbar('lxgw')">霞鹜臻楷</div> </div> </div> </div> <div class="toolbar-item code-font-switcher"> <div class=toolbar-icon> <svg t=1753672111433 class="icon code-font-icon" viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg p-id=5148 width=20 height=20> <path d="M941.709938 0H82.290062A82.290062 82.290062 0 0 0 0 82.290062v859.419876A82.290062 82.290062 0 0 0 82.290062 1022.53923h859.419876A82.290062 82.290062 0 0 0 1022.53923 941.709938V82.290062A82.290062 82.290062 0 0 0 941.709938 0zM188.439372 553.631954a40.901569 40.901569 0 0 1-29.215406-70.116975L292.154066 351.558726 159.223966 218.628626a40.901569 40.901569 0 0 1 58.430813-57.94389l160.197813 162.145507a40.901569 40.901569 0 0 1 0 57.943889l-160.197813 160.684736a40.901569 40.901569 0 0 1-29.215407 12.173086z m443.587257 0H405.120304a40.901569 40.901569 0 0 1 0-82.290061H633.000476a40.901569 40.901569 0 0 1 0 82.290061z" fill=currentColor p-id=5149></path> </svg> </div> <div class=toolbar-label>代码字体</div> <div class=code-font-dropdown-toolbar> <div class=code-font-current-toolbar onclick=toggleCodeFontDropdownToolbar()> <span class=current-code-font-name-toolbar>DejaVu Sans Mono</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=code-font-options-toolbar> <div class=code-font-option-toolbar data-code-font=dejavu onclick="selectCodeFontToolbar('dejavu')"> DejaVu Sans Mono</div> <div class=code-font-option-toolbar data-code-font=google-sans-code onclick="selectCodeFontToolbar('google-sans-code')"> Google Sans Code</div> <div class=code-font-option-toolbar data-code-font=zsft onclick="selectCodeFontToolbar('zsft')"> JetBrains Mono</div> </div> </div> </div> <div class="toolbar-item theme-switcher" onclick=switchTheme()> <div class=toolbar-icon> <svg class=theme-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M876.572788 522.301623c-1.886977 12.375865-9.657964 30.331819-35.880185 45.48903-56.489572 32.697703-150.21828 83.990926-174.010149 96.958262-13.143345 24.431435-66.067718 122.221646-98.141204 178.503487-16.117073 28.124548-36.055171 34.041304-50.030463 34.041304-0.031722 0-0.031722 0-0.031722 0-14.613836 0-29.1806-6.460132-43.234687-19.218714-47.183626-42.643216-125.994576-117.105115-146.013515-136.083351-27.757181-4.732791-138.338718-23.743774-200.584388-35.752272-17.924231-3.533476-32.649608-14.07046-40.372499-29.084409-5.78782-11.256368-10.281157-30.05962 1.471514-55.658647 26.989701-59.047838 74.126254-157.557432 85.957721-182.196599-3.437286-27.117614-16.996093-135.060045-23.760147-198.905142-1.886977-17.460674 3.901867-35.096333 15.829524-48.351218 12.791327-14.278191 30.667463-21.48943 49.854455-19.426445 63.669088 6.332219 173.259042 19.426445 200.584388 22.705118 24.335245-11.879562 121.085776-58.936297 180.133613-86.34146 9.91379-4.573155 19.85828-6.92369 29.596062-6.92369 28.748764 0 52.172243 20.642133 58.328453 51.421136 12.599969 62.997799 30.93864 166.70272 35.639708 193.484689 18.851347 19.682271 91.953272 96.031147 135.060045 143.07151C872.72004 487.125473 879.307062 504.71406 876.572788 522.301623L876.572788 522.301623zM825.375755 499.085876C776.017604 445.314205 687.245791 352.977193 686.365748 352.017332c-2.942005-3.069919-4.956895-6.971785-5.676279-11.208273-0.207731-1.215688-22.193465-127.001509-36.551474-198.936865-0.799202-3.917216-4.285606-16.836457-16.196891-16.836457-3.453658 0-7.30743 1.006933-11.464099 2.942005-67.282383 31.179117-183.955662 88.180342-185.170327 88.771813-3.693112 1.790786-7.850805 2.558265-11.975752 2.01489-1.295506-0.224104-133.63765-16.165168-205.988468-23.424502-0.079818 0-0.207731 0-0.287549 0-7.30743 0-11.128455 2.89391-13.319353 5.40408-3.677762 4.124947-5.644557 9.91379-5.068436 15.110139 7.674796 72.623018 24.255427 202.934922 24.463158 204.325595 0.511653 4.109598-0.159636 8.266267-1.966795 11.960403-0.591471 1.215688-57.657164 120.04712-88.339977 187.201589-3.565199 7.754614-4.41352 14.214746-2.350534 18.131963 1.935072 3.725858 6.588045 5.820566 10.360975 6.53995 70.719668 13.718443 204.644867 36.519752 206.036563 36.727483 4.189416 0.671289 8.058536 2.686179 11.112082 5.580089 1.006933 0.87902 96.414887 91.281983 150.090367 139.889027 8.314363 7.563256 13.143345 8.106632 14.437827 8.106632 3.485381 0 8.314363-4.621251 12.727882-12.391215 36.343743-63.828724 100.011808-181.988868 100.636025-183.155437 1.983167-3.64604 5.004991-6.667863 8.650007-8.650007 1.134847-0.671289 114.418936-62.373583 178.6314-99.516528 8.698103-5.036713 14.278191-10.568706 14.94948-14.854313C834.681702 511.845481 831.49922 505.800811 825.375755 499.085876L825.375755 499.085876zM935.333076 935.670256c-4.157693 4.157693-9.689686 6.299473-15.141862 6.299473-5.548366 0-11.048637-2.142803-15.238053-6.299473l-171.915441-171.915441c-8.362458-8.394181-8.362458-21.98471 0-30.426987 8.394181-8.394181 21.98471-8.394181 30.379914 0l171.915441 171.915441C943.727257 913.684522 943.727257 927.275052 935.333076 935.670256L935.333076 935.670256z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>主题切换</div> </div> <div class="toolbar-item back-to-top" onclick=scrollToTop()> <div class=toolbar-icon> <svg class=back-to-top-icon viewbox="0 0 1024 1024" xmlns=http://www.w3.org/2000/svg> <path d="M882.688 624.128l-336.896-583.68c-15.872-27.136-54.784-27.136-70.656 0L138.24 624.128c-15.872 27.136 4.096 61.44 35.328 61.44H317.44c22.528 0 40.96 18.432 40.96 40.96v239.616c0 22.528 18.432 40.96 40.96 40.96h223.232c22.528 0 40.96-18.432 40.96-40.96v-239.616c0-22.528 18.432-40.96 40.96-40.96h143.872c30.208 0 50.176-34.304 34.304-61.44z"> </path> </svg> </div> <div class=toolbar-label>返回顶部</div> </div> </div> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.html class=md-tabs__link> 主页 </a> </li> <li class=md-tabs__item> <a href=../../timeline/timeline.html class=md-tabs__link> 网站时间线 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../languages/index.html class=md-tabs__link> 编程语言 </a> </li> <li class=md-tabs__item> <a href=../../data-structure-algo/index.html class=md-tabs__link> 数据结构与算法 </a> </li> <li class=md-tabs__item> <a href=../../Linux/index.html class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../front-end/index.html class=md-tabs__link> 前端 </a> </li> <li class=md-tabs__item> <a href=../../MySQL/index.html class=md-tabs__link> MySQL </a> </li> <li class=md-tabs__item> <a href=../../JavaEE/index.html class=md-tabs__link> JavaEE应用开发 </a> </li> <li class=md-tabs__item> <a href=../../software-test/index.html class=md-tabs__link> 软件测试 </a> </li> <li class=md-tabs__item> <a href=../../other/index.html class=md-tabs__link> 扩展知识 </a> </li> <li class=md-tabs__item> <a href=../../tooltips/index.html class=md-tabs__link> 工具帮助 </a> </li> <li class=md-tabs__item> <a href=../../test-encrypt/test-encrypt.html class=md-tabs__link> 测试加密功能 </a> </li> <li class=md-tabs__item> <a href=../../projects/index.html class=md-tabs__link> 项目 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title=柯懒的知识库 class="md-nav__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> 柯懒的知识库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.html class=md-nav__link> <span class=md-ellipsis> 主页 </span> </a> </li> <li class=md-nav__item> <a href=../../timeline/timeline.html class=md-nav__link> <span class=md-ellipsis> 网站时间线 </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <div class="md-nav__link md-nav__container"> <a href=../../languages/index.html class="md-nav__link "> <span class=md-ellipsis> 编程语言 </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> 编程语言 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../c-lang/index.html class=md-nav__link> <span class=md-ellipsis> C语言 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> C++ </span> </a> <label class="md-nav__link " for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> C++ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../c-to-cpp/c-to-cpp.html class=md-nav__link> <span class=md-ellipsis> C语言过渡C++基础知识 </span> </a> </li> <li class=md-nav__item> <a href=../class-obj/class-obj.html class=md-nav__link> <span class=md-ellipsis> C++类和对象 </span> </a> </li> <li class=md-nav__item> <a href=../member-func/member-func.html class=md-nav__link> <span class=md-ellipsis> C++默认成员函数 </span> </a> </li> <li class=md-nav__item> <a href=../class-obj-other/class-obj-other.html class=md-nav__link> <span class=md-ellipsis> C++类和对象相关内容 </span> </a> </li> <li class=md-nav__item> <a href=../memory/memory.html class=md-nav__link> <span class=md-ellipsis> C++内存管理 </span> </a> </li> <li class=md-nav__item> <a href=../template/template.html class=md-nav__link> <span class=md-ellipsis> C++模版 </span> </a> </li> <li class=md-nav__item> <a href=../stl-intro-string/stl-intro-string.html class=md-nav__link> <span class=md-ellipsis> C++STL简介与string类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-string/sim-string.html class=md-nav__link> <span class=md-ellipsis> string类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../vector/vector.html class=md-nav__link> <span class=md-ellipsis> vector类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-vector/sim-vector.html class=md-nav__link> <span class=md-ellipsis> vector类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../list/list.html class=md-nav__link> <span class=md-ellipsis> list类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-list/sim-list.html class=md-nav__link> <span class=md-ellipsis> list类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../stack/stack.html class=md-nav__link> <span class=md-ellipsis> stack类 </span> </a> </li> <li class=md-nav__item> <a href=../queue-priority-queue/queue-priority-queue.html class=md-nav__link> <span class=md-ellipsis> queue与priority_queue类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-stack-queue/sim-stack-queue.html class=md-nav__link> <span class=md-ellipsis> stack和queue模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../sim-priority-queue/sim-priority-queue.html class=md-nav__link> <span class=md-ellipsis> priority_queue模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../reverse-iterator/reverse-iterator.html class=md-nav__link> <span class=md-ellipsis> 反向迭代器设计 </span> </a> </li> <li class=md-nav__item> <a href=../extend/extend.html class=md-nav__link> <span class=md-ellipsis> C++继承 </span> </a> </li> <li class=md-nav__item> <a href=../polymorphic/polymorphic.html class=md-nav__link> <span class=md-ellipsis> C++多态 </span> </a> </li> <li class=md-nav__item> <a href=../set/set.html class=md-nav__link> <span class=md-ellipsis> set类 </span> </a> </li> <li class=md-nav__item> <a href=../map/map.html class=md-nav__link> <span class=md-ellipsis> map类 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> map和set类模拟实现 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=sim-map-set.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> map和set类模拟实现 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=本节目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 本节目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#mapset_1 class=md-nav__link> <span class=md-ellipsis> map和set模拟实现介绍 </span> </a> </li> <li class=md-nav__item> <a href=#mapset_2 class=md-nav__link> <span class=md-ellipsis> map和set类定义 </span> </a> </li> <li class=md-nav__item> <a href=#mapset_3 class=md-nav__link> <span class=md-ellipsis> map和set类的遍历比较规则设计 </span> </a> </li> <li class=md-nav__item> <a href=#mapset_4 class=md-nav__link> <span class=md-ellipsis> map和set中的常规迭代器设计 </span> </a> <nav class=md-nav aria-label=map和set中的常规迭代器设计> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 常规迭代器结构定义 </span> </a> </li> <li class=md-nav__item> <a href=#operator class=md-nav__link> <span class=md-ellipsis> operator*()设计 </span> </a> </li> <li class=md-nav__item> <a href=#operator- class=md-nav__link> <span class=md-ellipsis> operator-&gt;()设计 </span> </a> </li> <li class=md-nav__item> <a href=#operator_1 class=md-nav__link> <span class=md-ellipsis> operator!=()设计 </span> </a> </li> <li class=md-nav__item> <a href=#operator_2 class=md-nav__link> <span class=md-ellipsis> operator==()设计 </span> </a> </li> <li class=md-nav__item> <a href=#operator_3 class=md-nav__link> <span class=md-ellipsis> operator++()设计 </span> </a> </li> <li class=md-nav__item> <a href=#operator-_1 class=md-nav__link> <span class=md-ellipsis> operator--()设计 </span> </a> </li> <li class=md-nav__item> <a href=#mapset_5 class=md-nav__link> <span class=md-ellipsis> map和set常规迭代器封装 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#mapsetconst class=md-nav__link> <span class=md-ellipsis> map和set的const迭代器设计 </span> </a> </li> <li class=md-nav__item> <a href=#mapsetinsert class=md-nav__link> <span class=md-ellipsis> map和set的insert()函数 </span> </a> </li> <li class=md-nav__item> <a href=#mapoperator class=md-nav__link> <span class=md-ellipsis> map中的operator[] </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../sim-unordered-map-set/sim-unordered-map-set.html class=md-nav__link> <span class=md-ellipsis> unordered_map和unordered_set类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../bitset/bitset.html class=md-nav__link> <span class=md-ellipsis> bitset类 </span> </a> </li> <li class=md-nav__item> <a href=../initializer-list/initializer-list.html class=md-nav__link> <span class=md-ellipsis> initializer_list类 </span> </a> </li> <li class=md-nav__item> <a href=../new-in-cpp11/new-in-cpp11.html class=md-nav__link> <span class=md-ellipsis> C++ 11相关新特性 </span> </a> </li> <li class=md-nav__item> <a href=../exception/exception.html class=md-nav__link> <span class=md-ellipsis> C++异常 </span> </a> </li> <li class=md-nav__item> <a href=../smart-ptr/smart-ptr.html class=md-nav__link> <span class=md-ellipsis> C++智能指针 </span> </a> </li> <li class=md-nav__item> <a href=../special-class-design/special-class-design.html class=md-nav__link> <span class=md-ellipsis> 特殊类设计 </span> </a> </li> <li class=md-nav__item> <a href=../type-cast/type-cast.html class=md-nav__link> <span class=md-ellipsis> C++中的类型转换 </span> </a> </li> <li class=md-nav__item> <a href=../cppio/cppio.html class=md-nav__link> <span class=md-ellipsis> C++ IO流 </span> </a> </li> <li class=md-nav__item> <a href=../new-in-cpp17/new-in-cpp17.html class=md-nav__link> <span class=md-ellipsis> C++ 17相关新特性 </span> </a> </li> <li class=md-nav__item> <a href=../time-rand/time-rand.html class=md-nav__link> <span class=md-ellipsis> C++时间和随机数相关库 </span> </a> </li> <li class=md-nav__item> <a href=../multi-thread/multi-thread.html class=md-nav__link> <span class=md-ellipsis> C++并发支持库 </span> </a> </li> <li class=md-nav__item> <a href=../format/format.html class=md-nav__link> <span class=md-ellipsis> C++中的格式化字符串 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Java/index.html class=md-nav__link> <span class=md-ellipsis> Java </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../python/index.html class=md-nav__link> <span class=md-ellipsis> Python </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../data-structure-algo/index.html class=md-nav__link> <span class=md-ellipsis> 数据结构与算法 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Linux/index.html class=md-nav__link> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../front-end/index.html class=md-nav__link> <span class=md-ellipsis> 前端 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../MySQL/index.html class=md-nav__link> <span class=md-ellipsis> MySQL </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../JavaEE/index.html class=md-nav__link> <span class=md-ellipsis> JavaEE应用开发 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../software-test/index.html class=md-nav__link> <span class=md-ellipsis> 软件测试 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../other/index.html class=md-nav__link> <span class=md-ellipsis> 扩展知识 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tooltips/index.html class=md-nav__link> <span class=md-ellipsis> 工具帮助 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../test-encrypt/test-encrypt.html class=md-nav__link> <span class=md-ellipsis> 测试加密功能 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../projects/index.html class=md-nav__link> <span class=md-ellipsis> 项目 </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=本节目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 本节目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#mapset_1 class=md-nav__link> <span class=md-ellipsis> map和set模拟实现介绍 </span> </a> </li> <li class=md-nav__item> <a href=#mapset_2 class=md-nav__link> <span class=md-ellipsis> map和set类定义 </span> </a> </li> <li class=md-nav__item> <a href=#mapset_3 class=md-nav__link> <span class=md-ellipsis> map和set类的遍历比较规则设计 </span> </a> </li> <li class=md-nav__item> <a href=#mapset_4 class=md-nav__link> <span class=md-ellipsis> map和set中的常规迭代器设计 </span> </a> <nav class=md-nav aria-label=map和set中的常规迭代器设计> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 常规迭代器结构定义 </span> </a> </li> <li class=md-nav__item> <a href=#operator class=md-nav__link> <span class=md-ellipsis> operator*()设计 </span> </a> </li> <li class=md-nav__item> <a href=#operator- class=md-nav__link> <span class=md-ellipsis> operator-&gt;()设计 </span> </a> </li> <li class=md-nav__item> <a href=#operator_1 class=md-nav__link> <span class=md-ellipsis> operator!=()设计 </span> </a> </li> <li class=md-nav__item> <a href=#operator_2 class=md-nav__link> <span class=md-ellipsis> operator==()设计 </span> </a> </li> <li class=md-nav__item> <a href=#operator_3 class=md-nav__link> <span class=md-ellipsis> operator++()设计 </span> </a> </li> <li class=md-nav__item> <a href=#operator-_1 class=md-nav__link> <span class=md-ellipsis> operator--()设计 </span> </a> </li> <li class=md-nav__item> <a href=#mapset_5 class=md-nav__link> <span class=md-ellipsis> map和set常规迭代器封装 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#mapsetconst class=md-nav__link> <span class=md-ellipsis> map和set的const迭代器设计 </span> </a> </li> <li class=md-nav__item> <a href=#mapsetinsert class=md-nav__link> <span class=md-ellipsis> map和set的insert()函数 </span> </a> </li> <li class=md-nav__item> <a href=#mapoperator class=md-nav__link> <span class=md-ellipsis> map中的operator[] </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=mapset>map和set类模拟实现<a class=headerlink href=#mapset title="Permanent link">&para;</a></h1> <div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;"> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span> 约 2180 个字 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"/></svg></span> 445 行代码 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"/></svg></span> 5 张图片 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span> 预计阅读时间 13 分钟</p> </div> <h2 id=mapset_1>map和set模拟实现介绍<a class=headerlink href=#mapset_1 title="Permanent link">&para;</a></h2> <p>在C++的STL标准库中，map和set的底层均为红黑树，所以在前面的红黑树实现基础上模拟封装map和set类</p> <h2 id=mapset_2>map和set类定义<a class=headerlink href=#mapset_2 title="Permanent link">&para;</a></h2> <p>首先，通过查看SGI版本的STL中对map和set的设计可以看到不论是map还是set都在红黑树结构传递的是<code>Key</code>和<code>Value</code>，而不是额外设计两种版本的红黑树结构</p> <p><a class=glightbox href="23. map和set类模拟实现.assets\image.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="23. map和set类模拟实现.assets\image.png"></a></p> <p>观察红黑树结构的模版参数设计</p> <p><a class=glightbox href="23. map和set类模拟实现.assets\image1.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="23. map和set类模拟实现.assets\image1.png"></a></p> <p>实际上，SGI版本在设计map和set时，为了同时使一种红黑树可以实例化出两种容器，将set的Key多传递了一次，所以对于set来说，传递给红黑树的参数应该为：</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>Key</span><span class=o>&gt;</span><span class=w> </span><span class=c1>// 只展示部分</span>
</span><span id=__span-0-2><span class=k>class</span><span class=w> </span><span class=nc>rb_tree</span>
</span></code></pre></div></td></tr></table></div> <p>而对于map来说，传递的参数应该为：</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>pair</span><span class=o>&lt;</span><span class=k>const</span><span class=w> </span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=c1>// 只展示部分</span>
</span><span id=__span-1-2><span class=k>class</span><span class=w> </span><span class=nc>rb_tree</span>
</span></code></pre></div></td></tr></table></div> <p>对于<code>find</code>函数需要<code>Key</code>进行查找，但是不需要使用到<code>value</code>，所以在查找时可以直接使用第一个参数<code>Key</code>；而对于<code>insert</code>来说，插入的可能就不只是一个<code>Key</code>而是一个<code>Key_Value</code>，所以第一个<code>Key</code>参数给<code>find</code>函数使用，而第二个参数给<code>insert</code>使用</p> <p>为了模拟出SGI版本中的形式，可以将模拟实现的map和set类的模版参数定义为</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><span class=c1>// map</span>
</span><span id=__span-2-2><span class=k>template</span><span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=nc>Key</span><span class=p>,</span><span class=w> </span><span class=k>class</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
</span><span id=__span-2-3><span class=k>class</span><span class=w> </span><span class=nc>map</span>
</span><span id=__span-2-4><span class=p>{</span>
</span><span id=__span-2-5><span class=k>private</span><span class=o>:</span>
</span><span id=__span-2-6><span class=w>    </span><span class=n>RBTree</span><span class=o>&lt;</span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>pair</span><span class=o>&lt;</span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>rb_t</span><span class=p>;</span>
</span><span id=__span-2-7><span class=p>};</span>
</span><span id=__span-2-8>
</span><span id=__span-2-9><span class=c1>// set</span>
</span><span id=__span-2-10><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
</span><span id=__span-2-11><span class=k>class</span><span class=w> </span><span class=nc>set</span>
</span><span id=__span-2-12><span class=p>{</span>
</span><span id=__span-2-13><span class=k>private</span><span class=o>:</span>
</span><span id=__span-2-14><span class=w>    </span><span class=n>RBTree</span><span class=o>&lt;</span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=o>&gt;</span><span class=w> </span><span class=n>rb_t</span><span class=p>;</span>
</span><span id=__span-2-15><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p>对应的红黑树节点构造应该是用第二个模版参数类型的变量进行构造，因为第一个模版参数的变量用于<code>find</code>函数，此时对于set来说，红黑树的节点的值类型就是<code>Key</code>，而对于map来说就是<code>pair&lt;key, T&gt;</code>类型，修改红黑树节点结构和红黑树结构如下：</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-3-1><span class=c1>// 定义树每一个节点结构</span>
</span><span id=__span-3-2><span class=k>template</span><span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=nc>T</span><span class=o>&gt;</span>
</span><span id=__span-3-3><span class=k>struct</span><span class=w> </span><span class=nc>RBTreeNode</span>
</span><span id=__span-3-4><span class=p>{</span>
</span><span id=__span-3-5><span class=w>    </span><span class=n>T</span><span class=w> </span><span class=n>_data</span><span class=p>;</span>
</span><span id=__span-3-6><span class=w>    </span><span class=c1>// 左子树指针</span>
</span><span id=__span-3-7><span class=w>    </span><span class=n>RBTreeNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*</span><span class=w> </span><span class=n>_left</span><span class=p>;</span>
</span><span id=__span-3-8><span class=w>    </span><span class=c1>// 右子树指针</span>
</span><span id=__span-3-9><span class=w>    </span><span class=n>RBTreeNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*</span><span class=w> </span><span class=n>_right</span><span class=p>;</span>
</span><span id=__span-3-10><span class=w>    </span><span class=c1>// 父亲节点指针</span>
</span><span id=__span-3-11><span class=w>    </span><span class=n>RBTreeNode</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;*</span><span class=w> </span><span class=n>_parent</span><span class=p>;</span>
</span><span id=__span-3-12><span class=w>    </span><span class=n>Color</span><span class=w> </span><span class=n>_col</span><span class=p>;</span>
</span><span id=__span-3-13>
</span><span id=__span-3-14><span class=w>    </span><span class=c1>//单个节点构造函数</span>
</span><span id=__span-3-15><span class=w>    </span><span class=n>RBTreeNode</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>T</span><span class=o>&amp;</span><span class=w> </span><span class=n>data</span><span class=p>)</span>
</span><span id=__span-3-16><span class=w>        </span><span class=o>:</span><span class=w> </span><span class=n>_data</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span><span id=__span-3-17><span class=w>        </span><span class=p>,</span><span class=w> </span><span class=n>_left</span><span class=p>(</span><span class=k>nullptr</span><span class=p>)</span>
</span><span id=__span-3-18><span class=w>        </span><span class=p>,</span><span class=w> </span><span class=n>_right</span><span class=p>(</span><span class=k>nullptr</span><span class=p>)</span>
</span><span id=__span-3-19><span class=w>        </span><span class=p>,</span><span class=w> </span><span class=n>_parent</span><span class=p>(</span><span class=k>nullptr</span><span class=p>)</span>
</span><span id=__span-3-20><span class=w>        </span><span class=p>,</span><span class=w> </span><span class=n>_col</span><span class=p>(</span><span class=n>Red</span><span class=p>)</span>
</span><span id=__span-3-21><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-3-22><span class=p>};</span>
</span><span id=__span-3-23>
</span><span id=__span-3-24><span class=c1>// 红黑树结构</span>
</span><span id=__span-3-25><span class=k>template</span><span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=nc>T</span><span class=p>,</span><span class=w> </span><span class=k>class</span><span class=w> </span><span class=nc>V</span><span class=o>&gt;</span>
</span><span id=__span-3-26><span class=k>class</span><span class=w> </span><span class=nc>RBTree</span>
</span><span id=__span-3-27><span class=p>{</span>
</span><span id=__span-3-28><span class=w>    </span><span class=c1>// 定义节点</span>
</span><span id=__span-3-29><span class=w>    </span><span class=k>typedef</span><span class=w> </span><span class=n>RBTreeNode</span><span class=o>&lt;</span><span class=n>V</span><span class=o>&gt;</span><span class=w> </span><span class=n>node</span><span class=p>;</span><span class=c1>// 利用第二个模版参数进行构造</span>
</span><span id=__span-3-30><span class=k>private</span><span class=o>:</span>
</span><span id=__span-3-31><span class=w>    </span><span class=c1>// 根节点</span>
</span><span id=__span-3-32><span class=w>    </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>_root</span><span class=p>;</span>
</span><span id=__span-3-33><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <h2 id=mapset_3>map和set类的遍历比较规则设计<a class=headerlink href=#mapset_3 title="Permanent link">&para;</a></h2> <p>对于set的<code>insert</code>函数来说，只需要比较<code>key</code>即可，如果使用模版参数中的<code>T</code>类型变量<code>data</code>直接进行比较，此时没有任何问题，但是如果是map，则此时会对<code>pair</code>进行比较，而<code>pair</code>本身支持的比较是先比较<code>first</code>，再比较<code>second</code>，这与本身二叉搜索树的遍历比较规则不符，所以此时需要额外处理</p> <p>观察SGI版本中的设计，存在一个<code>KeyOfValue</code>的一个模版参数，该参数的作用是处理遍历比较规则问题</p> <p><a class=glightbox href="23. map和set类模拟实现.assets\image2.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="23. map和set类模拟实现.assets\image2.png"></a></p> <p>因为在红黑树结构中本身并不知道传递的到底是什么类型，但是对于set和map来说知道，所以可以通过set和map传递给红黑树结构，为了使比较方式统一，可以在set中定义一个仿函数，该仿函数返回一个<code>Key</code>类型的值，对于map来说，返回一个<code>pair</code>的<code>first</code>值</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-4-1><span class=c1>// set</span>
</span><span id=__span-4-2><span class=c1>// 返回set的key</span>
</span><span id=__span-4-3><span class=k>struct</span><span class=w> </span><span class=nc>setKeyOfT</span>
</span><span id=__span-4-4><span class=p>{</span>
</span><span id=__span-4-5><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=n>T</span><span class=o>&amp;</span><span class=w> </span><span class=nf>operator</span><span class=p>()(</span><span class=k>const</span><span class=w> </span><span class=n>T</span><span class=o>&amp;</span><span class=w> </span><span class=n>key</span><span class=p>)</span>
</span><span id=__span-4-6><span class=w>    </span><span class=p>{</span>
</span><span id=__span-4-7><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>key</span><span class=p>;</span>
</span><span id=__span-4-8><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-9><span class=p>};</span>
</span><span id=__span-4-10>
</span><span id=__span-4-11><span class=c1>// map</span>
</span><span id=__span-4-12><span class=c1>// 返回map的pair的first</span>
</span><span id=__span-4-13><span class=k>struct</span><span class=w> </span><span class=nc>mapKeyOfV</span>
</span><span id=__span-4-14><span class=p>{</span>
</span><span id=__span-4-15><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=n>Key</span><span class=o>&amp;</span><span class=w> </span><span class=nf>operator</span><span class=p>()(</span><span class=k>const</span><span class=w> </span><span class=n>pair</span><span class=o>&lt;</span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=o>&gt;&amp;</span><span class=w> </span><span class=n>kv</span><span class=p>)</span>
</span><span id=__span-4-16><span class=w>    </span><span class=p>{</span>
</span><span id=__span-4-17><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>kv</span><span class=p>.</span><span class=n>first</span><span class=p>;</span>
</span><span id=__span-4-18><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-19><span class=p>};</span>
</span><span id=__span-4-20>
</span><span id=__span-4-21><span class=c1>// 通过模版参数传递</span>
</span><span id=__span-4-22><span class=c1>// set</span>
</span><span id=__span-4-23><span class=n>RBTree</span><span class=o>&lt;</span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>setKeyOfT</span><span class=o>&gt;</span><span class=w> </span><span class=n>rb_t</span><span class=p>;</span>
</span><span id=__span-4-24><span class=c1>// map</span>
</span><span id=__span-4-25><span class=n>RBTree</span><span class=o>&lt;</span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>pair</span><span class=o>&lt;</span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span><span class=w> </span><span class=n>mapKeyOfV</span><span class=o>&gt;</span><span class=w> </span><span class=n>rb_t</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>因为传递的两个模版参数是一个仿函数，在<code>insert</code>函数中使用该类型创建一个对象，调用对应重载的函数获取其返回值进行比较</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-5-1><span class=c1>// 创建仿函数对象获取内容</span>
</span><span id=__span-5-2><span class=n>KeyOfV</span><span class=w> </span><span class=n>kov</span><span class=p>;</span>
</span><span id=__span-5-3>
</span><span id=__span-5-4><span class=c1>// 根据KeyOfV类型对应调用对应的重载函数</span>
</span><span id=__span-5-5><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>kov</span><span class=p>(</span><span class=n>data</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>kov</span><span class=p>(</span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_data</span><span class=p>))</span>
</span><span id=__span-5-6><span class=p>{</span>
</span><span id=__span-5-7><span class=w>    </span><span class=c1>// 大于根节点数据，插入在右子树，走到左子树的空位置</span>
</span><span id=__span-5-8><span class=w>    </span><span class=c1>// ...</span>
</span><span id=__span-5-9><span class=p>}</span>
</span><span id=__span-5-10><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>kov</span><span class=p>(</span><span class=n>data</span><span class=p>)</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>kov</span><span class=p>(</span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_data</span><span class=p>))</span>
</span><span id=__span-5-11><span class=p>{</span>
</span><span id=__span-5-12><span class=w>    </span><span class=c1>// 小于根节点数据，插入在左子树，走到右子树的空位置</span>
</span><span id=__span-5-13><span class=w>    </span><span class=c1>// ...</span>
</span><span id=__span-5-14><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=mapset_4>map和set中的常规迭代器设计<a class=headerlink href=#mapset_4 title="Permanent link">&para;</a></h2> <h3 id=_1>常规迭代器结构定义<a class=headerlink href=#_1 title="Permanent link">&para;</a></h3> <p>因为map和set底层都是红黑树，所以直接设计红黑树的迭代器即可</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-6-1><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=nc>V</span><span class=o>&gt;</span>
</span><span id=__span-6-2><span class=k>struct</span><span class=w> </span><span class=nc>RBTree_iterator</span>
</span><span id=__span-6-3><span class=p>{</span>
</span><span id=__span-6-4><span class=w>    </span><span class=k>typedef</span><span class=w> </span><span class=n>RBTreeNode</span><span class=o>&lt;</span><span class=n>V</span><span class=o>&gt;</span><span class=w> </span><span class=n>node</span><span class=p>;</span>
</span><span id=__span-6-5>
</span><span id=__span-6-6><span class=w>    </span><span class=c1>// 构造迭代器</span>
</span><span id=__span-6-7><span class=w>    </span><span class=n>RBTree_iterator</span><span class=p>(</span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>node</span><span class=p>)</span>
</span><span id=__span-6-8><span class=w>        </span><span class=o>:</span><span class=w> </span><span class=n>_node</span><span class=p>(</span><span class=n>node</span><span class=p>)</span>
</span><span id=__span-6-9><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-6-10>
</span><span id=__span-6-11><span class=w>    </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>_node</span><span class=p>;</span>
</span><span id=__span-6-12><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <h3 id=operator><code>operator*()</code>设计<a class=headerlink href=#operator title="Permanent link">&para;</a></h3> <p>该函数直接返回对应节点的数据即可，所以可以设计为：</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1><span class=n>V</span><span class=o>&amp;</span><span class=w> </span><span class=k>operator</span><span class=o>*</span><span class=p>()</span>
</span><span id=__span-7-2><span class=p>{</span>
</span><span id=__span-7-3><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>_node</span><span class=o>-&gt;</span><span class=n>_data</span><span class=p>;</span>
</span><span id=__span-7-4><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h3 id=operator-><code>operator-&gt;()</code>设计<a class=headerlink href=#operator- title="Permanent link">&para;</a></h3> <p>该函数返回对应节点的地址即可，可以设计为：</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-8-1><span class=n>V</span><span class=o>*</span><span class=w> </span><span class=k>operator</span><span class=o>-&gt;</span><span class=p>()</span>
</span><span id=__span-8-2><span class=p>{</span>
</span><span id=__span-8-3><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=o>&amp;</span><span class=n>_node</span><span class=o>-&gt;</span><span class=n>_data</span><span class=p>;</span>
</span><span id=__span-8-4><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h3 id=operator_1><code>operator!=()</code>设计<a class=headerlink href=#operator_1 title="Permanent link">&para;</a></h3> <p>该函数用于判断两个节点是否相等，只需要判断两个节点的指针位置是否相等即可</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-9-1><span class=kt>bool</span><span class=w> </span><span class=k>operator</span><span class=o>!=</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>RBTree_iterator</span><span class=o>&amp;</span><span class=w> </span><span class=n>node</span><span class=p>)</span>
</span><span id=__span-9-2><span class=p>{</span>
</span><span id=__span-9-3><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>_node</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>node</span><span class=p>.</span><span class=n>_node</span><span class=p>;</span>
</span><span id=__span-9-4><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h3 id=operator_2><code>operator==()</code>设计<a class=headerlink href=#operator_2 title="Permanent link">&para;</a></h3> <p>该函数用于判断两个节点是否相等，只需要判断两个节点的指针位置是否相等即可</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-10-1><span class=kt>bool</span><span class=w> </span><span class=k>operator</span><span class=o>==</span><span class=w> </span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>Self</span><span class=o>&amp;</span><span class=w> </span><span class=n>s</span><span class=p>)</span>
</span><span id=__span-10-2><span class=p>{</span>
</span><span id=__span-10-3><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>_node</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=n>_node</span><span class=p>;</span>
</span><span id=__span-10-4><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h3 id=operator_3><code>operator++()</code>设计<a class=headerlink href=#operator_3 title="Permanent link">&para;</a></h3> <p>该函数用于进行迭代器更新，但是此处需要使用循环进行解决，首先因为二叉搜索树的遍历是中序遍历，所以先走左子树，并且第一个数值是左子树的最左节点，所以可以通过循环先获取到最左节点，该最左节点作为红黑树迭代器的<code>begin()</code>位置</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-11-1><span class=n>Iterator</span><span class=w> </span><span class=nf>Begin</span><span class=p>()</span>
</span><span id=__span-11-2><span class=p>{</span>
</span><span id=__span-11-3><span class=w>    </span><span class=c1>// 找到最左节点</span>
</span><span id=__span-11-4><span class=w>    </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>leftMost</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_root</span><span class=p>;</span>
</span><span id=__span-11-5><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>leftMost</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>leftMost</span><span class=o>-&gt;</span><span class=n>_left</span><span class=p>)</span>
</span><span id=__span-11-6><span class=w>    </span><span class=p>{</span>
</span><span id=__span-11-7><span class=w>        </span><span class=n>leftMost</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>leftMost</span><span class=o>-&gt;</span><span class=n>_left</span><span class=p>;</span>
</span><span id=__span-11-8><span class=w>    </span><span class=p>}</span>
</span><span id=__span-11-9>
</span><span id=__span-11-10><span class=w>    </span><span class=c1>// 返回最左节点作为起始位置</span>
</span><span id=__span-11-11><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>Iterator</span><span class=p>(</span><span class=n>leftMost</span><span class=p>);</span>
</span><span id=__span-11-12><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>对于<code>end()</code>来说，可以返回一个<code>nullptr</code>，因为是中序遍历，当根为空时最左节点也为空，当根不为空时，走到根节点的父亲也为空</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-12-1><span class=n>Iterator</span><span class=w> </span><span class=nf>End</span><span class=p>()</span>
</span><span id=__span-12-2><span class=p>{</span>
</span><span id=__span-12-3><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>Iterator</span><span class=p>(</span><span class=k>nullptr</span><span class=p>);</span>
</span><span id=__span-12-4><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>接下来设计<code>operator++()</code>函数，因为中序遍历的顺序是左子树-&gt;根-&gt;右子树，所以走到某一个节点时，将该节点及其子树作为一个部分整体，因为从当前节点位置开始遍历时不需要访问该节点前面的节点，所以可以不用考虑当前节点的左子树，接着考虑右子树，当右子树不为空时，找到右子树的根节点，走该子树的左子树找到最左节点作为下一个节点；</p> <p><a class=glightbox href="23. map和set类模拟实现.assets\image3.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="23. map和set类模拟实现.assets\image3.png" style=zoom:50%;></a></p> <p>访问完最左节点后，下一个节点是当前子树的根节点，以当前节点为根节点，因为找到的是最左节点，所以其左子树一定为空，但是其右子树可能不一定，如果右子树依旧不为空，则继续上面的步骤，如果右子树此时为空，说明当前子树已经访问完毕。因为右子树不为空的时候进入了右子树，根据中序顺序左子树-&gt;根-&gt;右子树，说明当前右子树的根节点已经遍历到，接下来应该要取到当前子树的根节点的父亲节点，如果当前节点依旧是新父亲节点的右孩子，则继续向上更新父亲节点，直到遇到父亲节点为空结束，否则按照顺序接下来遍历根，再右子树，如此往复</p> <p><a class=glightbox href="23. map和set类模拟实现.assets\image4.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="23. map和set类模拟实现.assets\image4.png" style=zoom:50%;></a></p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-13-1><span class=c1>// operator++()</span>
</span><span id=__span-13-2><span class=n>RBTree_iterator</span><span class=w> </span><span class=k>operator</span><span class=o>++</span><span class=p>()</span>
</span><span id=__span-13-3><span class=p>{</span>
</span><span id=__span-13-4><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>_node</span><span class=o>-&gt;</span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-13-5><span class=w>    </span><span class=p>{</span>
</span><span id=__span-13-6><span class=w>        </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>leftMost</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_node</span><span class=o>-&gt;</span><span class=n>_right</span><span class=p>;</span>
</span><span id=__span-13-7><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>leftMost</span><span class=o>-&gt;</span><span class=n>_left</span><span class=p>)</span>
</span><span id=__span-13-8><span class=w>        </span><span class=p>{</span>
</span><span id=__span-13-9><span class=w>            </span><span class=n>leftMost</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>leftMost</span><span class=o>-&gt;</span><span class=n>_left</span><span class=p>;</span>
</span><span id=__span-13-10><span class=w>        </span><span class=p>}</span>
</span><span id=__span-13-11>
</span><span id=__span-13-12><span class=w>        </span><span class=c1>// 找到后走到最左节点的位置</span>
</span><span id=__span-13-13><span class=w>        </span><span class=n>_node</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>leftMost</span><span class=p>;</span>
</span><span id=__span-13-14><span class=w>    </span><span class=p>}</span>
</span><span id=__span-13-15><span class=w>    </span><span class=k>else</span>
</span><span id=__span-13-16><span class=w>    </span><span class=p>{</span>
</span><span id=__span-13-17><span class=w>        </span><span class=c1>// 初始位置为迭代器位置</span>
</span><span id=__span-13-18><span class=w>        </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_node</span><span class=p>;</span>
</span><span id=__span-13-19><span class=w>        </span><span class=c1>// 记录当前节点parent的位置</span>
</span><span id=__span-13-20><span class=w>        </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_parent</span><span class=p>;</span>
</span><span id=__span-13-21><span class=w>        </span><span class=c1>// 右子树结束则结束</span>
</span><span id=__span-13-22><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>parent</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>cur</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_right</span><span class=p>)</span>
</span><span id=__span-13-23><span class=w>        </span><span class=p>{</span>
</span><span id=__span-13-24><span class=w>            </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=p>;</span>
</span><span id=__span-13-25><span class=w>            </span><span class=n>parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_parent</span><span class=p>;</span>
</span><span id=__span-13-26><span class=w>        </span><span class=p>}</span>
</span><span id=__span-13-27>
</span><span id=__span-13-28><span class=w>        </span><span class=n>_node</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=p>;</span>
</span><span id=__span-13-29><span class=w>    </span><span class=p>}</span>
</span><span id=__span-13-30>
</span><span id=__span-13-31><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=o>*</span><span class=k>this</span><span class=p>;</span>
</span><span id=__span-13-32><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h3 id=operator-_1><code>operator--()</code>设计<a class=headerlink href=#operator-_1 title="Permanent link">&para;</a></h3> <p>设计<code>operator--()</code>的思路与<code>operator++()</code>思路基本相反，首先因为正向遍历的中序顺序是左子树-&gt;根-&gt;右子树，所以反向遍历的中序顺序是右子树-&gt;根-&gt;左子树，以当前节点为根节点看待当前子树时，其右子树的值就可以忽略，因为已经越过了右子树，所以反向遍历主要看左子树是否为空，如果左子树不为空，则找其最右节点；如果左子树为空，则代表当前子树已经结束，找到该子树的父亲，如果该子树依旧是其父亲的左子树，那么继续找到父亲的父亲，如此往复直到遇到空。但是需要注意的是，如果当前节点为<code>end()</code>的位置，那么需要进行一次特殊处理，将当前节点更新为整棵树的最右节点</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>此处涉及到遍历整棵树，所以需要传递整棵树的根节点，需要对迭代器进行改动，新增一个<code>_root</code>成员，在<code>Begin()</code>和<code>End()</code>处传递整棵树的根</p> </div> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-14-1><span class=c1>// 迭代器修改</span>
</span><span id=__span-14-2><span class=c1>// 迭代器</span>
</span><span id=__span-14-3><span class=n>iterator</span><span class=w> </span><span class=nf>Begin</span><span class=p>()</span>
</span><span id=__span-14-4><span class=p>{</span>
</span><span id=__span-14-5><span class=w>    </span><span class=c1>// 找到最左节点</span>
</span><span id=__span-14-6><span class=w>    </span><span class=c1>// ...</span>
</span><span id=__span-14-7>
</span><span id=__span-14-8><span class=w>    </span><span class=c1>// 返回最左节点作为起始位置以及根节点</span>
</span><span id=__span-14-9><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>iterator</span><span class=p>(</span><span class=n>leftMost</span><span class=p>,</span><span class=w> </span><span class=n>_root</span><span class=p>);</span>
</span><span id=__span-14-10><span class=p>}</span>
</span><span id=__span-14-11>
</span><span id=__span-14-12><span class=n>iterator</span><span class=w> </span><span class=nf>End</span><span class=p>()</span>
</span><span id=__span-14-13><span class=p>{</span>
</span><span id=__span-14-14><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>iterator</span><span class=p>(</span><span class=k>nullptr</span><span class=p>,</span><span class=w> </span><span class=n>_root</span><span class=p>);</span>
</span><span id=__span-14-15><span class=p>}</span>
</span><span id=__span-14-16>
</span><span id=__span-14-17><span class=c1>// operator--()</span>
</span><span id=__span-14-18><span class=n>RBTree_iterator</span><span class=w> </span><span class=k>operator</span><span class=o>--</span><span class=p>()</span>
</span><span id=__span-14-19><span class=p>{</span>
</span><span id=__span-14-20><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>_node</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=k>nullptr</span><span class=p>)</span><span class=c1>// 特殊处理end()</span>
</span><span id=__span-14-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-14-22><span class=w>        </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>rightMost</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_root</span><span class=p>;</span>
</span><span id=__span-14-23><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>rightMost</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>rightMost</span><span class=o>-&gt;</span><span class=n>_right</span><span class=p>)</span>
</span><span id=__span-14-24><span class=w>        </span><span class=p>{</span>
</span><span id=__span-14-25><span class=w>            </span><span class=n>rightMost</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>rightMost</span><span class=o>-&gt;</span><span class=n>_right</span><span class=p>;</span>
</span><span id=__span-14-26><span class=w>        </span><span class=p>}</span>
</span><span id=__span-14-27>
</span><span id=__span-14-28><span class=w>        </span><span class=n>_node</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>rightMost</span><span class=p>;</span>
</span><span id=__span-14-29><span class=w>    </span><span class=p>}</span>
</span><span id=__span-14-30><span class=w>    </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>_node</span><span class=o>-&gt;</span><span class=n>_left</span><span class=p>)</span>
</span><span id=__span-14-31><span class=w>    </span><span class=p>{</span>
</span><span id=__span-14-32><span class=w>        </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>rightMost</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_node</span><span class=o>-&gt;</span><span class=n>_left</span><span class=p>;</span>
</span><span id=__span-14-33><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>rightMost</span><span class=o>-&gt;</span><span class=n>_right</span><span class=p>)</span>
</span><span id=__span-14-34><span class=w>        </span><span class=p>{</span>
</span><span id=__span-14-35><span class=w>            </span><span class=n>rightMost</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>rightMost</span><span class=o>-&gt;</span><span class=n>_right</span><span class=p>;</span>
</span><span id=__span-14-36><span class=w>        </span><span class=p>}</span>
</span><span id=__span-14-37>
</span><span id=__span-14-38><span class=w>        </span><span class=n>_node</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>rightMost</span><span class=p>;</span>
</span><span id=__span-14-39><span class=w>    </span><span class=p>}</span>
</span><span id=__span-14-40><span class=w>    </span><span class=k>else</span>
</span><span id=__span-14-41><span class=w>    </span><span class=p>{</span>
</span><span id=__span-14-42><span class=w>        </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_node</span><span class=p>;</span>
</span><span id=__span-14-43><span class=w>        </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_parent</span><span class=p>;</span>
</span><span id=__span-14-44><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>parent</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>cur</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_left</span><span class=p>)</span>
</span><span id=__span-14-45><span class=w>        </span><span class=p>{</span>
</span><span id=__span-14-46><span class=w>            </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=p>;</span>
</span><span id=__span-14-47><span class=w>            </span><span class=n>parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_parent</span><span class=p>;</span>
</span><span id=__span-14-48><span class=w>        </span><span class=p>}</span>
</span><span id=__span-14-49>
</span><span id=__span-14-50><span class=w>        </span><span class=n>_node</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=p>;</span>
</span><span id=__span-14-51><span class=w>    </span><span class=p>}</span>
</span><span id=__span-14-52>
</span><span id=__span-14-53><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=o>*</span><span class=k>this</span><span class=p>;</span>
</span><span id=__span-14-54><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h3 id=mapset_5>map和set常规迭代器封装<a class=headerlink href=#mapset_5 title="Permanent link">&para;</a></h3> <p>因为红黑树中实现了<code>begin()</code>和<code>end()</code>，所以对于map和set来说，直接封装即可</p> <p>首先在红黑树中声明迭代器</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-15-1><span class=k>typedef</span><span class=w> </span><span class=n>RBTree_iterator</span><span class=o>&lt;</span><span class=n>V</span><span class=o>&gt;</span><span class=w> </span><span class=n>Iterator</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>接着在map和set中声明迭代器</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-16-1><span class=c1>// set</span>
</span><span id=__span-16-2><span class=k>typedef</span><span class=w> </span><span class=k>typename</span><span class=w> </span><span class=nc>RBTree</span><span class=o>&lt;</span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>setKeyOfT</span><span class=o>&gt;::</span><span class=n>Iterator</span><span class=w> </span><span class=n>iterator</span><span class=p>;</span>
</span><span id=__span-16-3>
</span><span id=__span-16-4><span class=c1>// map</span>
</span><span id=__span-16-5><span class=k>typedef</span><span class=w> </span><span class=k>typename</span><span class=w> </span><span class=nc>RBTree</span><span class=o>&lt;</span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>pair</span><span class=o>&lt;</span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span><span class=w> </span><span class=n>mapKeyOfV</span><span class=o>&gt;::</span><span class=n>Iterator</span><span class=w> </span><span class=n>iterator</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <p>最后封装红黑树中的迭代器</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-17-1><span class=c1>// map和set迭代器</span>
</span><span id=__span-17-2><span class=n>iterator</span><span class=w> </span><span class=nf>begin</span><span class=p>()</span>
</span><span id=__span-17-3><span class=p>{</span>
</span><span id=__span-17-4><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>rb_t</span><span class=p>.</span><span class=n>Begin</span><span class=p>();</span><span class=c1>// 使用红黑树的迭代器</span>
</span><span id=__span-17-5><span class=p>}</span>
</span><span id=__span-17-6>
</span><span id=__span-17-7><span class=n>iterator</span><span class=w> </span><span class=nf>end</span><span class=p>()</span>
</span><span id=__span-17-8><span class=p>{</span>
</span><span id=__span-17-9><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>rb_t</span><span class=p>.</span><span class=n>End</span><span class=p>();</span>
</span><span id=__span-17-10><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=mapsetconst>map和set的<code>const</code>迭代器设计<a class=headerlink href=#mapsetconst title="Permanent link">&para;</a></h2> <p>在前面设计常规迭代器时，对于set来说不能支持修改，所以常规迭代器也需要<code>const</code>进行修饰，但是不考虑对常规迭代器直接使用<code>const</code>版本的迭代器，而是在传递模版参数时直接使用<code>const</code>版本的参数</p> <p>首先将引用和指针返回类型定义为迭代器模版参数<code>Ref</code>和<code>Ptr</code>，便于控制非<code>const</code>和<code>const</code>版本</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-18-1><span class=k>template</span><span class=w> </span><span class=o>&lt;</span><span class=k>class</span><span class=w> </span><span class=nc>V</span><span class=p>,</span><span class=w> </span><span class=k>class</span><span class=w> </span><span class=nc>Ptr</span><span class=p>,</span><span class=w> </span><span class=k>class</span><span class=w> </span><span class=nc>Ref</span><span class=o>&gt;</span>
</span><span id=__span-18-2><span class=k>struct</span><span class=w> </span><span class=nc>RBTree_iterator</span>
</span></code></pre></div></td></tr></table></div> <p>在红黑树的结构中定义迭代器，传递引用和指针</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-19-1><span class=k>typedef</span><span class=w> </span><span class=n>RBTree_iterator</span><span class=o>&lt;</span><span class=n>V</span><span class=p>,</span><span class=w> </span><span class=n>V</span><span class=o>*</span><span class=p>,</span><span class=w> </span><span class=n>V</span><span class=o>&amp;&gt;</span><span class=w> </span><span class=n>Iterator</span><span class=p>;</span><span class=c1>// 常规迭代器</span>
</span><span id=__span-19-2>
</span><span id=__span-19-3><span class=k>typedef</span><span class=w> </span><span class=n>RBTree_iterator</span><span class=o>&lt;</span><span class=n>V</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>V</span><span class=o>*</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>V</span><span class=o>&amp;&gt;</span><span class=w> </span><span class=n>constIterator</span><span class=p>;</span><span class=c1>// const迭代器</span>
</span></code></pre></div></td></tr></table></div> <p>设计<code>const</code>的<code>Begin()</code>和<code>End()</code></p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-20-1><span class=c1>// const迭代器</span>
</span><span id=__span-20-2><span class=n>constIterator</span><span class=w> </span><span class=nf>Begin</span><span class=p>()</span><span class=w> </span><span class=k>const</span>
</span><span id=__span-20-3><span class=p>{</span>
</span><span id=__span-20-4><span class=w>    </span><span class=c1>// 找到最左节点</span>
</span><span id=__span-20-5><span class=w>    </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>leftMost</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_root</span><span class=p>;</span>
</span><span id=__span-20-6><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>leftMost</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>leftMost</span><span class=o>-&gt;</span><span class=n>_left</span><span class=p>)</span>
</span><span id=__span-20-7><span class=w>    </span><span class=p>{</span>
</span><span id=__span-20-8><span class=w>        </span><span class=n>leftMost</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>leftMost</span><span class=o>-&gt;</span><span class=n>_left</span><span class=p>;</span>
</span><span id=__span-20-9><span class=w>    </span><span class=p>}</span>
</span><span id=__span-20-10>
</span><span id=__span-20-11><span class=w>    </span><span class=c1>// 返回最左节点作为起始位置</span>
</span><span id=__span-20-12><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>Iterator</span><span class=p>(</span><span class=n>leftMost</span><span class=p>,</span><span class=w> </span><span class=n>_root</span><span class=p>);</span>
</span><span id=__span-20-13><span class=p>}</span>
</span><span id=__span-20-14>
</span><span id=__span-20-15><span class=n>constIterator</span><span class=w> </span><span class=nf>End</span><span class=p>()</span><span class=w> </span><span class=k>const</span>
</span><span id=__span-20-16><span class=p>{</span>
</span><span id=__span-20-17><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>Iterator</span><span class=p>(</span><span class=k>nullptr</span><span class=p>,</span><span class=w> </span><span class=n>_root</span><span class=p>);</span>
</span><span id=__span-20-18><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>在map和set中封装</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-21-1><span class=c1>// set中声明const迭代器</span>
</span><span id=__span-21-2><span class=k>typedef</span><span class=w> </span><span class=k>typename</span><span class=w> </span><span class=nc>RBTree</span><span class=o>&lt;</span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>setKeyOfT</span><span class=o>&gt;::</span><span class=n>constIterator</span><span class=w> </span><span class=n>const_iterator</span><span class=p>;</span>
</span><span id=__span-21-3><span class=c1>// map中声明const迭代器</span>
</span><span id=__span-21-4><span class=k>typedef</span><span class=w> </span><span class=k>typename</span><span class=w> </span><span class=nc>RBTree</span><span class=o>&lt;</span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>pair</span><span class=o>&lt;</span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span><span class=w> </span><span class=n>mapKeyOfV</span><span class=o>&gt;::</span><span class=n>constIterator</span><span class=w> </span><span class=n>const_iterator</span><span class=p>;</span>
</span><span id=__span-21-5>
</span><span id=__span-21-6><span class=c1>// map和set中的const迭代器</span>
</span><span id=__span-21-7><span class=n>const_iterator</span><span class=w> </span><span class=nf>begin</span><span class=p>()</span><span class=w> </span><span class=k>const</span>
</span><span id=__span-21-8><span class=p>{</span>
</span><span id=__span-21-9><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>rb_t</span><span class=p>.</span><span class=n>Begin</span><span class=p>();</span>
</span><span id=__span-21-10><span class=p>}</span>
</span><span id=__span-21-11>
</span><span id=__span-21-12><span class=n>const_iterator</span><span class=w> </span><span class=nf>end</span><span class=p>()</span><span class=w> </span><span class=k>const</span>
</span><span id=__span-21-13><span class=p>{</span>
</span><span id=__span-21-14><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>rb_t</span><span class=p>.</span><span class=n>End</span><span class=p>();</span>
</span><span id=__span-21-15><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>为了避免修改已经插入的内容，可以在模版参数中对指定类型声明为<code>const</code>类型</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-22-1><span class=c1>// map-声明Key为const类型</span>
</span><span id=__span-22-2><span class=n>RBTree</span><span class=o>&lt;</span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>pair</span><span class=o>&lt;</span><span class=k>const</span><span class=w> </span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span><span class=w> </span><span class=n>mapKeyOfV</span><span class=o>&gt;</span><span class=w> </span><span class=n>rb_t</span><span class=p>;</span>
</span><span id=__span-22-3>
</span><span id=__span-22-4><span class=c1>// set-声明Key为const类型</span>
</span><span id=__span-22-5><span class=n>RBTree</span><span class=o>&lt;</span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>setKeyOfT</span><span class=o>&gt;</span><span class=w> </span><span class=n>rb_t</span><span class=p>;</span>
</span><span id=__span-22-6>
</span><span id=__span-22-7><span class=c1>// 修改对应迭代器</span>
</span><span id=__span-22-8><span class=k>typedef</span><span class=w> </span><span class=k>typename</span><span class=w> </span><span class=nc>RBTree</span><span class=o>&lt;</span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>setKeyOfT</span><span class=o>&gt;::</span><span class=n>Iterator</span><span class=w> </span><span class=n>iterator</span><span class=p>;</span>
</span><span id=__span-22-9><span class=k>typedef</span><span class=w> </span><span class=k>typename</span><span class=w> </span><span class=nc>RBTree</span><span class=o>&lt;</span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>pair</span><span class=o>&lt;</span><span class=k>const</span><span class=w> </span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=o>&gt;</span><span class=p>,</span><span class=w> </span><span class=n>mapKeyOfV</span><span class=o>&gt;::</span><span class=n>constIterator</span><span class=w> </span><span class=n>const_iterator</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <h2 id=mapsetinsert>map和set的<code>insert()</code>函数<a class=headerlink href=#mapsetinsert title="Permanent link">&para;</a></h2> <p>因为红黑树结构已经实现了<code>insert()</code>函数，所以对应map和set来说可以直接复用红黑树中的<code>insert()</code>函数，需要注意这里的<code>insert()</code>函数的返回值需要设计成<code>pair&lt;iterator, bool&gt;</code>类型，对于set来说没有影响，但是对于map来说，后面需要重载<code>operator[]</code>，所以使用该返回类型</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>  1</span>
<span class=normal>  2</span>
<span class=normal>  3</span>
<span class=normal>  4</span>
<span class=normal>  5</span>
<span class=normal>  6</span>
<span class=normal>  7</span>
<span class=normal>  8</span>
<span class=normal>  9</span>
<span class=normal> 10</span>
<span class=normal> 11</span>
<span class=normal> 12</span>
<span class=normal> 13</span>
<span class=normal> 14</span>
<span class=normal> 15</span>
<span class=normal> 16</span>
<span class=normal> 17</span>
<span class=normal> 18</span>
<span class=normal> 19</span>
<span class=normal> 20</span>
<span class=normal> 21</span>
<span class=normal> 22</span>
<span class=normal> 23</span>
<span class=normal> 24</span>
<span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-23-1><span class=c1>// 树插入</span>
</span><span id=__span-23-2><span class=n>pair</span><span class=o>&lt;</span><span class=n>Iterator</span><span class=p>,</span><span class=w> </span><span class=kt>bool</span><span class=o>&gt;</span><span class=w> </span><span class=n>insertNode</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>V</span><span class=o>&amp;</span><span class=w> </span><span class=n>data</span><span class=p>)</span>
</span><span id=__span-23-3><span class=p>{</span>
</span><span id=__span-23-4><span class=w>    </span><span class=c1>// 创建仿函数对象获取内容</span>
</span><span id=__span-23-5><span class=w>    </span><span class=n>KeyOfV</span><span class=w> </span><span class=n>kov</span><span class=p>;</span>
</span><span id=__span-23-6><span class=w>    </span><span class=c1>// 判断根节点是否为空，为空则作为第一个节点</span>
</span><span id=__span-23-7><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>_root</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=k>nullptr</span><span class=p>)</span>
</span><span id=__span-23-8><span class=w>    </span><span class=p>{</span>
</span><span id=__span-23-9><span class=w>        </span><span class=n>_root</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>node</span><span class=p>(</span><span class=n>data</span><span class=p>);</span>
</span><span id=__span-23-10><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>make_pair</span><span class=p>(</span><span class=n>Iterator</span><span class=p>(</span><span class=n>_root</span><span class=p>),</span><span class=w> </span><span class=nb>true</span><span class=p>);</span>
</span><span id=__span-23-11><span class=w>    </span><span class=p>}</span>
</span><span id=__span-23-12><span class=w>    </span><span class=c1>// 根节点不为空时接着遍历插入</span>
</span><span id=__span-23-13><span class=w>    </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_root</span><span class=p>;</span>
</span><span id=__span-23-14><span class=w>    </span><span class=c1>// 定义父亲节点记录父亲的位置</span>
</span><span id=__span-23-15><span class=w>    </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_root</span><span class=p>;</span>
</span><span id=__span-23-16><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>cur</span><span class=p>)</span>
</span><span id=__span-23-17><span class=w>    </span><span class=p>{</span>
</span><span id=__span-23-18><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>kov</span><span class=p>(</span><span class=n>data</span><span class=p>)</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>kov</span><span class=p>(</span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_data</span><span class=p>))</span>
</span><span id=__span-23-19><span class=w>        </span><span class=p>{</span>
</span><span id=__span-23-20><span class=w>            </span><span class=c1>// 大于根节点数据，插入在右子树，走到左子树的空位置</span>
</span><span id=__span-23-21><span class=w>            </span><span class=n>parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=p>;</span>
</span><span id=__span-23-22><span class=w>            </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_right</span><span class=p>;</span>
</span><span id=__span-23-23><span class=w>        </span><span class=p>}</span>
</span><span id=__span-23-24><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>kov</span><span class=p>(</span><span class=n>data</span><span class=p>)</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>kov</span><span class=p>(</span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_data</span><span class=p>))</span>
</span><span id=__span-23-25><span class=w>        </span><span class=p>{</span>
</span><span id=__span-23-26><span class=w>            </span><span class=c1>// 小于根节点数据，插入在左子树，走到右子树的空位置</span>
</span><span id=__span-23-27><span class=w>            </span><span class=n>parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=p>;</span>
</span><span id=__span-23-28><span class=w>            </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_left</span><span class=p>;</span>
</span><span id=__span-23-29><span class=w>        </span><span class=p>}</span>
</span><span id=__span-23-30><span class=w>        </span><span class=k>else</span>
</span><span id=__span-23-31><span class=w>        </span><span class=p>{</span>
</span><span id=__span-23-32><span class=w>            </span><span class=c1>// 查到相等返回false</span>
</span><span id=__span-23-33><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>make_pair</span><span class=p>(</span><span class=n>Iterator</span><span class=p>(</span><span class=n>cur</span><span class=p>),</span><span class=w> </span><span class=nb>false</span><span class=p>);</span>
</span><span id=__span-23-34><span class=w>        </span><span class=p>}</span>
</span><span id=__span-23-35><span class=w>    </span><span class=p>}</span>
</span><span id=__span-23-36>
</span><span id=__span-23-37><span class=w>    </span><span class=c1>// 创建node节点</span>
</span><span id=__span-23-38><span class=w>    </span><span class=c1>// 创建节点可以使用新节点，但是要使cur走到新节点的位置，便于下面判断新节点的平衡因子，再通过cur判断祖先节点的平衡因子</span>
</span><span id=__span-23-39><span class=w>    </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>node</span><span class=p>(</span><span class=n>data</span><span class=p>);</span>
</span><span id=__span-23-40><span class=w>    </span><span class=c1>// 记录新增点便于返回</span>
</span><span id=__span-23-41><span class=w>    </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>newNode</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=p>;</span>
</span><span id=__span-23-42>
</span><span id=__span-23-43><span class=w>    </span><span class=c1>// parent为叶子节点，链接新节点</span>
</span><span id=__span-23-44><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>kov</span><span class=p>(</span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_data</span><span class=p>)</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>kov</span><span class=p>(</span><span class=n>data</span><span class=p>))</span>
</span><span id=__span-23-45><span class=w>    </span><span class=p>{</span>
</span><span id=__span-23-46><span class=w>        </span><span class=c1>// 如果是右子树，则插入在右子树</span>
</span><span id=__span-23-47><span class=w>        </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_right</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=p>;</span>
</span><span id=__span-23-48><span class=w>    </span><span class=p>}</span>
</span><span id=__span-23-49><span class=w>    </span><span class=k>else</span>
</span><span id=__span-23-50><span class=w>    </span><span class=p>{</span>
</span><span id=__span-23-51><span class=w>        </span><span class=c1>// 否则插入在左子树</span>
</span><span id=__span-23-52><span class=w>        </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_left</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=p>;</span>
</span><span id=__span-23-53><span class=w>    </span><span class=p>}</span>
</span><span id=__span-23-54>
</span><span id=__span-23-55><span class=w>    </span><span class=c1>// 链接父亲</span>
</span><span id=__span-23-56><span class=w>    </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=p>;</span>
</span><span id=__span-23-57><span class=w>    </span><span class=c1>// 插入节点颜色为红色</span>
</span><span id=__span-23-58><span class=w>    </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Red</span><span class=p>;</span>
</span><span id=__span-23-59>
</span><span id=__span-23-60><span class=w>    </span><span class=c1>// 存在父亲且当父亲节点为红色时需要判断是否更新</span>
</span><span id=__span-23-61><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>parent</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_parent</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>Red</span><span class=p>)</span>
</span><span id=__span-23-62><span class=w>    </span><span class=p>{</span>
</span><span id=__span-23-63><span class=w>        </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>grandfather</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_parent</span><span class=p>;</span>
</span><span id=__span-23-64><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_right</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>parent</span><span class=p>)</span>
</span><span id=__span-23-65><span class=w>        </span><span class=p>{</span>
</span><span id=__span-23-66><span class=w>            </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>uncle</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_left</span><span class=p>;</span>
</span><span id=__span-23-67><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>uncle</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>uncle</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>Red</span><span class=p>)</span>
</span><span id=__span-23-68><span class=w>            </span><span class=p>{</span>
</span><span id=__span-23-69><span class=w>                </span><span class=c1>// 叔叔存在且为红</span>
</span><span id=__span-23-70><span class=w>                </span><span class=n>uncle</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Black</span><span class=p>;</span>
</span><span id=__span-23-71><span class=w>                </span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Red</span><span class=p>;</span>
</span><span id=__span-23-72>
</span><span id=__span-23-73><span class=w>                </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>grandfather</span><span class=p>;</span>
</span><span id=__span-23-74><span class=w>                </span><span class=n>parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_parent</span><span class=p>;</span>
</span><span id=__span-23-75><span class=w>            </span><span class=p>}</span>
</span><span id=__span-23-76><span class=w>            </span><span class=k>else</span>
</span><span id=__span-23-77><span class=w>            </span><span class=p>{</span>
</span><span id=__span-23-78><span class=w>                </span><span class=c1>// cur在parent的右孩子</span>
</span><span id=__span-23-79><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>cur</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_right</span><span class=p>)</span>
</span><span id=__span-23-80><span class=w>                </span><span class=p>{</span>
</span><span id=__span-23-81><span class=w>                    </span><span class=c1>// 右右-&gt;左单旋</span>
</span><span id=__span-23-82><span class=w>                    </span><span class=n>rotateLeft</span><span class=p>(</span><span class=n>grandfather</span><span class=p>);</span>
</span><span id=__span-23-83><span class=w>                    </span><span class=c1>// 改变颜色</span>
</span><span id=__span-23-84><span class=w>                    </span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Red</span><span class=p>;</span>
</span><span id=__span-23-85><span class=w>                    </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Black</span><span class=p>;</span>
</span><span id=__span-23-86><span class=w>                </span><span class=p>}</span>
</span><span id=__span-23-87><span class=w>                </span><span class=k>else</span>
</span><span id=__span-23-88><span class=w>                </span><span class=p>{</span>
</span><span id=__span-23-89><span class=w>                    </span><span class=c1>// 右左-&gt;右左双旋</span>
</span><span id=__span-23-90><span class=w>                    </span><span class=n>rotateRight</span><span class=p>(</span><span class=n>parent</span><span class=p>);</span>
</span><span id=__span-23-91><span class=w>                    </span><span class=n>rotateLeft</span><span class=p>(</span><span class=n>grandfather</span><span class=p>);</span>
</span><span id=__span-23-92>
</span><span id=__span-23-93><span class=w>                    </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Black</span><span class=p>;</span>
</span><span id=__span-23-94><span class=w>                    </span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Red</span><span class=p>;</span>
</span><span id=__span-23-95><span class=w>                </span><span class=p>}</span>
</span><span id=__span-23-96><span class=w>                </span><span class=c1>// 旋转结束后不需要再向上更新</span>
</span><span id=__span-23-97><span class=w>                </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-23-98><span class=w>            </span><span class=p>}</span>
</span><span id=__span-23-99><span class=w>        </span><span class=p>}</span>
</span><span id=__span-23-100><span class=w>        </span><span class=k>else</span>
</span><span id=__span-23-101><span class=w>        </span><span class=p>{</span>
</span><span id=__span-23-102><span class=w>            </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>uncle</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_right</span><span class=p>;</span>
</span><span id=__span-23-103><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>uncle</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>uncle</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>Red</span><span class=p>)</span>
</span><span id=__span-23-104><span class=w>            </span><span class=p>{</span>
</span><span id=__span-23-105><span class=w>                </span><span class=c1>// 叔叔存在且为红</span>
</span><span id=__span-23-106><span class=w>                </span><span class=n>uncle</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Black</span><span class=p>;</span>
</span><span id=__span-23-107><span class=w>                </span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Red</span><span class=p>;</span>
</span><span id=__span-23-108>
</span><span id=__span-23-109><span class=w>                </span><span class=c1>// 继续向上更新</span>
</span><span id=__span-23-110><span class=w>                </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>grandfather</span><span class=p>;</span>
</span><span id=__span-23-111><span class=w>                </span><span class=n>parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_parent</span><span class=p>;</span>
</span><span id=__span-23-112><span class=w>            </span><span class=p>}</span>
</span><span id=__span-23-113><span class=w>            </span><span class=k>else</span>
</span><span id=__span-23-114><span class=w>            </span><span class=p>{</span>
</span><span id=__span-23-115><span class=w>                </span><span class=k>if</span><span class=p>(</span><span class=n>cur</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_left</span><span class=p>)</span>
</span><span id=__span-23-116><span class=w>                </span><span class=p>{</span>
</span><span id=__span-23-117><span class=w>                    </span><span class=c1>// 叔叔不存在</span>
</span><span id=__span-23-118><span class=w>                    </span><span class=c1>// 左左-&gt;右单旋</span>
</span><span id=__span-23-119><span class=w>                    </span><span class=n>rotateRight</span><span class=p>(</span><span class=n>grandfather</span><span class=p>);</span>
</span><span id=__span-23-120><span class=w>                    </span><span class=c1>// 改变颜色</span>
</span><span id=__span-23-121><span class=w>                    </span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Red</span><span class=p>;</span>
</span><span id=__span-23-122><span class=w>                    </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Black</span><span class=p>;</span>
</span><span id=__span-23-123><span class=w>                </span><span class=p>}</span>
</span><span id=__span-23-124><span class=w>                </span><span class=k>else</span>
</span><span id=__span-23-125><span class=w>                </span><span class=p>{</span>
</span><span id=__span-23-126><span class=w>                    </span><span class=c1>// 左右-&gt;左右双旋</span>
</span><span id=__span-23-127><span class=w>                    </span><span class=n>rotateLeft</span><span class=p>(</span><span class=n>parent</span><span class=p>);</span>
</span><span id=__span-23-128><span class=w>                    </span><span class=n>rotateRight</span><span class=p>(</span><span class=n>grandfather</span><span class=p>);</span>
</span><span id=__span-23-129>
</span><span id=__span-23-130><span class=w>                    </span><span class=c1>// 改变颜色</span>
</span><span id=__span-23-131><span class=w>                    </span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Red</span><span class=p>;</span>
</span><span id=__span-23-132><span class=w>                    </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Black</span><span class=p>;</span>
</span><span id=__span-23-133><span class=w>                </span><span class=p>}</span>
</span><span id=__span-23-134><span class=w>                </span><span class=c1>// 旋转结束后不需要再向上更新</span>
</span><span id=__span-23-135><span class=w>                </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-23-136><span class=w>            </span><span class=p>}</span>
</span><span id=__span-23-137><span class=w>        </span><span class=p>}</span>
</span><span id=__span-23-138><span class=w>    </span><span class=p>}</span>
</span><span id=__span-23-139>
</span><span id=__span-23-140><span class=w>    </span><span class=c1>// 根节点为黑色</span>
</span><span id=__span-23-141><span class=w>    </span><span class=n>_root</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Black</span><span class=p>;</span>
</span><span id=__span-23-142>
</span><span id=__span-23-143><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>make_pair</span><span class=p>(</span><span class=n>Iterator</span><span class=p>(</span><span class=n>newNode</span><span class=p>),</span><span class=w> </span><span class=nb>true</span><span class=p>);</span>
</span><span id=__span-23-144><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>map和set封装红黑树的<code>insert()</code>函数</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-24-1><span class=c1>// set中的insert()函数</span>
</span><span id=__span-24-2><span class=n>pair</span><span class=o>&lt;</span><span class=n>iterator</span><span class=p>,</span><span class=w> </span><span class=kt>bool</span><span class=o>&gt;</span><span class=w> </span><span class=n>insert</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>T</span><span class=o>&amp;</span><span class=w> </span><span class=n>key</span><span class=p>)</span>
</span><span id=__span-24-3><span class=p>{</span>
</span><span id=__span-24-4><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>rb_t</span><span class=p>.</span><span class=n>insertNode</span><span class=p>(</span><span class=n>key</span><span class=p>);</span>
</span><span id=__span-24-5><span class=p>}</span>
</span><span id=__span-24-6>
</span><span id=__span-24-7><span class=c1>// map中的insert()函数</span>
</span><span id=__span-24-8><span class=n>pair</span><span class=o>&lt;</span><span class=n>iterator</span><span class=p>,</span><span class=w> </span><span class=kt>bool</span><span class=o>&gt;</span><span class=w> </span><span class=n>insert</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>pair</span><span class=o>&lt;</span><span class=k>const</span><span class=w> </span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=o>&gt;&amp;</span><span class=w> </span><span class=n>kv</span><span class=p>)</span>
</span><span id=__span-24-9><span class=p>{</span>
</span><span id=__span-24-10><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>rb_t</span><span class=p>.</span><span class=n>insertNode</span><span class=p>(</span><span class=n>kv</span><span class=p>);</span>
</span><span id=__span-24-11><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=mapoperator>map中的<code>operator[]</code><a class=headerlink href=#mapoperator title="Permanent link">&para;</a></h2> <p>因为map中的<code>operator[]</code>函数有插入+修改的功能，所以内部需要调用<code>insert()</code>函数，当插入失败时，返回已经存在节点的迭代器的<code>second</code>即为对应节点的<code>value</code>值，插入成功时，返回成功插入的节点的迭代器的<code>second</code>即为对应节点的<code>value</code>值</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-25-1><span class=c1>// 重载operator[]</span>
</span><span id=__span-25-2><span class=n>T</span><span class=o>&amp;</span><span class=w> </span><span class=k>operator</span><span class=p>[](</span><span class=k>const</span><span class=w> </span><span class=n>Key</span><span class=o>&amp;</span><span class=w> </span><span class=n>key</span><span class=p>)</span>
</span><span id=__span-25-3><span class=p>{</span>
</span><span id=__span-25-4><span class=w>    </span><span class=n>pair</span><span class=o>&lt;</span><span class=n>iterator</span><span class=p>,</span><span class=w> </span><span class=kt>bool</span><span class=o>&gt;</span><span class=w> </span><span class=n>ret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>insert</span><span class=p>(</span><span class=n>make_pair</span><span class=p>(</span><span class=n>Key</span><span class=p>,</span><span class=w> </span><span class=n>T</span><span class=p>()));</span>
</span><span id=__span-25-5><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>ret</span><span class=p>.</span><span class=n>first</span><span class=o>-&gt;</span><span class=n>second</span><span class=p>;</span>
</span><span id=__span-25-6><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年8月9日</span> </span> </aside> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> 页面有帮助吗？ </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title=页面对我有帮助 data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title=页面没有帮助到我 data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> 谢谢你的反馈！ </div> <div data-md-value=0 hidden> 谢谢你的反馈！联系<a href=https://www.help-doc.top/author/contact/contact.html>作者</a>提供更详细的信息 </div> </div> </div> </fieldset> </form> <!-- Waline 评论系统 --> <div id=waline></div> <!-- Waline 评论系统 --> <div id=waline></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2024-2025 柯懒不是柯南 </div> </div> <div class="md-footer-love md-typeset"> 一闪一闪亮晶晶，不及<span class=love-highlight>小亮</span><span class=love-heart>♥</span>照我心。To Li Liang </div> <div class=md-social> <a href=https://github.com/H0308 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.help-doc.top/author/contact/contact.html target=_blank rel=noopener title=www.help-doc.top class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.indexes", "navigation.prune", "navigation.tabs", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src=../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../javascripts/katex.min.js></script> <script src=../../javascripts/other.min.js></script> <script src=../../javascripts/copyright.min.js></script> <script src=../../javascripts/waline.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js></script> <script src=https://cdn.jsdelivr.net/npm/mermaid@11.5.0/dist/mermaid.min.js></script> <script src=../../assets/javascripts/toggle-sidebar.js async></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>