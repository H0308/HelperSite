# bitset类

## bitset类介绍

bitset类是C++标准库有关位图数据结构的类，关于位图的基本介绍见网址：

在C++标准库中，bitset类基本定义如下：

```c++
template <size_t N> class bitset;
```

向非类型模版参数处传递一个实际无符号整数代表当前位图可以表示的数值范围，一般情况下这个数值会设置超过具体范围，例如0-40亿数据会设置为42亿

!!! note
    如果想要设置为42亿的数值，在C++标准库中不可以直接使用-1，尽管无符号的-1在无符号整数类型中是最大值，但是可以使用`UINT_MAX`（无符号整数最大值）、`0xFFFFFFFF`

如果需要使用-1，可以在堆上开辟空间

```c++
#include <iostream>
#include <bitset>
using namespace std;

int main()
{
    bitset<-1>* bs = new bitset<-1>;

    return 0;
}
```

## bitset类基本使用

### 重点关注的函数

在`bitset`中主要关注三个函数：

1. `bitset& set (size_t pos, bool val = true)`：在`bitset`中标记`pos`值，`val`代表指定用0（`false`）或者1（`true`）标记，默认标记`val`为1
2. `bitset& reset (size_t pos)`：取消`bitset`中对`pos`值的标记
3. `bool test (size_t pos) const`：判断`pos`值是否在`bitset`中

基本使用如下：

```c++
#include <iostream>
#include <bitset>
using namespace std;

int main()
{
    bitset<10> bs;

    bs.set(4);
    bs.set(3);
    cout << bs.test(3) << endl;
    cout << bs.test(4) << endl;

    bs.reset(3);
    cout << bs.test(3) << endl;
    cout << bs.test(4) << endl;

    return 0;
}
```

### 其他方法

1. `any`、`none`和`all`函数：`any`函数代表`bitset`中是否有被标记的比特位，`none`函数判断`bitset`中是否没有被标记的比特位，`all`函数代表`bitset`是否全部被标记
2. `bool operator[] (size_t pos) const`：获取`pos`位置是否被标记，可以使用赋值符号将`pos`标记或者取消标记，一般赋值运算符右侧值是0（`false`）或者1（`true`），如果是其他非0整型常量依旧会被视为`true`
3. `to_string (charT zero = charT('0'), charT one  = charT('1')) const`：将`bitset`中所有比特位以指定形式（默认0表示未标记，1表示被标记）转换成字符串

基本使用如下：

```c++
#include <iostream>
#include <bitset>
using namespace std;

int main()
{
    bitset<10> bs;

    bs.set(3);
    bs.set(0);
    cout << bs.any() << endl; // 是否至少有1位被标记
    cout << bs.none() << endl; // 是否全部未标记
    cout << bs.all() << endl; // 是否全部标记

    cout << bs[0] << endl; // 获取0位是否被设置
    cout << (bs[2] = true) << endl; // 设置2号比特位
    cout << bs.to_string() << endl; // 按照0未标记，1标记的方式转换成字符串

    return 0;
}

输出结果：
1
0
0
1
1
0000001101
```