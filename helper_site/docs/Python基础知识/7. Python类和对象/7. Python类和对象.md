# Python类和对象

## Python作用域和命名空间

namespace（命名空间）是从名称到对象的映射。现在，大多数命名空间都使用Python字典实现，但除非涉及到性能优化，一般不会关注这方面的事情，而且将来也可能会改变这种方式。在Python中，常见的命名空间例子有：

1. 内置名称集合（包括`abs()`函数以及内置异常的名称等）
2. 一个模块的全局作用域
3. 一个函数调用中的局部作用域
4. 对象的属性集合（实例的命名空间）

与C++命名空间的作用类似，定义在不同的命名空间中的名称彼此之间互不冲突。例如，两个不同的模块都可以定义`maximize()`函数，且不会造成混淆。用户使用函数时必须要在函数名前面加上模块名指定是哪一个模块中的函数

前面已经使用过很多次对象的方法，每一次调用方法都是通过`对象.方法名`的方式，实际上，点号之后的名称被称为属性，例如表达式`z.real`中，`real`是对象`z`的属性。同样，使用模块中的名称也被称为属性：表达式`modname.funcname`中，`modname`是模块对象，`funcname` 模块的属性

命名空间是在不同时刻创建的，且拥有不同的生命周期。内置名称的命名空间是在Python解释器启动时创建的，永远不会被删除。模块的全局命名空间在读取模块定义时创建，通常，模块的命名空间也会持续到解释器退出。从脚本文件读取或交互式读取的，由解释器顶层调用执行的语句是`__main__`模块调用的一部分，也拥有自己的全局命名空间。内置名称实际上也在模块里，即`builtins`

函数的局部命名空间在函数被调用时被创建，并在函数返回或抛出未在函数内被处理的异常时被删除。对于递归调用来说，每次递归调用都有自己的局部命名空间

在Python中，作用域虽然是被静态确定的，但会被动态使用。执行期间的任何时刻，都会有3或4个“命名空间可直接访问”的嵌套作用域：

1. 最内层作用域，包含局部名称，并首先在其中进行搜索（局部作用域）
2. 那些外层闭包函数的作用域，包含“非局部、非全局”的名称，从最靠内层的那个作用域开始，逐层向外搜索（嵌套函数的内部作用域）
3. 倒数第二层作用域，包含当前模块的全局名称（全局作用域）
4. 最外层（最后搜索）的作用域，是内置名称的命名空间（内置作用域）

!!! note

    “可直接访问”的意思是，该文本区域内的名称在被非限定引用（不需要使用`.`进行访问）时，查找名称的范围，是包括该命名空间在内的

## 类和对象

