# 前缀和

## 介绍

在计算数组元素之和时，最直观的思路就是依次遍历数组取出元素并相加，但是这个思路的时间复杂度为$O(N)$，如果数组元素非常多，就会面临执行时间长的问题

为了尽可能降低操作时间，考虑一种思路：每一次计算当前元素以及之前的元素之和存储到一个新的数组中，当需要获取原数组指定位置之前的元素之和时，只需要在新数组中的对应位置找到结果即可

例如下面的一个示例：

假设要计算一个数组`[1,2,3,3,2,1,2]`，则其和的数组为`[1,3,6,9,11,12,14]`，计算过程如下图所示：

<img src="5. 前缀和.assets\Snipaste_2024-10-31_09-29-28.png">

在上图中可以看出，需要求从0号位置开始，到1号位置结束的元素之和就只需要在和数组中直接取出1号位置的元素即可获得两个元素的和。同理，需要求1号位置开始，到5号位置结束，中间的元素之和，只需要让和数组中5号位置的元素减去1号位置之前的元素即可获得原数组从1号位置开始，到5号位置结束的元素之和

假设待求和的数组为`arr`，和数组为`sum`，则上面的描述用下面的表达式表示为：

1. 从0号位置开始，到1号位置结束的元素之和
    `arr[0] + arr[1] = sum[1]`
2. 从1号位置开始，到5号位置结束，中间的元素之和
    `arr[1] + arr[2] + arr[3] + arr[4] + arr[5] = sum[5] - sum[0]`

在上面的例子中，和数组`sum`存储的值是当前位置的元素及其前面所有元素的和，所以这个和也被称为「前缀和」，而对应的和数组`sum`被称为「前缀和数组」。在前面也看到，前缀和最常用的位置就是计算一个区间的和

## 示例题目

[卡码网KamaCoder.区间和](https://kamacoder.com/problempage.php?pid=1070)

**问题描述：**

!!! quote
    **题目描述**
    给定一个整数数组Array，请计算该数组在每个指定区间内元素的总和。

    **输入描述**

    第一行输入为整数数组 Array 的长度`n`，接下来`n`行，每行一个整数，表示数组的元素。随后的输入为需要计算总和的区间下标：`a`，`b` （`b` > = `a`），直至停止输入（遇到文件末尾）

    **输出描述**

    输出每个指定区间内元素的总和。

    **输入示例**

    ```c++
    5
    1
    2
    3
    4
    5
    0 1
    1 3
    ```

    **输出示例**

    ```c++
    3
    9
    ```

**思路分析：**

1. 解法1：暴力解法
    本题的暴力解法就是前面提到的根据区间划分起始位置和终止位置，从起始位置开始依次向后遍历直到终止位置，在遍历过程中累加获取到的元素即可求出区间和，但是这个解法在数据量巨大时会超时

2. 解法2：前缀和
    