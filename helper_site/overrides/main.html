{% extends "base.html" %}

{% block header %}
<header class="md-header" data-md-component="header">
    <nav class="md-header__inner md-grid" aria-label="页眉">
        <a href="{{ config.extra.homepage | d(nav.homepage.url, true) | url }}" title="{{ config.site_name | e }}"
            class="md-header__button md-logo" aria-label="{{ config.site_name }}" data-md-component="logo">
            {% include "partials/logo.html" %}
        </a>
        <label class="md-header__button md-icon" for="__drawer">
            {% include ".icons/material/menu.svg" %}
        </label>
        <div class="md-header__title" data-md-component="header-title">
            <div class="md-header__ellipsis">
                <div class="md-header__topic">
                    <span class="md-ellipsis">
                        {{ config.site_name }}
                    </span>
                </div>
                <div class="md-header__topic" data-md-component="header-topic">
                    <span class="md-ellipsis">
                        {% if page.meta and page.meta.title %}
                        {{ page.meta.title }}
                        {% else %}
                        {{ page.title }}
                        {% endif %}
                    </span>
                </div>
            </div>
        </div>
        {% if config.theme.palette %}
        {% if not config.theme.palette is mapping %}
        <form class="md-header__option" data-md-component="palette">
            {% for option in config.theme.palette %}
            {% set primary = option.primary | replace(" ", "-") | lower %}
            {% set accent = option.accent | replace(" ", "-") | lower %}
            <input class="md-option" data-md-color-media="{{ option.media }}"
                data-md-color-scheme="{{ option.scheme | replace(' ', '-') | lower }}"
                data-md-color-primary="{{ primary }}" data-md-color-accent="{{ accent }}" {% if option.toggle %}
                aria-hidden="true" {% else %} aria-label="{{ option.name }}" {% endif %} type="radio" name="__palette"
                id="__palette_{{ loop.index }}">
            {% if option.toggle %}
            <label class="md-header__button md-icon" title="{{ option.name }}"
                for="__palette_{{ loop.index0 or loop.length }}" hidden>
                {% include ".icons/" ~ option.toggle.icon ~ ".svg" %}
            </label>
            {% endif %}
            {% endfor %}
        </form>
        {% endif %}
        {% endif %}

        <!-- 头像元素 - 直接在HTML中定义 -->
        <div class="header-avatar">
            <img src="{{ base_url }}/作者/作者.assets/20250206-200653.jpg" alt="头像">
            <div class="avatar-dropdown">
                <p><strong>柯懒不是柯南</strong></p>
                <a href="{{ base_url }}/作者/联系作者/作者.html" class="avatar-dropdown-item">吵醒柯懒</a>
                <div class="avatar-dropdown-divider"></div>
                <a href="{{ base_url }}/作者/关于作者/关于作者.html" class="avatar-dropdown-item">柯懒自传</a>
                <div class="avatar-dropdown-divider"></div>
                <a href="https://github.com/H0308" class="avatar-dropdown-item">柯懒的零食库</a>
            </div>
        </div>

        <label class="md-header__button md-icon" for="__search">
            {% include ".icons/material/magnify.svg" %}
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
            <label class="md-search__overlay" for="__search"></label>
            <div class="md-search__inner" role="search">
                <form class="md-search__form" name="search">
                    <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索"
                        autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false"
                        data-md-component="search-query" required>
                    <label class="md-search__icon md-icon" for="__search">
                        {% include ".icons/material/magnify.svg" %}
                        {% include ".icons/material/arrow-left.svg" %}
                    </label>
                    <nav class="md-search__options" aria-label="查找">
                        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容"
                            tabindex="-1">
                            {% include ".icons/material/close.svg" %}
                        </button>
                    </nav>
                    <div class="md-search__suggest" data-md-component="search-suggest"></div>
                </form>
                <div class="md-search__output">
                    <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
                        <div class="md-search-result" data-md-component="search-result">
                            <div class="md-search-result__meta">
                                正在初始化搜索引擎
                            </div>
                            <ol class="md-search-result__list" role="presentation"></ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</header>

<!-- 独立的切换按钮 -->
<div class="toolbar-toggle-btn" id="toolbarToggleBtn" onclick="toggleToolbar()">
    <div class="toggle-icon">
        <svg class="toggle-arrow-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
            width="16" height="16">
            <path
                d="M346.538667 1024L170.666667 853.333333l341.333333-341.333333-341.333333-341.333333 175.872-170.666667L853.333333 512z"
                fill="currentColor"></path>
        </svg>
    </div>
</div>

<!-- 右侧固定功能条 - 独立于内容区 -->
<div class="floating-toolbar" id="floatingToolbar">
    <!-- 字体切换功能 -->
    <div class="toolbar-item font-switcher">
        <div class="toolbar-icon">
            <svg class="font-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20"
                height="20">
                <path
                    d="M913.408 1024l-66.56 0q-29.696 0-51.2-5.12t-36.864-15.872-26.112-27.136-19.968-37.888q-15.36-38.912-28.16-70.656t-22.016-55.296q-11.264-26.624-20.48-49.152l-254.976 0q-7.168 23.552-17.408 51.2-8.192 23.552-21.504 56.832t-30.72 72.192q-20.48 46.08-47.104 63.488t-60.416 17.408l-70.656 0q-45.056 0-60.928-19.968t2.56-68.096q18.432-46.08 43.008-108.544t52.224-132.608 57.344-143.872 57.344-144.384q65.536-164.864 137.216-343.04 7.168-17.408 18.432-31.744 10.24-11.264 27.136-21.504t42.496-10.24q26.624 0 43.52 10.752t28.16 24.064q12.288 15.36 19.456 33.792 72.704 180.224 138.24 345.088 27.648 70.656 57.344 143.872t56.832 142.336 51.2 129.536 41.472 104.448q14.336 34.816 4.096 62.464t-43.008 27.648zM616.448 634.88l-97.28-347.136-1.024 0-108.544 347.136 206.848 0z"
                    fill="currentColor"></path>
            </svg>
        </div>
        <div class="toolbar-label">内容字体</div>
        <div class="font-dropdown-toolbar">
            <div class="font-current-toolbar" onclick="toggleFontDropdownToolbar()">
                <span class="current-font-name-toolbar">东观体</span>
                <svg class="dropdown-arrow-icon" viewBox="0 0 1024 1024" version="1.1"
                    xmlns="http://www.w3.org/2000/svg" width="12" height="12">
                    <path
                        d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z"
                        fill="currentColor"></path>
                </svg>
            </div>
            <div class="font-options-toolbar">
                <div class="font-option-toolbar" data-font="dongguanti" onclick="selectFontToolbar('dongguanti')">上图东观体
                </div>
                <div class="font-option-toolbar" data-font="oppoti" onclick="selectFontToolbar('oppoti')">OPPO Sans
                </div>
                <div class="font-option-toolbar" data-font="jiangchengti" onclick="selectFontToolbar('jiangchengti')">
                    江城黑体</div>
                <div class="font-option-toolbar" data-font="lxgw" onclick="selectFontToolbar('lxgw')">霞鹜臻楷</div>
            </div>
        </div>
    </div>

    <!-- 代码字体切换功能 -->
    <div class="toolbar-item code-font-switcher">
        <div class="toolbar-icon">
            <svg t="1753672111433" class="icon code-font-icon" viewBox="0 0 1024 1024" version="1.1"
                xmlns="http://www.w3.org/2000/svg" p-id="5148" width="20" height="20">
                <path
                    d="M941.709938 0H82.290062A82.290062 82.290062 0 0 0 0 82.290062v859.419876A82.290062 82.290062 0 0 0 82.290062 1022.53923h859.419876A82.290062 82.290062 0 0 0 1022.53923 941.709938V82.290062A82.290062 82.290062 0 0 0 941.709938 0zM188.439372 553.631954a40.901569 40.901569 0 0 1-29.215406-70.116975L292.154066 351.558726 159.223966 218.628626a40.901569 40.901569 0 0 1 58.430813-57.94389l160.197813 162.145507a40.901569 40.901569 0 0 1 0 57.943889l-160.197813 160.684736a40.901569 40.901569 0 0 1-29.215407 12.173086z m443.587257 0H405.120304a40.901569 40.901569 0 0 1 0-82.290061H633.000476a40.901569 40.901569 0 0 1 0 82.290061z"
                    fill="currentColor" p-id="5149"></path>
            </svg>
        </div>
        <div class="toolbar-label">代码字体</div>
        <div class="code-font-dropdown-toolbar">
            <div class="code-font-current-toolbar" onclick="toggleCodeFontDropdownToolbar()">
                <span class="current-code-font-name-toolbar">DejaVu Sans Mono</span>
                <svg class="dropdown-arrow-icon" viewBox="0 0 1024 1024" version="1.1"
                    xmlns="http://www.w3.org/2000/svg" width="12" height="12">
                    <path
                        d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z"
                        fill="currentColor"></path>
                </svg>
            </div>
            <div class="code-font-options-toolbar">
                <div class="code-font-option-toolbar" data-code-font="dejavu" onclick="selectCodeFontToolbar('dejavu')">
                    DejaVu Sans Mono</div>
                <div class="code-font-option-toolbar" data-code-font="zsft" onclick="selectCodeFontToolbar('zsft')">
                    JetBrains Mono</div>
            </div>
        </div>
    </div>

    <!-- 主题切换功能 -->
    <div class="toolbar-item theme-switcher" onclick="switchTheme()">
        <div class="toolbar-icon">
            <svg class="theme-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20"
                height="20">
                <path
                    d="M876.572788 522.301623c-1.886977 12.375865-9.657964 30.331819-35.880185 45.48903-56.489572 32.697703-150.21828 83.990926-174.010149 96.958262-13.143345 24.431435-66.067718 122.221646-98.141204 178.503487-16.117073 28.124548-36.055171 34.041304-50.030463 34.041304-0.031722 0-0.031722 0-0.031722 0-14.613836 0-29.1806-6.460132-43.234687-19.218714-47.183626-42.643216-125.994576-117.105115-146.013515-136.083351-27.757181-4.732791-138.338718-23.743774-200.584388-35.752272-17.924231-3.533476-32.649608-14.07046-40.372499-29.084409-5.78782-11.256368-10.281157-30.05962 1.471514-55.658647 26.989701-59.047838 74.126254-157.557432 85.957721-182.196599-3.437286-27.117614-16.996093-135.060045-23.760147-198.905142-1.886977-17.460674 3.901867-35.096333 15.829524-48.351218 12.791327-14.278191 30.667463-21.48943 49.854455-19.426445 63.669088 6.332219 173.259042 19.426445 200.584388 22.705118 24.335245-11.879562 121.085776-58.936297 180.133613-86.34146 9.91379-4.573155 19.85828-6.92369 29.596062-6.92369 28.748764 0 52.172243 20.642133 58.328453 51.421136 12.599969 62.997799 30.93864 166.70272 35.639708 193.484689 18.851347 19.682271 91.953272 96.031147 135.060045 143.07151C872.72004 487.125473 879.307062 504.71406 876.572788 522.301623L876.572788 522.301623zM825.375755 499.085876C776.017604 445.314205 687.245791 352.977193 686.365748 352.017332c-2.942005-3.069919-4.956895-6.971785-5.676279-11.208273-0.207731-1.215688-22.193465-127.001509-36.551474-198.936865-0.799202-3.917216-4.285606-16.836457-16.196891-16.836457-3.453658 0-7.30743 1.006933-11.464099 2.942005-67.282383 31.179117-183.955662 88.180342-185.170327 88.771813-3.693112 1.790786-7.850805 2.558265-11.975752 2.01489-1.295506-0.224104-133.63765-16.165168-205.988468-23.424502-0.079818 0-0.207731 0-0.287549 0-7.30743 0-11.128455 2.89391-13.319353 5.40408-3.677762 4.124947-5.644557 9.91379-5.068436 15.110139 7.674796 72.623018 24.255427 202.934922 24.463158 204.325595 0.511653 4.109598-0.159636 8.266267-1.966795 11.960403-0.591471 1.215688-57.657164 120.04712-88.339977 187.201589-3.565199 7.754614-4.41352 14.214746-2.350534 18.131963 1.935072 3.725858 6.588045 5.820566 10.360975 6.53995 70.719668 13.718443 204.644867 36.519752 206.036563 36.727483 4.189416 0.671289 8.058536 2.686179 11.112082 5.580089 1.006933 0.87902 96.414887 91.281983 150.090367 139.889027 8.314363 7.563256 13.143345 8.106632 14.437827 8.106632 3.485381 0 8.314363-4.621251 12.727882-12.391215 36.343743-63.828724 100.011808-181.988868 100.636025-183.155437 1.983167-3.64604 5.004991-6.667863 8.650007-8.650007 1.134847-0.671289 114.418936-62.373583 178.6314-99.516528 8.698103-5.036713 14.278191-10.568706 14.94948-14.854313C834.681702 511.845481 831.49922 505.800811 825.375755 499.085876L825.375755 499.085876zM935.333076 935.670256c-4.157693 4.157693-9.689686 6.299473-15.141862 6.299473-5.548366 0-11.048637-2.142803-15.238053-6.299473l-171.915441-171.915441c-8.362458-8.394181-8.362458-21.98471 0-30.426987 8.394181-8.394181 21.98471-8.394181 30.379914 0l171.915441 171.915441C943.727257 913.684522 943.727257 927.275052 935.333076 935.670256L935.333076 935.670256z"
                    fill="currentColor"></path>
            </svg>
        </div>
        <div class="toolbar-label">主题切换</div>
    </div>

    <!-- 返回顶部功能 -->
    <div class="toolbar-item back-to-top" onclick="scrollToTop()">
        <div class="toolbar-icon">
            <svg class="back-to-top-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M882.688 624.128l-336.896-583.68c-15.872-27.136-54.784-27.136-70.656 0L138.24 624.128c-15.872 27.136 4.096 61.44 35.328 61.44H317.44c22.528 0 40.96 18.432 40.96 40.96v239.616c0 22.528 18.432 40.96 40.96 40.96h223.232c22.528 0 40.96-18.432 40.96-40.96v-239.616c0-22.528 18.432-40.96 40.96-40.96h143.872c30.208 0 50.176-34.304 34.304-61.44z">
                </path>
            </svg>
        </div>
        <div class="toolbar-label">返回顶部</div>
    </div>
</div>

{% endblock %}

{% block content %}
{{ super() }}
<!-- 阅读进度条 - 直接在HTML中定义 -->
<div class="reading-progress"></div>
<!-- 滚动指示器 - 直接在HTML中定义 -->
<div class="scroll-indicator"></div>

<!-- 评论系统 -->
{% include "partials/comments.html" %}

{% endblock %}

{% block extrahead %} {{ super() }}
<link rel="stylesheet" href="{{ base_url }}/stylesheets/colors.min.css" />
<link rel="stylesheet" href="{{ base_url }}/stylesheets/theme2.min.css" media="screen and (max-width: 1199px)" />
<link rel="stylesheet" href="{{ base_url }}/stylesheets/theme2.min.css" media="screen and (min-width: 1200px)"
    id="theme2-desktop" />
<link rel="stylesheet" href="{{ base_url }}/stylesheets/theme1.min.css" media="screen and (min-width: 1200px)"
    id="theme1-desktop" />
<link rel="stylesheet" href="{{ base_url }}/stylesheets/print.min.css" />
<link rel="stylesheet" href="{{ base_url }}/stylesheets/font-dongguanti.min.css" id="font-dongguanti" />
<link rel="stylesheet" href="{{ base_url }}/stylesheets/font-oppoti.min.css" id="font-oppoti" disabled />
<link rel="stylesheet" href="{{ base_url }}/stylesheets/font-jiangchengti.min.css" id="font-jiangchengti" disabled />
<link rel="stylesheet" href="{{ base_url }}/stylesheets/font-lxgw.min.css" id="font-lxgw" disabled />
<link rel="stylesheet" href="{{ base_url }}/stylesheets/code-font-dejavu-sans-mono.min.css"
    id="code-font-dejavu-sans-mono" />
<link rel="stylesheet" href="{{ base_url }}/stylesheets/code-font-zsft-hk.min.css" id="code-font-zsft-hk" disabled />
<link rel="stylesheet" href="https://unpkg.com/@waline/client@v3/dist/waline.css" />
<link rel="stylesheet" href="{{ base_url }}/stylesheets/waline.min.css" />
<script src="https://cdn.jsdelivr.net/npm/mermaid@11.5.0/dist/mermaid.min.js"></script>
<script src="{{ base_url }}/javascripts/start.min.js"></script>
<script type="module" src="{{ base_url }}/javascripts/waline.min.js"></script>
{% endblock %}