
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://www.helper-wiki.top/C%2B%2B/25.%20C%2B%2B11%E7%9B%B8%E5%85%B3%E6%96%B0%E7%89%B9%E6%80%A7/C%2B%2B%2011%E7%9B%B8%E5%85%B3%E6%96%B0%E7%89%B9%E6%80%A7.html">
      
      
        <link rel="prev" href="../24.%20unordered_map%E5%92%8Cunordered_set%E7%B1%BB%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/24.%20unordered_map%E5%92%8Cunordered_set%E7%B1%BB%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0.html">
      
      
        <link rel="next" href="../26.%20C%2B%2B%E5%BC%82%E5%B8%B8/26.%20C%2B%2B%E5%BC%82%E5%B8%B8.html">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.31">
    
    
      
        <title>C++ 11相关新特性 - 日常学习帮助网站</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Serif:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto Serif";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#c-11" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../index.html" title="日常学习帮助网站" class="md-header__button md-logo" aria-label="日常学习帮助网站" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            日常学习帮助网站
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              C++ 11相关新特性
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html" class="md-tabs__link">
        
  
    
  
  主页

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../C%E8%AF%AD%E8%A8%80/1.%20C%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.%20C%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html" class="md-tabs__link">
          
  
  编程语言

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1.%20%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%92%8C%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/1.%20%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E4%B8%8E%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6.html" class="md-tabs__link">
          
  
  数据结构与算法

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Linux/1.%20Linux%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E5%92%8C%E6%8C%87%E4%BB%A4/1.%20Linux%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E5%92%8C%E6%8C%87%E4%BB%A4.html" class="md-tabs__link">
          
  
  Linux

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../HTML%E4%B8%8ECSS/HTML%E4%B8%8ECSS.html" class="md-tabs__link">
          
  
  HTML与CSS

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../MySQL/MySQL%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/MySQL%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8.html" class="md-tabs__link">
          
  
  MySQL

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E7%BC%96%E7%A8%8B%E9%A2%98%E7%9B%AE%E7%BB%83%E4%B9%A0%E6%80%BB%E7%BB%93/%E6%A8%A1%E6%8B%9F%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%95%B4%E6%95%B0%E5%87%BD%E6%95%B0/%E6%A8%A1%E6%8B%9F%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%95%B4%E6%95%B0%E5%87%BD%E6%95%B0.html" class="md-tabs__link">
          
  
  编程题目练习总结

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../%E7%BD%91%E9%A1%B5%E7%BC%96%E8%BE%91%E5%99%A8/editor.html" class="md-tabs__link">
        
  
    
  
  网页编辑器

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../%E4%BD%9C%E8%80%85/%E4%BD%9C%E8%80%85.html" class="md-tabs__link">
        
  
    
  
  联系作者

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="日常学习帮助网站" class="md-nav__button md-logo" aria-label="日常学习帮助网站" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    日常学习帮助网站
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    主页
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    编程语言
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            编程语言
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C语言
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            C语言
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%E8%AF%AD%E8%A8%80/1.%20C%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.%20C%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C语言基础知识
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%E8%AF%AD%E8%A8%80/2.%20%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E4%B8%8E%E7%B1%BB%E5%9E%8B%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F/2.%20%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E4%B8%8E%E7%B1%BB%E5%9E%8B%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    进制转换与类型在内存的存储方式
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%E8%AF%AD%E8%A8%80/3.%20C%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%8F%98%E9%87%8F/3.%20C%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%8F%98%E9%87%8F.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C语言数据类型与变量
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%E8%AF%AD%E8%A8%80/4.%20C%E8%AF%AD%E8%A8%80%E6%93%8D%E4%BD%9C%E7%AC%A6/4.%20C%E8%AF%AD%E8%A8%80%E6%93%8D%E4%BD%9C%E7%AC%A6.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C语言操作符
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%E8%AF%AD%E8%A8%80/5.%20C%E8%AF%AD%E8%A8%80%E7%9A%84%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E5%87%BD%E6%95%B0scanf%E5%8F%8A%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA%E5%87%BD%E6%95%B0printf/5.%20C%E8%AF%AD%E8%A8%80%E7%9A%84%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E5%87%BD%E6%95%B0scanf%E5%8F%8A%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA%E5%87%BD%E6%95%B0printf.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C语言的标准输入函数scanf及标准输出函数printf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%E8%AF%AD%E8%A8%80/6.%20C%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E5%88%86%E6%94%AF%E8%AF%AD%E5%8F%A5/6.%20C%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E5%88%86%E6%94%AF%E8%AF%AD%E5%8F%A5.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C语言中的分支语句
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%E8%AF%AD%E8%A8%80/7.%20C%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/7.%20C%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C语言中的循环语句
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%E8%AF%AD%E8%A8%80/8.%20C%E8%AF%AD%E8%A8%80%E5%87%BD%E6%95%B0/8.%20C%E8%AF%AD%E8%A8%80%E5%87%BD%E6%95%B0.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C语言函数
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%E8%AF%AD%E8%A8%80/9.%20C%E8%AF%AD%E8%A8%80%E6%8C%87%E9%92%88/9.%20C%E8%AF%AD%E8%A8%80%E6%8C%87%E9%92%88.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C语言指针
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%E8%AF%AD%E8%A8%80/10.%20C%E8%AF%AD%E8%A8%80%E5%AD%97%E7%AC%A6%E5%87%BD%E6%95%B0%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0%E4%B8%8E%E5%86%85%E5%AD%98%E5%87%BD%E6%95%B0/10.%20C%E8%AF%AD%E8%A8%80%E5%AD%97%E7%AC%A6%E5%87%BD%E6%95%B0%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0%E4%B8%8E%E5%86%85%E5%AD%98%E5%87%BD%E6%95%B0.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C语言字符函数、字符串函数与内存函数
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%E8%AF%AD%E8%A8%80/11.%20C%E8%AF%AD%E8%A8%80%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/11.%20C%E8%AF%AD%E8%A8%80%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C语言动态内存管理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%E8%AF%AD%E8%A8%80/12.%20C%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/12.%20C%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C语言文件操作
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%E8%AF%AD%E8%A8%80/13.%20C%E8%AF%AD%E8%A8%80%E7%BC%96%E8%AF%91%E4%B8%8E%E9%93%BE%E6%8E%A5%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89/13.%20C%E8%AF%AD%E8%A8%80%E7%BC%96%E8%AF%91%E4%B8%8E%E9%93%BE%E6%8E%A5%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C语言编译与链接（基础）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../C%E8%AF%AD%E8%A8%80/14.%20C%E8%AF%AD%E8%A8%80%E9%A2%84%E5%A4%84%E7%90%86%EF%BC%88%E9%83%A8%E5%88%86%EF%BC%89/14.%20C%E8%AF%AD%E8%A8%80%E9%A2%84%E5%A4%84%E7%90%86%EF%BC%88%E9%83%A8%E5%88%86%EF%BC%89.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C语言预处理（部分）
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C++
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1.%20C%E8%AF%AD%E8%A8%80%E8%BF%87%E6%B8%A1C%2B%2B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.%20C%E8%AF%AD%E8%A8%80%E8%BF%87%E6%B8%A1C%2B%2B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C语言过渡C++基础知识
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2.%20C%2B%2B%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/2.%20%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++类和对象
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3.%20C%2B%2B%E9%BB%98%E8%AE%A4%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0/3.%20C%2B%2B%E9%BB%98%E8%AE%A4%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++默认成员函数
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4.%20C%2B%2B%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9/4.%20C%2B%2B%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++类和对象相关内容
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5.%20C%2B%2B%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/5.%20C%2B%2B%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++内存管理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.%20C%2B%2B%E6%A8%A1%E7%89%88%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89/6.%20C%2B%2B%E6%A8%A1%E7%89%88%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++模版（基础）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7.%20C%2B%2BSTL%E7%AE%80%E4%BB%8B%E4%B8%8Estring%E7%B1%BB/7.%20C%2B%2BSTL%E7%AE%80%E4%BB%8B%E4%B8%8Estring%E7%B1%BB.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++STL简介与string类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../8.%20string%E7%B1%BB%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/8.%20string%E7%B1%BB%E7%9A%84%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    string类模拟实现
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../9.%20vector%E7%B1%BB/9.%20vector%E7%B1%BB.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vector类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10.%20vector%E7%B1%BB%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/10.%20vector%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vector类模拟实现
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11.%20list%E7%B1%BB/11.%20list%E7%B1%BB.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    list类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../12.%20list%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/12.%20list%E7%B1%BB%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    list类模拟实现
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../13.%20stack%E7%B1%BB/13.%20stack%E7%B1%BB.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stack类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../14.%20queue%E7%B1%BB/14.%20queue%E7%B1%BB.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    queue类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../15.%20stack%E5%92%8Cqueue%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/15.%20stack%E5%92%8Cqueue%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stack和queue模拟实现
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../16.%20priority_queue%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/16.%20priority_queue%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    priority_queue模拟实现
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../17.%20%E5%8F%8D%E5%90%91%E8%BF%AD%E4%BB%A3%E5%99%A8%E8%AE%BE%E8%AE%A1/17.%20reverse_iterator%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    反向迭代器设计
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../18.%20C%2B%2B%E6%A8%A1%E6%9D%BF%EF%BC%88%E9%AB%98%E9%98%B6%EF%BC%89/18.%20C%2B%2B%E6%A8%A1%E6%9D%BF%EF%BC%88%E9%AB%98%E9%98%B6%EF%BC%89.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++模版（高阶）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../19.%20C%2B%2B%E7%BB%A7%E6%89%BF/19.%20C%2B%2B%E7%BB%A7%E6%89%BF.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++继承
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../20.%20C%2B%2B%E5%A4%9A%E6%80%81/20.%20C%2B%2B%E5%A4%9A%E6%80%81.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++多态
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../21.%20set%E7%B1%BB/21.%20set%E7%B1%BB.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    set类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../22.%20map%E7%B1%BB/22.%20map%E7%B1%BB.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    map类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../23.%20map%E5%92%8Cset%E7%B1%BB%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/23.%20map%E5%92%8Cset%E7%B1%BB%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    map和set类模拟实现
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../24.%20unordered_map%E5%92%8Cunordered_set%E7%B1%BB%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/24.%20unordered_map%E5%92%8Cunordered_set%E7%B1%BB%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    unordered_map和unordered_set类模拟实现
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    C++ 11相关新特性
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="C%2B%2B%2011%E7%9B%B8%E5%85%B3%E6%96%B0%E7%89%B9%E6%80%A7.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    C++ 11相关新特性
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      列表初始化
    </span>
  </a>
  
    <nav class="md-nav" aria-label="列表初始化">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      初始化简单变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      初始化容器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decltype" class="md-nav__link">
    <span class="md-ellipsis">
      decltype关键字
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      尾置返回值类型
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usingtypedef" class="md-nav__link">
    <span class="md-ellipsis">
      using与typedef
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c-11_1" class="md-nav__link">
    <span class="md-ellipsis">
      C++ 11新增的容器
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      左值引用和右值引用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="左值引用和右值引用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      左值与右值
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      左值引用与右值引用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      左值引用和右值引用的相互转化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      右值引用的使用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="右值引用的使用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      拷贝构造函数与移动构造函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      赋值重载函数与移动赋值重载函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      元素插入相关函数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      万能引用与完美转发
    </span>
  </a>
  
    <nav class="md-nav" aria-label="万能引用与完美转发">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      万能引用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      完美转发
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c-11_2" class="md-nav__link">
    <span class="md-ellipsis">
      C++ 11新增的两个默认成员函数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="C++ 11新增的两个默认成员函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#default" class="md-nav__link">
    <span class="md-ellipsis">
      生成默认成员函数=default
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete" class="md-nav__link">
    <span class="md-ellipsis">
      不生成默认成员函数=delete
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c-11_3" class="md-nav__link">
    <span class="md-ellipsis">
      C++ 11中的可变参数模版
    </span>
  </a>
  
    <nav class="md-nav" aria-label="C++ 11中的可变参数模版">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      可变参数模版介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      参数包展开
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#emplace" class="md-nav__link">
    <span class="md-ellipsis">
      可变参数模版的应用emplace系列函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#emplacepush" class="md-nav__link">
    <span class="md-ellipsis">
      emplace系列函数和push系列函数的选择
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lambda" class="md-nav__link">
    <span class="md-ellipsis">
      lambda表达式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lambda表达式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      引入
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda_1" class="md-nav__link">
    <span class="md-ellipsis">
      lambda表达式介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda_2" class="md-nav__link">
    <span class="md-ellipsis">
      lambda表达式捕捉列表的传递形式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda_3" class="md-nav__link">
    <span class="md-ellipsis">
      lambda表达式的原理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      包装器
    </span>
  </a>
  
    <nav class="md-nav" aria-label="包装器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      包装器的基本使用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      包装器与重载函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      包装器的使用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      绑定
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../26.%20C%2B%2B%E5%BC%82%E5%B8%B8/26.%20C%2B%2B%E5%BC%82%E5%B8%B8.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++ 异常
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../27.%20%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/27.%20%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++ 智能指针
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../28.%20%E7%89%B9%E6%AE%8A%E7%B1%BB%E8%AE%BE%E8%AE%A1/28.%20%E7%89%B9%E6%AE%8A%E7%B1%BB%E8%AE%BE%E8%AE%A1.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    特殊类设计
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../29.%20C%2B%2B%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/29.%20C%2B%2B%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++中的类型转换
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Java
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Java
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/1.%20Java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/Java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java基础知识
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/2.%20Java%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B/2.%20Java%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java数组类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/3.%20Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%8E%E6%96%B9%E6%B3%95/3.%20Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%8E%E6%96%B9%E6%B3%95.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java面向对象与方法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/4.%20Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%8E%E5%B0%81%E8%A3%85/4.%20Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%8E%E5%B0%81%E8%A3%85.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java面向对象与封装
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/5.%20Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%8E%E7%BB%A7%E6%89%BF/5.%20Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%8E%E7%BB%A7%E6%89%BF.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java面向对象与继承
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/6.%20Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%8E%E6%8E%A5%E5%8F%A3/6.%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%8E%E6%8E%A5%E5%8F%A3.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java面向对象与接口
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/7.%20Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%8E%E5%A4%9A%E6%80%81/7.%20Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%8E%E5%A4%9A%E6%80%81.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java面向对象与多态
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/8.%20Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%8E%E6%9D%83%E9%99%90%E4%BF%AE%E9%A5%B0%E7%AC%A6%E3%80%81final%E3%80%81%E4%BB%A3%E7%A0%81%E5%9D%97%E5%8F%8A%E5%86%85%E9%83%A8%E7%B1%BB/8.%20Java%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%8E%E6%9D%83%E9%99%90%E4%BF%AE%E9%A5%B0%E7%AC%A6%E3%80%81final%E3%80%81%E4%BB%A3%E7%A0%81%E5%9D%97%E5%8F%8A%E5%86%85%E9%83%A8%E7%B1%BB.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java面向对象与权限修饰符、final、代码块及内部类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/9.%20Java%E5%BC%82%E5%B8%B8%E7%B1%BB/9.%20Java%E5%BC%82%E5%B8%B8%E7%B1%BB.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java异常类
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java/10.%20Java%E4%B8%AD%E7%9A%84Object%E7%B1%BB%E5%92%8C%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E3%80%81%E7%BB%8F%E5%85%B8%E6%8E%A5%E5%8F%A3/10.%20Java%E4%B8%AD%E7%9A%84Object%E7%B1%BB%E5%92%8C%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E3%80%81%E7%BB%8F%E5%85%B8%E6%8E%A5%E5%8F%A3.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java中的Object类和常用方法、经典接口
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    JavaScript
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            JavaScript
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaScript%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.%20JavaScript%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/1.%20JavaScript%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JavaScript快速入门
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../JavaScript%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/2.%20JavaScript%E4%B8%8EDOM%E5%9F%BA%E7%A1%80/2.%20JavaScript%E4%B8%8EDOM%E5%9F%BA%E7%A1%80.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JavaScript与DOM基础
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.%20Python%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/1.%20Python%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python快速入门
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    数据结构与算法
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            数据结构与算法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    数据结构
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            数据结构
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1.%20%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%92%8C%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/1.%20%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E4%B8%8E%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据结构基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/2.%20%E9%A1%BA%E5%BA%8F%E8%A1%A8/2.%20%E9%A1%BA%E5%BA%8F%E8%A1%A8.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    顺序结构与顺序表
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/3.%20%E9%93%BE%E8%A1%A8/3.%20%E9%93%BE%E8%A1%A8.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    链表
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/4.%20%E6%A0%88/4.%20%E6%A0%88.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    栈
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/5.%20%E9%98%9F%E5%88%97/5.%20%E9%98%9F%E5%88%97.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    队列
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/6.%20%E6%A0%91%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/6.%20%E6%A0%91%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    树的基本概念
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/7.%20%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89/7.%20%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    二叉树（基础）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/8.%20%E5%A0%86/8.%20%E5%A0%86.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    堆
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/9.%20%E6%8E%92%E5%BA%8F/9.%20%E6%8E%92%E5%BA%8F.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    排序
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/10.%20%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/10.%20%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    二叉搜索树
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/11.%20AVL%E6%A0%91/11.%20AVL%E6%A0%91.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AVL树
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/12.%20%E7%BA%A2%E9%BB%91%E6%A0%91/12.%20%E7%BA%A2%E9%BB%91%E6%A0%91.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    红黑树
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/13.%20%E5%93%88%E5%B8%8C%E8%A1%A8/13.%20%E5%93%88%E5%B8%8C%E8%A1%A8.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    哈希表
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    算法
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            算法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%AE%97%E6%B3%95/1.%20%E5%8F%8C%E6%8C%87%E9%92%88%E7%AE%97%E6%B3%95/1.%20%E5%8F%8C%E6%8C%87%E9%92%88%E7%AE%97%E6%B3%95.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    双指针算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%AE%97%E6%B3%95/2.%20%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E7%AE%97%E6%B3%95/2.%20%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E7%AE%97%E6%B3%95.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    滑动窗口算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_3" >
        
          
          <label class="md-nav__link" for="__nav_3_2_3" id="__nav_3_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    其他算法
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2_3">
            <span class="md-nav__icon md-icon"></span>
            其他算法
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%AE%97%E6%B3%95/%E5%85%B6%E4%BB%96%E7%AE%97%E6%B3%95/%E6%B3%A2%E5%85%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%8E%E9%80%86%E6%B3%A2%E5%85%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E6%B3%A2%E5%85%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%8E%E9%80%86%E6%B3%A2%E5%85%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    波兰表达式与逆波兰表达式
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%AE%97%E6%B3%95/%E5%85%B6%E4%BB%96%E7%AE%97%E6%B3%95/%E9%9C%8D%E5%B0%94%E6%B3%95%E5%88%99/%E9%9C%8D%E5%B0%94%E6%B3%95%E5%88%99.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    霍尔法则
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%AE%97%E6%B3%95/%E5%85%B6%E4%BB%96%E7%AE%97%E6%B3%95/%E6%95%B0%E5%AD%97%E5%92%8C%E4%B8%8E%E6%95%B0%E5%AD%97%E6%A0%B9/%E6%95%B0%E5%AD%97%E5%92%8C%E4%B8%8E%E6%95%B0%E5%AD%97%E6%A0%B9.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数字和与数字根
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Linux
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Linux
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Linux/1.%20Linux%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E5%92%8C%E6%8C%87%E4%BB%A4/1.%20Linux%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E5%92%8C%E6%8C%87%E4%BB%A4.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux常用选项和指令
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Linux/2.%20Linux%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3/2.%20Linux%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux权限相关
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Linux/3.%20CentOS%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E4%B8%8EVim%E4%BD%BF%E7%94%A8/3.%20CentOS%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E4%B8%8EVim%E4%BD%BF%E7%94%A8.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CentOS软件安装与vim使用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Linux/4.%20Linux%E4%B8%8B%E7%9A%84gcc%E4%B8%8Egdb/4.%20Linux%E4%B8%8B%E7%9A%84gcc%E4%B8%8Egdb.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux下的gcc与gdb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Linux/5.%20Linux%E4%B8%8B%E7%9A%84Makefile%E4%B8%8E%E8%BF%9B%E5%BA%A6%E6%9D%A1%E7%A8%8B%E5%BA%8F/5.%20Linux%E4%B8%8B%E7%9A%84Makefile%E4%B8%8E%E8%BF%9B%E5%BA%A6%E6%9D%A1%E7%A8%8B%E5%BA%8F.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux下的Makefile与进度条程序
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    HTML与CSS
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            HTML与CSS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../HTML%E4%B8%8ECSS/HTML%E4%B8%8ECSS.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTML与CSS基础知识笔记
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../HTML%E4%B8%8ECSS/Emmet%E8%A1%A8%E8%BE%BE%E5%BC%8F/Emmet%E8%A1%A8%E8%BE%BE%E5%BC%8F.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTML与CSS中的Emmet表达式
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    MySQL
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            MySQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MySQL/MySQL%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/MySQL%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MySQL基础
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    编程题目练习总结
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            编程题目练习总结
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%BC%96%E7%A8%8B%E9%A2%98%E7%9B%AE%E7%BB%83%E4%B9%A0%E6%80%BB%E7%BB%93/%E6%A8%A1%E6%8B%9F%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%95%B4%E6%95%B0%E5%87%BD%E6%95%B0/%E6%A8%A1%E6%8B%9F%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%95%B4%E6%95%B0%E5%87%BD%E6%95%B0.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    模拟字符串转整数函数
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%BD%91%E9%A1%B5%E7%BC%96%E8%BE%91%E5%99%A8/editor.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    网页编辑器
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E4%BD%9C%E8%80%85/%E4%BD%9C%E8%80%85.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    联系作者
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      列表初始化
    </span>
  </a>
  
    <nav class="md-nav" aria-label="列表初始化">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      初始化简单变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      初始化容器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decltype" class="md-nav__link">
    <span class="md-ellipsis">
      decltype关键字
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      尾置返回值类型
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usingtypedef" class="md-nav__link">
    <span class="md-ellipsis">
      using与typedef
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c-11_1" class="md-nav__link">
    <span class="md-ellipsis">
      C++ 11新增的容器
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      左值引用和右值引用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="左值引用和右值引用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      左值与右值
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      左值引用与右值引用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      左值引用和右值引用的相互转化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      右值引用的使用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="右值引用的使用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      拷贝构造函数与移动构造函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      赋值重载函数与移动赋值重载函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      元素插入相关函数
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      万能引用与完美转发
    </span>
  </a>
  
    <nav class="md-nav" aria-label="万能引用与完美转发">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      万能引用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      完美转发
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c-11_2" class="md-nav__link">
    <span class="md-ellipsis">
      C++ 11新增的两个默认成员函数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="C++ 11新增的两个默认成员函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#default" class="md-nav__link">
    <span class="md-ellipsis">
      生成默认成员函数=default
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete" class="md-nav__link">
    <span class="md-ellipsis">
      不生成默认成员函数=delete
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c-11_3" class="md-nav__link">
    <span class="md-ellipsis">
      C++ 11中的可变参数模版
    </span>
  </a>
  
    <nav class="md-nav" aria-label="C++ 11中的可变参数模版">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      可变参数模版介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      参数包展开
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#emplace" class="md-nav__link">
    <span class="md-ellipsis">
      可变参数模版的应用emplace系列函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#emplacepush" class="md-nav__link">
    <span class="md-ellipsis">
      emplace系列函数和push系列函数的选择
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lambda" class="md-nav__link">
    <span class="md-ellipsis">
      lambda表达式
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lambda表达式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      引入
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda_1" class="md-nav__link">
    <span class="md-ellipsis">
      lambda表达式介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda_2" class="md-nav__link">
    <span class="md-ellipsis">
      lambda表达式捕捉列表的传递形式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lambda_3" class="md-nav__link">
    <span class="md-ellipsis">
      lambda表达式的原理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      包装器
    </span>
  </a>
  
    <nav class="md-nav" aria-label="包装器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      包装器的基本使用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      包装器与重载函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      包装器的使用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      绑定
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="c-11">C++ 11相关新特性<a class="headerlink" href="#c-11" title="Permanent link">&para;</a></h1>
<h2 id="_1">列表初始化<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<h3 id="_2">初始化简单变量<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>在C语言和C++98中，对一中类型的变量进行初始化时，主要使用赋值符号与初始化值，如果是一个数组或者结构体等具有多个成员的变量初始化时，可以使用<code>{}</code>进行初始化</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">point</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="p">{</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="p">};</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="p">{</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">    </span><span class="c1">// 初始化一个内置类型变量</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">    </span><span class="c1">// 初始化一个数组</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">data</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">    </span><span class="c1">// 初始化结构</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">    </span><span class="n">point</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>上面的代码中需要注意对于一个数组和结构来说，为了兼容C语言，默认是使用<code>{}</code>进行初始化，此时不算作列表初始化</p>
<p>在C++11中，可以使用<code>{}</code>对所有类型的变量进行初始化，并且可以省略赋值符号</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">point</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="p">{</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="p">;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="p">};</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="p">{</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">    </span><span class="c1">// 列表初始化并省略赋值符号</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a1</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">data1</span><span class="p">[]{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">    </span><span class="n">point</span><span class="w"> </span><span class="n">p1</span><span class="p">{</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>需要注意，如果使用了列表初始化，则不可以出现部分用于初始化的值赋值给变量后出现数据丢失的情况，例如<code>double</code>的值赋值给<code>int</code>的变量</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="c1">// double转int</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="kt">double</span><span class="w"> </span><span class="n">num1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3.14</span><span class="p">;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="kt">int</span><span class="w"> </span><span class="n">a3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">num1</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="c1">// long long 转 int</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="kt">long</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">648797L</span><span class="n">L</span><span class="p">;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="kt">int</span><span class="w"> </span><span class="n">a2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">num</span><span class="p">};</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="c1">// long 转 int</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="c1">// 正常编译</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="kt">long</span><span class="w"> </span><span class="n">num2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">648797L</span><span class="p">;</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="kt">int</span><span class="w"> </span><span class="n">a4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">num2</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="n">报错信息</span><span class="err">：</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="n">conversion</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="err">&#39;</span><span class="kr">__int64</span><span class="err">&#39;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="err">&#39;</span><span class="kt">int</span><span class="err">&#39;</span><span class="w"> </span><span class="k">requires</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">narrowing</span><span class="w"> </span><span class="n">conversion</span><span class="w">     </span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="n">conversion</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="err">&#39;</span><span class="kt">double</span><span class="err">&#39;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="err">&#39;</span><span class="kt">int</span><span class="err">&#39;</span><span class="w"> </span><span class="k">requires</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">narrowing</span><span class="w"> </span><span class="n">conversion</span>
</code></pre></div></td></tr></table></div>
<h3 id="_3">初始化容器<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>有了列表初始化后，容器的初始化可以变得更加简单，对比下面的初始化方式</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="p">{</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">    </span><span class="c1">// 初始化vector</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">    </span><span class="c1">// C++ 98的初始化</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">data</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">    </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">v</span><span class="p">;</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">        </span><span class="n">v</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="w">    </span><span class="c1">// C++ 11的初始化</span>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="w">    </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">v</span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>对于map来说，对比下面的初始化方式</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="p">{</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">    </span><span class="c1">// 初始化map</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">    </span><span class="c1">// C++ 98的初始化</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">    </span><span class="n">map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">m</span><span class="p">;</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">    </span><span class="n">m</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">    </span><span class="n">m</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">    </span><span class="n">m</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">    </span><span class="n">m</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">    </span><span class="n">m</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="w">    </span><span class="c1">// C++ 11的初始化</span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="w">    </span><span class="n">map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">m1</span><span class="p">{{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="w"> </span><span class="p">}};</span>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a>
<a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>在上面的代码中，对于C++ 98的初始化来说，通过多参数构造的隐式类型转换作为参数传递给<code>insert()</code>函数，而C++ 11中，结合了类型转换已经列表初始化对map进行初始化</p>
<p>列表初始化有以下几点好处：</p>
<ol>
<li>方便，基本上可以替代普通括号初始化</li>
<li>可以使用初始化列表接受任意长度</li>
<li>可以防止类型窄化(narrowing conversion)，避免精度丢失的隐式类型转换</li>
</ol>
<h2 id="decltype"><code>decltype</code>关键字<a class="headerlink" href="#decltype" title="Permanent link">&para;</a></h2>
<p>前面声明变量时使用<code>auto</code>关键字，根据赋值符号右侧类型推导变量的类型，但是如果没有赋值，<code>auto</code>此时不可以进行推导；为了知道某一个变量的类型，可以使用<code>typeid(变量).name()</code>进行获取，直接打印即可查看指定变量的类型</p>
<p>但是上面两种方式都无法做到根据已有变量/常量的类型创建新的变量，为了解决这个问题，在C++ 11中新增了<code>decltype</code>关键字</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="p">{</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">    </span><span class="c1">// 获取普通变量类型创建变量</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">    </span><span class="k">decltype</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="n">x1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">    </span><span class="c1">// 获取表达式的值类型创建变量</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">    </span><span class="k">decltype</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="n">x2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">    </span><span class="k">decltype</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">2.1</span><span class="p">)</span><span class="w"> </span><span class="n">x3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="k">typeid</span><span class="p">(</span><span class="n">x1</span><span class="p">).</span><span class="n">name</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="k">typeid</span><span class="p">(</span><span class="n">x2</span><span class="p">).</span><span class="n">name</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="k">typeid</span><span class="p">(</span><span class="n">x3</span><span class="p">).</span><span class="n">name</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="p">}</span>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a><span class="n">输出结果</span><span class="err">：</span>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="kt">int</span>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a><span class="kt">int</span>
<a id="__codelineno-5-20" name="__codelineno-5-20"></a><span class="kt">double</span>
</code></pre></div></td></tr></table></div>
<h2 id="_4">尾置返回值类型<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<p>在C++ 98中，函数的定义主要结构如下：</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span>
<span class="normal"><a href="#__codelineno-6-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="n">返回值类型</span><span class="w"> </span><span class="nf">函数名</span><span class="p">(</span><span class="n">形式参数1</span><span class="p">,</span><span class="w"> </span><span class="n">形式参数2</span><span class="p">,</span><span class="w"> </span><span class="p">...)</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="p">{</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w">    </span><span class="n">函数体</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
但是如果返回值类型比较长，例如返回一个数组指针<code>int (*)[10]</code>时，上面的写法就会不便于阅读：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span>
<span class="normal"><a href="#__codelineno-7-4">4</a></span>
<span class="normal"><a href="#__codelineno-7-5">5</a></span>
<span class="normal"><a href="#__codelineno-7-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="kt">int</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)[</span><span class="mi">10</span><span class="p">]</span><span class="w"> </span><span class="n">func</span><span class="p">()</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="p">{</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">arr</span><span class="p">;</span><span class="w"> </span><span class="c1">// 返回一个数组的首地址</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>而在C++ 11中，为了更好的可读性，可以使用<code>-&gt;</code>结合对应的函数返回值放置于形参列表后方，而在原来的函数名前方需要使用<code>auto</code>，所以下面的代码可以修改为：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span>
<span class="normal"><a href="#__codelineno-8-5">5</a></span>
<span class="normal"><a href="#__codelineno-8-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">func</span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)[</span><span class="mi">10</span><span class="p">]</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="p">{</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">arr</span><span class="p">;</span><span class="c1">// 返回一个数组的首地址</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>也可以结合<code>decltype</code>关键字，如下：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span>
<span class="normal"><a href="#__codelineno-9-3">3</a></span>
<span class="normal"><a href="#__codelineno-9-4">4</a></span>
<span class="normal"><a href="#__codelineno-9-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">U</span><span class="o">&gt;</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="k">auto</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">decltype</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="p">{</span><span class="w">    </span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="usingtypedef"><code>using</code>与<code>typedef</code><a class="headerlink" href="#usingtypedef" title="Permanent link">&para;</a></h2>
<p><code>using</code>和<code>typedef</code>都可以用来为已有的类型定义一个新的名称。</p>
<p>二者最主要的区别在于，<code>using</code>可以用来定义模板别名，<code>using</code>还可以引入命名空间，而<code>typedef</code>不能</p>
<ol>
<li>
<p><code>typedef</code>主要用于给类型定义别名，但是它不能用于模板别名。
    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="k">typedef</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">ulong</span><span class="p">;</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="k">typedef</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">FuncPtr</span><span class="p">)(</span><span class="kt">double</span><span class="p">);</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p><code>using</code>可以取代<code>typedef</code>的功能，语法相对简洁。
    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="k">using</span><span class="w"> </span><span class="n">ulong</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="p">;</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="k">using</span><span class="w"> </span><span class="n">FuncPtr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)(</span><span class="kt">double</span><span class="p">);</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p>对于模板别名，<code>using</code>显得非常强大且直观。</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="k">using</span><span class="w"> </span><span class="n">Vec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>作用范围：<code>using</code>还可以用于命名空间引入，<code>typedef</code>没有此功能。
    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span>
<span class="normal"><a href="#__codelineno-13-3">3</a></span>
<span class="normal"><a href="#__codelineno-13-4">4</a></span>
<span class="normal"><a href="#__codelineno-13-5">5</a></span>
<span class="normal"><a href="#__codelineno-13-6">6</a></span>
<span class="normal"><a href="#__codelineno-13-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">LongNamespaceName</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="p">}</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="c1">// using namespace LongNamespaceName; 直接引入命名空间</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="k">using</span><span class="w"> </span><span class="n">LNN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LongNamespaceName</span><span class="p">;</span><span class="c1">// 引入命名空间并为命名空间取别名</span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="n">LNN</span><span class="o">::</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span><span class="w"> </span><span class="c1">// 相当于 LongNamespaceName::value</span>
</code></pre></div></td></tr></table></div></p>
</li>
</ol>
<p>总之，更推荐使用<code>using</code>，尤其是当你处理模板时。在现代 C++ 代码规范中，C++11 之后，许多代码规范建议优先使用<code>using</code>而不是<code>typedef</code>。这证明了在实际应用和代码维护中，<code>using</code>更具有优势。</p>
<h2 id="c-11_1">C++ 11新增的容器<a class="headerlink" href="#c-11_1" title="Permanent link">&para;</a></h2>
<p>下面红色标记的容器均为C++11新增的容器</p>
<p><a class="glightbox" href="C++ 11相关新特性.assets\image.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="C++ 11相关新特性.assets\image.png"></a></p>
<p><code>&lt;array&gt;</code>：封装的是C语言静态数组，本质还是普通数组，只是为了便于控制数组越界等问题，因为一般的数组越界读写在编译阶段是不容易检测出来的</p>
<p><code>&lt;forward_list&gt;</code>：单链表，这个单链表没有尾插和尾删，因为开销大</p>
<p><code>&lt;unordered_map&gt;</code>和<code>&lt;unordered_set&gt;</code>：封装的是哈希表</p>
<h2 id="_5">左值引用和右值引用<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<h3 id="_6">左值与右值<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>左值代表赋值符号左侧的值，可以直接取地址，一般为变量，并且一般情况下可以修改（被<code>const</code>修饰的左值不可以修改）</p>
<p>右值代表赋值符号右侧的值，不可以直接取地址，一般为内置类型常量、函数返回值和表达式的值</p>
<p>右值不可以出现在赋值符号的左侧，否则会报错为不可修改的左值，但是左值可以出现在右侧，此时是将左值中的值赋值给赋值符号左侧的新左值，例如<code>int b = 0; a = b;</code></p>
<p>右值可以分为两种</p>
<ol>
<li>纯右值：一般为内置类型常量</li>
<li>将亡值：一般为函数返回值中的临时对象、匿名对象等即将被销毁的值</li>
</ol>
<h3 id="_7">左值引用与右值引用<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>左值引用：即为对左值的引用，在类型后加一个<code>&amp;</code>即可代表左值引用类型，例如<code>int num = 0; int&amp; ref = num;</code> 中<code>ref</code>为左值<code>num</code>的别名，表达式<code>int&amp; ref = num;</code>中的<code>ref</code>和<code>num</code>均为左值</p>
<p>右值引用：即为对右值的别名，在类型后加两个<code>&amp;</code>即可代表右值引用类型，例如<code>int&amp;&amp; ref = 1;</code>，表达式中的<code>ref</code>为对右值引用的左值，1为右值</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>一般情况下，左值引用的对象不可以是常量，因为临时变量具有常性，为了解决这个问题，可以使用<code>const</code>修饰左值引用，例如<code>const int&amp; num = 1;</code></p>
</div>
<h3 id="_8">左值引用和右值引用的相互转化<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>左值引用可以通过强制转换转化为右值引用，也可以通过<code>move()</code>函数进行变换，例如下面的代码</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span>
<span class="normal"><a href="#__codelineno-14-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="p">{</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">    </span><span class="c1">// 左值引用</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">    </span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">num</span><span class="p">;</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">    </span><span class="c1">// 将左值引用强制转换为右值引用</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">    </span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="p">)</span><span class="n">r1</span><span class="p">;</span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="w">    </span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">r3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">move</span><span class="p">(</span><span class="n">r1</span><span class="p">);</span>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>右值引用可以通过强制转换转化成左值引用，例如下面的代码</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-15-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-15-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-15-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span>
<span class="normal"><a href="#__codelineno-15-12">12</a></span>
<span class="normal"><a href="#__codelineno-15-13">13</a></span>
<span class="normal"><a href="#__codelineno-15-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="p">{</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="w">    </span><span class="c1">// 左值引用</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="w">    </span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">num</span><span class="p">;</span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="w">    </span><span class="c1">// 将左值引用强制转换为右值引用</span>
<a id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="w">    </span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">r2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="p">)</span><span class="n">r1</span><span class="p">;</span>
<a id="__codelineno-15-9" name="__codelineno-15-9"></a>
<a id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="w">    </span><span class="c1">// 将右值引用强制转化为左值引用</span>
<a id="__codelineno-15-11" name="__codelineno-15-11"></a><span class="w">    </span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">r3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;</span><span class="p">)</span><span class="n">r2</span><span class="p">;</span>
<a id="__codelineno-15-12" name="__codelineno-15-12"></a>
<a id="__codelineno-15-13" name="__codelineno-15-13"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-15-14" name="__codelineno-15-14"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>之所以可以通过强制转换实现左值引用和右值引用之间的相互转换是因为左值引用和右值引用在底层实际上都是一样的，只是语法层面对二者进行了更严格的定义，只要基本类型相同就可以通过强制转换进行改变，参考下图的汇编代码：</p>
<p><a class="glightbox" href="C++ 11相关新特性.assets\image1.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="C++ 11相关新特性.assets\image1.png"></a></p>
<h3 id="_9">右值引用的使用<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>以模拟实现的string为例</p>
<details class="quote">
<summary>模拟实现string代码</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">  1</a></span>
<span class="normal"><a href="#__codelineno-16-2">  2</a></span>
<span class="normal"><a href="#__codelineno-16-3">  3</a></span>
<span class="normal"><a href="#__codelineno-16-4">  4</a></span>
<span class="normal"><a href="#__codelineno-16-5">  5</a></span>
<span class="normal"><a href="#__codelineno-16-6">  6</a></span>
<span class="normal"><a href="#__codelineno-16-7">  7</a></span>
<span class="normal"><a href="#__codelineno-16-8">  8</a></span>
<span class="normal"><a href="#__codelineno-16-9">  9</a></span>
<span class="normal"><a href="#__codelineno-16-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-16-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-16-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-16-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-16-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-16-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-16-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-16-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-16-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-16-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-16-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-16-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-16-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-16-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-16-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-16-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-16-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-16-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-16-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-16-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-16-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-16-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-16-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-16-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-16-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-16-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-16-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-16-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-16-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-16-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-16-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-16-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-16-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-16-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-16-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-16-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-16-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-16-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-16-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-16-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-16-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-16-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-16-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-16-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-16-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-16-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-16-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-16-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-16-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-16-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-16-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-16-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-16-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-16-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-16-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-16-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-16-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-16-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-16-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-16-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-16-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-16-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-16-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-16-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-16-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-16-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-16-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-16-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-16-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-16-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-16-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-16-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-16-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-16-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-16-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-16-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-16-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-16-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-16-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-16-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-16-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-16-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-16-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-16-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-16-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-16-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-16-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-16-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-16-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-16-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-16-100">100</a></span>
<span class="normal"><a href="#__codelineno-16-101">101</a></span>
<span class="normal"><a href="#__codelineno-16-102">102</a></span>
<span class="normal"><a href="#__codelineno-16-103">103</a></span>
<span class="normal"><a href="#__codelineno-16-104">104</a></span>
<span class="normal"><a href="#__codelineno-16-105">105</a></span>
<span class="normal"><a href="#__codelineno-16-106">106</a></span>
<span class="normal"><a href="#__codelineno-16-107">107</a></span>
<span class="normal"><a href="#__codelineno-16-108">108</a></span>
<span class="normal"><a href="#__codelineno-16-109">109</a></span>
<span class="normal"><a href="#__codelineno-16-110">110</a></span>
<span class="normal"><a href="#__codelineno-16-111">111</a></span>
<span class="normal"><a href="#__codelineno-16-112">112</a></span>
<span class="normal"><a href="#__codelineno-16-113">113</a></span>
<span class="normal"><a href="#__codelineno-16-114">114</a></span>
<span class="normal"><a href="#__codelineno-16-115">115</a></span>
<span class="normal"><a href="#__codelineno-16-116">116</a></span>
<span class="normal"><a href="#__codelineno-16-117">117</a></span>
<span class="normal"><a href="#__codelineno-16-118">118</a></span>
<span class="normal"><a href="#__codelineno-16-119">119</a></span>
<span class="normal"><a href="#__codelineno-16-120">120</a></span>
<span class="normal"><a href="#__codelineno-16-121">121</a></span>
<span class="normal"><a href="#__codelineno-16-122">122</a></span>
<span class="normal"><a href="#__codelineno-16-123">123</a></span>
<span class="normal"><a href="#__codelineno-16-124">124</a></span>
<span class="normal"><a href="#__codelineno-16-125">125</a></span>
<span class="normal"><a href="#__codelineno-16-126">126</a></span>
<span class="normal"><a href="#__codelineno-16-127">127</a></span>
<span class="normal"><a href="#__codelineno-16-128">128</a></span>
<span class="normal"><a href="#__codelineno-16-129">129</a></span>
<span class="normal"><a href="#__codelineno-16-130">130</a></span>
<span class="normal"><a href="#__codelineno-16-131">131</a></span>
<span class="normal"><a href="#__codelineno-16-132">132</a></span>
<span class="normal"><a href="#__codelineno-16-133">133</a></span>
<span class="normal"><a href="#__codelineno-16-134">134</a></span>
<span class="normal"><a href="#__codelineno-16-135">135</a></span>
<span class="normal"><a href="#__codelineno-16-136">136</a></span>
<span class="normal"><a href="#__codelineno-16-137">137</a></span>
<span class="normal"><a href="#__codelineno-16-138">138</a></span>
<span class="normal"><a href="#__codelineno-16-139">139</a></span>
<span class="normal"><a href="#__codelineno-16-140">140</a></span>
<span class="normal"><a href="#__codelineno-16-141">141</a></span>
<span class="normal"><a href="#__codelineno-16-142">142</a></span>
<span class="normal"><a href="#__codelineno-16-143">143</a></span>
<span class="normal"><a href="#__codelineno-16-144">144</a></span>
<span class="normal"><a href="#__codelineno-16-145">145</a></span>
<span class="normal"><a href="#__codelineno-16-146">146</a></span>
<span class="normal"><a href="#__codelineno-16-147">147</a></span>
<span class="normal"><a href="#__codelineno-16-148">148</a></span>
<span class="normal"><a href="#__codelineno-16-149">149</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">simulate_string</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="p">{</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">    </span><span class="k">class</span><span class="w"> </span><span class="nc">string</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">    </span><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">        </span><span class="k">typedef</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">iterator</span><span class="p">;</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">        </span><span class="n">iterator</span><span class="w"> </span><span class="nf">begin</span><span class="p">()</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">_str</span><span class="p">;</span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">        </span><span class="n">iterator</span><span class="w"> </span><span class="nf">end</span><span class="p">()</span>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">_str</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_size</span><span class="p">;</span>
<a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-15" name="__codelineno-16-15"></a>
<a id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="w">        </span><span class="k">typedef</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">const_iterator</span><span class="p">;</span>
<a id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="w">        </span><span class="n">const_iterator</span><span class="w"> </span><span class="nf">begin</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<a id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">_str</span><span class="p">;</span>
<a id="__codelineno-16-20" name="__codelineno-16-20"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-21" name="__codelineno-16-21"></a>
<a id="__codelineno-16-22" name="__codelineno-16-22"></a><span class="w">        </span><span class="n">const_iterator</span><span class="w"> </span><span class="nf">end</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<a id="__codelineno-16-23" name="__codelineno-16-23"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-16-24" name="__codelineno-16-24"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">_str</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_size</span><span class="p">;</span>
<a id="__codelineno-16-25" name="__codelineno-16-25"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-26" name="__codelineno-16-26"></a>
<a id="__codelineno-16-27" name="__codelineno-16-27"></a><span class="w">        </span><span class="n">string</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">)</span>
<a id="__codelineno-16-28" name="__codelineno-16-28"></a><span class="w">            </span><span class="o">:</span><span class="n">_size</span><span class="p">(</span><span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">))</span>
<a id="__codelineno-16-29" name="__codelineno-16-29"></a><span class="w">            </span><span class="p">,</span><span class="w"> </span><span class="n">_capacity</span><span class="p">(</span><span class="n">_size</span><span class="p">)</span>
<a id="__codelineno-16-30" name="__codelineno-16-30"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-16-31" name="__codelineno-16-31"></a><span class="w">            </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;string(char* str)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-16-32" name="__codelineno-16-32"></a><span class="w">            </span><span class="n">_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">char</span><span class="p">[</span><span class="n">_capacity</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span>
<a id="__codelineno-16-33" name="__codelineno-16-33"></a><span class="w">            </span><span class="n">strcpy</span><span class="p">(</span><span class="n">_str</span><span class="p">,</span><span class="w"> </span><span class="n">str</span><span class="p">);</span>
<a id="__codelineno-16-34" name="__codelineno-16-34"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-35" name="__codelineno-16-35"></a>
<a id="__codelineno-16-36" name="__codelineno-16-36"></a><span class="w">        </span><span class="c1">// s1.swap(s2)</span>
<a id="__codelineno-16-37" name="__codelineno-16-37"></a><span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="n">swap</span><span class="p">(</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">s</span><span class="p">)</span>
<a id="__codelineno-16-38" name="__codelineno-16-38"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-16-39" name="__codelineno-16-39"></a><span class="w">            </span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">_str</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">_str</span><span class="p">);</span>
<a id="__codelineno-16-40" name="__codelineno-16-40"></a><span class="w">            </span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">_size</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">_size</span><span class="p">);</span>
<a id="__codelineno-16-41" name="__codelineno-16-41"></a><span class="w">            </span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">_capacity</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">_capacity</span><span class="p">);</span>
<a id="__codelineno-16-42" name="__codelineno-16-42"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-43" name="__codelineno-16-43"></a>
<a id="__codelineno-16-44" name="__codelineno-16-44"></a><span class="w">        </span><span class="c1">// 拷贝构造</span>
<a id="__codelineno-16-45" name="__codelineno-16-45"></a><span class="w">        </span><span class="n">string</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">s</span><span class="p">)</span>
<a id="__codelineno-16-46" name="__codelineno-16-46"></a><span class="w">            </span><span class="o">:</span><span class="n">_str</span><span class="p">(</span><span class="k">nullptr</span><span class="p">)</span>
<a id="__codelineno-16-47" name="__codelineno-16-47"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-16-48" name="__codelineno-16-48"></a><span class="w">            </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;string(const string&amp; s) -- 深拷贝&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-16-49" name="__codelineno-16-49"></a>
<a id="__codelineno-16-50" name="__codelineno-16-50"></a><span class="w">            </span><span class="n">reserve</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">_capacity</span><span class="p">);</span>
<a id="__codelineno-16-51" name="__codelineno-16-51"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">ch</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="p">)</span>
<a id="__codelineno-16-52" name="__codelineno-16-52"></a><span class="w">            </span><span class="p">{</span>
<a id="__codelineno-16-53" name="__codelineno-16-53"></a><span class="w">                </span><span class="n">push_back</span><span class="p">(</span><span class="n">ch</span><span class="p">);</span>
<a id="__codelineno-16-54" name="__codelineno-16-54"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-16-55" name="__codelineno-16-55"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-56" name="__codelineno-16-56"></a>
<a id="__codelineno-16-57" name="__codelineno-16-57"></a><span class="w">        </span><span class="c1">// 赋值重载</span>
<a id="__codelineno-16-58" name="__codelineno-16-58"></a><span class="w">        </span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">s</span><span class="p">)</span>
<a id="__codelineno-16-59" name="__codelineno-16-59"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-16-60" name="__codelineno-16-60"></a><span class="w">            </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;string&amp; operator=(const string&amp; s) -- 深拷贝&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-16-61" name="__codelineno-16-61"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s</span><span class="p">)</span>
<a id="__codelineno-16-62" name="__codelineno-16-62"></a><span class="w">            </span><span class="p">{</span>
<a id="__codelineno-16-63" name="__codelineno-16-63"></a><span class="w">                </span><span class="n">_str</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;\0&#39;</span><span class="p">;</span>
<a id="__codelineno-16-64" name="__codelineno-16-64"></a><span class="w">                </span><span class="n">_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-16-65" name="__codelineno-16-65"></a>
<a id="__codelineno-16-66" name="__codelineno-16-66"></a><span class="w">                </span><span class="n">reserve</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">_capacity</span><span class="p">);</span>
<a id="__codelineno-16-67" name="__codelineno-16-67"></a><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">ch</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">s</span><span class="p">)</span>
<a id="__codelineno-16-68" name="__codelineno-16-68"></a><span class="w">                </span><span class="p">{</span>
<a id="__codelineno-16-69" name="__codelineno-16-69"></a><span class="w">                    </span><span class="n">push_back</span><span class="p">(</span><span class="n">ch</span><span class="p">);</span>
<a id="__codelineno-16-70" name="__codelineno-16-70"></a><span class="w">                </span><span class="p">}</span>
<a id="__codelineno-16-71" name="__codelineno-16-71"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-16-72" name="__codelineno-16-72"></a>
<a id="__codelineno-16-73" name="__codelineno-16-73"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span>
<a id="__codelineno-16-74" name="__codelineno-16-74"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-75" name="__codelineno-16-75"></a>
<a id="__codelineno-16-76" name="__codelineno-16-76"></a><span class="w">        </span><span class="o">~</span><span class="n">string</span><span class="p">()</span>
<a id="__codelineno-16-77" name="__codelineno-16-77"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-16-78" name="__codelineno-16-78"></a><span class="w">            </span><span class="k">delete</span><span class="p">[]</span><span class="w"> </span><span class="n">_str</span><span class="p">;</span>
<a id="__codelineno-16-79" name="__codelineno-16-79"></a><span class="w">            </span><span class="n">_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<a id="__codelineno-16-80" name="__codelineno-16-80"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-81" name="__codelineno-16-81"></a>
<a id="__codelineno-16-82" name="__codelineno-16-82"></a><span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="n">reserve</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>
<a id="__codelineno-16-83" name="__codelineno-16-83"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-16-84" name="__codelineno-16-84"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">_capacity</span><span class="p">)</span>
<a id="__codelineno-16-85" name="__codelineno-16-85"></a><span class="w">            </span><span class="p">{</span>
<a id="__codelineno-16-86" name="__codelineno-16-86"></a><span class="w">                </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">char</span><span class="p">[</span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span>
<a id="__codelineno-16-87" name="__codelineno-16-87"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_str</span><span class="p">)</span>
<a id="__codelineno-16-88" name="__codelineno-16-88"></a><span class="w">                </span><span class="p">{</span>
<a id="__codelineno-16-89" name="__codelineno-16-89"></a><span class="w">                    </span><span class="n">strcpy</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span><span class="w"> </span><span class="n">_str</span><span class="p">);</span>
<a id="__codelineno-16-90" name="__codelineno-16-90"></a><span class="w">                    </span><span class="k">delete</span><span class="p">[]</span><span class="w"> </span><span class="n">_str</span><span class="p">;</span>
<a id="__codelineno-16-91" name="__codelineno-16-91"></a><span class="w">                </span><span class="p">}</span>
<a id="__codelineno-16-92" name="__codelineno-16-92"></a><span class="w">                </span><span class="n">_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span>
<a id="__codelineno-16-93" name="__codelineno-16-93"></a><span class="w">                </span><span class="n">_capacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>
<a id="__codelineno-16-94" name="__codelineno-16-94"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-16-95" name="__codelineno-16-95"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-96" name="__codelineno-16-96"></a>
<a id="__codelineno-16-97" name="__codelineno-16-97"></a><span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="n">push_back</span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">ch</span><span class="p">)</span>
<a id="__codelineno-16-98" name="__codelineno-16-98"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-16-99" name="__codelineno-16-99"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_size</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">_capacity</span><span class="p">)</span>
<a id="__codelineno-16-100" name="__codelineno-16-100"></a><span class="w">            </span><span class="p">{</span>
<a id="__codelineno-16-101" name="__codelineno-16-101"></a><span class="w">                </span><span class="kt">size_t</span><span class="w"> </span><span class="n">newcapacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_capacity</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">_capacity</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<a id="__codelineno-16-102" name="__codelineno-16-102"></a><span class="w">                </span><span class="n">reserve</span><span class="p">(</span><span class="n">newcapacity</span><span class="p">);</span>
<a id="__codelineno-16-103" name="__codelineno-16-103"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-16-104" name="__codelineno-16-104"></a>
<a id="__codelineno-16-105" name="__codelineno-16-105"></a><span class="w">            </span><span class="n">_str</span><span class="p">[</span><span class="n">_size</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ch</span><span class="p">;</span>
<a id="__codelineno-16-106" name="__codelineno-16-106"></a><span class="w">            </span><span class="o">++</span><span class="n">_size</span><span class="p">;</span>
<a id="__codelineno-16-107" name="__codelineno-16-107"></a><span class="w">            </span><span class="n">_str</span><span class="p">[</span><span class="n">_size</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;\0&#39;</span><span class="p">;</span>
<a id="__codelineno-16-108" name="__codelineno-16-108"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-109" name="__codelineno-16-109"></a>
<a id="__codelineno-16-110" name="__codelineno-16-110"></a><span class="w">        </span><span class="c1">//string operator+=(char ch)</span>
<a id="__codelineno-16-111" name="__codelineno-16-111"></a><span class="w">        </span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">+=</span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">ch</span><span class="p">)</span>
<a id="__codelineno-16-112" name="__codelineno-16-112"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-16-113" name="__codelineno-16-113"></a><span class="w">            </span><span class="n">push_back</span><span class="p">(</span><span class="n">ch</span><span class="p">);</span>
<a id="__codelineno-16-114" name="__codelineno-16-114"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span>
<a id="__codelineno-16-115" name="__codelineno-16-115"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-116" name="__codelineno-16-116"></a>
<a id="__codelineno-16-117" name="__codelineno-16-117"></a><span class="w">    </span><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-16-118" name="__codelineno-16-118"></a><span class="w">        </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<a id="__codelineno-16-119" name="__codelineno-16-119"></a><span class="w">        </span><span class="kt">size_t</span><span class="w"> </span><span class="n">_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-16-120" name="__codelineno-16-120"></a><span class="w">        </span><span class="kt">size_t</span><span class="w"> </span><span class="n">_capacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// 不包含最后做标识的\0</span>
<a id="__codelineno-16-121" name="__codelineno-16-121"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-16-122" name="__codelineno-16-122"></a>
<a id="__codelineno-16-123" name="__codelineno-16-123"></a><span class="w">    </span><span class="n">simulate_string</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="nf">to_string</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-16-124" name="__codelineno-16-124"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-16-125" name="__codelineno-16-125"></a><span class="w">        </span><span class="kt">bool</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-16-126" name="__codelineno-16-126"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-16-127" name="__codelineno-16-127"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-16-128" name="__codelineno-16-128"></a><span class="w">            </span><span class="n">flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-16-129" name="__codelineno-16-129"></a><span class="w">            </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<a id="__codelineno-16-130" name="__codelineno-16-130"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-131" name="__codelineno-16-131"></a><span class="w">        </span><span class="n">simulate_string</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">str</span><span class="p">;</span>
<a id="__codelineno-16-132" name="__codelineno-16-132"></a>
<a id="__codelineno-16-133" name="__codelineno-16-133"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-16-134" name="__codelineno-16-134"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-16-135" name="__codelineno-16-135"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<a id="__codelineno-16-136" name="__codelineno-16-136"></a><span class="w">            </span><span class="n">value</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<a id="__codelineno-16-137" name="__codelineno-16-137"></a><span class="w">            </span><span class="n">str</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="sc">&#39;0&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-16-138" name="__codelineno-16-138"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-139" name="__codelineno-16-139"></a>
<a id="__codelineno-16-140" name="__codelineno-16-140"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">flag</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span>
<a id="__codelineno-16-141" name="__codelineno-16-141"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-16-142" name="__codelineno-16-142"></a><span class="w">            </span><span class="n">str</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="sc">&#39;-&#39;</span><span class="p">;</span>
<a id="__codelineno-16-143" name="__codelineno-16-143"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-144" name="__codelineno-16-144"></a>
<a id="__codelineno-16-145" name="__codelineno-16-145"></a><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">reverse</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">str</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
<a id="__codelineno-16-146" name="__codelineno-16-146"></a>
<a id="__codelineno-16-147" name="__codelineno-16-147"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">str</span><span class="p">;</span>
<a id="__codelineno-16-148" name="__codelineno-16-148"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-149" name="__codelineno-16-149"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</details>
<h4 id="_10">拷贝构造函数与移动构造函数<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<p>在前面对于需要深拷贝的类来说，需要自己写类的拷贝构造函数，在没有移动构造函数时，只要是涉及到对象的拷贝都会调用拷贝构造函数，包括但不限于返回临时对象，例如下面的代码：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span>
<span class="normal"><a href="#__codelineno-17-16">16</a></span>
<span class="normal"><a href="#__codelineno-17-17">17</a></span>
<span class="normal"><a href="#__codelineno-17-18">18</a></span>
<span class="normal"><a href="#__codelineno-17-19">19</a></span>
<span class="normal"><a href="#__codelineno-17-20">20</a></span>
<span class="normal"><a href="#__codelineno-17-21">21</a></span>
<span class="normal"><a href="#__codelineno-17-22">22</a></span>
<span class="normal"><a href="#__codelineno-17-23">23</a></span>
<span class="normal"><a href="#__codelineno-17-24">24</a></span>
<span class="normal"><a href="#__codelineno-17-25">25</a></span>
<span class="normal"><a href="#__codelineno-17-26">26</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="n">simulate_string</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="nf">to_string</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="p">{</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">        </span><span class="n">flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">        </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">value</span><span class="p">;</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="w">    </span><span class="n">simulate_string</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">str</span><span class="p">;</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<a id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="w">        </span><span class="n">value</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<a id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="w">        </span><span class="n">str</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="p">(</span><span class="sc">&#39;0&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-17-16" name="__codelineno-17-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-17" name="__codelineno-17-17"></a>
<a id="__codelineno-17-18" name="__codelineno-17-18"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">flag</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span>
<a id="__codelineno-17-19" name="__codelineno-17-19"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-17-20" name="__codelineno-17-20"></a><span class="w">        </span><span class="n">str</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="sc">&#39;-&#39;</span><span class="p">;</span>
<a id="__codelineno-17-21" name="__codelineno-17-21"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-22" name="__codelineno-17-22"></a>
<a id="__codelineno-17-23" name="__codelineno-17-23"></a><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">reverse</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">str</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
<a id="__codelineno-17-24" name="__codelineno-17-24"></a>
<a id="__codelineno-17-25" name="__codelineno-17-25"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">str</span><span class="p">;</span>
<a id="__codelineno-17-26" name="__codelineno-17-26"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>上面的代码中模拟实现了<code>to_string</code>函数，函数返回一个<code>simulate_string::string</code>类的对象<code>str</code>，调用该函数：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span>
<span class="normal"><a href="#__codelineno-18-4">4</a></span>
<span class="normal"><a href="#__codelineno-18-5">5</a></span>
<span class="normal"><a href="#__codelineno-18-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="p">{</span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="w">    </span><span class="n">simulate_string</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">simulate_string</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>在编译器没有优化并且只有一个拷贝构造函数时，当执行<code>main</code>函数中的第一条语句时，执行过程如下：</p>
<p><a class="glightbox" href="C++ 11相关新特性.assets\image2.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="C++ 11相关新特性.assets\image2.png"></a></p>
<p>当编译器检测到当前写法<code>simulate_string::string s = simulate_string::to_string(123);</code>时，会进行优化，所以执行过程优化为直接调用拷贝构造函数构造对象<code>s</code>，如下图所示：</p>
<p><a class="glightbox" href="C++ 11相关新特性.assets\image3.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="C++ 11相关新特性.assets\image3.png"></a></p>
<p>但是，进入拷贝构造函数中拷贝<code>str</code>的内容会存在一定的空间和时间消耗，所以为了解决这个问题，可以采用移动拷贝构造，移动拷贝构造本质就是利用了右值引用。<code>str</code>返回时，在未被编译器优化的情况下会生成一个临时对象，这个临时对象会进行一次拷贝，但因为临时对象是属于将亡值，所以使用右值引用的移动构造会更加方便且高效，只需要将临时对象中的值和现有对象中的值进行交换即可，移动构造如下：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span>
<span class="normal"><a href="#__codelineno-19-2">2</a></span>
<span class="normal"><a href="#__codelineno-19-3">3</a></span>
<span class="normal"><a href="#__codelineno-19-4">4</a></span>
<span class="normal"><a href="#__codelineno-19-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="c1">// 移动构造</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="n">string</span><span class="p">(</span><span class="n">string</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">s</span><span class="p">)</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="p">{</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">    </span><span class="n">swap</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>有了移动构造函数以后，对于需要使用返回的临时对象进行拷贝构造时就会直接走移动构造，从而减少原来拷贝构造的消耗</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>需要注意的是，为了确保可以交换成功形式参数不可以使用<code>const</code>修饰</p>
</div>
<p>在C++ 11中，构造函数也包括了移动构造，例如string类中的移动构造：</p>
<p><a class="glightbox" href="C++ 11相关新特性.assets\image4.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="C++ 11相关新特性.assets\image4.png"></a></p>
<h4 id="_11">赋值重载函数与移动赋值重载函数<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<p>上面的移动构造只解决了在拷贝临时对象时会调用拷贝构造函数产生的消耗问题，如果main函数的代码修改为如下：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span>
<span class="normal"><a href="#__codelineno-20-3">3</a></span>
<span class="normal"><a href="#__codelineno-20-4">4</a></span>
<span class="normal"><a href="#__codelineno-20-5">5</a></span>
<span class="normal"><a href="#__codelineno-20-6">6</a></span>
<span class="normal"><a href="#__codelineno-20-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="p">{</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="w">    </span><span class="n">simulate_string</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">    </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">simulate_string</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>此时移动构造就无法解决问题，因为是赋值符号重载函数与临时对象之间的关系，同样，当编译器未进行优化时会进行下面的过程：</p>
<p><a class="glightbox" href="C++ 11相关新特性.assets\image5.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="C++ 11相关新特性.assets\image5.png"></a></p>
<p>当编译器优化后，会直接调用一次赋值重载函数，用<code>str</code>对象为<code>s</code>对象赋值</p>
<p>但是尽管编译器进行了优化，赋值重载函数因为是将<code>str</code>中的内容深拷贝给<code>s</code>对象，所以依旧会产生开销，当对象很大时，开销也会变得很大。因为<code>str</code>是将亡值，所以可以采用右值引用的方式，重载一个新的赋值重载函数如下，同样只需要交换一下将亡值和当前对象中的内容即可：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span>
<span class="normal"><a href="#__codelineno-21-2">2</a></span>
<span class="normal"><a href="#__codelineno-21-3">3</a></span>
<span class="normal"><a href="#__codelineno-21-4">4</a></span>
<span class="normal"><a href="#__codelineno-21-5">5</a></span>
<span class="normal"><a href="#__codelineno-21-6">6</a></span>
<span class="normal"><a href="#__codelineno-21-7">7</a></span>
<span class="normal"><a href="#__codelineno-21-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="c1">// 移动赋值</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">string</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">s</span><span class="p">)</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="p">{</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;string&amp; operator=(string&amp;&amp; s) -- 移动赋值&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="w">    </span><span class="n">swap</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span>
<a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>在C++ 11中，赋值重载函数也包括了移动赋值重载函数，例如string类中的移动赋值重载函数：</p>
<p><a class="glightbox" href="C++ 11相关新特性.assets\image6.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="C++ 11相关新特性.assets\image6.png"></a></p>
<h4 id="_12">元素插入相关函数<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<p>以模拟实现的list类为例</p>
<details class="quote">
<summary>模拟实现list代码</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">  1</a></span>
<span class="normal"><a href="#__codelineno-22-2">  2</a></span>
<span class="normal"><a href="#__codelineno-22-3">  3</a></span>
<span class="normal"><a href="#__codelineno-22-4">  4</a></span>
<span class="normal"><a href="#__codelineno-22-5">  5</a></span>
<span class="normal"><a href="#__codelineno-22-6">  6</a></span>
<span class="normal"><a href="#__codelineno-22-7">  7</a></span>
<span class="normal"><a href="#__codelineno-22-8">  8</a></span>
<span class="normal"><a href="#__codelineno-22-9">  9</a></span>
<span class="normal"><a href="#__codelineno-22-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-22-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-22-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-22-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-22-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-22-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-22-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-22-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-22-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-22-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-22-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-22-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-22-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-22-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-22-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-22-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-22-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-22-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-22-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-22-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-22-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-22-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-22-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-22-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-22-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-22-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-22-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-22-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-22-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-22-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-22-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-22-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-22-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-22-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-22-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-22-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-22-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-22-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-22-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-22-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-22-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-22-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-22-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-22-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-22-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-22-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-22-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-22-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-22-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-22-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-22-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-22-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-22-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-22-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-22-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-22-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-22-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-22-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-22-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-22-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-22-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-22-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-22-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-22-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-22-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-22-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-22-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-22-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-22-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-22-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-22-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-22-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-22-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-22-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-22-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-22-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-22-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-22-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-22-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-22-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-22-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-22-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-22-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-22-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-22-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-22-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-22-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-22-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-22-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-22-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-22-100">100</a></span>
<span class="normal"><a href="#__codelineno-22-101">101</a></span>
<span class="normal"><a href="#__codelineno-22-102">102</a></span>
<span class="normal"><a href="#__codelineno-22-103">103</a></span>
<span class="normal"><a href="#__codelineno-22-104">104</a></span>
<span class="normal"><a href="#__codelineno-22-105">105</a></span>
<span class="normal"><a href="#__codelineno-22-106">106</a></span>
<span class="normal"><a href="#__codelineno-22-107">107</a></span>
<span class="normal"><a href="#__codelineno-22-108">108</a></span>
<span class="normal"><a href="#__codelineno-22-109">109</a></span>
<span class="normal"><a href="#__codelineno-22-110">110</a></span>
<span class="normal"><a href="#__codelineno-22-111">111</a></span>
<span class="normal"><a href="#__codelineno-22-112">112</a></span>
<span class="normal"><a href="#__codelineno-22-113">113</a></span>
<span class="normal"><a href="#__codelineno-22-114">114</a></span>
<span class="normal"><a href="#__codelineno-22-115">115</a></span>
<span class="normal"><a href="#__codelineno-22-116">116</a></span>
<span class="normal"><a href="#__codelineno-22-117">117</a></span>
<span class="normal"><a href="#__codelineno-22-118">118</a></span>
<span class="normal"><a href="#__codelineno-22-119">119</a></span>
<span class="normal"><a href="#__codelineno-22-120">120</a></span>
<span class="normal"><a href="#__codelineno-22-121">121</a></span>
<span class="normal"><a href="#__codelineno-22-122">122</a></span>
<span class="normal"><a href="#__codelineno-22-123">123</a></span>
<span class="normal"><a href="#__codelineno-22-124">124</a></span>
<span class="normal"><a href="#__codelineno-22-125">125</a></span>
<span class="normal"><a href="#__codelineno-22-126">126</a></span>
<span class="normal"><a href="#__codelineno-22-127">127</a></span>
<span class="normal"><a href="#__codelineno-22-128">128</a></span>
<span class="normal"><a href="#__codelineno-22-129">129</a></span>
<span class="normal"><a href="#__codelineno-22-130">130</a></span>
<span class="normal"><a href="#__codelineno-22-131">131</a></span>
<span class="normal"><a href="#__codelineno-22-132">132</a></span>
<span class="normal"><a href="#__codelineno-22-133">133</a></span>
<span class="normal"><a href="#__codelineno-22-134">134</a></span>
<span class="normal"><a href="#__codelineno-22-135">135</a></span>
<span class="normal"><a href="#__codelineno-22-136">136</a></span>
<span class="normal"><a href="#__codelineno-22-137">137</a></span>
<span class="normal"><a href="#__codelineno-22-138">138</a></span>
<span class="normal"><a href="#__codelineno-22-139">139</a></span>
<span class="normal"><a href="#__codelineno-22-140">140</a></span>
<span class="normal"><a href="#__codelineno-22-141">141</a></span>
<span class="normal"><a href="#__codelineno-22-142">142</a></span>
<span class="normal"><a href="#__codelineno-22-143">143</a></span>
<span class="normal"><a href="#__codelineno-22-144">144</a></span>
<span class="normal"><a href="#__codelineno-22-145">145</a></span>
<span class="normal"><a href="#__codelineno-22-146">146</a></span>
<span class="normal"><a href="#__codelineno-22-147">147</a></span>
<span class="normal"><a href="#__codelineno-22-148">148</a></span>
<span class="normal"><a href="#__codelineno-22-149">149</a></span>
<span class="normal"><a href="#__codelineno-22-150">150</a></span>
<span class="normal"><a href="#__codelineno-22-151">151</a></span>
<span class="normal"><a href="#__codelineno-22-152">152</a></span>
<span class="normal"><a href="#__codelineno-22-153">153</a></span>
<span class="normal"><a href="#__codelineno-22-154">154</a></span>
<span class="normal"><a href="#__codelineno-22-155">155</a></span>
<span class="normal"><a href="#__codelineno-22-156">156</a></span>
<span class="normal"><a href="#__codelineno-22-157">157</a></span>
<span class="normal"><a href="#__codelineno-22-158">158</a></span>
<span class="normal"><a href="#__codelineno-22-159">159</a></span>
<span class="normal"><a href="#__codelineno-22-160">160</a></span>
<span class="normal"><a href="#__codelineno-22-161">161</a></span>
<span class="normal"><a href="#__codelineno-22-162">162</a></span>
<span class="normal"><a href="#__codelineno-22-163">163</a></span>
<span class="normal"><a href="#__codelineno-22-164">164</a></span>
<span class="normal"><a href="#__codelineno-22-165">165</a></span>
<span class="normal"><a href="#__codelineno-22-166">166</a></span>
<span class="normal"><a href="#__codelineno-22-167">167</a></span>
<span class="normal"><a href="#__codelineno-22-168">168</a></span>
<span class="normal"><a href="#__codelineno-22-169">169</a></span>
<span class="normal"><a href="#__codelineno-22-170">170</a></span>
<span class="normal"><a href="#__codelineno-22-171">171</a></span>
<span class="normal"><a href="#__codelineno-22-172">172</a></span>
<span class="normal"><a href="#__codelineno-22-173">173</a></span>
<span class="normal"><a href="#__codelineno-22-174">174</a></span>
<span class="normal"><a href="#__codelineno-22-175">175</a></span>
<span class="normal"><a href="#__codelineno-22-176">176</a></span>
<span class="normal"><a href="#__codelineno-22-177">177</a></span>
<span class="normal"><a href="#__codelineno-22-178">178</a></span>
<span class="normal"><a href="#__codelineno-22-179">179</a></span>
<span class="normal"><a href="#__codelineno-22-180">180</a></span>
<span class="normal"><a href="#__codelineno-22-181">181</a></span>
<span class="normal"><a href="#__codelineno-22-182">182</a></span>
<span class="normal"><a href="#__codelineno-22-183">183</a></span>
<span class="normal"><a href="#__codelineno-22-184">184</a></span>
<span class="normal"><a href="#__codelineno-22-185">185</a></span>
<span class="normal"><a href="#__codelineno-22-186">186</a></span>
<span class="normal"><a href="#__codelineno-22-187">187</a></span>
<span class="normal"><a href="#__codelineno-22-188">188</a></span>
<span class="normal"><a href="#__codelineno-22-189">189</a></span>
<span class="normal"><a href="#__codelineno-22-190">190</a></span>
<span class="normal"><a href="#__codelineno-22-191">191</a></span>
<span class="normal"><a href="#__codelineno-22-192">192</a></span>
<span class="normal"><a href="#__codelineno-22-193">193</a></span>
<span class="normal"><a href="#__codelineno-22-194">194</a></span>
<span class="normal"><a href="#__codelineno-22-195">195</a></span>
<span class="normal"><a href="#__codelineno-22-196">196</a></span>
<span class="normal"><a href="#__codelineno-22-197">197</a></span>
<span class="normal"><a href="#__codelineno-22-198">198</a></span>
<span class="normal"><a href="#__codelineno-22-199">199</a></span>
<span class="normal"><a href="#__codelineno-22-200">200</a></span>
<span class="normal"><a href="#__codelineno-22-201">201</a></span>
<span class="normal"><a href="#__codelineno-22-202">202</a></span>
<span class="normal"><a href="#__codelineno-22-203">203</a></span>
<span class="normal"><a href="#__codelineno-22-204">204</a></span>
<span class="normal"><a href="#__codelineno-22-205">205</a></span>
<span class="normal"><a href="#__codelineno-22-206">206</a></span>
<span class="normal"><a href="#__codelineno-22-207">207</a></span>
<span class="normal"><a href="#__codelineno-22-208">208</a></span>
<span class="normal"><a href="#__codelineno-22-209">209</a></span>
<span class="normal"><a href="#__codelineno-22-210">210</a></span>
<span class="normal"><a href="#__codelineno-22-211">211</a></span>
<span class="normal"><a href="#__codelineno-22-212">212</a></span>
<span class="normal"><a href="#__codelineno-22-213">213</a></span>
<span class="normal"><a href="#__codelineno-22-214">214</a></span>
<span class="normal"><a href="#__codelineno-22-215">215</a></span>
<span class="normal"><a href="#__codelineno-22-216">216</a></span>
<span class="normal"><a href="#__codelineno-22-217">217</a></span>
<span class="normal"><a href="#__codelineno-22-218">218</a></span>
<span class="normal"><a href="#__codelineno-22-219">219</a></span>
<span class="normal"><a href="#__codelineno-22-220">220</a></span>
<span class="normal"><a href="#__codelineno-22-221">221</a></span>
<span class="normal"><a href="#__codelineno-22-222">222</a></span>
<span class="normal"><a href="#__codelineno-22-223">223</a></span>
<span class="normal"><a href="#__codelineno-22-224">224</a></span>
<span class="normal"><a href="#__codelineno-22-225">225</a></span>
<span class="normal"><a href="#__codelineno-22-226">226</a></span>
<span class="normal"><a href="#__codelineno-22-227">227</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="cp">#pragma once</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;assert.h&gt;</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="p">;</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">simulate_list</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="p">{</span>
<a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">ListNode</span>
<a id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="w">        </span><span class="n">ListNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span><span class="w"> </span><span class="n">_next</span><span class="p">;</span>
<a id="__codelineno-22-13" name="__codelineno-22-13"></a><span class="w">        </span><span class="n">ListNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span><span class="w"> </span><span class="n">_prev</span><span class="p">;</span>
<a id="__codelineno-22-14" name="__codelineno-22-14"></a>
<a id="__codelineno-22-15" name="__codelineno-22-15"></a><span class="w">        </span><span class="n">T</span><span class="w"> </span><span class="n">_data</span><span class="p">;</span>
<a id="__codelineno-22-16" name="__codelineno-22-16"></a>
<a id="__codelineno-22-17" name="__codelineno-22-17"></a><span class="w">        </span><span class="n">ListNode</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="p">())</span>
<a id="__codelineno-22-18" name="__codelineno-22-18"></a><span class="w">            </span><span class="o">:</span><span class="n">_next</span><span class="p">(</span><span class="k">nullptr</span><span class="p">)</span>
<a id="__codelineno-22-19" name="__codelineno-22-19"></a><span class="w">            </span><span class="p">,</span><span class="w"> </span><span class="n">_prev</span><span class="p">(</span><span class="k">nullptr</span><span class="p">)</span>
<a id="__codelineno-22-20" name="__codelineno-22-20"></a><span class="w">            </span><span class="p">,</span><span class="w"> </span><span class="n">_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-22-21" name="__codelineno-22-21"></a><span class="w">        </span><span class="p">{}</span>
<a id="__codelineno-22-22" name="__codelineno-22-22"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-22-23" name="__codelineno-22-23"></a>
<a id="__codelineno-22-24" name="__codelineno-22-24"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Ref</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Ptr</span><span class="o">&gt;</span>
<a id="__codelineno-22-25" name="__codelineno-22-25"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">ListIterator</span>
<a id="__codelineno-22-26" name="__codelineno-22-26"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-22-27" name="__codelineno-22-27"></a><span class="w">        </span><span class="k">typedef</span><span class="w"> </span><span class="n">ListNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Node</span><span class="p">;</span>
<a id="__codelineno-22-28" name="__codelineno-22-28"></a><span class="w">        </span><span class="k">typedef</span><span class="w"> </span><span class="n">ListIterator</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">Ref</span><span class="p">,</span><span class="w"> </span><span class="n">Ptr</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Self</span><span class="p">;</span>
<a id="__codelineno-22-29" name="__codelineno-22-29"></a><span class="w">        </span><span class="n">Node</span><span class="o">*</span><span class="w"> </span><span class="n">_node</span><span class="p">;</span>
<a id="__codelineno-22-30" name="__codelineno-22-30"></a>
<a id="__codelineno-22-31" name="__codelineno-22-31"></a><span class="w">        </span><span class="n">ListIterator</span><span class="p">(</span><span class="n">Node</span><span class="o">*</span><span class="w"> </span><span class="n">node</span><span class="p">)</span>
<a id="__codelineno-22-32" name="__codelineno-22-32"></a><span class="w">            </span><span class="o">:</span><span class="n">_node</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
<a id="__codelineno-22-33" name="__codelineno-22-33"></a><span class="w">        </span><span class="p">{}</span>
<a id="__codelineno-22-34" name="__codelineno-22-34"></a>
<a id="__codelineno-22-35" name="__codelineno-22-35"></a><span class="w">        </span><span class="c1">// ++it;</span>
<a id="__codelineno-22-36" name="__codelineno-22-36"></a><span class="w">        </span><span class="n">Self</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">++</span><span class="p">()</span>
<a id="__codelineno-22-37" name="__codelineno-22-37"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-38" name="__codelineno-22-38"></a><span class="w">            </span><span class="n">_node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_node</span><span class="o">-&gt;</span><span class="n">_next</span><span class="p">;</span>
<a id="__codelineno-22-39" name="__codelineno-22-39"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span>
<a id="__codelineno-22-40" name="__codelineno-22-40"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-41" name="__codelineno-22-41"></a>
<a id="__codelineno-22-42" name="__codelineno-22-42"></a><span class="w">        </span><span class="n">Self</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">--</span><span class="p">()</span>
<a id="__codelineno-22-43" name="__codelineno-22-43"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-44" name="__codelineno-22-44"></a><span class="w">            </span><span class="n">_node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_node</span><span class="o">-&gt;</span><span class="n">_prev</span><span class="p">;</span>
<a id="__codelineno-22-45" name="__codelineno-22-45"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span>
<a id="__codelineno-22-46" name="__codelineno-22-46"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-47" name="__codelineno-22-47"></a>
<a id="__codelineno-22-48" name="__codelineno-22-48"></a><span class="w">        </span><span class="n">Self</span><span class="w"> </span><span class="k">operator</span><span class="o">++</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>
<a id="__codelineno-22-49" name="__codelineno-22-49"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-50" name="__codelineno-22-50"></a><span class="w">            </span><span class="n">Self</span><span class="w"> </span><span class="nf">tmp</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-22-51" name="__codelineno-22-51"></a><span class="w">            </span><span class="n">_node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_node</span><span class="o">-&gt;</span><span class="n">_next</span><span class="p">;</span>
<a id="__codelineno-22-52" name="__codelineno-22-52"></a>
<a id="__codelineno-22-53" name="__codelineno-22-53"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span>
<a id="__codelineno-22-54" name="__codelineno-22-54"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-55" name="__codelineno-22-55"></a>
<a id="__codelineno-22-56" name="__codelineno-22-56"></a><span class="w">        </span><span class="n">Self</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">--</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span>
<a id="__codelineno-22-57" name="__codelineno-22-57"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-58" name="__codelineno-22-58"></a><span class="w">            </span><span class="n">Self</span><span class="w"> </span><span class="nf">tmp</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span>
<a id="__codelineno-22-59" name="__codelineno-22-59"></a><span class="w">            </span><span class="n">_node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_node</span><span class="o">-&gt;</span><span class="n">_prev</span><span class="p">;</span>
<a id="__codelineno-22-60" name="__codelineno-22-60"></a>
<a id="__codelineno-22-61" name="__codelineno-22-61"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span>
<a id="__codelineno-22-62" name="__codelineno-22-62"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-63" name="__codelineno-22-63"></a>
<a id="__codelineno-22-64" name="__codelineno-22-64"></a><span class="w">        </span><span class="n">Ref</span><span class="w"> </span><span class="k">operator</span><span class="o">*</span><span class="p">()</span>
<a id="__codelineno-22-65" name="__codelineno-22-65"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-66" name="__codelineno-22-66"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">_node</span><span class="o">-&gt;</span><span class="n">_data</span><span class="p">;</span>
<a id="__codelineno-22-67" name="__codelineno-22-67"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-68" name="__codelineno-22-68"></a>
<a id="__codelineno-22-69" name="__codelineno-22-69"></a><span class="w">        </span><span class="n">Ptr</span><span class="w"> </span><span class="k">operator</span><span class="o">-&gt;</span><span class="p">()</span>
<a id="__codelineno-22-70" name="__codelineno-22-70"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-71" name="__codelineno-22-71"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="o">&amp;</span><span class="n">_node</span><span class="o">-&gt;</span><span class="n">_data</span><span class="p">;</span>
<a id="__codelineno-22-72" name="__codelineno-22-72"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-73" name="__codelineno-22-73"></a>
<a id="__codelineno-22-74" name="__codelineno-22-74"></a><span class="w">        </span><span class="kt">bool</span><span class="w"> </span><span class="k">operator</span><span class="o">!=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Self</span><span class="o">&amp;</span><span class="w"> </span><span class="n">it</span><span class="p">)</span>
<a id="__codelineno-22-75" name="__codelineno-22-75"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-76" name="__codelineno-22-76"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">_node</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">it</span><span class="p">.</span><span class="n">_node</span><span class="p">;</span>
<a id="__codelineno-22-77" name="__codelineno-22-77"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-78" name="__codelineno-22-78"></a>
<a id="__codelineno-22-79" name="__codelineno-22-79"></a><span class="w">        </span><span class="kt">bool</span><span class="w"> </span><span class="k">operator</span><span class="o">==</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Self</span><span class="o">&amp;</span><span class="w"> </span><span class="n">it</span><span class="p">)</span>
<a id="__codelineno-22-80" name="__codelineno-22-80"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-81" name="__codelineno-22-81"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">_node</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">it</span><span class="p">.</span><span class="n">_node</span><span class="p">;</span>
<a id="__codelineno-22-82" name="__codelineno-22-82"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-83" name="__codelineno-22-83"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-22-84" name="__codelineno-22-84"></a>
<a id="__codelineno-22-85" name="__codelineno-22-85"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="__codelineno-22-86" name="__codelineno-22-86"></a><span class="w">    </span><span class="k">class</span><span class="w"> </span><span class="nc">list</span>
<a id="__codelineno-22-87" name="__codelineno-22-87"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-22-88" name="__codelineno-22-88"></a><span class="w">        </span><span class="k">typedef</span><span class="w"> </span><span class="n">ListNode</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Node</span><span class="p">;</span>
<a id="__codelineno-22-89" name="__codelineno-22-89"></a><span class="w">    </span><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-22-90" name="__codelineno-22-90"></a>
<a id="__codelineno-22-91" name="__codelineno-22-91"></a><span class="w">        </span><span class="k">typedef</span><span class="w"> </span><span class="n">ListIterator</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">*&gt;</span><span class="w"> </span><span class="n">iterator</span><span class="p">;</span>
<a id="__codelineno-22-92" name="__codelineno-22-92"></a><span class="w">        </span><span class="k">typedef</span><span class="w"> </span><span class="n">ListIterator</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">*&gt;</span><span class="w"> </span><span class="n">const_iterator</span><span class="p">;</span>
<a id="__codelineno-22-93" name="__codelineno-22-93"></a>
<a id="__codelineno-22-94" name="__codelineno-22-94"></a><span class="w">        </span><span class="n">iterator</span><span class="w"> </span><span class="nf">begin</span><span class="p">()</span>
<a id="__codelineno-22-95" name="__codelineno-22-95"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-96" name="__codelineno-22-96"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">iterator</span><span class="p">(</span><span class="n">_head</span><span class="o">-&gt;</span><span class="n">_next</span><span class="p">);</span>
<a id="__codelineno-22-97" name="__codelineno-22-97"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-98" name="__codelineno-22-98"></a>
<a id="__codelineno-22-99" name="__codelineno-22-99"></a><span class="w">        </span><span class="n">const_iterator</span><span class="w"> </span><span class="nf">begin</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<a id="__codelineno-22-100" name="__codelineno-22-100"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-101" name="__codelineno-22-101"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">const_iterator</span><span class="p">(</span><span class="n">_head</span><span class="o">-&gt;</span><span class="n">_next</span><span class="p">);</span>
<a id="__codelineno-22-102" name="__codelineno-22-102"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-103" name="__codelineno-22-103"></a>
<a id="__codelineno-22-104" name="__codelineno-22-104"></a><span class="w">        </span><span class="n">iterator</span><span class="w"> </span><span class="nf">end</span><span class="p">()</span>
<a id="__codelineno-22-105" name="__codelineno-22-105"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-106" name="__codelineno-22-106"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">iterator</span><span class="p">(</span><span class="n">_head</span><span class="p">);</span>
<a id="__codelineno-22-107" name="__codelineno-22-107"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-108" name="__codelineno-22-108"></a>
<a id="__codelineno-22-109" name="__codelineno-22-109"></a><span class="w">        </span><span class="n">const_iterator</span><span class="w"> </span><span class="nf">end</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<a id="__codelineno-22-110" name="__codelineno-22-110"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-111" name="__codelineno-22-111"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">const_iterator</span><span class="p">(</span><span class="n">_head</span><span class="p">);</span>
<a id="__codelineno-22-112" name="__codelineno-22-112"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-113" name="__codelineno-22-113"></a>
<a id="__codelineno-22-114" name="__codelineno-22-114"></a><span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">empty_init</span><span class="p">()</span>
<a id="__codelineno-22-115" name="__codelineno-22-115"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-116" name="__codelineno-22-116"></a><span class="w">            </span><span class="n">_head</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Node</span><span class="p">();</span>
<a id="__codelineno-22-117" name="__codelineno-22-117"></a><span class="w">            </span><span class="n">_head</span><span class="o">-&gt;</span><span class="n">_next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_head</span><span class="p">;</span>
<a id="__codelineno-22-118" name="__codelineno-22-118"></a><span class="w">            </span><span class="n">_head</span><span class="o">-&gt;</span><span class="n">_prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_head</span><span class="p">;</span>
<a id="__codelineno-22-119" name="__codelineno-22-119"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-120" name="__codelineno-22-120"></a>
<a id="__codelineno-22-121" name="__codelineno-22-121"></a><span class="w">        </span><span class="n">list</span><span class="p">()</span>
<a id="__codelineno-22-122" name="__codelineno-22-122"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-123" name="__codelineno-22-123"></a><span class="w">            </span><span class="n">empty_init</span><span class="p">();</span>
<a id="__codelineno-22-124" name="__codelineno-22-124"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-125" name="__codelineno-22-125"></a>
<a id="__codelineno-22-126" name="__codelineno-22-126"></a><span class="w">        </span><span class="n">list</span><span class="p">(</span><span class="n">initializer_list</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">il</span><span class="p">)</span>
<a id="__codelineno-22-127" name="__codelineno-22-127"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-128" name="__codelineno-22-128"></a><span class="w">            </span><span class="n">empty_init</span><span class="p">();</span>
<a id="__codelineno-22-129" name="__codelineno-22-129"></a>
<a id="__codelineno-22-130" name="__codelineno-22-130"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">il</span><span class="p">)</span>
<a id="__codelineno-22-131" name="__codelineno-22-131"></a><span class="w">            </span><span class="p">{</span>
<a id="__codelineno-22-132" name="__codelineno-22-132"></a><span class="w">                </span><span class="n">push_back</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<a id="__codelineno-22-133" name="__codelineno-22-133"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-22-134" name="__codelineno-22-134"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-135" name="__codelineno-22-135"></a>
<a id="__codelineno-22-136" name="__codelineno-22-136"></a><span class="w">        </span><span class="c1">// lt2(lt1)</span>
<a id="__codelineno-22-137" name="__codelineno-22-137"></a><span class="w">        </span><span class="n">list</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">list</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">lt</span><span class="p">)</span>
<a id="__codelineno-22-138" name="__codelineno-22-138"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-139" name="__codelineno-22-139"></a><span class="w">            </span><span class="n">empty_init</span><span class="p">();</span>
<a id="__codelineno-22-140" name="__codelineno-22-140"></a>
<a id="__codelineno-22-141" name="__codelineno-22-141"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">lt</span><span class="p">)</span>
<a id="__codelineno-22-142" name="__codelineno-22-142"></a><span class="w">            </span><span class="p">{</span>
<a id="__codelineno-22-143" name="__codelineno-22-143"></a><span class="w">                </span><span class="n">push_back</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<a id="__codelineno-22-144" name="__codelineno-22-144"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-22-145" name="__codelineno-22-145"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-146" name="__codelineno-22-146"></a>
<a id="__codelineno-22-147" name="__codelineno-22-147"></a><span class="w">        </span><span class="c1">// lt1 = lt3</span>
<a id="__codelineno-22-148" name="__codelineno-22-148"></a><span class="w">        </span><span class="n">list</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">list</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lt</span><span class="p">)</span>
<a id="__codelineno-22-149" name="__codelineno-22-149"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-150" name="__codelineno-22-150"></a><span class="w">            </span><span class="n">swap</span><span class="p">(</span><span class="n">_head</span><span class="p">,</span><span class="w"> </span><span class="n">lt</span><span class="p">.</span><span class="n">_head</span><span class="p">);</span>
<a id="__codelineno-22-151" name="__codelineno-22-151"></a>
<a id="__codelineno-22-152" name="__codelineno-22-152"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span>
<a id="__codelineno-22-153" name="__codelineno-22-153"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-154" name="__codelineno-22-154"></a>
<a id="__codelineno-22-155" name="__codelineno-22-155"></a><span class="w">        </span><span class="o">~</span><span class="n">list</span><span class="p">()</span>
<a id="__codelineno-22-156" name="__codelineno-22-156"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-157" name="__codelineno-22-157"></a><span class="w">            </span><span class="n">clear</span><span class="p">();</span>
<a id="__codelineno-22-158" name="__codelineno-22-158"></a><span class="w">            </span><span class="k">delete</span><span class="w"> </span><span class="n">_head</span><span class="p">;</span>
<a id="__codelineno-22-159" name="__codelineno-22-159"></a><span class="w">            </span><span class="n">_head</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<a id="__codelineno-22-160" name="__codelineno-22-160"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-161" name="__codelineno-22-161"></a>
<a id="__codelineno-22-162" name="__codelineno-22-162"></a><span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="n">clear</span><span class="p">()</span>
<a id="__codelineno-22-163" name="__codelineno-22-163"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-164" name="__codelineno-22-164"></a><span class="w">            </span><span class="k">auto</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">begin</span><span class="p">();</span>
<a id="__codelineno-22-165" name="__codelineno-22-165"></a><span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">it</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">end</span><span class="p">())</span>
<a id="__codelineno-22-166" name="__codelineno-22-166"></a><span class="w">            </span><span class="p">{</span>
<a id="__codelineno-22-167" name="__codelineno-22-167"></a><span class="w">                </span><span class="n">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">erase</span><span class="p">(</span><span class="n">it</span><span class="p">);</span>
<a id="__codelineno-22-168" name="__codelineno-22-168"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-22-169" name="__codelineno-22-169"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-170" name="__codelineno-22-170"></a>
<a id="__codelineno-22-171" name="__codelineno-22-171"></a><span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="n">push_back</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span>
<a id="__codelineno-22-172" name="__codelineno-22-172"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-173" name="__codelineno-22-173"></a><span class="w">            </span><span class="n">insert</span><span class="p">(</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-22-174" name="__codelineno-22-174"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-175" name="__codelineno-22-175"></a>
<a id="__codelineno-22-176" name="__codelineno-22-176"></a><span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="n">pop_back</span><span class="p">()</span>
<a id="__codelineno-22-177" name="__codelineno-22-177"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-178" name="__codelineno-22-178"></a><span class="w">            </span><span class="n">erase</span><span class="p">(</span><span class="o">--</span><span class="n">end</span><span class="p">());</span>
<a id="__codelineno-22-179" name="__codelineno-22-179"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-180" name="__codelineno-22-180"></a>
<a id="__codelineno-22-181" name="__codelineno-22-181"></a><span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="n">push_front</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span>
<a id="__codelineno-22-182" name="__codelineno-22-182"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-183" name="__codelineno-22-183"></a><span class="w">            </span><span class="n">insert</span><span class="p">(</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-22-184" name="__codelineno-22-184"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-185" name="__codelineno-22-185"></a>
<a id="__codelineno-22-186" name="__codelineno-22-186"></a><span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="n">pop_front</span><span class="p">()</span>
<a id="__codelineno-22-187" name="__codelineno-22-187"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-188" name="__codelineno-22-188"></a><span class="w">            </span><span class="n">erase</span><span class="p">(</span><span class="n">begin</span><span class="p">());</span>
<a id="__codelineno-22-189" name="__codelineno-22-189"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-190" name="__codelineno-22-190"></a>
<a id="__codelineno-22-191" name="__codelineno-22-191"></a><span class="w">        </span><span class="c1">// 没有iterator失效</span>
<a id="__codelineno-22-192" name="__codelineno-22-192"></a><span class="w">        </span><span class="n">iterator</span><span class="w"> </span><span class="n">insert</span><span class="p">(</span><span class="n">iterator</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span>
<a id="__codelineno-22-193" name="__codelineno-22-193"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-194" name="__codelineno-22-194"></a><span class="w">            </span><span class="n">Node</span><span class="o">*</span><span class="w"> </span><span class="n">cur</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pos</span><span class="p">.</span><span class="n">_node</span><span class="p">;</span>
<a id="__codelineno-22-195" name="__codelineno-22-195"></a><span class="w">            </span><span class="n">Node</span><span class="o">*</span><span class="w"> </span><span class="n">newnode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Node</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-22-196" name="__codelineno-22-196"></a><span class="w">            </span><span class="n">Node</span><span class="o">*</span><span class="w"> </span><span class="n">prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">_prev</span><span class="p">;</span>
<a id="__codelineno-22-197" name="__codelineno-22-197"></a>
<a id="__codelineno-22-198" name="__codelineno-22-198"></a><span class="w">            </span><span class="c1">// prev  newnode  cur</span>
<a id="__codelineno-22-199" name="__codelineno-22-199"></a><span class="w">            </span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">_next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newnode</span><span class="p">;</span>
<a id="__codelineno-22-200" name="__codelineno-22-200"></a><span class="w">            </span><span class="n">newnode</span><span class="o">-&gt;</span><span class="n">_prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">prev</span><span class="p">;</span>
<a id="__codelineno-22-201" name="__codelineno-22-201"></a><span class="w">            </span><span class="n">newnode</span><span class="o">-&gt;</span><span class="n">_next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cur</span><span class="p">;</span>
<a id="__codelineno-22-202" name="__codelineno-22-202"></a><span class="w">            </span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">_prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newnode</span><span class="p">;</span>
<a id="__codelineno-22-203" name="__codelineno-22-203"></a>
<a id="__codelineno-22-204" name="__codelineno-22-204"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">iterator</span><span class="p">(</span><span class="n">newnode</span><span class="p">);</span>
<a id="__codelineno-22-205" name="__codelineno-22-205"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-206" name="__codelineno-22-206"></a>
<a id="__codelineno-22-207" name="__codelineno-22-207"></a><span class="w">        </span><span class="c1">// erase 后 pos失效了，pos指向节点被释放了</span>
<a id="__codelineno-22-208" name="__codelineno-22-208"></a><span class="w">        </span><span class="n">iterator</span><span class="w"> </span><span class="n">erase</span><span class="p">(</span><span class="n">iterator</span><span class="w"> </span><span class="n">pos</span><span class="p">)</span>
<a id="__codelineno-22-209" name="__codelineno-22-209"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-22-210" name="__codelineno-22-210"></a><span class="w">            </span><span class="n">assert</span><span class="p">(</span><span class="n">pos</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">end</span><span class="p">());</span>
<a id="__codelineno-22-211" name="__codelineno-22-211"></a>
<a id="__codelineno-22-212" name="__codelineno-22-212"></a><span class="w">            </span><span class="n">Node</span><span class="o">*</span><span class="w"> </span><span class="n">cur</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pos</span><span class="p">.</span><span class="n">_node</span><span class="p">;</span>
<a id="__codelineno-22-213" name="__codelineno-22-213"></a><span class="w">            </span><span class="n">Node</span><span class="o">*</span><span class="w"> </span><span class="n">prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">_prev</span><span class="p">;</span>
<a id="__codelineno-22-214" name="__codelineno-22-214"></a><span class="w">            </span><span class="n">Node</span><span class="o">*</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">_next</span><span class="p">;</span>
<a id="__codelineno-22-215" name="__codelineno-22-215"></a>
<a id="__codelineno-22-216" name="__codelineno-22-216"></a><span class="w">            </span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">_next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">next</span><span class="p">;</span>
<a id="__codelineno-22-217" name="__codelineno-22-217"></a><span class="w">            </span><span class="n">next</span><span class="o">-&gt;</span><span class="n">_prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">prev</span><span class="p">;</span>
<a id="__codelineno-22-218" name="__codelineno-22-218"></a>
<a id="__codelineno-22-219" name="__codelineno-22-219"></a><span class="w">            </span><span class="k">delete</span><span class="w"> </span><span class="n">cur</span><span class="p">;</span>
<a id="__codelineno-22-220" name="__codelineno-22-220"></a>
<a id="__codelineno-22-221" name="__codelineno-22-221"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">iterator</span><span class="p">(</span><span class="n">next</span><span class="p">);</span>
<a id="__codelineno-22-222" name="__codelineno-22-222"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-22-223" name="__codelineno-22-223"></a>
<a id="__codelineno-22-224" name="__codelineno-22-224"></a><span class="w">    </span><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-22-225" name="__codelineno-22-225"></a><span class="w">        </span><span class="n">Node</span><span class="o">*</span><span class="w"> </span><span class="n">_head</span><span class="p">;</span>
<a id="__codelineno-22-226" name="__codelineno-22-226"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-22-227" name="__codelineno-22-227"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</details>
<p>当在<code>main</code>函数中创建对象后进行尾插：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span>
<span class="normal"><a href="#__codelineno-23-2">2</a></span>
<span class="normal"><a href="#__codelineno-23-3">3</a></span>
<span class="normal"><a href="#__codelineno-23-4">4</a></span>
<span class="normal"><a href="#__codelineno-23-5">5</a></span>
<span class="normal"><a href="#__codelineno-23-6">6</a></span>
<span class="normal"><a href="#__codelineno-23-7">7</a></span>
<span class="normal"><a href="#__codelineno-23-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="p">{</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="w">    </span><span class="n">simulate_list</span><span class="o">::</span><span class="n">list</span><span class="o">&lt;</span><span class="n">simulate_string</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ls</span><span class="p">;</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="w">    </span><span class="n">ls</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="s">&quot;11111&quot;</span><span class="p">);</span>
<a id="__codelineno-23-6" name="__codelineno-23-6"></a>
<a id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>因为<code>"1111"</code>属于常量字符串，属于右值，在<code>push_back</code>函数中会调用<code>Node</code>节点的构造函数初始化<code>_data</code>，而因为<code>_data</code>是<code>simulate_string</code>类型的，所以会调用对应的构造函数将其转化为<code>simulate_string</code>类型，接着再链接，但是整个过程会涉及到<code>simulate_string</code>类的拷贝构造函数，并且因为<code>_data</code>是左值，所以在进入<code>simulate_string</code>类后也是左值，就不会调用前面的移动拷贝构造函数，这个现象也称为右值退化为左值，为了解决这个问题，首先需要修改push_back函数，将<code>"11111"</code>识别为右值，所以需要使用右值引用作为<code>push_back</code>函数的形式参数，所以push_back函数需要重载一份为如下形式：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span>
<span class="normal"><a href="#__codelineno-24-2">2</a></span>
<span class="normal"><a href="#__codelineno-24-3">3</a></span>
<span class="normal"><a href="#__codelineno-24-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">push_back</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="p">{</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="w">    </span><span class="n">insert</span><span class="p">(</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>接着，因为<code>push_back</code>底层调用的还是<code>insert</code>函数，所以<code>insert</code>函数的形式参数也需要重载一份为如下形式：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-25-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-25-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-25-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-25-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-25-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-25-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-25-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-25-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-25-10">10</a></span>
<span class="normal"><a href="#__codelineno-25-11">11</a></span>
<span class="normal"><a href="#__codelineno-25-12">12</a></span>
<span class="normal"><a href="#__codelineno-25-13">13</a></span>
<span class="normal"><a href="#__codelineno-25-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="n">iterator</span><span class="w"> </span><span class="nf">insert</span><span class="p">(</span><span class="n">iterator</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="p">{</span>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="w">    </span><span class="n">Node</span><span class="o">*</span><span class="w"> </span><span class="n">cur</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pos</span><span class="p">.</span><span class="n">_node</span><span class="p">;</span>
<a id="__codelineno-25-4" name="__codelineno-25-4"></a><span class="w">    </span><span class="n">Node</span><span class="o">*</span><span class="w"> </span><span class="n">newnode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Node</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-25-5" name="__codelineno-25-5"></a><span class="w">    </span><span class="n">Node</span><span class="o">*</span><span class="w"> </span><span class="n">prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">_prev</span><span class="p">;</span>
<a id="__codelineno-25-6" name="__codelineno-25-6"></a>
<a id="__codelineno-25-7" name="__codelineno-25-7"></a><span class="w">    </span><span class="c1">// prev  newnode  cur</span>
<a id="__codelineno-25-8" name="__codelineno-25-8"></a><span class="w">    </span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">_next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newnode</span><span class="p">;</span>
<a id="__codelineno-25-9" name="__codelineno-25-9"></a><span class="w">    </span><span class="n">newnode</span><span class="o">-&gt;</span><span class="n">_prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">prev</span><span class="p">;</span>
<a id="__codelineno-25-10" name="__codelineno-25-10"></a><span class="w">    </span><span class="n">newnode</span><span class="o">-&gt;</span><span class="n">_next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cur</span><span class="p">;</span>
<a id="__codelineno-25-11" name="__codelineno-25-11"></a><span class="w">    </span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">_prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">newnode</span><span class="p">;</span>
<a id="__codelineno-25-12" name="__codelineno-25-12"></a>
<a id="__codelineno-25-13" name="__codelineno-25-13"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">iterator</span><span class="p">(</span><span class="n">newnode</span><span class="p">);</span>
<a id="__codelineno-25-14" name="__codelineno-25-14"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>但是，仅仅修改这两个函数的形式参数并不能解决问题，首先看<code>push_back</code>函数，因为底层调用的是<code>insert</code>函数，所以需要将<code>push_back</code>的右值引用<code>x</code>接收到的值继续传递给<code>insert</code>函数，此时需要注意，右值引用本身还是左值，所以传递给<code>insert</code>函数参数的<code>x</code>依旧还是左值，此时尽管写了重载右值引用的<code>insert</code>函数，依旧会调用左值引用的<code>insert</code>函数，所以需要对<code>push_back</code>函数进行进一步的修改，如下形式：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1">1</a></span>
<span class="normal"><a href="#__codelineno-26-2">2</a></span>
<span class="normal"><a href="#__codelineno-26-3">3</a></span>
<span class="normal"><a href="#__codelineno-26-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">push_back</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="p">{</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="w">    </span><span class="n">insert</span><span class="p">(</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">move</span><span class="p">(</span><span class="n">x</span><span class="p">));</span><span class="c1">// 将左值的右值引用转化为右值的右值引用</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>接着到<code>insert</code>函数，在<code>push_back</code>函数修改为上述形式后，此时调用的<code>insert</code>函数即为重载右值引用的版本，接下来创建节点，此时依旧是同样的问题，<code>x</code>是右值引用，但是本身是左值，所以传递给<code>Node</code>节点的构造函数时也依旧是左值，所以同样需要将其转化为右值，如下形式：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span>
<span class="normal"><a href="#__codelineno-27-3">3</a></span>
<span class="normal"><a href="#__codelineno-27-4">4</a></span>
<span class="normal"><a href="#__codelineno-27-5">5</a></span>
<span class="normal"><a href="#__codelineno-27-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="n">iterator</span><span class="w"> </span><span class="nf">insert</span><span class="p">(</span><span class="n">iterator</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="p">{</span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="w">    </span><span class="n">Node</span><span class="o">*</span><span class="w"> </span><span class="n">cur</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pos</span><span class="p">.</span><span class="n">_node</span><span class="p">;</span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="w">    </span><span class="n">Node</span><span class="o">*</span><span class="w"> </span><span class="n">newnode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Node</span><span class="p">(</span><span class="n">x</span><span class="p">);</span><span class="c1">// 将左值的右值引用转化为右值的右值引用</span>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>接着是<code>Node</code>节点的构造函数，当前情况下只有一个左值引用版本的构造函数，所以需要重载一个右值引用版本，如下形式：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1">1</a></span>
<span class="normal"><a href="#__codelineno-28-2">2</a></span>
<span class="normal"><a href="#__codelineno-28-3">3</a></span>
<span class="normal"><a href="#__codelineno-28-4">4</a></span>
<span class="normal"><a href="#__codelineno-28-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="n">ListNode</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="w">    </span><span class="o">:</span><span class="n">_next</span><span class="p">(</span><span class="k">nullptr</span><span class="p">)</span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="w">    </span><span class="p">,</span><span class="w"> </span><span class="n">_prev</span><span class="p">(</span><span class="k">nullptr</span><span class="p">)</span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="w">    </span><span class="p">,</span><span class="w"> </span><span class="n">_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="p">{}</span>
</code></pre></div></td></tr></table></div>
<p>但是上面的代码依旧是同样的问题，形式参数<code>data</code>是右值引用，但本身是左值，所以需要将<code>data</code>转化为右值，修改为：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1">1</a></span>
<span class="normal"><a href="#__codelineno-29-2">2</a></span>
<span class="normal"><a href="#__codelineno-29-3">3</a></span>
<span class="normal"><a href="#__codelineno-29-4">4</a></span>
<span class="normal"><a href="#__codelineno-29-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="n">ListNode</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="w">    </span><span class="o">:</span><span class="n">_next</span><span class="p">(</span><span class="k">nullptr</span><span class="p">)</span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="w">    </span><span class="p">,</span><span class="w"> </span><span class="n">_prev</span><span class="p">(</span><span class="k">nullptr</span><span class="p">)</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a><span class="w">    </span><span class="p">,</span><span class="w"> </span><span class="n">_data</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a><span class="p">{}</span>
</code></pre></div></td></tr></table></div>
<p>此时再调用<code>simulate_string</code>类的构造函数时，就会只调用移动拷贝构造函数</p>
<p>在C++ 11中，元素插入相关的函数也包括了右值引用的版本，例如list类中的右值引用版本的<code>push_back</code>函数：</p>
<p><a class="glightbox" href="C++ 11相关新特性.assets\image7.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="C++ 11相关新特性.assets\image7.png"></a></p>
<h2 id="_13">万能引用与完美转发<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h2>
<h3 id="_14">万能引用<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<p>万能引用可以将在函数模版中使用，形式如下：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1">1</a></span>
<span class="normal"><a href="#__codelineno-30-2">2</a></span>
<span class="normal"><a href="#__codelineno-30-3">3</a></span>
<span class="normal"><a href="#__codelineno-30-4">4</a></span>
<span class="normal"><a href="#__codelineno-30-5">5</a></span>
<span class="normal"><a href="#__codelineno-30-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="c1">// 万能引用</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="kt">void</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">t</span><span class="p">)</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="p">{</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a>
<a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>在上面的代码中，<code>T&amp;&amp;</code>是一个万能引用，当传递左值时，<code>T</code>被推导为左值引用，当传递右值时，<code>T</code>被推导为右值引用，但是不论<code>T</code>被推导为左值引用还是右值引用，形参<code>t</code>本身依旧是左值，所以当需要再向下传递需要使用到右值时，依旧需要将<code>t</code>进行转化，例如下面的例子：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-31-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-31-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-31-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-31-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-31-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-31-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-31-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-31-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-31-10">10</a></span>
<span class="normal"><a href="#__codelineno-31-11">11</a></span>
<span class="normal"><a href="#__codelineno-31-12">12</a></span>
<span class="normal"><a href="#__codelineno-31-13">13</a></span>
<span class="normal"><a href="#__codelineno-31-14">14</a></span>
<span class="normal"><a href="#__codelineno-31-15">15</a></span>
<span class="normal"><a href="#__codelineno-31-16">16</a></span>
<span class="normal"><a href="#__codelineno-31-17">17</a></span>
<span class="normal"><a href="#__codelineno-31-18">18</a></span>
<span class="normal"><a href="#__codelineno-31-19">19</a></span>
<span class="normal"><a href="#__codelineno-31-20">20</a></span>
<span class="normal"><a href="#__codelineno-31-21">21</a></span>
<span class="normal"><a href="#__codelineno-31-22">22</a></span>
<span class="normal"><a href="#__codelineno-31-23">23</a></span>
<span class="normal"><a href="#__codelineno-31-24">24</a></span>
<span class="normal"><a href="#__codelineno-31-25">25</a></span>
<span class="normal"><a href="#__codelineno-31-26">26</a></span>
<span class="normal"><a href="#__codelineno-31-27">27</a></span>
<span class="normal"><a href="#__codelineno-31-28">28</a></span>
<span class="normal"><a href="#__codelineno-31-29">29</a></span>
<span class="normal"><a href="#__codelineno-31-30">30</a></span>
<span class="normal"><a href="#__codelineno-31-31">31</a></span>
<span class="normal"><a href="#__codelineno-31-32">32</a></span>
<span class="normal"><a href="#__codelineno-31-33">33</a></span>
<span class="normal"><a href="#__codelineno-31-34">34</a></span>
<span class="normal"><a href="#__codelineno-31-35">35</a></span>
<span class="normal"><a href="#__codelineno-31-36">36</a></span>
<span class="normal"><a href="#__codelineno-31-37">37</a></span>
<span class="normal"><a href="#__codelineno-31-38">38</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="c1">// 查看引用类型</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Func</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;左值引用&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="p">}</span>
<a id="__codelineno-31-6" name="__codelineno-31-6"></a>
<a id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Func</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span>
<a id="__codelineno-31-8" name="__codelineno-31-8"></a><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;右值引用&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-31-10" name="__codelineno-31-10"></a><span class="p">}</span>
<a id="__codelineno-31-11" name="__codelineno-31-11"></a>
<a id="__codelineno-31-12" name="__codelineno-31-12"></a><span class="c1">// 万能引用</span>
<a id="__codelineno-31-13" name="__codelineno-31-13"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="__codelineno-31-14" name="__codelineno-31-14"></a><span class="kt">void</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">t</span><span class="p">)</span>
<a id="__codelineno-31-15" name="__codelineno-31-15"></a><span class="p">{</span>
<a id="__codelineno-31-16" name="__codelineno-31-16"></a><span class="w">    </span><span class="c1">// 万能引用的类型推导</span>
<a id="__codelineno-31-17" name="__codelineno-31-17"></a><span class="w">    </span><span class="c1">// T&amp;&amp;是一个万能引用，当传递左值时，T被推导为左值引用</span>
<a id="__codelineno-31-18" name="__codelineno-31-18"></a><span class="w">    </span><span class="c1">// 当传递右值时，T被推导为右值引用</span>
<a id="__codelineno-31-19" name="__codelineno-31-19"></a><span class="w">    </span><span class="n">Func</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
<a id="__codelineno-31-20" name="__codelineno-31-20"></a><span class="p">}</span>
<a id="__codelineno-31-21" name="__codelineno-31-21"></a>
<a id="__codelineno-31-22" name="__codelineno-31-22"></a><span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">()</span>
<a id="__codelineno-31-23" name="__codelineno-31-23"></a><span class="p">{</span>
<a id="__codelineno-31-24" name="__codelineno-31-24"></a><span class="w">    </span><span class="c1">// 左值传递给func函数</span>
<a id="__codelineno-31-25" name="__codelineno-31-25"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<a id="__codelineno-31-26" name="__codelineno-31-26"></a><span class="w">    </span><span class="n">func</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<a id="__codelineno-31-27" name="__codelineno-31-27"></a><span class="w">    </span><span class="c1">// 右值传递给func函数</span>
<a id="__codelineno-31-28" name="__codelineno-31-28"></a><span class="w">    </span><span class="n">func</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-31-29" name="__codelineno-31-29"></a><span class="w">    </span><span class="c1">// 将左值move为右值</span>
<a id="__codelineno-31-30" name="__codelineno-31-30"></a><span class="w">    </span><span class="n">func</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">a</span><span class="p">));</span>
<a id="__codelineno-31-31" name="__codelineno-31-31"></a>
<a id="__codelineno-31-32" name="__codelineno-31-32"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-31-33" name="__codelineno-31-33"></a><span class="p">}</span>
<a id="__codelineno-31-34" name="__codelineno-31-34"></a>
<a id="__codelineno-31-35" name="__codelineno-31-35"></a><span class="n">输出结果</span><span class="err">：</span>
<a id="__codelineno-31-36" name="__codelineno-31-36"></a><span class="n">左值引用</span>
<a id="__codelineno-31-37" name="__codelineno-31-37"></a><span class="n">左值引用</span>
<a id="__codelineno-31-38" name="__codelineno-31-38"></a><span class="n">左值引用</span>
</code></pre></div></td></tr></table></div>
<p>此时不论<code>t</code>是左值引用还是右值引用，<code>t</code>本身都是左值，所以传递给<code>Func</code>函数只会走打印“左值引用”的部分，如果使用<code>move</code>对形参<code>t</code>进行转化，那么只会走打印“右值引用”的<code>Func</code>函数，为了解决这个问题，可以使用完美转发</p>
<h3 id="_15">完美转发<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p>完美转发可以将变量原有的类型传递给下一层，如果本身是左值引用，则完美转发后就是左值引用，如果本身是右值引用，则完美转发后就是右值引用，所以上面的代码可以写成：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-32-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-32-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-32-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-32-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-32-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-32-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-32-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-32-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-32-10">10</a></span>
<span class="normal"><a href="#__codelineno-32-11">11</a></span>
<span class="normal"><a href="#__codelineno-32-12">12</a></span>
<span class="normal"><a href="#__codelineno-32-13">13</a></span>
<span class="normal"><a href="#__codelineno-32-14">14</a></span>
<span class="normal"><a href="#__codelineno-32-15">15</a></span>
<span class="normal"><a href="#__codelineno-32-16">16</a></span>
<span class="normal"><a href="#__codelineno-32-17">17</a></span>
<span class="normal"><a href="#__codelineno-32-18">18</a></span>
<span class="normal"><a href="#__codelineno-32-19">19</a></span>
<span class="normal"><a href="#__codelineno-32-20">20</a></span>
<span class="normal"><a href="#__codelineno-32-21">21</a></span>
<span class="normal"><a href="#__codelineno-32-22">22</a></span>
<span class="normal"><a href="#__codelineno-32-23">23</a></span>
<span class="normal"><a href="#__codelineno-32-24">24</a></span>
<span class="normal"><a href="#__codelineno-32-25">25</a></span>
<span class="normal"><a href="#__codelineno-32-26">26</a></span>
<span class="normal"><a href="#__codelineno-32-27">27</a></span>
<span class="normal"><a href="#__codelineno-32-28">28</a></span>
<span class="normal"><a href="#__codelineno-32-29">29</a></span>
<span class="normal"><a href="#__codelineno-32-30">30</a></span>
<span class="normal"><a href="#__codelineno-32-31">31</a></span>
<span class="normal"><a href="#__codelineno-32-32">32</a></span>
<span class="normal"><a href="#__codelineno-32-33">33</a></span>
<span class="normal"><a href="#__codelineno-32-34">34</a></span>
<span class="normal"><a href="#__codelineno-32-35">35</a></span>
<span class="normal"><a href="#__codelineno-32-36">36</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="c1">// 查看引用类型</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Func</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;左值引用&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="p">}</span>
<a id="__codelineno-32-6" name="__codelineno-32-6"></a>
<a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="kt">void</span><span class="w"> </span><span class="nf">Func</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span>
<a id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;右值引用&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="p">}</span>
<a id="__codelineno-32-11" name="__codelineno-32-11"></a>
<a id="__codelineno-32-12" name="__codelineno-32-12"></a><span class="c1">// 万能引用</span>
<a id="__codelineno-32-13" name="__codelineno-32-13"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="__codelineno-32-14" name="__codelineno-32-14"></a><span class="kt">void</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">t</span><span class="p">)</span>
<a id="__codelineno-32-15" name="__codelineno-32-15"></a><span class="p">{</span>
<a id="__codelineno-32-16" name="__codelineno-32-16"></a><span class="w">    </span><span class="c1">// 使用完美转发</span>
<a id="__codelineno-32-17" name="__codelineno-32-17"></a><span class="w">    </span><span class="n">Func</span><span class="p">(</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">t</span><span class="p">));</span>
<a id="__codelineno-32-18" name="__codelineno-32-18"></a><span class="p">}</span>
<a id="__codelineno-32-19" name="__codelineno-32-19"></a>
<a id="__codelineno-32-20" name="__codelineno-32-20"></a><span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">()</span>
<a id="__codelineno-32-21" name="__codelineno-32-21"></a><span class="p">{</span>
<a id="__codelineno-32-22" name="__codelineno-32-22"></a><span class="w">    </span><span class="c1">// 左值传递给func函数</span>
<a id="__codelineno-32-23" name="__codelineno-32-23"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<a id="__codelineno-32-24" name="__codelineno-32-24"></a><span class="w">    </span><span class="n">func</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<a id="__codelineno-32-25" name="__codelineno-32-25"></a><span class="w">    </span><span class="c1">// 右值传递给func函数</span>
<a id="__codelineno-32-26" name="__codelineno-32-26"></a><span class="w">    </span><span class="n">func</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<a id="__codelineno-32-27" name="__codelineno-32-27"></a><span class="w">    </span><span class="c1">// 将左值move为右值</span>
<a id="__codelineno-32-28" name="__codelineno-32-28"></a><span class="w">    </span><span class="n">func</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">a</span><span class="p">));</span>
<a id="__codelineno-32-29" name="__codelineno-32-29"></a>
<a id="__codelineno-32-30" name="__codelineno-32-30"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-32-31" name="__codelineno-32-31"></a><span class="p">}</span>
<a id="__codelineno-32-32" name="__codelineno-32-32"></a>
<a id="__codelineno-32-33" name="__codelineno-32-33"></a><span class="n">输出结果</span><span class="err">：</span>
<a id="__codelineno-32-34" name="__codelineno-32-34"></a><span class="n">左值引用</span>
<a id="__codelineno-32-35" name="__codelineno-32-35"></a><span class="n">右值引用</span>
<a id="__codelineno-32-36" name="__codelineno-32-36"></a><span class="n">右值引用</span>
</code></pre></div></td></tr></table></div>
<p>有了完美转发后，就可以对上面list模拟实现中的插入函数进行修改，前面遇到的问题就是本身是右值，给了右值引用再向下传递时发生右值引用退化为左值引用，所以可以使用完美转发使其按照右值引用的方式传递，以<code>push_back</code>为例</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1">1</a></span>
<span class="normal"><a href="#__codelineno-33-2">2</a></span>
<span class="normal"><a href="#__codelineno-33-3">3</a></span>
<span class="normal"><a href="#__codelineno-33-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">push_back</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="p">{</span>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="w">    </span><span class="n">insert</span><span class="p">(</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">forward</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">));</span><span class="c1">// 将左值的右值引用转化为右值的右值引用</span>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="c-11_2">C++ 11新增的两个默认成员函数<a class="headerlink" href="#c-11_2" title="Permanent link">&para;</a></h2>
<p>在有了移动拷贝构造函数和移动赋值重载函数后，类的默认成员函数从原有的6个变为了现在的8个，对于新增的两个默认成员函数来说，默认的生成规则如下：</p>
<ul>
<li>移动拷贝构造函数：当<strong>类中没有显式写移动拷贝构造函数并且类中也没有显式写拷贝构造函数、析构函数和赋值重载函数</strong>时，编译器会默认生成移动拷贝构造函数，该函数的行为是，当类中的成员是内置类型时，将会进行值拷贝，当类中的成员是自定义类型时，会调用自定义类型的移动拷贝构造函数，如果自定义类型也没有移动拷贝构造函数，则调用拷贝构造函数</li>
<li>移动赋值重载函数：当<strong>类中没有显式写移动赋值重载函数并且类中也没有显式写拷贝构造函数、析构函数和赋值重载函数</strong>时，编译器会默认生成移动赋值重载函数，该函数的行为是，当类中的成员是内置类型时，将会进行值拷贝，当类中的成员是自定义类型时，会调用自定义类型的移动赋值重载函数，如果自定义类型也没有移动赋值重载函数，则调用赋值重载函数</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>理解满足两个条件（1. 没有显式写移动拷贝构造函数 2. 没有显式写拷贝构造函数、析构函数和赋值重载函数）：</p>
<p>考虑移动赋值重载函数和移动拷贝构造函数的使用场景：当类中的成员都是内置类型时，没有大型资源释放行为，所以不需要显示写析构函数，此时对于拷贝构造函数和赋值重载函数来说，直接复制原有对象的内容开销也不大，而对于移动拷贝构造函数和移动赋值重载函数来说，目的就是解决拷贝构造函数和赋值重载函数在部分场景下的时间和空间消耗，所以没有拷贝构造函数、析构函数和赋值重载函数代表没有大型的资源释放行为，自然也就可以不会产生大量的时间和空间消耗，所以也就不需要写移动拷贝构造函数和移动赋值重载函数</p>
</div>
<h3 id="default">生成默认成员函数<code>=default</code><a class="headerlink" href="#default" title="Permanent link">&para;</a></h3>
<p>如果一定要生成默认的移动拷贝构造和移动赋值重载函数时，可以使用<code>=default</code>关键字，例如如果需要默认生成string类的拷贝构造函数，可以写成：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="n">string</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="o">=</span><span class="k">default</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>需要注意的是，如果想让编译器默认生成移动拷贝构造函数和移动赋值重载函数时，一定要有拷贝构造函数、析构函数和赋值重载函数的出现，哪怕是使用<code>=default</code>让移动拷贝构造函数和移动赋值重载函数默认生成，不可以缺少三个默认成员函数的一个，否则无法通过编译</p>
</div>
<h3 id="delete">不生成默认成员函数<code>=delete</code><a class="headerlink" href="#delete" title="Permanent link">&para;</a></h3>
<p>如果不想编译器默认生成某一个默认成员函数时，可以使用<code>=delete</code>关键字，例如如果不像默认生成string类的拷贝构造函数，可以写成：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="n">string</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">s</span><span class="p">)</span><span class="o">=</span><span class="k">delete</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>在C++ 98中，如果不想一个对象可以通过调用拷贝构造函数和赋值重载函数进行构造可以将对应的拷贝构造函数和赋值重载函数修饰为<code>private</code>，而在有了C++ 11的<code>=delete</code>关键字后，就可以对这两个函数修饰为<code>=delete</code>，而无需在放入<code>private</code>中</p>
<h2 id="c-11_3">C++ 11中的可变参数模版<a class="headerlink" href="#c-11_3" title="Permanent link">&para;</a></h2>
<h3 id="_16">可变参数模版介绍<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<p>在C++ 98中，如果一个函数是一个模版函数，那么该函数可以传递的参数个数就由模版参数个数决定，如果传递参数多于或少于（此处不考虑含有缺省参数的情况）规定的模版个数，则编译器无法生成对应的函数</p>
<p>在C++ 11中，为了解决上面的问题提出了可变参数的函数模版，基本格式如下：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1">1</a></span>
<span class="normal"><a href="#__codelineno-36-2">2</a></span>
<span class="normal"><a href="#__codelineno-36-3">3</a></span>
<span class="normal"><a href="#__codelineno-36-4">4</a></span>
<span class="normal"><a href="#__codelineno-36-5">5</a></span>
<span class="normal"><a href="#__codelineno-36-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="c1">// 可变参数模版</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="kt">void</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="n">Args</span><span class="p">...</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-36-4" name="__codelineno-36-4"></a><span class="p">{</span>
<a id="__codelineno-36-5" name="__codelineno-36-5"></a>
<a id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>在上面的代码中使用<code>...</code>代表可变参数，<code>...Args</code>代表模版参数包，<code>... args</code>代表形式参数包，参数包中可以有[0, N] (N &gt;= 0且N为整数)个模版参数，此时编译器会根据传递的参数个数生成对应的函数。</p>
<p>如果想要获取函数参数的数量时，可以使用<code>sizeof</code>运算符计算形式参数包，代码如下：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">1</a></span>
<span class="normal"><a href="#__codelineno-37-2">2</a></span>
<span class="normal"><a href="#__codelineno-37-3">3</a></span>
<span class="normal"><a href="#__codelineno-37-4">4</a></span>
<span class="normal"><a href="#__codelineno-37-5">5</a></span>
<span class="normal"><a href="#__codelineno-37-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="c1">// 可变参数模版</span>
<a id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="kt">void</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="n">Args</span><span class="p">...</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="p">{</span>
<a id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="k">sizeof</span><span class="p">...(</span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code>sizeof</code>计算属于编译时就可以计算的，所以可以直接使用，需要注意省略号的所在位置</p>
</div>
<p>如果想在函数<code>func</code>中查看传递的参数时则不可以使用遍历等运行时的逻辑进行打印，例如使用<code>for</code>循环</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-38-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-38-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-38-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-38-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-38-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-38-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-38-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-38-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-38-10">10</a></span>
<span class="normal"><a href="#__codelineno-38-11">11</a></span>
<span class="normal"><a href="#__codelineno-38-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="kt">void</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="n">Args</span><span class="p">...</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="p">{</span>
<a id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="w">    </span><span class="c1">//cout &lt;&lt; sizeof...(args) &lt;&lt; endl;</span>
<a id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">sizeof</span><span class="p">...(</span><span class="n">args</span><span class="p">);</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<a id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-38-7" name="__codelineno-38-7"></a><span class="w">        </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-38-8" name="__codelineno-38-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-38-9" name="__codelineno-38-9"></a><span class="p">}</span>
<a id="__codelineno-38-10" name="__codelineno-38-10"></a>
<a id="__codelineno-38-11" name="__codelineno-38-11"></a><span class="n">报错信息</span><span class="err">：</span>
<a id="__codelineno-38-12" name="__codelineno-38-12"></a><span class="err">&#39;</span><span class="n">args</span><span class="err">&#39;</span><span class="o">:</span><span class="w"> </span><span class="n">parameter</span><span class="w"> </span><span class="n">pack</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">expanded</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="n">context</span>
</code></pre></div></td></tr></table></div>
<h3 id="_17">参数包展开<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h3>
<p>为了能够展示参数，下面采用两种方法进行显示，以下面的代码为例：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1">1</a></span>
<span class="normal"><a href="#__codelineno-39-2">2</a></span>
<span class="normal"><a href="#__codelineno-39-3">3</a></span>
<span class="normal"><a href="#__codelineno-39-4">4</a></span>
<span class="normal"><a href="#__codelineno-39-5">5</a></span>
<span class="normal"><a href="#__codelineno-39-6">6</a></span>
<span class="normal"><a href="#__codelineno-39-7">7</a></span>
<span class="normal"><a href="#__codelineno-39-8">8</a></span>
<span class="normal"><a href="#__codelineno-39-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="p">{</span>
<a id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="w">    </span><span class="c1">// 可变参数模版</span>
<a id="__codelineno-39-4" name="__codelineno-39-4"></a><span class="w">    </span><span class="n">func</span><span class="p">();</span>
<a id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="w">    </span><span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
<a id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="w">    </span><span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">3.14</span><span class="p">);</span>
<a id="__codelineno-39-7" name="__codelineno-39-7"></a>
<a id="__codelineno-39-8" name="__codelineno-39-8"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-39-9" name="__codelineno-39-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>
<p>编译时递归展开参数包</p>
<p>编译时递归和运行时递归的最大区别就是不可以使用<code>if</code>语句进行递归结束条件的判断</p>
<p>编译时递归展开参数包的思路是：创建一个有可变参数模版的函数<code>func</code>，该模版参数含有两部分，第一个部分是万能引用的单一参数，该部分用于接收每一个参数值，第二个部分是可变参数模版，在函数体内，先打印第一个参数的内容，再调用<code>func</code>函数，传递剩余的参数，用于递归调用，再外侧写一个无参的<code>func</code>函数，该函数作为编译时递归的终止条件</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-40-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-40-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-40-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-40-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-40-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-40-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-40-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-40-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-40-10">10</a></span>
<span class="normal"><a href="#__codelineno-40-11">11</a></span>
<span class="normal"><a href="#__codelineno-40-12">12</a></span>
<span class="normal"><a href="#__codelineno-40-13">13</a></span>
<span class="normal"><a href="#__codelineno-40-14">14</a></span>
<span class="normal"><a href="#__codelineno-40-15">15</a></span>
<span class="normal"><a href="#__codelineno-40-16">16</a></span>
<span class="normal"><a href="#__codelineno-40-17">17</a></span>
<span class="normal"><a href="#__codelineno-40-18">18</a></span>
<span class="normal"><a href="#__codelineno-40-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="c1">// 递归终止函数</span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">()</span>
<a id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="p">{</span>
<a id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="p">}</span>
<a id="__codelineno-40-6" name="__codelineno-40-6"></a>
<a id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="kt">void</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">...</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="p">{</span>
<a id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="w">    </span><span class="c1">// 打印当前的x</span>
<a id="__codelineno-40-11" name="__codelineno-40-11"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">;</span>
<a id="__codelineno-40-12" name="__codelineno-40-12"></a><span class="w">    </span><span class="c1">// 递归调用打印剩余的参数</span>
<a id="__codelineno-40-13" name="__codelineno-40-13"></a><span class="w">    </span><span class="n">func</span><span class="p">(</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Args</span><span class="o">&gt;</span><span class="p">(</span><span class="n">args</span><span class="p">)...);</span>
<a id="__codelineno-40-14" name="__codelineno-40-14"></a><span class="p">}</span>
<a id="__codelineno-40-15" name="__codelineno-40-15"></a>
<a id="__codelineno-40-16" name="__codelineno-40-16"></a><span class="n">对于上面的测试函数</span><span class="err">，</span><span class="n">结果如下</span><span class="err">：</span>
<a id="__codelineno-40-17" name="__codelineno-40-17"></a>
<a id="__codelineno-40-18" name="__codelineno-40-18"></a><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span>
<a id="__codelineno-40-19" name="__codelineno-40-19"></a><span class="mi">1</span><span class="w"> </span><span class="n">hello</span><span class="w"> </span><span class="mf">3.14</span>
</code></pre></div></td></tr></table></div>
<p>以第二个测试为例<code>func(1, 2, 3);</code>，上面的代码可以理解为：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-41-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-41-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-41-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-41-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-41-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-41-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-41-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-41-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-41-10">10</a></span>
<span class="normal"><a href="#__codelineno-41-11">11</a></span>
<span class="normal"><a href="#__codelineno-41-12">12</a></span>
<span class="normal"><a href="#__codelineno-41-13">13</a></span>
<span class="normal"><a href="#__codelineno-41-14">14</a></span>
<span class="normal"><a href="#__codelineno-41-15">15</a></span>
<span class="normal"><a href="#__codelineno-41-16">16</a></span>
<span class="normal"><a href="#__codelineno-41-17">17</a></span>
<span class="normal"><a href="#__codelineno-41-18">18</a></span>
<span class="normal"><a href="#__codelineno-41-19">19</a></span>
<span class="normal"><a href="#__codelineno-41-20">20</a></span>
<span class="normal"><a href="#__codelineno-41-21">21</a></span>
<span class="normal"><a href="#__codelineno-41-22">22</a></span>
<span class="normal"><a href="#__codelineno-41-23">23</a></span>
<span class="normal"><a href="#__codelineno-41-24">24</a></span>
<span class="normal"><a href="#__codelineno-41-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="c1">//4. 第四步</span>
<a id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">()</span>
<a id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="p">{</span>
<a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="p">}</span>
<a id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="c1">//3. 第三步</span>
<a id="__codelineno-41-7" name="__codelineno-41-7"></a><span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">z</span><span class="p">)</span>
<a id="__codelineno-41-8" name="__codelineno-41-8"></a><span class="p">{</span>
<a id="__codelineno-41-9" name="__codelineno-41-9"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">;</span>
<a id="__codelineno-41-10" name="__codelineno-41-10"></a><span class="w">    </span><span class="n">func</span><span class="p">();</span>
<a id="__codelineno-41-11" name="__codelineno-41-11"></a><span class="p">}</span>
<a id="__codelineno-41-12" name="__codelineno-41-12"></a><span class="c1">//2. 第二步</span>
<a id="__codelineno-41-13" name="__codelineno-41-13"></a><span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">z</span><span class="p">)</span>
<a id="__codelineno-41-14" name="__codelineno-41-14"></a><span class="p">{</span>
<a id="__codelineno-41-15" name="__codelineno-41-15"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">;</span>
<a id="__codelineno-41-16" name="__codelineno-41-16"></a><span class="w">    </span><span class="n">func</span><span class="p">(</span><span class="n">forward</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">z</span><span class="p">));</span>
<a id="__codelineno-41-17" name="__codelineno-41-17"></a><span class="p">}</span>
<a id="__codelineno-41-18" name="__codelineno-41-18"></a><span class="c1">//1. 第一步</span>
<a id="__codelineno-41-19" name="__codelineno-41-19"></a><span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">z</span><span class="p">)</span>
<a id="__codelineno-41-20" name="__codelineno-41-20"></a><span class="p">{</span>
<a id="__codelineno-41-21" name="__codelineno-41-21"></a><span class="w">    </span><span class="c1">// 打印当前的x</span>
<a id="__codelineno-41-22" name="__codelineno-41-22"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">;</span>
<a id="__codelineno-41-23" name="__codelineno-41-23"></a><span class="w">    </span><span class="c1">// 递归调用打印剩余的参数</span>
<a id="__codelineno-41-24" name="__codelineno-41-24"></a><span class="w">    </span><span class="n">func</span><span class="p">(</span><span class="n">forward</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="n">forward</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">z</span><span class="p">));</span>
<a id="__codelineno-41-25" name="__codelineno-41-25"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
</li>
<li>
<p>利用数组根据个数初始化数组大小的机制展开参数包</p>
<p>该方式的原理是：当一个数组在初始化时，如果不指定数组的大小，编译器会根据数组的元素个数推导出数组的大小，所以可以写为：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1">1</a></span>
<span class="normal"><a href="#__codelineno-42-2">2</a></span>
<span class="normal"><a href="#__codelineno-42-3">3</a></span>
<span class="normal"><a href="#__codelineno-42-4">4</a></span>
<span class="normal"><a href="#__codelineno-42-5">5</a></span>
<span class="normal"><a href="#__codelineno-42-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="kt">void</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="n">Args</span><span class="o">&amp;&amp;</span><span class="p">...</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-42-3" name="__codelineno-42-3"></a><span class="p">{</span>
<a id="__codelineno-42-4" name="__codelineno-42-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">arr</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">((</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Args</span><span class="o">&gt;</span><span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">))...</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-42-5" name="__codelineno-42-5"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-42-6" name="__codelineno-42-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>这个方法需要注意，对于没有实参的函数来说会编译报错，例如<code>func()</code>函数，并且不可以去掉逗号表达式，因为<code>cout</code>的返回值是<code>ostream</code>类型，该类型不支持赋值运算符重载函数</p>
</div>
<p>上面的方法可以理解为：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-1">1</a></span>
<span class="normal"><a href="#__codelineno-43-2">2</a></span>
<span class="normal"><a href="#__codelineno-43-3">3</a></span>
<span class="normal"><a href="#__codelineno-43-4">4</a></span>
<span class="normal"><a href="#__codelineno-43-5">5</a></span>
<span class="normal"><a href="#__codelineno-43-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="c1">// 上面的展开可以理解为</span>
<a id="__codelineno-43-2" name="__codelineno-43-2"></a><span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">z</span><span class="p">)</span>
<a id="__codelineno-43-3" name="__codelineno-43-3"></a><span class="p">{</span>
<a id="__codelineno-43-4" name="__codelineno-43-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">arr</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">((</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">forward</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)),</span><span class="w"> </span><span class="p">((</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">forward</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)),</span><span class="w"> </span><span class="p">((</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">forward</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-43-5" name="__codelineno-43-5"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-43-6" name="__codelineno-43-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>因为数组在开辟大小是会计算元素的个数，逗号表达式的左右两侧都会进行运算，所以先打印<code>x</code>的值，再执行0，所以第一个表达式的值为0，作为数组的第一个元素，以此类推直到最后一个元素</p>
</li>
</ol>
<h3 id="emplace">可变参数模版的应用<code>emplace</code>系列函数<a class="headerlink" href="#emplace" title="Permanent link">&para;</a></h3>
<p>在前面学习到的容器中，基本上都支持<code>emplace</code>系列的函数，以list类为例，list类中存在一个<code>emplace_back</code>函数，该函数可以支持在list的尾部插入数据，与<code>push_back</code>函数实现的功能基本一致，但是<code>emplace_back</code>函数除了可以支持插入已经构造的对象和单个用于构造对象的值，还可以接受构造函数的参数，直接在list的内存空间中调用该对象的构造函数，避免了额外的拷贝或移动操作。这可以提高效率，尤其是在处理复杂杂对象时，例如下面的代码：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-44-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-44-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-44-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-44-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-44-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-44-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-44-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-44-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-44-10">10</a></span>
<span class="normal"><a href="#__codelineno-44-11">11</a></span>
<span class="normal"><a href="#__codelineno-44-12">12</a></span>
<span class="normal"><a href="#__codelineno-44-13">13</a></span>
<span class="normal"><a href="#__codelineno-44-14">14</a></span>
<span class="normal"><a href="#__codelineno-44-15">15</a></span>
<span class="normal"><a href="#__codelineno-44-16">16</a></span>
<span class="normal"><a href="#__codelineno-44-17">17</a></span>
<span class="normal"><a href="#__codelineno-44-18">18</a></span>
<span class="normal"><a href="#__codelineno-44-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="p">{</span>
<a id="__codelineno-44-3" name="__codelineno-44-3"></a><span class="w">    </span><span class="c1">// 插入一个新的对象</span>
<a id="__codelineno-44-4" name="__codelineno-44-4"></a><span class="w">    </span><span class="n">list</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">ls</span><span class="p">;</span>
<a id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">s1</span><span class="p">(</span><span class="s">&quot;1111111&quot;</span><span class="p">);</span>
<a id="__codelineno-44-6" name="__codelineno-44-6"></a><span class="w">    </span><span class="n">ls</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">s1</span><span class="p">);</span>
<a id="__codelineno-44-7" name="__codelineno-44-7"></a><span class="w">    </span><span class="n">ls</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="n">s1</span><span class="p">);</span>
<a id="__codelineno-44-8" name="__codelineno-44-8"></a>
<a id="__codelineno-44-9" name="__codelineno-44-9"></a><span class="w">    </span><span class="c1">// 插入一个右值</span>
<a id="__codelineno-44-10" name="__codelineno-44-10"></a><span class="w">    </span><span class="n">ls</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="s">&quot;2222222&quot;</span><span class="p">);</span>
<a id="__codelineno-44-11" name="__codelineno-44-11"></a><span class="w">    </span><span class="n">ls</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;2222222222&quot;</span><span class="p">);</span>
<a id="__codelineno-44-12" name="__codelineno-44-12"></a>
<a id="__codelineno-44-13" name="__codelineno-44-13"></a><span class="w">    </span><span class="c1">// 插入时构造对象</span>
<a id="__codelineno-44-14" name="__codelineno-44-14"></a><span class="w">    </span><span class="n">list</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="n">simulate_string</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">ls1</span><span class="p">;</span>
<a id="__codelineno-44-15" name="__codelineno-44-15"></a><span class="w">    </span><span class="c1">// 插入时，用插入的内容构造一个pair对象</span>
<a id="__codelineno-44-16" name="__codelineno-44-16"></a><span class="w">    </span><span class="n">ls</span><span class="p">.</span><span class="n">emplace_back</span><span class="p">(</span><span class="s">&quot;2222222&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-44-17" name="__codelineno-44-17"></a>
<a id="__codelineno-44-18" name="__codelineno-44-18"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-44-19" name="__codelineno-44-19"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>之所以可以接受构造函数的参数，是因为<code>emplace_back</code>函数本身是一个可变模版参数的函数模版，但是注意，这个可变参数模版不代表可以传递多个参数，例如，插入多个字符串<code>ls.emplace_back("1111", "2222");</code>这种行为是错误的</p>
<p>使用可变参数模版模拟实现<code>emplace_back</code>函数，以模拟实现list为例：</p>
<p>因为<code>emplace_back</code>本身是一个插入函数，所以底层调用<code>insert</code>函数即可，将函数的形式参数设置为右值引用，为了可以实现向下传递时也是右值引用，需要使用完美转发，代码如下：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-45-1">1</a></span>
<span class="normal"><a href="#__codelineno-45-2">2</a></span>
<span class="normal"><a href="#__codelineno-45-3">3</a></span>
<span class="normal"><a href="#__codelineno-45-4">4</a></span>
<span class="normal"><a href="#__codelineno-45-5">5</a></span>
<span class="normal"><a href="#__codelineno-45-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="c1">// 模拟实现emplace_back</span>
<a id="__codelineno-45-2" name="__codelineno-45-2"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="__codelineno-45-3" name="__codelineno-45-3"></a><span class="kt">void</span><span class="w"> </span><span class="n">emplace_back</span><span class="p">(</span><span class="n">Args</span><span class="o">&amp;&amp;</span><span class="p">...</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-45-4" name="__codelineno-45-4"></a><span class="p">{</span>
<a id="__codelineno-45-5" name="__codelineno-45-5"></a><span class="w">    </span><span class="n">insert</span><span class="p">(</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">T</span><span class="p">(</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Args</span><span class="o">&gt;</span><span class="p">(</span><span class="n">args</span><span class="p">)...));</span>
<a id="__codelineno-45-6" name="__codelineno-45-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>接着，实现<code>insert</code>函数针对<code>emplace_back</code>的版本，因为需要调用构造函数，所以当是右值引用时，需要保留是右值引用，同样需要使用完美转发</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-46-1">1</a></span>
<span class="normal"><a href="#__codelineno-46-2">2</a></span>
<span class="normal"><a href="#__codelineno-46-3">3</a></span>
<span class="normal"><a href="#__codelineno-46-4">4</a></span>
<span class="normal"><a href="#__codelineno-46-5">5</a></span>
<span class="normal"><a href="#__codelineno-46-6">6</a></span>
<span class="normal"><a href="#__codelineno-46-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="__codelineno-46-2" name="__codelineno-46-2"></a><span class="kt">void</span><span class="w"> </span><span class="n">insert</span><span class="p">(</span><span class="n">iterator</span><span class="w"> </span><span class="n">pos</span><span class="p">,</span><span class="w"> </span><span class="n">Args</span><span class="p">..,</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-46-3" name="__codelineno-46-3"></a><span class="p">{</span>
<a id="__codelineno-46-4" name="__codelineno-46-4"></a><span class="w">    </span><span class="n">Node</span><span class="o">*</span><span class="w"> </span><span class="n">cur</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pos</span><span class="p">.</span><span class="n">_node</span><span class="p">;</span>
<a id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="w">    </span><span class="n">Node</span><span class="o">*</span><span class="w"> </span><span class="n">newnode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Node</span><span class="p">(</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Args</span><span class="o">&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">));</span><span class="c1">// 保证右值引用不退化</span>
<a id="__codelineno-46-6" name="__codelineno-46-6"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-46-7" name="__codelineno-46-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>最后，完善<code>Node</code>节点的构造函数，使其满足可变参数模版，同样需要完美转发</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-47-1">1</a></span>
<span class="normal"><a href="#__codelineno-47-2">2</a></span>
<span class="normal"><a href="#__codelineno-47-3">3</a></span>
<span class="normal"><a href="#__codelineno-47-4">4</a></span>
<span class="normal"><a href="#__codelineno-47-5">5</a></span>
<span class="normal"><a href="#__codelineno-47-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span>
<a id="__codelineno-47-2" name="__codelineno-47-2"></a><span class="n">ListNode</span><span class="p">(</span><span class="n">Args</span><span class="p">...</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-47-3" name="__codelineno-47-3"></a><span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="n">_next</span><span class="p">(</span><span class="k">nullptr</span><span class="p">)</span>
<a id="__codelineno-47-4" name="__codelineno-47-4"></a><span class="w">    </span><span class="p">,</span><span class="w"> </span><span class="n">_prev</span><span class="p">(</span><span class="k">nullptr</span><span class="p">)</span>
<a id="__codelineno-47-5" name="__codelineno-47-5"></a><span class="w">    </span><span class="p">,</span><span class="w"> </span><span class="n">_data</span><span class="p">(</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Args</span><span class="o">&gt;</span><span class="p">(</span><span class="n">args</span><span class="p">)...)</span><span class="w"> </span><span class="c1">// 保证右值引用不退化</span>
<a id="__codelineno-47-6" name="__codelineno-47-6"></a><span class="p">{}</span>
</code></pre></div></td></tr></table></div>
<h3 id="emplacepush"><code>emplace</code>系列函数和<code>push</code>系列函数的选择<a class="headerlink" href="#emplacepush" title="Permanent link">&para;</a></h3>
<p>以vector中的<code>emplace_back</code>和<code>push_back</code>为例</p>
<p><code>push_back</code> 和 <code>emplace_back</code> 都是 vector 类的成员函数，用于在 vector 的末尾添加元素。它们之间的主要区别在于添加元素的方式:</p>
<ol>
<li><code>push_back</code>：接受一个已存在的对象作为参数，进行拷贝或移动，将其添加到 vector 的未尾。这会引发一次拷贝或移动构造函数的调用，具体取决于传递的对象是否可移动。</li>
<li><code>emplace_back</code>：接受构造函数的参数，直接在 vector 的内存空间中调用该对象的构造函数，避免了额外的拷贝或移动操作。这可以提高效率，尤其是在处理复杂对象时。</li>
</ol>
<p>使用场景:</p>
<ul>
<li>如果需要将一个已经存在的对象添加到vector中，使用<code>push_back</code></li>
<li>如果希望直接在vector中构造对象,避免额外的拷贝或移动开销，使用<code>emplace_back</code></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>当然可以无脑选择<code>emplace_back</code>函数</p>
</div>
<h2 id="lambda">lambda表达式<a class="headerlink" href="#lambda" title="Permanent link">&para;</a></h2>
<h3 id="_18">引入<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h3>
<p>在C++ 98中，对于<code>sort</code>函数来说，如果需要根据不同的比较方式实现不同的排序结果，需要写不同的仿函数，而在C++ 11中，可以通过lambda表达式解决这个问题，例如下面的例子：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-48-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-48-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-48-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-48-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-48-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-48-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-48-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-48-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-48-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-48-10">10</a></span>
<span class="normal"><a href="#__codelineno-48-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Goods</span>
<a id="__codelineno-48-2" name="__codelineno-48-2"></a><span class="p">{</span>
<a id="__codelineno-48-3" name="__codelineno-48-3"></a><span class="w">    </span><span class="n">string</span><span class="w"> </span><span class="n">_name</span><span class="p">;</span><span class="w">  </span><span class="c1">// 名字</span>
<a id="__codelineno-48-4" name="__codelineno-48-4"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">_price</span><span class="p">;</span><span class="w"> </span><span class="c1">// 价格</span>
<a id="__codelineno-48-5" name="__codelineno-48-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">_evaluate</span><span class="p">;</span><span class="w"> </span><span class="c1">// 评价</span>
<a id="__codelineno-48-6" name="__codelineno-48-6"></a><span class="w">    </span><span class="n">Goods</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">price</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">evaluate</span><span class="p">)</span>
<a id="__codelineno-48-7" name="__codelineno-48-7"></a><span class="w">        </span><span class="o">:</span><span class="n">_name</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
<a id="__codelineno-48-8" name="__codelineno-48-8"></a><span class="w">        </span><span class="p">,</span><span class="w"> </span><span class="n">_price</span><span class="p">(</span><span class="n">price</span><span class="p">)</span>
<a id="__codelineno-48-9" name="__codelineno-48-9"></a><span class="w">        </span><span class="p">,</span><span class="w"> </span><span class="n">_evaluate</span><span class="p">(</span><span class="n">evaluate</span><span class="p">)</span>
<a id="__codelineno-48-10" name="__codelineno-48-10"></a><span class="w">    </span><span class="p">{}</span>
<a id="__codelineno-48-11" name="__codelineno-48-11"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>当需要按照商品的价格和评价排序时，则需要写两个仿函数</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-49-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-49-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-49-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-49-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-49-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-49-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-49-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-49-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-49-10">10</a></span>
<span class="normal"><a href="#__codelineno-49-11">11</a></span>
<span class="normal"><a href="#__codelineno-49-12">12</a></span>
<span class="normal"><a href="#__codelineno-49-13">13</a></span>
<span class="normal"><a href="#__codelineno-49-14">14</a></span>
<span class="normal"><a href="#__codelineno-49-15">15</a></span>
<span class="normal"><a href="#__codelineno-49-16">16</a></span>
<span class="normal"><a href="#__codelineno-49-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">ComparePrice</span>
<a id="__codelineno-49-2" name="__codelineno-49-2"></a><span class="p">{</span>
<a id="__codelineno-49-3" name="__codelineno-49-3"></a><span class="w">    </span><span class="c1">// 按照价格排序</span>
<a id="__codelineno-49-4" name="__codelineno-49-4"></a><span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nf">operator</span><span class="p">()(</span><span class="k">const</span><span class="w"> </span><span class="n">Goods</span><span class="o">&amp;</span><span class="w"> </span><span class="n">g1</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Goods</span><span class="o">&amp;</span><span class="w"> </span><span class="n">g2</span><span class="p">)</span>
<a id="__codelineno-49-5" name="__codelineno-49-5"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-49-6" name="__codelineno-49-6"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">g1</span><span class="p">.</span><span class="n">_price</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">g2</span><span class="p">.</span><span class="n">_price</span><span class="p">;</span>
<a id="__codelineno-49-7" name="__codelineno-49-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-49-8" name="__codelineno-49-8"></a><span class="p">};</span>
<a id="__codelineno-49-9" name="__codelineno-49-9"></a>
<a id="__codelineno-49-10" name="__codelineno-49-10"></a><span class="k">struct</span><span class="w"> </span><span class="nc">CompareEvaluate</span>
<a id="__codelineno-49-11" name="__codelineno-49-11"></a><span class="p">{</span>
<a id="__codelineno-49-12" name="__codelineno-49-12"></a><span class="w">    </span><span class="c1">// 按照评价排序</span>
<a id="__codelineno-49-13" name="__codelineno-49-13"></a><span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nf">operator</span><span class="p">()(</span><span class="k">const</span><span class="w"> </span><span class="n">Goods</span><span class="o">&amp;</span><span class="w"> </span><span class="n">g1</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">Goods</span><span class="o">&amp;</span><span class="w"> </span><span class="n">g2</span><span class="p">)</span>
<a id="__codelineno-49-14" name="__codelineno-49-14"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-49-15" name="__codelineno-49-15"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">g1</span><span class="p">.</span><span class="n">_evaluate</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">g2</span><span class="p">.</span><span class="n">_evaluate</span><span class="p">;</span>
<a id="__codelineno-49-16" name="__codelineno-49-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-49-17" name="__codelineno-49-17"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>调用时传递仿函数匿名对象</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1">1</a></span>
<span class="normal"><a href="#__codelineno-50-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="n">sort</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">ComparePrice</span><span class="p">());</span>
<a id="__codelineno-50-2" name="__codelineno-50-2"></a><span class="n">sort</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">CompareEvaluate</span><span class="p">());</span>
</code></pre></div></td></tr></table></div>
<p>但是当需要按照其他方式进行比较时，需要再写其他的仿函数，为了简化步骤，可以使用lambda表达式</p>
<h3 id="lambda_1">lambda表达式介绍<a class="headerlink" href="#lambda_1" title="Permanent link">&para;</a></h3>
<p>lambda表达式基本结构如下：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-1">1</a></span>
<span class="normal"><a href="#__codelineno-51-2">2</a></span>
<span class="normal"><a href="#__codelineno-51-3">3</a></span>
<span class="normal"><a href="#__codelineno-51-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1"></a><span class="p">[</span><span class="n">捕捉列表</span><span class="p">](</span><span class="n">形式参数</span><span class="p">)</span><span class="k">mutable</span><span class="o">-&gt;</span><span class="n">返回值类型</span>
<a id="__codelineno-51-2" name="__codelineno-51-2"></a><span class="p">{</span>
<a id="__codelineno-51-3" name="__codelineno-51-3"></a><span class="w">    </span><span class="n">函数体</span>
<a id="__codelineno-51-4" name="__codelineno-51-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>捕捉列表：编译器根据<code>[]</code>来判断接下来的代码是否为lambda函数，用于传递在lambda表达式体内的使用到的参数，一般为lambda表达式所在的直接作用域的变量</li>
<li>形式参数：用于lambda表达式体内的变量，如果不需要传递形式参数，则当前项可以省略不写，如果需要加<code>mutable</code>，则不论是有还是没有形式参数，都需要带上<code>()</code></li>
<li><code>mutable</code>：默认情况下lambda表达式捕捉列表的参数是被<code>const</code>修饰的，所以捕捉列表的参数是以传值的方式传递时是无法直接在lambda表达式内部进行修改的，但是如果加了<code>mutable</code>，就可以取消<code>const</code>属性</li>
<li><code>-&gt;</code>返回值类型：与普通的函数体一样的返回类型声明，但是此处一定要使用尾置返回值类型，如果lambda表达式的返回值类型比较明确时，该项可以不写</li>
<li>函数体：同普通函数</li>
</ul>
<p>有了lambda表达式，引入部分的例子中的仿函数可以用lambda表达式进行替换，如下：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-52-1">1</a></span>
<span class="normal"><a href="#__codelineno-52-2">2</a></span>
<span class="normal"><a href="#__codelineno-52-3">3</a></span>
<span class="normal"><a href="#__codelineno-52-4">4</a></span>
<span class="normal"><a href="#__codelineno-52-5">5</a></span>
<span class="normal"><a href="#__codelineno-52-6">6</a></span>
<span class="normal"><a href="#__codelineno-52-7">7</a></span>
<span class="normal"><a href="#__codelineno-52-8">8</a></span>
<span class="normal"><a href="#__codelineno-52-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1"></a><span class="c1">// lambda表达式</span>
<a id="__codelineno-52-2" name="__codelineno-52-2"></a><span class="n">sort</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="p">[](</span><span class="n">Goods</span><span class="o">&amp;</span><span class="w"> </span><span class="n">g1</span><span class="p">,</span><span class="w"> </span><span class="n">Goods</span><span class="o">&amp;</span><span class="w"> </span><span class="n">g2</span><span class="p">)</span>
<a id="__codelineno-52-3" name="__codelineno-52-3"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-52-4" name="__codelineno-52-4"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">g1</span><span class="p">.</span><span class="n">_price</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">g2</span><span class="p">.</span><span class="n">_price</span><span class="p">;</span>
<a id="__codelineno-52-5" name="__codelineno-52-5"></a><span class="w">    </span><span class="p">});</span>
<a id="__codelineno-52-6" name="__codelineno-52-6"></a><span class="n">sort</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="p">[](</span><span class="n">Goods</span><span class="o">&amp;</span><span class="w"> </span><span class="n">g1</span><span class="p">,</span><span class="w"> </span><span class="n">Goods</span><span class="o">&amp;</span><span class="w"> </span><span class="n">g2</span><span class="p">)</span>
<a id="__codelineno-52-7" name="__codelineno-52-7"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-52-8" name="__codelineno-52-8"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">g1</span><span class="p">.</span><span class="n">_evaluate</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">g2</span><span class="p">.</span><span class="n">_evaluate</span><span class="p">;</span>
<a id="__codelineno-52-9" name="__codelineno-52-9"></a><span class="w">    </span><span class="p">});</span>
</code></pre></div></td></tr></table></div>
<h3 id="lambda_2">lambda表达式捕捉列表的传递形式<a class="headerlink" href="#lambda_2" title="Permanent link">&para;</a></h3>
<p>如果没有形式参数传递，lambda表达式想使用其所在的直接作用域中的变量（全局除外）需要在捕捉列表中传递，在lambda表达式中，捕捉列表的传递形式一共有4种：</p>
<ol>
<li>具体变量值传递<code>[variable]</code>：直接传递变量的值，在lambda表达式中就是对该变量的值进行拷贝，所以lambda表达式内部对<code>variable</code>修改时不影响<code>variable</code>本身的内容，并且在没有<code>mutable</code>的情况下不可以在内部对<code>variable</code>进行修改</li>
<li>具体变量引用传递<code>[&amp;variable]</code>：以<code>variable</code>引用的方式传递，在lambda表达式中可以对<code>variable</code>内容进行修改，从而达到传址调用的效果</li>
<li>所有变量值传递<code>[=]</code>：将lambda表达式所在作用域中的变量全部以传值的方式传递给lambda表达式，具体传递了哪些值需要看lambda表达式中使用到了哪些值</li>
<li>所有变量引用传递<code>[&amp;]</code>：将将lambda表达式所在作用域中的变量全部以传址的方式传递给lambda表达式，具体传递了哪些值需要看lambda表达式中使用到了哪些值，如果lambda内部需要进行修改，需要加<code>mutable</code></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>对于第二种情况，如果想在lambda表达式内部修改lambda所在作用域的变量的值，可以在lambda表达式的形式参数部分以引用的方式传递实参，此时就可以不需要添加<code>mutable</code>关键字，这个方法与普通函数的思路一致</p>
</div>
<p>上面4种方法也可以交错使用，例如下面的代码：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-53-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-53-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-53-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-53-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-53-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-53-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-53-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-53-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-53-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-53-10">10</a></span>
<span class="normal"><a href="#__codelineno-53-11">11</a></span>
<span class="normal"><a href="#__codelineno-53-12">12</a></span>
<span class="normal"><a href="#__codelineno-53-13">13</a></span>
<span class="normal"><a href="#__codelineno-53-14">14</a></span>
<span class="normal"><a href="#__codelineno-53-15">15</a></span>
<span class="normal"><a href="#__codelineno-53-16">16</a></span>
<span class="normal"><a href="#__codelineno-53-17">17</a></span>
<span class="normal"><a href="#__codelineno-53-18">18</a></span>
<span class="normal"><a href="#__codelineno-53-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-53-2" name="__codelineno-53-2"></a><span class="p">{</span>
<a id="__codelineno-53-3" name="__codelineno-53-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-53-4" name="__codelineno-53-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-53-5" name="__codelineno-53-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-53-6" name="__codelineno-53-6"></a><span class="w">    </span><span class="c1">// a，b以值传递，c以引用传递</span>
<a id="__codelineno-53-7" name="__codelineno-53-7"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">=</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">]()</span>
<a id="__codelineno-53-8" name="__codelineno-53-8"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-53-9" name="__codelineno-53-9"></a><span class="w">        </span><span class="c1">// a和b是值传递，不能修改</span>
<a id="__codelineno-53-10" name="__codelineno-53-10"></a><span class="w">        </span><span class="c1">// a = 10;</span>
<a id="__codelineno-53-11" name="__codelineno-53-11"></a><span class="w">        </span><span class="c1">// b = 20;</span>
<a id="__codelineno-53-12" name="__codelineno-53-12"></a><span class="w">        </span><span class="c1">// c是引用传递，可以修改</span>
<a id="__codelineno-53-13" name="__codelineno-53-13"></a><span class="w">        </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span>
<a id="__codelineno-53-14" name="__codelineno-53-14"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-53-15" name="__codelineno-53-15"></a>
<a id="__codelineno-53-16" name="__codelineno-53-16"></a><span class="w">    </span><span class="n">func</span><span class="p">();</span>
<a id="__codelineno-53-17" name="__codelineno-53-17"></a>
<a id="__codelineno-53-18" name="__codelineno-53-18"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-53-19" name="__codelineno-53-19"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="lambda_3">lambda表达式的原理<a class="headerlink" href="#lambda_3" title="Permanent link">&para;</a></h3>
<p>前面通过lambda表达式简化了原本应该使用仿函数改写比较方式的例子展示了lambda表达式的使用，但是lambda表达式实际与仿函数的原理基本一致，所以lambda表达式也被称为匿名函数，观察下面的代码的反汇编代码</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-54-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-54-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-54-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-54-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-54-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-54-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-54-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-54-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-54-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-54-10">10</a></span>
<span class="normal"><a href="#__codelineno-54-11">11</a></span>
<span class="normal"><a href="#__codelineno-54-12">12</a></span>
<span class="normal"><a href="#__codelineno-54-13">13</a></span>
<span class="normal"><a href="#__codelineno-54-14">14</a></span>
<span class="normal"><a href="#__codelineno-54-15">15</a></span>
<span class="normal"><a href="#__codelineno-54-16">16</a></span>
<span class="normal"><a href="#__codelineno-54-17">17</a></span>
<span class="normal"><a href="#__codelineno-54-18">18</a></span>
<span class="normal"><a href="#__codelineno-54-19">19</a></span>
<span class="normal"><a href="#__codelineno-54-20">20</a></span>
<span class="normal"><a href="#__codelineno-54-21">21</a></span>
<span class="normal"><a href="#__codelineno-54-22">22</a></span>
<span class="normal"><a href="#__codelineno-54-23">23</a></span>
<span class="normal"><a href="#__codelineno-54-24">24</a></span>
<span class="normal"><a href="#__codelineno-54-25">25</a></span>
<span class="normal"><a href="#__codelineno-54-26">26</a></span>
<span class="normal"><a href="#__codelineno-54-27">27</a></span>
<span class="normal"><a href="#__codelineno-54-28">28</a></span>
<span class="normal"><a href="#__codelineno-54-29">29</a></span>
<span class="normal"><a href="#__codelineno-54-30">30</a></span>
<span class="normal"><a href="#__codelineno-54-31">31</a></span>
<span class="normal"><a href="#__codelineno-54-32">32</a></span>
<span class="normal"><a href="#__codelineno-54-33">33</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Rate</span>
<a id="__codelineno-54-2" name="__codelineno-54-2"></a><span class="p">{</span>
<a id="__codelineno-54-3" name="__codelineno-54-3"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-54-4" name="__codelineno-54-4"></a><span class="w">    </span><span class="n">Rate</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">rate</span><span class="p">)</span>
<a id="__codelineno-54-5" name="__codelineno-54-5"></a><span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="n">_rate</span><span class="p">(</span><span class="n">rate</span><span class="p">)</span>
<a id="__codelineno-54-6" name="__codelineno-54-6"></a><span class="w">    </span><span class="p">{}</span>
<a id="__codelineno-54-7" name="__codelineno-54-7"></a>
<a id="__codelineno-54-8" name="__codelineno-54-8"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="k">operator</span><span class="p">()(</span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">)</span>
<a id="__codelineno-54-9" name="__codelineno-54-9"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-54-10" name="__codelineno-54-10"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">money</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">_rate</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">year</span><span class="p">;</span>
<a id="__codelineno-54-11" name="__codelineno-54-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-54-12" name="__codelineno-54-12"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-54-13" name="__codelineno-54-13"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">_rate</span><span class="p">;</span>
<a id="__codelineno-54-14" name="__codelineno-54-14"></a><span class="p">};</span>
<a id="__codelineno-54-15" name="__codelineno-54-15"></a>
<a id="__codelineno-54-16" name="__codelineno-54-16"></a>
<a id="__codelineno-54-17" name="__codelineno-54-17"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-54-18" name="__codelineno-54-18"></a><span class="p">{</span>
<a id="__codelineno-54-19" name="__codelineno-54-19"></a><span class="w">    </span><span class="c1">// 创建普通对象</span>
<a id="__codelineno-54-20" name="__codelineno-54-20"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">rate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span>
<a id="__codelineno-54-21" name="__codelineno-54-21"></a><span class="w">    </span><span class="n">Rate</span><span class="w"> </span><span class="n">r</span><span class="p">(</span><span class="n">rate</span><span class="p">);</span>
<a id="__codelineno-54-22" name="__codelineno-54-22"></a><span class="w">    </span><span class="c1">// 使用仿函数</span>
<a id="__codelineno-54-23" name="__codelineno-54-23"></a><span class="w">    </span><span class="n">r</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-54-24" name="__codelineno-54-24"></a>
<a id="__codelineno-54-25" name="__codelineno-54-25"></a><span class="w">    </span><span class="c1">// 使用lambda表达式</span>
<a id="__codelineno-54-26" name="__codelineno-54-26"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">=</span><span class="p">](</span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">)</span>
<a id="__codelineno-54-27" name="__codelineno-54-27"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-54-28" name="__codelineno-54-28"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">money</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">rate</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">year</span><span class="p">;</span>
<a id="__codelineno-54-29" name="__codelineno-54-29"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-54-30" name="__codelineno-54-30"></a>
<a id="__codelineno-54-31" name="__codelineno-54-31"></a><span class="w">    </span><span class="n">func</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-54-32" name="__codelineno-54-32"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-54-33" name="__codelineno-54-33"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>反汇编如下：</p>
<p><a class="glightbox" href="C++ 11相关新特性.assets\image8.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="C++ 11相关新特性.assets\image8.png"></a></p>
<p>需要注意的是，lambda表达式对象不可以相互转化，尽管完全相同，在底层两个逻辑一模一样的lambda表达式存在不同的<code>lambda+uuid</code>名称</p>
<h2 id="_19">包装器<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h2>
<h3 id="_20">包装器的基本使用<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<p>C++11中引入了<code>function</code>包装器，也叫做适配器，在前面有了lambda表达式后，可以发现如果直接调用lambda表达式的对象，其方式和函数的调用基本相同，但是前面的函数还有可能是仿函数，为了使程序的模版使用效率变高，可以使用包装器</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>使用包装器需要引入头文件<code>&lt;functional&gt;</code></p>
</div>
<p>包装器可以根据已有的函数、函数指针、lambda表达式进行包装，基本结构如下：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-55-1">1</a></span>
<span class="normal"><a href="#__codelineno-55-2">2</a></span>
<span class="normal"><a href="#__codelineno-55-3">3</a></span>
<span class="normal"><a href="#__codelineno-55-4">4</a></span>
<span class="normal"><a href="#__codelineno-55-5">5</a></span>
<span class="normal"><a href="#__codelineno-55-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">function</span><span class="p">;</span><span class="w">     </span><span class="c1">// undefined</span>
<a id="__codelineno-55-2" name="__codelineno-55-2"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">Ret</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="p">...</span><span class="w"> </span><span class="n">Args</span><span class="o">&gt;</span><span class="w"> </span>
<a id="__codelineno-55-3" name="__codelineno-55-3"></a><span class="k">class</span><span class="w"> </span><span class="nc">function</span><span class="o">&lt;</span><span class="n">Ret</span><span class="p">(</span><span class="n">Args</span><span class="p">...)</span><span class="o">&gt;</span><span class="p">;</span>
<a id="__codelineno-55-4" name="__codelineno-55-4"></a>
<a id="__codelineno-55-5" name="__codelineno-55-5"></a><span class="c1">// 其中Ret代表指定的函数的返回值</span>
<a id="__codelineno-55-6" name="__codelineno-55-6"></a><span class="c1">// Args代表指定的函数的参数</span>
</code></pre></div></td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>需要注意，使用包装器必须保证包装器中的模版参数（返回值和形式参数）与被包装的对象完全相同</p>
</div>
<p>使用方式如下：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-56-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-56-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-56-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-56-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-56-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-56-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-56-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-56-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-56-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-56-10">10</a></span>
<span class="normal"><a href="#__codelineno-56-11">11</a></span>
<span class="normal"><a href="#__codelineno-56-12">12</a></span>
<span class="normal"><a href="#__codelineno-56-13">13</a></span>
<span class="normal"><a href="#__codelineno-56-14">14</a></span>
<span class="normal"><a href="#__codelineno-56-15">15</a></span>
<span class="normal"><a href="#__codelineno-56-16">16</a></span>
<span class="normal"><a href="#__codelineno-56-17">17</a></span>
<span class="normal"><a href="#__codelineno-56-18">18</a></span>
<span class="normal"><a href="#__codelineno-56-19">19</a></span>
<span class="normal"><a href="#__codelineno-56-20">20</a></span>
<span class="normal"><a href="#__codelineno-56-21">21</a></span>
<span class="normal"><a href="#__codelineno-56-22">22</a></span>
<span class="normal"><a href="#__codelineno-56-23">23</a></span>
<span class="normal"><a href="#__codelineno-56-24">24</a></span>
<span class="normal"><a href="#__codelineno-56-25">25</a></span>
<span class="normal"><a href="#__codelineno-56-26">26</a></span>
<span class="normal"><a href="#__codelineno-56-27">27</a></span>
<span class="normal"><a href="#__codelineno-56-28">28</a></span>
<span class="normal"><a href="#__codelineno-56-29">29</a></span>
<span class="normal"><a href="#__codelineno-56-30">30</a></span>
<span class="normal"><a href="#__codelineno-56-31">31</a></span>
<span class="normal"><a href="#__codelineno-56-32">32</a></span>
<span class="normal"><a href="#__codelineno-56-33">33</a></span>
<span class="normal"><a href="#__codelineno-56-34">34</a></span>
<span class="normal"><a href="#__codelineno-56-35">35</a></span>
<span class="normal"><a href="#__codelineno-56-36">36</a></span>
<span class="normal"><a href="#__codelineno-56-37">37</a></span>
<span class="normal"><a href="#__codelineno-56-38">38</a></span>
<span class="normal"><a href="#__codelineno-56-39">39</a></span>
<span class="normal"><a href="#__codelineno-56-40">40</a></span>
<span class="normal"><a href="#__codelineno-56-41">41</a></span>
<span class="normal"><a href="#__codelineno-56-42">42</a></span>
<span class="normal"><a href="#__codelineno-56-43">43</a></span>
<span class="normal"><a href="#__codelineno-56-44">44</a></span>
<span class="normal"><a href="#__codelineno-56-45">45</a></span>
<span class="normal"><a href="#__codelineno-56-46">46</a></span>
<span class="normal"><a href="#__codelineno-56-47">47</a></span>
<span class="normal"><a href="#__codelineno-56-48">48</a></span>
<span class="normal"><a href="#__codelineno-56-49">49</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;functional&gt;</span>
<a id="__codelineno-56-2" name="__codelineno-56-2"></a>
<a id="__codelineno-56-3" name="__codelineno-56-3"></a><span class="k">class</span><span class="w"> </span><span class="nc">Rate</span>
<a id="__codelineno-56-4" name="__codelineno-56-4"></a><span class="p">{</span>
<a id="__codelineno-56-5" name="__codelineno-56-5"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-56-6" name="__codelineno-56-6"></a><span class="w">    </span><span class="n">Rate</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">rate</span><span class="p">)</span><span class="w"> </span>
<a id="__codelineno-56-7" name="__codelineno-56-7"></a><span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="n">_rate</span><span class="p">(</span><span class="n">rate</span><span class="p">)</span>
<a id="__codelineno-56-8" name="__codelineno-56-8"></a><span class="w">    </span><span class="p">{}</span>
<a id="__codelineno-56-9" name="__codelineno-56-9"></a>
<a id="__codelineno-56-10" name="__codelineno-56-10"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="k">operator</span><span class="p">()(</span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">)</span>
<a id="__codelineno-56-11" name="__codelineno-56-11"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-56-12" name="__codelineno-56-12"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">money</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">_rate</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">year</span><span class="p">;</span>
<a id="__codelineno-56-13" name="__codelineno-56-13"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-56-14" name="__codelineno-56-14"></a>
<a id="__codelineno-56-15" name="__codelineno-56-15"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">calculate</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">)</span>
<a id="__codelineno-56-16" name="__codelineno-56-16"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-56-17" name="__codelineno-56-17"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">money</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">year</span><span class="p">;</span>
<a id="__codelineno-56-18" name="__codelineno-56-18"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-56-19" name="__codelineno-56-19"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-56-20" name="__codelineno-56-20"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">_rate</span><span class="p">;</span>
<a id="__codelineno-56-21" name="__codelineno-56-21"></a><span class="p">};</span>
<a id="__codelineno-56-22" name="__codelineno-56-22"></a>
<a id="__codelineno-56-23" name="__codelineno-56-23"></a><span class="kt">double</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">)</span>
<a id="__codelineno-56-24" name="__codelineno-56-24"></a><span class="p">{</span>
<a id="__codelineno-56-25" name="__codelineno-56-25"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">money</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">year</span><span class="p">;</span>
<a id="__codelineno-56-26" name="__codelineno-56-26"></a><span class="p">}</span>
<a id="__codelineno-56-27" name="__codelineno-56-27"></a>
<a id="__codelineno-56-28" name="__codelineno-56-28"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-56-29" name="__codelineno-56-29"></a><span class="p">{</span>
<a id="__codelineno-56-30" name="__codelineno-56-30"></a><span class="w">    </span><span class="c1">// 包装普通函数</span>
<a id="__codelineno-56-31" name="__codelineno-56-31"></a><span class="w">    </span><span class="n">function</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">(</span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="n">func1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func</span><span class="p">;</span>
<a id="__codelineno-56-32" name="__codelineno-56-32"></a><span class="w">    </span><span class="n">func1</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-56-33" name="__codelineno-56-33"></a>
<a id="__codelineno-56-34" name="__codelineno-56-34"></a><span class="w">    </span><span class="c1">// 包装仿函数</span>
<a id="__codelineno-56-35" name="__codelineno-56-35"></a><span class="w">    </span><span class="n">function</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">(</span><span class="n">Rate</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="n">func2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Rate</span><span class="o">::</span><span class="k">operator</span><span class="p">();</span>
<a id="__codelineno-56-36" name="__codelineno-56-36"></a><span class="w">    </span><span class="n">func2</span><span class="p">(</span><span class="n">Rate</span><span class="p">(</span><span class="mf">0.1</span><span class="p">),</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-56-37" name="__codelineno-56-37"></a>
<a id="__codelineno-56-38" name="__codelineno-56-38"></a><span class="w">    </span><span class="n">function</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">(</span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="n">func3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Rate</span><span class="o">::</span><span class="n">calculate</span><span class="p">;</span>
<a id="__codelineno-56-39" name="__codelineno-56-39"></a><span class="w">    </span><span class="n">func3</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-56-40" name="__codelineno-56-40"></a>
<a id="__codelineno-56-41" name="__codelineno-56-41"></a><span class="w">    </span><span class="c1">// 包装lambda表达式</span>
<a id="__codelineno-56-42" name="__codelineno-56-42"></a><span class="w">    </span><span class="n">function</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">(</span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="n">func4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">=</span><span class="p">](</span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">)</span>
<a id="__codelineno-56-43" name="__codelineno-56-43"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-56-44" name="__codelineno-56-44"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">money</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">year</span><span class="p">;</span>
<a id="__codelineno-56-45" name="__codelineno-56-45"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-56-46" name="__codelineno-56-46"></a>
<a id="__codelineno-56-47" name="__codelineno-56-47"></a><span class="w">    </span><span class="n">func4</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-56-48" name="__codelineno-56-48"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-56-49" name="__codelineno-56-49"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>上面代码中，包装普通函数与包装函数指针类似，包装成员函数需要注意两种形式：1. 静态成员函数 2. 非静态成员函数，对于静态成员函数来说，可以直接取地址，与普通函数类似，但是需要指定类域，而对于非静态成语函数来说，需要加上<code>&amp;</code>，因为非静态成员函数存在一个隐含的参数<code>this</code>，需要依赖对象实例进行调用，所以非静态成员需要传递一个类名（或类指针）代表调用时需要传递同类类型的（匿名/非非匿名）对象（或对象地址），在调用包装后的函数时，实际上是通过对象进行调用，而不是包装器进行调用，对于lambda表达式来说，直接使包装器接受lambda表达式即可</p>
<h3 id="_21">包装器与重载函数<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<p>重载函数的根本条件就是必须满足函数名相同，但是此时如果直接使用函数名作为包装器的对象就会产生二义性问题，例如下面的代码：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-57-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-57-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-57-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-57-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-57-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-57-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-57-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-57-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-57-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-57-10">10</a></span>
<span class="normal"><a href="#__codelineno-57-11">11</a></span>
<span class="normal"><a href="#__codelineno-57-12">12</a></span>
<span class="normal"><a href="#__codelineno-57-13">13</a></span>
<span class="normal"><a href="#__codelineno-57-14">14</a></span>
<span class="normal"><a href="#__codelineno-57-15">15</a></span>
<span class="normal"><a href="#__codelineno-57-16">16</a></span>
<span class="normal"><a href="#__codelineno-57-17">17</a></span>
<span class="normal"><a href="#__codelineno-57-18">18</a></span>
<span class="normal"><a href="#__codelineno-57-19">19</a></span>
<span class="normal"><a href="#__codelineno-57-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;functional&gt;</span>
<a id="__codelineno-57-2" name="__codelineno-57-2"></a><span class="kt">int</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<a id="__codelineno-57-3" name="__codelineno-57-3"></a><span class="p">{</span>
<a id="__codelineno-57-4" name="__codelineno-57-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<a id="__codelineno-57-5" name="__codelineno-57-5"></a><span class="p">}</span>
<a id="__codelineno-57-6" name="__codelineno-57-6"></a>
<a id="__codelineno-57-7" name="__codelineno-57-7"></a><span class="kt">double</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<a id="__codelineno-57-8" name="__codelineno-57-8"></a><span class="p">{</span>
<a id="__codelineno-57-9" name="__codelineno-57-9"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<a id="__codelineno-57-10" name="__codelineno-57-10"></a><span class="p">}</span>
<a id="__codelineno-57-11" name="__codelineno-57-11"></a>
<a id="__codelineno-57-12" name="__codelineno-57-12"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-57-13" name="__codelineno-57-13"></a><span class="p">{</span>
<a id="__codelineno-57-14" name="__codelineno-57-14"></a><span class="w">    </span><span class="n">map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">m</span><span class="p">;</span>
<a id="__codelineno-57-15" name="__codelineno-57-15"></a><span class="w">    </span><span class="n">m</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-57-16" name="__codelineno-57-16"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-57-17" name="__codelineno-57-17"></a><span class="p">}</span>
<a id="__codelineno-57-18" name="__codelineno-57-18"></a>
<a id="__codelineno-57-19" name="__codelineno-57-19"></a><span class="n">报错信息</span><span class="err">：</span>
<a id="__codelineno-57-20" name="__codelineno-57-20"></a><span class="err">&#39;</span><span class="n">std</span><span class="o">::</span><span class="n">_Tree</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">_Tmap_traits</span><span class="o">&lt;</span><span class="n">_Kty</span><span class="p">,</span><span class="n">_Ty</span><span class="p">,</span><span class="n">_Pr</span><span class="p">,</span><span class="n">_Alloc</span><span class="p">,</span><span class="nb">false</span><span class="o">&gt;&gt;::</span><span class="n">insert</span><span class="err">&#39;</span><span class="o">:</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">overloaded</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">convert</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">argument</span><span class="w"> </span><span class="n">types</span>
</code></pre></div></td></tr></table></div>
<p>在上面的代码中，map的模版参数是<code>int</code>和<code>function&lt;int(int, int)&gt;</code>，代码中也存在对应包装器模版类型的<code>add</code>函数，但是编译器并不会自动选择对应的重载函数，所以在出现重载函数时，推荐使用函数指针对重载函数进行指代，再传入函数指针，避免传入重载函数的函数名，另外也可以使用lambda表达式，从而不使用函数重载，例如下面的代码：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-58-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-58-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-58-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-58-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-58-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-58-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-58-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-58-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-58-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-58-10">10</a></span>
<span class="normal"><a href="#__codelineno-58-11">11</a></span>
<span class="normal"><a href="#__codelineno-58-12">12</a></span>
<span class="normal"><a href="#__codelineno-58-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-58-2" name="__codelineno-58-2"></a><span class="p">{</span>
<a id="__codelineno-58-3" name="__codelineno-58-3"></a><span class="w">    </span><span class="n">map</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">m</span><span class="p">;</span>
<a id="__codelineno-58-4" name="__codelineno-58-4"></a><span class="w">    </span><span class="c1">//m.insert({ 1, add }); 直接插入导致二义性</span>
<a id="__codelineno-58-5" name="__codelineno-58-5"></a>
<a id="__codelineno-58-6" name="__codelineno-58-6"></a><span class="w">    </span><span class="c1">// 使用函数指针指代需要插入的函数</span>
<a id="__codelineno-58-7" name="__codelineno-58-7"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">pint</span><span class="p">)(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">add</span><span class="p">;</span>
<a id="__codelineno-58-8" name="__codelineno-58-8"></a><span class="w">    </span><span class="n">m</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">pint</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-58-9" name="__codelineno-58-9"></a>
<a id="__codelineno-58-10" name="__codelineno-58-10"></a><span class="w">    </span><span class="c1">// 使用lambda表达式</span>
<a id="__codelineno-58-11" name="__codelineno-58-11"></a><span class="w">    </span><span class="n">m</span><span class="p">.</span><span class="n">insert</span><span class="p">({</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">});</span>
<a id="__codelineno-58-12" name="__codelineno-58-12"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-58-13" name="__codelineno-58-13"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="_22">包装器的使用<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h3>
<p>C++形式的转移表，以实现简易计算器为例：</p>
<p>下面的代码是用于计算的函数：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-59-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-59-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-59-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-59-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-59-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-59-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-59-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-59-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-59-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-59-10">10</a></span>
<span class="normal"><a href="#__codelineno-59-11">11</a></span>
<span class="normal"><a href="#__codelineno-59-12">12</a></span>
<span class="normal"><a href="#__codelineno-59-13">13</a></span>
<span class="normal"><a href="#__codelineno-59-14">14</a></span>
<span class="normal"><a href="#__codelineno-59-15">15</a></span>
<span class="normal"><a href="#__codelineno-59-16">16</a></span>
<span class="normal"><a href="#__codelineno-59-17">17</a></span>
<span class="normal"><a href="#__codelineno-59-18">18</a></span>
<span class="normal"><a href="#__codelineno-59-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<a id="__codelineno-59-2" name="__codelineno-59-2"></a><span class="p">{</span>
<a id="__codelineno-59-3" name="__codelineno-59-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<a id="__codelineno-59-4" name="__codelineno-59-4"></a><span class="p">}</span>
<a id="__codelineno-59-5" name="__codelineno-59-5"></a>
<a id="__codelineno-59-6" name="__codelineno-59-6"></a><span class="kt">int</span><span class="w"> </span><span class="nf">sub</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<a id="__codelineno-59-7" name="__codelineno-59-7"></a><span class="p">{</span>
<a id="__codelineno-59-8" name="__codelineno-59-8"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<a id="__codelineno-59-9" name="__codelineno-59-9"></a><span class="p">}</span>
<a id="__codelineno-59-10" name="__codelineno-59-10"></a>
<a id="__codelineno-59-11" name="__codelineno-59-11"></a><span class="kt">int</span><span class="w"> </span><span class="nf">divide</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<a id="__codelineno-59-12" name="__codelineno-59-12"></a><span class="p">{</span>
<a id="__codelineno-59-13" name="__codelineno-59-13"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<a id="__codelineno-59-14" name="__codelineno-59-14"></a><span class="p">}</span>
<a id="__codelineno-59-15" name="__codelineno-59-15"></a>
<a id="__codelineno-59-16" name="__codelineno-59-16"></a><span class="kt">int</span><span class="w"> </span><span class="nf">multiply</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<a id="__codelineno-59-17" name="__codelineno-59-17"></a><span class="p">{</span>
<a id="__codelineno-59-18" name="__codelineno-59-18"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<a id="__codelineno-59-19" name="__codelineno-59-19"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>常规写法：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-60-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-60-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-60-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-60-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-60-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-60-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-60-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-60-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-60-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-60-10">10</a></span>
<span class="normal"><a href="#__codelineno-60-11">11</a></span>
<span class="normal"><a href="#__codelineno-60-12">12</a></span>
<span class="normal"><a href="#__codelineno-60-13">13</a></span>
<span class="normal"><a href="#__codelineno-60-14">14</a></span>
<span class="normal"><a href="#__codelineno-60-15">15</a></span>
<span class="normal"><a href="#__codelineno-60-16">16</a></span>
<span class="normal"><a href="#__codelineno-60-17">17</a></span>
<span class="normal"><a href="#__codelineno-60-18">18</a></span>
<span class="normal"><a href="#__codelineno-60-19">19</a></span>
<span class="normal"><a href="#__codelineno-60-20">20</a></span>
<span class="normal"><a href="#__codelineno-60-21">21</a></span>
<span class="normal"><a href="#__codelineno-60-22">22</a></span>
<span class="normal"><a href="#__codelineno-60-23">23</a></span>
<span class="normal"><a href="#__codelineno-60-24">24</a></span>
<span class="normal"><a href="#__codelineno-60-25">25</a></span>
<span class="normal"><a href="#__codelineno-60-26">26</a></span>
<span class="normal"><a href="#__codelineno-60-27">27</a></span>
<span class="normal"><a href="#__codelineno-60-28">28</a></span>
<span class="normal"><a href="#__codelineno-60-29">29</a></span>
<span class="normal"><a href="#__codelineno-60-30">30</a></span>
<span class="normal"><a href="#__codelineno-60-31">31</a></span>
<span class="normal"><a href="#__codelineno-60-32">32</a></span>
<span class="normal"><a href="#__codelineno-60-33">33</a></span>
<span class="normal"><a href="#__codelineno-60-34">34</a></span>
<span class="normal"><a href="#__codelineno-60-35">35</a></span>
<span class="normal"><a href="#__codelineno-60-36">36</a></span>
<span class="normal"><a href="#__codelineno-60-37">37</a></span>
<span class="normal"><a href="#__codelineno-60-38">38</a></span>
<span class="normal"><a href="#__codelineno-60-39">39</a></span>
<span class="normal"><a href="#__codelineno-60-40">40</a></span>
<span class="normal"><a href="#__codelineno-60-41">41</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-60-2" name="__codelineno-60-2"></a><span class="p">{</span>
<a id="__codelineno-60-3" name="__codelineno-60-3"></a><span class="w">    </span><span class="c1">// 处理操作数和操作符输入</span>
<a id="__codelineno-60-4" name="__codelineno-60-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">num1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-60-5" name="__codelineno-60-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">num2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-60-6" name="__codelineno-60-6"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">opt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-60-7" name="__codelineno-60-7"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-60-8" name="__codelineno-60-8"></a>
<a id="__codelineno-60-9" name="__codelineno-60-9"></a><span class="w">    </span><span class="c1">// 处理计算</span>
<a id="__codelineno-60-10" name="__codelineno-60-10"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">flag</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">cin</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">opt</span><span class="p">)</span>
<a id="__codelineno-60-11" name="__codelineno-60-11"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-60-12" name="__codelineno-60-12"></a><span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">opt</span><span class="p">)</span>
<a id="__codelineno-60-13" name="__codelineno-60-13"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-60-14" name="__codelineno-60-14"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;+&#39;</span><span class="p">:</span>
<a id="__codelineno-60-15" name="__codelineno-60-15"></a><span class="w">            </span><span class="n">cin</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">num1</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">num2</span><span class="p">;</span>
<a id="__codelineno-60-16" name="__codelineno-60-16"></a><span class="w">            </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">add</span><span class="p">(</span><span class="n">num1</span><span class="p">,</span><span class="w"> </span><span class="n">num2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-60-17" name="__codelineno-60-17"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-60-18" name="__codelineno-60-18"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;-&#39;</span><span class="p">:</span>
<a id="__codelineno-60-19" name="__codelineno-60-19"></a><span class="w">            </span><span class="n">cin</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">num1</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">num2</span><span class="p">;</span>
<a id="__codelineno-60-20" name="__codelineno-60-20"></a><span class="w">            </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sub</span><span class="p">(</span><span class="n">num1</span><span class="p">,</span><span class="w"> </span><span class="n">num2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-60-21" name="__codelineno-60-21"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-60-22" name="__codelineno-60-22"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;*&#39;</span><span class="p">:</span>
<a id="__codelineno-60-23" name="__codelineno-60-23"></a><span class="w">            </span><span class="n">cin</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">num1</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">num2</span><span class="p">;</span>
<a id="__codelineno-60-24" name="__codelineno-60-24"></a><span class="w">            </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">multiply</span><span class="p">(</span><span class="n">num1</span><span class="p">,</span><span class="w"> </span><span class="n">num2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-60-25" name="__codelineno-60-25"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-60-26" name="__codelineno-60-26"></a><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;/&#39;</span><span class="p">:</span>
<a id="__codelineno-60-27" name="__codelineno-60-27"></a><span class="w">            </span><span class="n">cin</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">num1</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">num2</span><span class="p">;</span>
<a id="__codelineno-60-28" name="__codelineno-60-28"></a><span class="w">            </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">divide</span><span class="p">(</span><span class="n">num1</span><span class="p">,</span><span class="w"> </span><span class="n">num2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-60-29" name="__codelineno-60-29"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-60-30" name="__codelineno-60-30"></a><span class="w">        </span><span class="k">default</span><span class="o">:</span>
<a id="__codelineno-60-31" name="__codelineno-60-31"></a><span class="w">            </span><span class="n">flag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-60-32" name="__codelineno-60-32"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-60-33" name="__codelineno-60-33"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-60-34" name="__codelineno-60-34"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">flag</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-60-35" name="__codelineno-60-35"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-60-36" name="__codelineno-60-36"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-60-37" name="__codelineno-60-37"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-60-38" name="__codelineno-60-38"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-60-39" name="__codelineno-60-39"></a>
<a id="__codelineno-60-40" name="__codelineno-60-40"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-60-41" name="__codelineno-60-41"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>使用包装器后：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-61-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-61-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-61-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-61-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-61-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-61-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-61-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-61-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-61-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-61-10">10</a></span>
<span class="normal"><a href="#__codelineno-61-11">11</a></span>
<span class="normal"><a href="#__codelineno-61-12">12</a></span>
<span class="normal"><a href="#__codelineno-61-13">13</a></span>
<span class="normal"><a href="#__codelineno-61-14">14</a></span>
<span class="normal"><a href="#__codelineno-61-15">15</a></span>
<span class="normal"><a href="#__codelineno-61-16">16</a></span>
<span class="normal"><a href="#__codelineno-61-17">17</a></span>
<span class="normal"><a href="#__codelineno-61-18">18</a></span>
<span class="normal"><a href="#__codelineno-61-19">19</a></span>
<span class="normal"><a href="#__codelineno-61-20">20</a></span>
<span class="normal"><a href="#__codelineno-61-21">21</a></span>
<span class="normal"><a href="#__codelineno-61-22">22</a></span>
<span class="normal"><a href="#__codelineno-61-23">23</a></span>
<span class="normal"><a href="#__codelineno-61-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;functional&gt;</span>
<a id="__codelineno-61-2" name="__codelineno-61-2"></a>
<a id="__codelineno-61-3" name="__codelineno-61-3"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-61-4" name="__codelineno-61-4"></a><span class="p">{</span>
<a id="__codelineno-61-5" name="__codelineno-61-5"></a><span class="w">    </span><span class="n">map</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">m</span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="sc">&#39;+&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">add</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="sc">&#39;-&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">sub</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="sc">&#39;*&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">multiply</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="sc">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">divide</span><span class="p">}</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-61-6" name="__codelineno-61-6"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">num1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-61-7" name="__codelineno-61-7"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">num2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-61-8" name="__codelineno-61-8"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">opt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-61-9" name="__codelineno-61-9"></a>
<a id="__codelineno-61-10" name="__codelineno-61-10"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">cin</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">opt</span><span class="p">)</span>
<a id="__codelineno-61-11" name="__codelineno-61-11"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-61-12" name="__codelineno-61-12"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="n">count</span><span class="p">(</span><span class="n">opt</span><span class="p">))</span><span class="w"> </span><span class="c1">// 如果count为1，代表map中存在对应的键值对</span>
<a id="__codelineno-61-13" name="__codelineno-61-13"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-61-14" name="__codelineno-61-14"></a><span class="w">            </span><span class="n">cin</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">num1</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">num2</span><span class="p">;</span>
<a id="__codelineno-61-15" name="__codelineno-61-15"></a><span class="w">            </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">m</span><span class="p">[</span><span class="n">opt</span><span class="p">](</span><span class="n">num1</span><span class="p">,</span><span class="w"> </span><span class="n">num2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span><span class="c1">// 返回的value是包装器，直接传参即可调用对应</span>
<a id="__codelineno-61-16" name="__codelineno-61-16"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-61-17" name="__codelineno-61-17"></a><span class="w">        </span><span class="k">else</span>
<a id="__codelineno-61-18" name="__codelineno-61-18"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-61-19" name="__codelineno-61-19"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-61-20" name="__codelineno-61-20"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-61-21" name="__codelineno-61-21"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-61-22" name="__codelineno-61-22"></a>
<a id="__codelineno-61-23" name="__codelineno-61-23"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-61-24" name="__codelineno-61-24"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="_23">绑定<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h3>
<p>在C++ 11中，增加了绑定配合包装器的使用，包装器可以实现两种功能：</p>
<ol>
<li>改变实参在传参时的顺序</li>
<li>固定形参中的某一个值</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>使用<code>bind</code>时需要展开命名空间<code>placeholders</code>，因为要使用其中的<code>_1</code>，<code>_2</code>...</p>
<p><code>placeholders</code>中的内容表示调用绑定函数的实际参数，<code>_1</code>代表第一个实际参数，<code>_2</code>代表第二个实际参数，以此类推</p>
</div>
<ul>
<li>改变实参在传参时的顺序</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-62-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-62-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-62-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-62-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-62-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-62-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-62-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-62-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-62-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-62-10">10</a></span>
<span class="normal"><a href="#__codelineno-62-11">11</a></span>
<span class="normal"><a href="#__codelineno-62-12">12</a></span>
<span class="normal"><a href="#__codelineno-62-13">13</a></span>
<span class="normal"><a href="#__codelineno-62-14">14</a></span>
<span class="normal"><a href="#__codelineno-62-15">15</a></span>
<span class="normal"><a href="#__codelineno-62-16">16</a></span>
<span class="normal"><a href="#__codelineno-62-17">17</a></span>
<span class="normal"><a href="#__codelineno-62-18">18</a></span>
<span class="normal"><a href="#__codelineno-62-19">19</a></span>
<span class="normal"><a href="#__codelineno-62-20">20</a></span>
<span class="normal"><a href="#__codelineno-62-21">21</a></span>
<span class="normal"><a href="#__codelineno-62-22">22</a></span>
<span class="normal"><a href="#__codelineno-62-23">23</a></span>
<span class="normal"><a href="#__codelineno-62-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;functional&gt;</span>
<a id="__codelineno-62-2" name="__codelineno-62-2"></a><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">placeholders</span><span class="p">;</span>
<a id="__codelineno-62-3" name="__codelineno-62-3"></a>
<a id="__codelineno-62-4" name="__codelineno-62-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">sub</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="p">)</span>
<a id="__codelineno-62-5" name="__codelineno-62-5"></a><span class="p">{</span>
<a id="__codelineno-62-6" name="__codelineno-62-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
<a id="__codelineno-62-7" name="__codelineno-62-7"></a><span class="p">}</span>
<a id="__codelineno-62-8" name="__codelineno-62-8"></a>
<a id="__codelineno-62-9" name="__codelineno-62-9"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-62-10" name="__codelineno-62-10"></a><span class="p">{</span>
<a id="__codelineno-62-11" name="__codelineno-62-11"></a><span class="w">    </span><span class="c1">// 1. 改变实际参数顺序</span>
<a id="__codelineno-62-12" name="__codelineno-62-12"></a><span class="w">    </span><span class="n">function</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="n">func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sub</span><span class="p">;</span>
<a id="__codelineno-62-13" name="__codelineno-62-13"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-62-14" name="__codelineno-62-14"></a><span class="w">    </span><span class="c1">// 绑定改变顺序</span>
<a id="__codelineno-62-15" name="__codelineno-62-15"></a><span class="w">    </span><span class="n">func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bind</span><span class="p">(</span><span class="n">func</span><span class="p">,</span><span class="w"> </span><span class="n">_2</span><span class="p">,</span><span class="w"> </span><span class="n">_3</span><span class="p">,</span><span class="w"> </span><span class="n">_1</span><span class="p">);</span>
<a id="__codelineno-62-16" name="__codelineno-62-16"></a><span class="w">    </span><span class="c1">// 改变后的传递顺序为：2， 3， 1</span>
<a id="__codelineno-62-17" name="__codelineno-62-17"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-62-18" name="__codelineno-62-18"></a>
<a id="__codelineno-62-19" name="__codelineno-62-19"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-62-20" name="__codelineno-62-20"></a><span class="p">}</span>
<a id="__codelineno-62-21" name="__codelineno-62-21"></a>
<a id="__codelineno-62-22" name="__codelineno-62-22"></a><span class="n">输出结果</span><span class="err">：</span>
<a id="__codelineno-62-23" name="__codelineno-62-23"></a><span class="mi">-4</span>
<a id="__codelineno-62-24" name="__codelineno-62-24"></a><span class="mi">-2</span>
</code></pre></div></td></tr></table></div>
<p>传递顺序改变如下图所示：</p>
<p><a class="glightbox" href="C++ 11相关新特性.assets\image9.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="C++ 11相关新特性.assets\image9.png"></a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>注意，<code>bind</code>改变的是实际参数的传递顺序，而不是形参的接收顺序，形参接收还是按照从左到右依次接收传递的实际参数，只是写的第一个实际参数（本应该传递给形参a）被<code>bind</code>改变作为第三个实际参数，传递给形参<code>c</code>，依次类推<code>a</code>和<code>b</code></p>
</div>
<ul>
<li>固定形参中的某一个值</li>
</ul>
<p>在前面使用<code>function</code>包装器调用非静态成员函数时，需要单独传递一个对象给隐含的<code>this</code>指针，如果每一次传递都需要传递一个对象会显得繁琐，可以考虑将对象参数进行固定，例如下面的代码：</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-63-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-63-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-63-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-63-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-63-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-63-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-63-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-63-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-63-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-63-10">10</a></span>
<span class="normal"><a href="#__codelineno-63-11">11</a></span>
<span class="normal"><a href="#__codelineno-63-12">12</a></span>
<span class="normal"><a href="#__codelineno-63-13">13</a></span>
<span class="normal"><a href="#__codelineno-63-14">14</a></span>
<span class="normal"><a href="#__codelineno-63-15">15</a></span>
<span class="normal"><a href="#__codelineno-63-16">16</a></span>
<span class="normal"><a href="#__codelineno-63-17">17</a></span>
<span class="normal"><a href="#__codelineno-63-18">18</a></span>
<span class="normal"><a href="#__codelineno-63-19">19</a></span>
<span class="normal"><a href="#__codelineno-63-20">20</a></span>
<span class="normal"><a href="#__codelineno-63-21">21</a></span>
<span class="normal"><a href="#__codelineno-63-22">22</a></span>
<span class="normal"><a href="#__codelineno-63-23">23</a></span>
<span class="normal"><a href="#__codelineno-63-24">24</a></span>
<span class="normal"><a href="#__codelineno-63-25">25</a></span>
<span class="normal"><a href="#__codelineno-63-26">26</a></span>
<span class="normal"><a href="#__codelineno-63-27">27</a></span>
<span class="normal"><a href="#__codelineno-63-28">28</a></span>
<span class="normal"><a href="#__codelineno-63-29">29</a></span>
<span class="normal"><a href="#__codelineno-63-30">30</a></span>
<span class="normal"><a href="#__codelineno-63-31">31</a></span>
<span class="normal"><a href="#__codelineno-63-32">32</a></span>
<span class="normal"><a href="#__codelineno-63-33">33</a></span>
<span class="normal"><a href="#__codelineno-63-34">34</a></span>
<span class="normal"><a href="#__codelineno-63-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Rate</span>
<a id="__codelineno-63-2" name="__codelineno-63-2"></a><span class="p">{</span>
<a id="__codelineno-63-3" name="__codelineno-63-3"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-63-4" name="__codelineno-63-4"></a><span class="w">    </span><span class="n">Rate</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">rate</span><span class="p">)</span>
<a id="__codelineno-63-5" name="__codelineno-63-5"></a><span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="n">_rate</span><span class="p">(</span><span class="n">rate</span><span class="p">)</span>
<a id="__codelineno-63-6" name="__codelineno-63-6"></a><span class="w">    </span><span class="p">{}</span>
<a id="__codelineno-63-7" name="__codelineno-63-7"></a>
<a id="__codelineno-63-8" name="__codelineno-63-8"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">calculate</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">year</span><span class="p">)</span>
<a id="__codelineno-63-9" name="__codelineno-63-9"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-63-10" name="__codelineno-63-10"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">money</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">_rate</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">year</span><span class="p">;</span>
<a id="__codelineno-63-11" name="__codelineno-63-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-63-12" name="__codelineno-63-12"></a>
<a id="__codelineno-63-13" name="__codelineno-63-13"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-63-14" name="__codelineno-63-14"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">_rate</span><span class="p">;</span>
<a id="__codelineno-63-15" name="__codelineno-63-15"></a><span class="p">};</span>
<a id="__codelineno-63-16" name="__codelineno-63-16"></a>
<a id="__codelineno-63-17" name="__codelineno-63-17"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-63-18" name="__codelineno-63-18"></a><span class="p">{</span>
<a id="__codelineno-63-19" name="__codelineno-63-19"></a><span class="w">    </span><span class="c1">// 不使用bind下使用包装器</span>
<a id="__codelineno-63-20" name="__codelineno-63-20"></a><span class="w">    </span><span class="n">function</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">(</span><span class="n">Rate</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="n">func1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Rate</span><span class="o">::</span><span class="n">calculate</span><span class="p">;</span>
<a id="__codelineno-63-21" name="__codelineno-63-21"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">func1</span><span class="p">(</span><span class="n">Rate</span><span class="p">(</span><span class="mf">0.1</span><span class="p">),</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-63-22" name="__codelineno-63-22"></a>
<a id="__codelineno-63-23" name="__codelineno-63-23"></a>
<a id="__codelineno-63-24" name="__codelineno-63-24"></a><span class="w">    </span><span class="c1">// 使用bind下使用包装器</span>
<a id="__codelineno-63-25" name="__codelineno-63-25"></a><span class="w">    </span><span class="n">function</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">(</span><span class="n">Rate</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="n">func2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Rate</span><span class="o">::</span><span class="n">calculate</span><span class="p">;</span>
<a id="__codelineno-63-26" name="__codelineno-63-26"></a><span class="w">    </span><span class="c1">// 使用bind固定对象Rate(0.1)</span>
<a id="__codelineno-63-27" name="__codelineno-63-27"></a><span class="w">    </span><span class="n">function</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">(</span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="n">func3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bind</span><span class="p">(</span><span class="n">func2</span><span class="p">,</span><span class="w"> </span><span class="n">Rate</span><span class="p">(</span><span class="mf">0.1</span><span class="p">),</span><span class="w"> </span><span class="n">_1</span><span class="p">,</span><span class="w"> </span><span class="n">_2</span><span class="p">);</span>
<a id="__codelineno-63-28" name="__codelineno-63-28"></a><span class="w">    </span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">func3</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
<a id="__codelineno-63-29" name="__codelineno-63-29"></a>
<a id="__codelineno-63-30" name="__codelineno-63-30"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-63-31" name="__codelineno-63-31"></a><span class="p">}</span>
<a id="__codelineno-63-32" name="__codelineno-63-32"></a>
<a id="__codelineno-63-33" name="__codelineno-63-33"></a><span class="n">输出结果</span><span class="err">：</span>
<a id="__codelineno-63-34" name="__codelineno-63-34"></a><span class="mi">2000</span>
<a id="__codelineno-63-35" name="__codelineno-63-35"></a><span class="mi">2000</span>
</code></pre></div></td></tr></table></div>
<p>上面代码中，需要注意尽管固定了<code>func2</code>的第一个参数，实际参数的指代还是从<code>_1</code>开始，如果固定中间的参数，则最左边的为<code>_1</code>，最右边的为<code>_2</code>（代码如下），以此类推</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-64-1">1</a></span>
<span class="normal"><a href="#__codelineno-64-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1"></a><span class="n">function</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">(</span><span class="n">Rate</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="n">func4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bind</span><span class="p">(</span><span class="n">func2</span><span class="p">,</span><span class="w"> </span><span class="n">_1</span><span class="p">,</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w"> </span><span class="n">_2</span><span class="p">);</span>
<a id="__codelineno-64-2" name="__codelineno-64-2"></a><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">func4</span><span class="p">(</span><span class="n">Rate</span><span class="p">(</span><span class="mf">0.1</span><span class="p">),</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">endl</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">August 30, 2024</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="创建日期">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">August 13, 2024</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 EPSDA
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.helper-wiki.top/%E4%BD%9C%E8%80%85/%E4%BD%9C%E8%80%85.html" target="_blank" rel="noopener" title="www.helper-wiki.top" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../assets/javascripts/toggle-sidebar.js" async></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>