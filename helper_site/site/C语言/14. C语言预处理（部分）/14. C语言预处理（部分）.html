<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://www.help-doc.top/C%E8%AF%AD%E8%A8%80/14.%20C%E8%AF%AD%E8%A8%80%E9%A2%84%E5%A4%84%E7%90%86%EF%BC%88%E9%83%A8%E5%88%86%EF%BC%89/14.%20C%E8%AF%AD%E8%A8%80%E9%A2%84%E5%A4%84%E7%90%86%EF%BC%88%E9%83%A8%E5%88%86%EF%BC%89.html><link rel=prev href=../13.%20C%E8%AF%AD%E8%A8%80%E7%BC%96%E8%AF%91%E4%B8%8E%E9%93%BE%E6%8E%A5%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89/13.%20C%E8%AF%AD%E8%A8%80%E7%BC%96%E8%AF%91%E4%B8%8E%E9%93%BE%E6%8E%A5%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89.html><link rel=next href=../../C%2B%2B/index.html><link rel=icon href=../../images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.12"><title>C语言预处理（部分） - 柯懒的知识库</title><link rel=stylesheet href=../../assets/stylesheets/main.2afb09e1.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=stylesheet href=../../css/timeline.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-9XWRGNRRSY"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-9XWRGNRRSY",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-9XWRGNRRSY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=stylesheet href=../../stylesheets/colors.min.css><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (max-width: 767px)"><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (min-width: 768px) and (max-width: 1199px)"><link rel=stylesheet href=../../stylesheets/theme1.min.css media="screen and (min-width: 1200px)"><link rel=stylesheet href=../../stylesheets/print.min.css><!-- 字体样式表 --><link rel=stylesheet href=../../stylesheets/font-dongguanti.min.css id=font-dongguanti><link rel=stylesheet href=../../stylesheets/font-oppoti.min.css id=font-oppoti disabled><link rel=stylesheet href=../../stylesheets/font-jiangchengti.min.css id=font-jiangchengti disabled><link rel=stylesheet href=../../stylesheets/font-lxgw.min.css id=font-lxgw disabled><!-- 代码字体样式表 --><link rel=stylesheet href=../../stylesheets/code-font-dejavu-sans-mono.min.css id=code-font-dejavu-sans-mono><link rel=stylesheet href=../../stylesheets/code-font-zsft-hk.min.css id=code-font-zsft-hk disabled><script src=https://cdn.jsdelivr.net/npm/mermaid@11.5.0/dist/mermaid.min.js></script><style>
    /* 霞鹜臻楷 */
    @import url("https://static.zeoseven.com/zsft/2/main/result.css");
    /* 寒蝉团圆体 Sans */
    @import url("https://fontsapi.zeoseven.com/70/main/result.css");

    @font-face {
        font-family: "LXGW ZhenKai";
    }

    @font-face {
        font-family: "寒蝉团圆体 Sans";
    }

    .md-header__topic .md-ellipsis {
        font-family: "寒蝉团圆体 Sans" !important;
    }

    :root {
        --md-text-font: "STDongGuanTi", "OPPOSans", "JiangChengHeiTi 400W", sans-serif;
        --md-header-font: "LXGW ZhenKai", sans-serif;
        --md-code-font: "DejaVu Sans Mono", "ZSFT-hk";
        --code-font-color: var(--text-code);
    }

    h1+div>p {
        font-family: var(--md-header-font);
    }

    @media screen and (max-width: 1199px) {
        /* 隐藏功能区的主题切换按钮 */
        .theme-switcher {
            display: none !important;
        }
    }

    /* 右侧固定功能条样式 */
    .floating-toolbar {
        position: fixed;
        top: 50%;
        right: 0;
        transform: translateY(-50%);
        z-index: 99999;
        font-family: var(--md-text-font);
        background: var(--bg-white);
        border: 1px solid #eee;
        border-right: none;
        border-radius: 12px 0 0 12px;
        box-shadow: -4px 0 20px rgba(0, 0, 0, 0.1);
        padding: 8px 0;
        min-width: 60px;
        transition: all 0.3s ease;
        display: block;
        visibility: visible;
        opacity: 1;
        width: auto;
        height: auto;
        max-width: none;
        max-height: none;
        overflow: visible;
    }


    .floating-toolbar:hover {
        box-shadow: -6px 0 30px var(--shadow-strong);
        transform: translateY(-50%) translateX(-2px);
    }

    /* 功能条项目 */
    .toolbar-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 12px 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        border-bottom: 1px solid #eee;
        background: transparent;
        color: #333;
        width: auto;
        height: auto;
        visibility: visible;
        opacity: 1;
    }

    .toolbar-item:last-child {
        border-bottom: none;
    }

    .toolbar-item:hover {
        background: var(--primary-blue-light);
        transform: translateX(-2px);
    }

    .toolbar-item.active {
        background: var(--primary-blue-medium);
        color: var(--primary-blue);
    }

    /* 功能条图标 */
    .toolbar-icon {
        font-size: 20px;
        line-height: 1;
        margin-bottom: 4px;
        transition: all 0.3s ease;
        display: block;
        visibility: visible;
        opacity: 1;
        color: #333;
    }

    .toolbar-item:hover .toolbar-icon {
        transform: scale(1.1) !important;
    }

    /* SVG图标样式 */
    .theme-icon {
        width: 20px !important;
        height: 20px !important;
        fill: currentColor !important;
        transition: all 0.3s ease !important;
    }

    .toolbar-item:hover .theme-icon {
        fill: var(--primary-blue) !important;
    }

    /* 返回顶部SVG图标样式 */
    .back-to-top-icon {
        width: 20px !important;
        height: 20px !important;
        fill: currentColor !important;
        transition: all 0.3s ease !important;
    }

    .toolbar-item:hover .back-to-top-icon {
        fill: var(--primary-blue) !important;
    }

    /* 字体切换SVG图标样式 */
    .font-icon {
        width: 20px;
        height: 20px;
        fill: currentColor;
        transition: all 0.3s ease;
    }

    .toolbar-item:hover {
        fill: var(--primary-blue);
    }

    /* 功能条标签 */
    .toolbar-label {
        font-size: 11px !important;
        font-weight: 500 !important;
        color: #666 !important;
        text-align: center !important;
        line-height: 1.2 !important;
        transition: all 0.3s ease !important;
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }

    .toolbar-item:hover .toolbar-label {
        color: var(--text-primary);
    }

    /* 字体切换功能特殊样式 */
    .font-switcher {
        position: relative;
    }

    .font-dropdown-toolbar {
        position: absolute;
        right: 100%;
        top: 0;
        margin-right: 8px;
        min-width: 120px;
        opacity: 0;
        visibility: hidden;
        transform: translateX(10px);
        transition: all 0.3s ease;
        z-index: 1001;
    }

    .font-switcher:hover .font-dropdown-toolbar,
    .font-dropdown-toolbar.active {
        opacity: 1;
        visibility: visible;
        transform: translateX(0);
    }

    .font-current-toolbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 8px 12px;
        background: var(--bg-white);
        border: 1px solid var(--border-light);
        border-radius: 8px;
        cursor: pointer;
        font-size: 13px;
        color: var(--text-primary);
        transition: all 0.2s ease;
        box-shadow: 0 2px 8px var(--shadow-light);
        white-space: nowrap;
    }

    .font-current-toolbar:hover {
        border-color: var(--primary-blue);
        background: var(--primary-blue-light);
        box-shadow: 0 4px 12px var(--shadow-primary-medium);
    }

    .current-font-name-toolbar {
        font-weight: 500;
        margin-right: 8px;
    }

    .dropdown-arrow-icon {
        width: 12px !important;
        height: 12px !important;
        fill: currentColor !important;
        color: var(--text-secondary) !important;
        transition: transform 0.3s ease !important;
    }

    .font-dropdown-toolbar.active .dropdown-arrow-icon {
        transform: rotate(180deg) !important;
    }

    .font-options-toolbar {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--bg-white);
        border: 1px solid var(--border-light);
        border-radius: 8px;
        box-shadow: 0 4px 12px var(--shadow-strong);
        z-index: 1002;
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.3s ease;
        margin-top: 4px;
        max-height: 150px;
        overflow-y: auto;
    }

    .font-dropdown-toolbar.active .font-options-toolbar {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    .font-option-toolbar {
        padding: 8px 12px;
        cursor: pointer;
        font-size: 13px;
        color: var(--text-primary);
        transition: all 0.2s ease;
        border-bottom: 1px solid var(--border-light);
        white-space: nowrap;
    }

    .font-option-toolbar:last-child {
        border-bottom: none;
        border-radius: 0 0 8px 8px;
    }

    .font-option-toolbar:first-child {
        border-radius: 8px 8px 0 0;
    }

    .font-option-toolbar:hover {
        background: var(--primary-blue-light);
        color: var(--text-primary-blue);
    }

    .font-option-toolbar.selected {
        background: var(--primary-blue-medium);
        color: var(--primary-blue);
        font-weight: 500;
    }

    /* 代码字体切换功能样式 */
    .code-font-switcher {
        position: relative;
    }

    .code-font-dropdown-toolbar {
        position: absolute;
        right: 100%;
        top: 0;
        margin-right: 8px;
        min-width: 140px;
        opacity: 0;
        visibility: hidden;
        transform: translateX(10px);
        transition: all 0.3s ease;
        z-index: 1001;
    }

    .code-font-switcher:hover .code-font-dropdown-toolbar,
    .code-font-dropdown-toolbar.active {
        opacity: 1;
        visibility: visible;
        transform: translateX(0);
    }

    .code-font-current-toolbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 8px 12px;
        background: var(--bg-white);
        border: 1px solid var(--border-light);
        border-radius: 8px;
        cursor: pointer;
        font-size: 13px;
        color: var(--text-primary);
        transition: all 0.2s ease;
        box-shadow: 0 2px 8px var(--shadow-light);
        white-space: nowrap;
    }

    .code-font-current-toolbar:hover {
        border-color: var(--primary-blue);
        background: var(--primary-blue-light);
        box-shadow: 0 4px 12px var(--shadow-primary-medium);
    }

    .current-code-font-name-toolbar {
        font-weight: 500;
        margin-right: 8px;
    }

    .code-font-dropdown-toolbar.active .dropdown-arrow-icon {
        transform: rotate(180deg) !important;
    }

    .code-font-options-toolbar {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--bg-white);
        border: 1px solid var(--border-light);
        border-radius: 8px;
        box-shadow: 0 4px 12px var(--shadow-strong);
        z-index: 1002;
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.3s ease;
        margin-top: 4px;
        max-height: 150px;
        overflow-y: auto;
    }

    .code-font-dropdown-toolbar.active .code-font-options-toolbar {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    .code-font-option-toolbar {
        padding: 8px 12px;
        cursor: pointer;
        font-size: 13px;
        color: var(--text-primary);
        transition: all 0.2s ease;
        border-bottom: 1px solid var(--border-light);
        white-space: nowrap;
    }

    .code-font-option-toolbar:last-child {
        border-bottom: none;
        border-radius: 0 0 8px 8px;
    }

    .code-font-option-toolbar:first-child {
        border-radius: 8px 8px 0 0;
    }

    .code-font-option-toolbar:hover {
        background: var(--primary-blue-light);
        color: var(--text-primary-blue);
    }

    .code-font-option-toolbar.selected {
        background: var(--primary-blue-medium);
        color: var(--primary-blue);
        font-weight: 500;
    }

    /* 独立的切换按钮样式 */
    .toolbar-toggle-btn {
        position: fixed;
        top: 50%;
        right: 60px;
        transform: translateY(-50%);
        width: 30px;
        height: 60px;
        background: #ffffff;
        border: 1px solid #eee;
        border-right: none;
        border-radius: 8px 0 0 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
        z-index: 99999;
    }

    .toolbar-toggle-btn:hover {
        background: var(--primary-blue-light) !important;
        transform: translateY(-50%) translateX(-2px) !important;
        box-shadow: -4px 0 15px rgba(0, 0, 0, 0.15) !important;
    }

    .toggle-icon {
        font-size: 16px;
        color: #666;
        transition: all 0.3s ease;
        line-height: 1;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .toggle-arrow-icon {
        width: 16px !important;
        height: 16px !important;
        fill: currentColor !important;
        transition: all 0.3s ease !important;
    }

    .toolbar-toggle-btn:hover .toggle-icon {
        color: var(--primary-blue) !important;
        transform: scale(1.1) !important;
    }

    .toolbar-toggle-btn:hover .toggle-arrow-icon {
        fill: var(--primary-blue) !important;
    }

    /* 功能条隐藏状态 */
    .floating-toolbar.hidden {
        transform: translateY(-50%) translateX(100%) !important;
        opacity: 0 !important;
        visibility: hidden !important;
    }

    /* 切换按钮在功能条隐藏时的状态 */
    .toolbar-toggle-btn.toolbar-hidden {
        right: 0px !important;
        background: var(--border-white) !important;
        border-color: var(--border-white) !important;
        border-radius: 8px 0 0 8px !important;
    }

    .toolbar-toggle-btn.toolbar-hidden .toggle-icon {
        color: black !important;
        transform: rotate(180deg) !important;
    }

    .toolbar-toggle-btn.toolbar-hidden .toggle-arrow-icon {
        fill: black !important;
    }

    .toolbar-toggle-btn.toolbar-hidden:hover {
        background: var(--primary-blue-dark) !important;
        transform: translateY(-50%) translateX(-2px) !important;
    }

    /* 响应式设计 */
    @media screen and (max-width: 768px) {
        .floating-toolbar {
            min-width: 50px;
            padding: 6px 0;
        }
        
        .toolbar-item {
            padding: 10px 6px;
        }
        
        .toolbar-icon {
            font-size: 18px;
        }
        
        .theme-icon {
            width: 18px !important;
            height: 18px !important;
        }
        
        .back-to-top-icon {
            width: 18px !important;
            height: 18px !important;
        }
        
        .font-icon {
            width: 18px !important;
            height: 18px !important;
        }
        
        .toggle-arrow-icon {
            width: 14px !important;
            height: 14px !important;
        }
        
        .toolbar-label {
            font-size: 10px;
        }
        
        .font-dropdown-toolbar {
            min-width: 100px;
            margin-right: 6px;
        }
        
        .dropdown-arrow-icon {
            width: 10px !important;
            height: 10px !important;
        }
        
        .font-current-toolbar {
            padding: 6px 10px;
            font-size: 12px;
        }
    }

    @media screen and (max-width: 480px) {
        .floating-toolbar {
            right: -5px;
        }
        
        .toolbar-label {
            display: none;
        }
        
        .toolbar-item {
            padding: 8px 4px;
        }
        
        .theme-icon {
            width: 16px !important;
            height: 16px !important;
        }
        
        .back-to-top-icon {
            width: 16px !important;
            height: 16px !important;
        }
        
        .font-icon {
            width: 16px !important;
            height: 16px !important;
        }
        
        .toggle-arrow-icon {
            width: 12px !important;
            height: 12px !important;
        }
        
        .font-dropdown-toolbar {
            min-width: 90px;
            margin-right: 4px;
        }
        
        .dropdown-arrow-icon {
            width: 8px !important;
            height: 8px !important;
        }
    }

    .md-content article>*:not(.md-top):not(.md-nav) {
        animation: flyIn 0.6s ease-out forwards;
        opacity: 0;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(1) {
        animation-delay: 0.1s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(2) {
        animation-delay: 0.15s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(3) {
        animation-delay: 0.2s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(4) {
        animation-delay: 0.25s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(5) {
        animation-delay: 0.3s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(6) {
        animation-delay: 0.35s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(7) {
        animation-delay: 0.4s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(8) {
        animation-delay: 0.45s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(9) {
        animation-delay: 0.5s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(10) {
        animation-delay: 0.55s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(11) {
        animation-delay: 0.6s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(12) {
        animation-delay: 0.65s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(13) {
        animation-delay: 0.7s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(14) {
        animation-delay: 0.75s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(15) {
        animation-delay: 0.8s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(16) {
        animation-delay: 0.85s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(17) {
        animation-delay: 0.9s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(18) {
        animation-delay: 0.95s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(19) {
        animation-delay: 1s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(20) {
        animation-delay: 1.05s;
    }

    .md-content article>*:not(.md-top):not(.md-nav):nth-child(n + 21) {
        animation-delay: 1.1s;
    }

    @keyframes flyIn {
        0% {
            opacity: 0;
            transform: translateY(-20px);
        }

        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @media (prefers-reduced-motion: reduce) {
        .md-content article>*:not(.md-top):not(.md-nav) {
            animation: none !important;
            opacity: 1 !important;
            transform: none !important;
        }
    }

    /* 添加超时后强制显示内容 */
    .md-content article>*:not(.md-top):not(.md-nav) {
        animation: flyIn 0.6s ease-out forwards;
        opacity: 0;
        /* 添加延迟后的备用显示 */
        animation-fill-mode: both;
    }

    /* 确保在3秒后强制显示所有内容 */
    .md-content {
        animation: ensureVisible 0.1s ease-out 3s forwards;
    }

    @keyframes ensureVisible {
        to {
            --force-visible: 1;
        }
    }

    .md-content[style*="--force-visible"] article>*:not(.md-top):not(.md-nav) {
        opacity: 1 !important;
        transform: translateY(0) !important;
    }

    li::marker {
        color: var(--primary-blue-semi);
    }

    [data-md-toggle=search]:checked~.md-header .md-search__form {
        border-radius: 8px 8px 0px 0px;
    }

    .md-search__form {
        background: var(--primary-blue-strong);
        border-radius: 20px;
        padding: 2px;
        transition: all 0.3s ease;
    }

    .md-search__input {
        border: none;
        border-radius: 18px;
        padding: 8px 16px;
        font-size: 14px;
        transition: all 0.3s ease;
    }


    .md-search__input:hover,
    .md-search__input:focus {
        outline: none;
        box-shadow: var(--table-shadow);
        border-radius: 18px !important;
    }

    .md-search__output {
        border-radius: 0px 0px 8px 8px !important;
    }

    .md-tooltip {
        background-color: var(--overlay-dark);
        color: var(--text-white);
        border: none;
        border-radius: 6px;
        padding: 8px 12px;
        font-size: 12px;
        box-shadow: var(--shadow-dark);
        position: relative;
    }

    .md-tooltip:after {
        content: '';
        position: absolute;
        top: 100%;
        left: 50%;
        margin-left: -5px;
        width: 0;
        height: 0;
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 5px solid var(--overlay-dark);
    }

    :not(pre)>code {
        color: var(--text-orange) !important;
        font-weight: normal;
    }

    .highlight .c1,
    .highlight .cm {
        color: var(--text-gray);
    }

    .md-typeset .admonition,
    .md-typeset details {
        border-width: 0;
        border-left-width: 4px;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: var(--md-header-font);
        color: var(--primary-blue) !important;
    }

    body {
        font-family: var(--md-text-font);
    }

    pre code {
        color: var(--md-code-fg-color) !important;
    }

    .highlight pre {
        background-color: var(--md-code-bg-color) !important;
    }

    .md-typeset code {
        font-family: var(--md-code-font), var(--md-text-font);
    }

    .md-tabs__item.md-tabs__item--active {
        border-bottom: 2px solid var(--primary-blue-semi);
    }

    .md-tabs__list>.md-tabs__item--active>.md-tabs__link {
        color: var(--primary-blue-semi) !important;
    }

    .timeline-content::before {
        background-color: var(--bg-gray-light);
    }

    .timeline-card {
        background-color: var(--bg-gray-light) !important;
    }

    .changelog-content a {
        color: var(--text-blue) !important;
        word-break: break-word;
    }

    .changelog-content a:focus,
    .changelog-content a:hover {
        color: var(--text-teal) !important;
    }

    .changelog-type-pageupdate {
        background-color: var(--primary-blue-semi) !important;
    }

    .md-footer-runtime {
        position: relative;
        z-index: 3;
        margin: 0.5rem 0;
        padding: 0.4rem 0;
        font-size: 0.7rem;
        line-height: 1.6;
        color: var(--md-footer-fg-color--light);
        display: flex;
        align-items: center;
    }

    ::selection {
        background: var(--primary-blue-strong);
    }

    html {
        scroll-behavior: smooth !important;
        /* 强制启用平滑滚动 */
        scroll-padding-top: 53px;
        /* 设置滚动偏移量,避免标题被导航栏遮挡 */
    }

    strong {
        color: var(--text-purple);
    }

    a[href^="#"],
    a[href*="/#"] {
        scroll-behavior: smooth !important;
    }

    .custom-tooltip {
        position: relative;
        display: inline-block;
        cursor: help;
        color: var(--primary-blue-semi);
        border-bottom: 1px dashed var(--primary-blue-semi);
        text-decoration: none !important;
    }

    .custom-tooltip::before {
        content: attr(data-title);
        position: absolute;
        width: 300px;
        background-color: var(--overlay-dark);
        color: var(--text-white);
        text-align: left;
        padding: 10px;
        border-radius: 6px;
        bottom: 125%;
        /* 定位在链接上方 */
        left: 50%;
        transform: translateX(-50%);
        z-index: 99999;
        /* 确保显示在最上层 */
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s;
        font-weight: normal;
        font-size: 14px;
        line-height: 1.5;
        pointer-events: none;
        box-shadow: var(--shadow-dark);
        word-wrap: break-word;
        white-space: normal;
    }

    .custom-tooltip::after {
        content: "";
        position: absolute;
        bottom: 100%;
        left: 50%;
        margin-left: -5px;
        border-width: 5px;
        border-style: solid;
        border-color: var(--overlay-dark) transparent transparent transparent;
        z-index: 99999;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s;
        pointer-events: none;
    }

    .custom-tooltip:hover::before {
        opacity: 1;
        visibility: visible;
    }

    .custom-tooltip:hover::after {
        opacity: 1;
        visibility: visible;
    }

    /* 修改移动设备上的 tooltip 样式，确保不会溢出屏幕 */
    @media (max-width: 767px) {
        .custom-tooltip::before {
            width: calc(100vw - 40px);
            max-width: 250px;
            white-space: normal;
            font-size: 14px;
            left: 50%;
            transform: translateX(-50%);
            bottom: 130%;
            /* 确保不会超出屏幕边缘 */
            box-sizing: border-box;

            /* 新增：定位逻辑调整，防止溢出 */
            position: fixed;
            top: auto;
            bottom: auto;
            left: 20px;
            /* 距离左边缘固定距离 */
            right: 20px;
            /* 距离右边缘固定距离 */
            transform: none;
            margin-top: -120px;
            /* 在目标元素上方显示，可根据需要调整 */
            width: auto;
            /* 宽度由left和right决定 */
        }

        /* 新增：处理靠近页面底部的 tooltip */
        .custom-tooltip:hover::before {
            max-height: 80vh;
            /* 最大高度限制 */
            overflow-y: auto;
            /* 内容过多时可滚动 */
        }
    }

    .md-content a.custom-tooltip::after {
        display: none !important;
    }

    @media screen and (max-width: 767px) {

        /* 移除可能导致问题的现有样式 */
        .md-typeset .arithmatex {
            max-width: 100%;
            overflow-x: hidden;
            text-overflow: ellipsis;
        }

        /* 修改为更有效的样式 */
        .katex-display {
            overflow-x: auto;
            overflow-y: hidden;
            max-width: 100%;
            padding: 0.25em 0;
        }

        /* 对于行内公式的新样式 */
        .katex {
            font-size: 1em !important;
            /* 减小字体大小 */
        }

        /* 调整整体数学公式容器的样式 */
        .md-typeset .arithmatex {
            max-width: 100% !important;
            overflow-x: auto;
            padding: 0.1em 0;
            margin: 0;
        }

        /* 确保行内公式不破坏布局 */
        .katex-inline {
            display: inline-block;
            max-width: 100%;
            overflow-x: auto;
            vertical-align: middle;
            white-space: normal;
            line-break: anywhere;
        }

        /* 添加淡出效果指示可滚动 */
        .katex-display::after {
            content: "";
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            width: 20px;
            background: linear-gradient(to right,
                    rgba(255, 255, 255, 0),
                    rgba(255, 255, 255, 0.7));
            pointer-events: none;
        }
    }

    /* 头像样式 - 增强版，添加悬浮区域控制 */
    .header-avatar {
        display: inline-flex;
        align-items: center;
        margin-right: 0.8rem;
        position: relative;
        z-index: 1;
        /* 添加一个内边距以增加可点击区域，但不会影响布局 */
        padding: 3px;
    }

    .header-avatar img {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid #fff;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        position: relative;
        z-index: 5;
    }

    /* 下拉菜单样式 - 增强版，改进悬浮区域控制 */
    .avatar-dropdown {
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%) translateY(25px) scale(0.95);
        background-color: var(--bg-white);
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.18);
        padding: 45px 0 8px 0;
        /* 增加更多顶部内边距 */
        min-width: 140px;
        opacity: 0;
        visibility: hidden;
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        z-index: 4;
        /* 低于头像 */
        margin-top: -10px;
        /* 让菜单上移覆盖头像下半部分 */
        /* 添加一个缓冲区，防止鼠标离开时闪烁 */
        pointer-events: none;
    }

    /* 悬停效果，修改触发条件和过渡延迟 */
    .header-avatar:hover .avatar-dropdown {
        opacity: 1;
        visibility: visible;
        transform: translateX(-50%) translateY(15px) scale(1);
        /* 添加延迟以防止闪烁 */
        transition-delay: 0.05s;
        pointer-events: auto;
    }

    /* 添加间隙区域保持悬停状态 */
    .avatar-dropdown::after {
        content: "";
        position: absolute;
        top: -20px;
        /* 创建顶部缓冲区 */
        left: 0;
        width: 100%;
        height: 20px;
        background: transparent;
    }

    .header-avatar:hover img {
        transform: scale(1.5) translateY(18px);
        /* 放大并稍微向下移动 */
        box-shadow: 0 6px 16px rgba(77, 166, 218, 0.35);
        border-color: var(--primary-blue-semi);
        /* 添加延迟以防止闪烁 */
        transition-delay: 0s;
    }

    /* 菜单三角形指示器 - 隐藏，因为视觉上头像已经作为指示器 */
    .avatar-dropdown::before {
        display: none;
    }

    /* 菜单项样式 */
    .avatar-dropdown-item {
        display: block;
        padding: 10px 16px;
        color: var(--text-primary);
        font-size: 14px;
        text-decoration: none;
        transition: all 0.25s ease;
        text-align: center;
        position: relative;
        white-space: nowrap;
    }

    .avatar-dropdown p {
        padding: 10px 16px;
        color: var(--text-primary);
        font-size: 16px;
        text-align: center;
        white-space: nowrap;
    }

    .avatar-dropdown-item:hover {
        background-color: rgba(77, 166, 218, 0.08);
        color: var(--primary-blue-semi);
    }

    .avatar-dropdown-item:hover::after {
        content: "";
        position: absolute;
        left: 8px;
        width: 3px;
        height: 70%;
        background: var(--primary-blue-semi);
        border-radius: 2px;
        top: 15%;
    }

    .avatar-dropdown-divider {
        height: 1px;
        background-color: rgba(0, 0, 0, 0.06);
        margin: 4px 8px;
    }

    /* 响应式设计调整 */
    @media screen and (max-width: 1199px) {
        .header-avatar {
            margin-right: 0.5rem;
        }
    }

    /* 响应式设计调整 */
    @media screen and (max-width: 1200px) {
        .header-avatar {
            margin-right: 0.3rem;
            padding: 2px;
        }

        .header-avatar img {
            width: 32px;
            height: 32px;
        }

        /* 调整菜单位置，靠左侧显示 */
        .avatar-dropdown {
            /* 调整left确保显示在左侧 */
            left: -120px;
            transform: translateX(0) translateY(25px) scale(0.95);
            padding-top: 15px;
            margin-top: 0;
            min-width: 130px;
            position: absolute;
            z-index: 100;
        }

        /* 点击时的行为，而不是悬停 */
        .header-avatar:hover .avatar-dropdown {
            transform: translateX(0) translateY(5px) scale(1);
        }

        /* 移动端头像不放大，防止页面移动 */
        .header-avatar:hover img {
            transform: none;
            border-color: var(--primary-blue-semi);
            box-shadow: 0 4px 12px rgba(77, 166, 218, 0.3);
        }

        /* 调整导航栏布局 */
        .md-header__inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* 确保下拉菜单不遮挡其他元素 */
        .avatar-dropdown {
            max-width: 85vw;
        }
    }

    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
        background: #ccc;
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: #999;
    }

    /* 主题切换蒙版 - 优化结构和性能 */
    .theme-transition-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: var(--bg-white);
        z-index: 100000;
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
        display: flex;
        align-items: center;
        justify-content: center;
        /* 简化过渡效果，提高性能 */
        transition: opacity 0.3s ease-out, visibility 0.3s ease-out,
            background-color 0.3s ease-out, backdrop-filter 0.3s ease-out;
        backdrop-filter: blur(0px);
    }

    .theme-transition-overlay.active {
        opacity: 1;
        visibility: visible;
        pointer-events: all;
        backdrop-filter: blur(5px);
    }

    /* 主题切换内容容器 - 整合样式 */
    .theme-transition-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 20px;
        transform: scale(0.9);
        opacity: 0;
        transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1),
            opacity 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .theme-transition-overlay.active .theme-transition-content {
        transform: scale(1);
        opacity: 1;
    }

    /* 简化加载图标结构，移除不必要的嵌套 */
    .theme-transition-spinner {
        width: 50px;
        height: 50px;
        border: 5px solid rgba(77, 166, 218, 0.2);
        border-top-color: var(--primary-blue-semi);
        border-radius: 50%;
        animation: none;
        transition: opacity 0.3s ease;
    }

    .theme-transition-overlay.active .theme-transition-spinner {
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }

    /* 主题切换文字样式 */
    .theme-transition-text {
        font-family: var(--md-text-font);
        color: var(--primary-blue-semi);
        font-size: 16px;
        font-weight: 500;
        text-align: center;
        margin-top: 10px;
    }

    /* 页脚爱情宣言样式 */
    .md-footer-love {
        position: relative;
        font-family: var(--md-header-font) !important;
        font-size: 0.9rem;
        line-height: 1.6;
        margin: 0.5rem 0;
        padding: 0.5rem 1rem;
        color: rgba(255, 255, 255, 0.85);
        text-align: center;
        border-radius: 8px;
        background: linear-gradient(135deg,
                rgba(255, 255, 255, 0.1),
                rgba(255, 255, 255, 0.05));
        backdrop-filter: blur(4px);
        transition: all 0.4s ease;
        overflow: hidden;
        border-left: 3px solid rgba(255, 182, 193, 0.6);
    }

    .md-footer-love:hover {
        background: linear-gradient(135deg,
                rgba(255, 182, 193, 0.2),
                rgba(255, 255, 255, 0.1));
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(255, 182, 193, 0.15);
    }

    /* 添加闪烁星星效果 */
    .md-footer-love::before,
    .md-footer-love::after {
        content: "★";
        position: absolute;
        opacity: 0;
        font-size: 0.8rem;
        color: rgba(255, 223, 223, 0.8);
        animation: twinkle 3s ease-in-out infinite alternate;
    }

    .md-footer-love::before {
        left: 0.5rem;
        top: 0.4rem;
        animation-delay: 0s;
    }

    .md-footer-love::after {
        right: 0.5rem;
        top: 0.4rem;
        animation-delay: 1.5s;
    }

    @keyframes twinkle {
        0% {
            opacity: 0.3;
            transform: scale(0.8);
        }

        50% {
            opacity: 0.9;
            transform: scale(1.2);
        }

        100% {
            opacity: 0.3;
            transform: scale(0.8);
        }
    }

    /* 名字高亮显示 */
    .love-highlight {
        font-weight: 500;
        background: linear-gradient(120deg, #ffb6c1, #ffc0cb);
        background-clip: text;
        -webkit-background-clip: text;
        color: transparent;
        padding: 0 0.2rem;
        position: relative;
        white-space: nowrap;
    }

    /* 添加心跳动画效果 */
    .love-heart {
        display: inline-block;
        font-size: 0.9em;
        color: rgba(255, 182, 193, 0.9);
        transform-origin: center;
        margin: 0 0.2rem;
        animation: heartbeat 1.5s ease-in-out infinite;
    }

    @keyframes heartbeat {
        0% {
            transform: scale(1);
        }

        15% {
            transform: scale(1.25);
        }

        30% {
            transform: scale(1);
        }

        45% {
            transform: scale(1.25);
        }

        60% {
            transform: scale(1);
        }

        100% {
            transform: scale(1);
        }
    }

    /* 添加响应式样式 - 平板设备 */
    @media screen and (max-width: 1199px) {
        .md-footer-love {
            font-size: 0.8rem;
            padding: 0.4rem 0.8rem;
            margin: 0.4rem 0;
        }

        .md-footer-love::before,
        .md-footer-love::after {
            font-size: 0.7rem;
        }
    }

    /* 添加响应式样式 - 移动设备 */
    @media screen and (max-width: 767px) {
        .md-footer-love {
            font-size: 0.75rem;
            padding: 0.3rem 0.5rem;
            margin: 0.3rem 0;
            border-radius: 6px;
            max-width: 90%;
            margin-left: auto;
            margin-right: auto;
            border-left-width: 2px;
        }

        .md-footer-love:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(255, 182, 193, 0.12);
        }

        .md-footer-love::before,
        .md-footer-love::after {
            font-size: 0.6rem;
        }

        .love-heart {
            font-size: 0.8em;
        }

        /* 在非常小的屏幕上隐藏星星效果 */
        @media screen and (max-width: 360px) {

            .md-footer-love::before,
            .md-footer-love::after {
                display: none;
            }
        }
    }

    /* Atom One Light 语法高亮样式 - 仅覆盖代码块语法高亮 */
    .highlight .hll {
        background-color: var(--code-bg) !important;
    }

    .highlight .c {
        color: var(--code-comment) !important;
    }

    /* Comment */
    .highlight .err {
        color: var(--code-string) !important;
    }

    /* Error */
    .highlight .k {
        color: var(--code-keyword) !important;
    }

    /* Keyword */
    .highlight .l {
        color: var(--code-number) !important;
    }

    /* Literal */
    .highlight .n {
        color: var(--code-text) !important;
    }

    /* Name */
    .highlight .o {
        color: var(--code-text) !important;
    }

    /* Operator */
    .highlight .p {
        color: var(--code-text) !important;
    }

    /* Punctuation */
    .highlight .ch {
        color: var(--code-comment) !important;
    }

    /* Comment.Hashbang */
    .highlight .cm {
        color: var(--code-comment) !important;
    }

    /* Comment.Multiline */
    .highlight .cp {
        color: var(--code-keyword) !important;
    }

    /* Comment.Preproc */
    .highlight .cpf {
        color: var(--code-string) !important;
    }

    /* Comment.PreprocFile */
    .highlight .c1 {
        color: var(--code-comment) !important;
    }

    /* Comment.Single */
    .highlight .cs {
        color: var(--code-comment) !important;
    }

    /* Comment.Special */
    .highlight .gd {
        color: var(--code-string) !important;
    }

    /* Generic.Deleted */
    .highlight .ge {}

    /* Generic.Emph */
    .highlight .gr {
        color: var(--code-string) !important;
    }

    /* Generic.Error */
    .highlight .gh {
        color: var(--code-function) !important;
        font-weight: bold !important;
    }

    /* Generic.Heading */
    .highlight .gi {
        color: var(--code-string) !important;
    }

    /* Generic.Inserted */
    .highlight .go {
        color: var(--code-text) !important;
    }

    /* Generic.Output */
    .highlight .gp {
        color: var(--code-text) !important;
    }

    /* Generic.Prompt */
    .highlight .gs {
        font-weight: bold !important;
    }

    /* Generic.Strong */
    .highlight .gu {
        color: var(--code-function) !important;
        font-weight: bold !important;
    }

    /* Generic.Subheading */
    .highlight .gt {
        color: var(--code-string) !important;
    }

    /* Generic.Traceback */
    .highlight .kc {
        color: var(--code-keyword) !important;
    }

    /* Keyword.Constant */
    .highlight .kd {
        color: var(--code-keyword) !important;
    }

    /* Keyword.Declaration */
    .highlight .kn {
        color: var(--code-keyword) !important;
    }

    /* Keyword.Namespace */
    .highlight .kp {
        color: var(--code-keyword) !important;
    }

    /* Keyword.Pseudo */
    .highlight .kr {
        color: var(--code-keyword) !important;
    }

    /* Keyword.Reserved */
    .highlight .kt {
        color: var(--code-class) !important;
    }

    /* Keyword.Type */
    .highlight .ld {
        color: var(--code-builtin) !important;
    }

    /* Literal.Date */
    .highlight .m {
        color: var(--code-number) !important;
    }

    /* Literal.Number */
    .highlight .s {
        color: var(--code-builtin) !important;
    }

    /* Literal.String */
    .highlight .na {
        color: var(--code-class) !important;
    }

    /* Name.Attribute */
    .highlight .nb {
        color: var(--code-class) !important;
    }

    /* Name.Builtin */
    .highlight .nc {
        color: var(--code-class) !important;
    }

    /* Name.Class */
    .highlight .no {
        color: var(--code-string) !important;
    }

    /* Name.Constant */
    .highlight .nd {
        color: var(--code-function) !important;
    }

    /* Name.Decorator */
    .highlight .ni {
        color: var(--code-text) !important;
    }

    /* Name.Entity */
    .highlight .ne {
        color: var(--code-string) !important;
    }

    /* Name.Exception */
    .highlight .nf {
        color: var(--code-function) !important;
    }

    /* Name.Function */
    .highlight .nl {
        color: var(--code-text) !important;
    }

    /* Name.Label */
    .highlight .nn {
        color: var(--code-text) !important;
    }

    /* Name.Namespace */
    .highlight .nx {
        color: var(--code-function) !important;
    }

    /* Name.Other */
    .highlight .py {
        color: var(--code-text) !important;
    }

    /* Name.Property */
    .highlight .nt {
        color: var(--code-variable) !important;
    }

    /* Name.Tag */
    .highlight .nv {
        color: var(--code-string) !important;
    }

    /* Name.Variable */
    .highlight .ow {
        color: var(--code-keyword) !important;
    }

    /* Operator.Word */
    .highlight .w {
        color: var(--code-text) !important;
    }

    /* Text.Whitespace */
    .highlight .mb {
        color: var(--code-number) !important;
    }

    /* Literal.Number.Bin */
    .highlight .mf {
        color: var(--code-number) !important;
    }

    /* Literal.Number.Float */
    .highlight .mh {
        color: var(--code-number) !important;
    }

    /* Literal.Number.Hex */
    .highlight .mi {
        color: var(--code-number) !important;
    }

    /* Literal.Number.Integer */
    .highlight .mo {
        color: var(--code-number) !important;
    }

    /* Literal.Number.Oct */
    .highlight .sa {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Affix */
    .highlight .sb {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Backtick */
    .highlight .sc {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Char */
    .highlight .dl {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Delimiter */
    .highlight .sd {
        color: var(--code-comment) !important;
    }

    /* Literal.String.Doc */
    .highlight .s2 {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Double */
    .highlight .se {
        color: var(--code-function) !important;
    }

    /* Literal.String.Escape */
    .highlight .sh {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Heredoc */
    .highlight .si {
        color: var(--code-function) !important;
    }

    /* Literal.String.Interpol */
    .highlight .sx {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Other */
    .highlight .sr {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Regex */
    .highlight .s1 {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Single */
    .highlight .ss {
        color: var(--code-builtin) !important;
    }

    /* Literal.String.Symbol */
    .highlight .bp {
        color: var(--code-class) !important;
    }

    /* Name.Builtin.Pseudo */
    .highlight .fm {
        color: var(--code-function) !important;
    }

    /* Name.Function.Magic */
    .highlight .vc {
        color: var(--code-string) !important;
    }

    /* Name.Variable.Class */
    .highlight .vg {
        color: var(--code-string) !important;
    }

    /* Name.Variable.Global */
    .highlight .vi {
        color: var(--code-string) !important;
    }

    /* Name.Variable.Instance */
    .highlight .vm {
        color: var(--code-string) !important;
    }

    /* Name.Variable.Magic */
    .highlight .il {
        color: var(--code-number) !important;
    }

    /* Literal.Number.Integer.Long */

    /* 特殊语言的额外样式调整 */
    .highlight[data-lang="json"] .nt {
        color: var(--code-variable) !important;
    }

    /* JSON keys */
    .highlight[data-lang="yaml"] .na {
        color: var(--code-variable) !important;
    }

    /* YAML keys */
    .highlight[data-lang="yml"] .na {
        color: var(--code-variable) !important;
    }

    /* YAML keys */
    .highlight[data-lang="xml"] .nt {
        color: var(--code-variable) !important;
    }

    /* XML tags */
    .highlight[data-lang="html"] .nt {
        color: var(--code-variable) !important;
    }

    /* HTML tags */

    /* CSS特殊处理 */
    .highlight[data-lang="css"] .nc {
        color: var(--code-class) !important;
    }

    /* CSS class selectors */
    .highlight[data-lang="css"] .nf {
        color: var(--code-function) !important;
    }

    /* CSS functions */
    .highlight[data-lang="css"] .nt {
        color: var(--code-variable) !important;
    }

    /* CSS element selectors */
    .highlight[data-lang="css"] .nd {
        color: var(--code-keyword) !important;
    }

    /* CSS pseudo-classes */

    /* JavaScript特殊处理 */
    .highlight[data-lang="javascript"] .nx {
        color: var(--code-function) !important;
    }

    /* JS functions and variables */
    .highlight[data-lang="js"] .nx {
        color: var(--code-function) !important;
    }

    /* JS functions and variables */

    /* Python特殊处理 */
    .highlight[data-lang="python"] .nd {
        color: var(--code-function) !important;
    }

    /* Python decorators */
    .highlight[data-lang="python"] .nf {
        color: var(--code-function) !important;
    }

    /* Python functions */
    .highlight[data-lang="python"] .nc {
        color: var(--code-class) !important;
    }

    /* Python classes */

    /* Shell/Bash特殊处理 */
    .highlight[data-lang="bash"] .nv {
        color: var(--code-string) !important;
    }

    /* Bash variables */
    .highlight[data-lang="shell"] .nv {
        color: var(--code-string) !important;
    }

    /* Shell variables */
    .highlight[data-lang="sh"] .nv {
        color: var(--code-string) !important;
    }

    /* Shell variables */

    /* C/C++特殊处理 */
    .highlight[data-lang="c"] .kt {
        color: var(--code-keyword) !important;
    }

    /* C types */
    .highlight[data-lang="cpp"] .kt {
        color: var(--code-keyword) !important;
    }

    /* C++ types */
    .highlight[data-lang="c++"] .kt {
        color: var(--code-keyword) !important;
    }

    /* C++ types */

    /* Java特殊处理 */
    .highlight[data-lang="java"] .nc {
        color: var(--code-class) !important;
    }

    /* Java classes */
    .highlight[data-lang="java"] .kt {
        color: var(--code-keyword) !important;
    }

    /* Java types */
</style><script>
    // 字体配置
    const fontConfig = {
        "dongguanti": {
            name: "上图东观体",
            id: "font-dongguanti"
        },
        "oppoti": {
            name: "OPPO Sans",
            id: "font-oppoti"
        },
        "jiangchengti": {
            name: "江城黑体",
            id: "font-jiangchengti"
        },
        "lxgw": {
            name: "霞鹜臻楷",
            id: "font-lxgw"
        }
    };

    // 代码字体配置
    const codeFontConfig = {
        "dejavu": {
            name: "DejaVu Sans Mono",
            id: "code-font-dejavu-sans-mono"
        },
        "zsft": {
            name: "JetBrains Mono",
            id: "code-font-zsft-hk"
        }
    };

    // 立即应用保存的字体设置（与主题初始化方式一致）
    (function initFont() {
        const savedFont = localStorage.getItem("preferred-font") || "dongguanti";
        
        // 禁用所有字体样式表
        Object.values(fontConfig).forEach(font => {
            const link = document.getElementById(font.id);
            if (link) {
                link.setAttribute("disabled", "true");
            }
        });
        
        // 启用选中的字体样式表
        const selectedFontLink = document.getElementById(fontConfig[savedFont].id);
        if (selectedFontLink) {
            selectedFontLink.removeAttribute("disabled");
        }
    })();

    // 立即应用保存的代码字体设置
    (function initCodeFont() {
        const savedCodeFont = localStorage.getItem("preferred-code-font") || "dejavu";
        
        // 禁用所有代码字体样式表
        Object.values(codeFontConfig).forEach(font => {
            const link = document.getElementById(font.id);
            if (link) {
                link.setAttribute("disabled", "true");
            }
        });
        
        // 启用选中的代码字体样式表
        const selectedCodeFontLink = document.getElementById(codeFontConfig[savedCodeFont].id);
        if (selectedCodeFontLink) {
            selectedCodeFontLink.removeAttribute("disabled");
        }
    })();

    document.addEventListener("DOMContentLoaded", () => {
        const savedTheme = localStorage.getItem("preferred-theme") || "theme1";
        const savedFont = localStorage.getItem("preferred-font") || "dongguanti";
        const savedCodeFont = localStorage.getItem("preferred-code-font") || "dejavu";

        // 初始化功能条字体下拉菜单和字体设置
        updateFontDropdownToolbar(savedFont);
        applyFont(savedFont);
        
        // 初始化功能条代码字体下拉菜单和代码字体设置
        updateCodeFontDropdownToolbar(savedCodeFont);
        applyCodeFont(savedCodeFont);
        
        // 初始化功能条状态
        initToolbarState();

        const initialTheme = localStorage.getItem("preferred-theme");
        if (initialTheme) {
            const theme1Link = document.querySelector('link[href*="theme1"]');
            const theme2Link = document.querySelector('link[href*="theme2"]');

            // 关闭过渡动画，直接设置主题
            if (initialTheme === "theme1") {
                theme1Link.removeAttribute("disabled");
                theme2Link.setAttribute("disabled", "true");
            } else {
                theme2Link.removeAttribute("disabled");
                theme1Link.setAttribute("disabled", "true");
            }
        }

        // 添加加载完成后的检测
        setTimeout(() => {
            const hiddenElements = document.querySelectorAll('.md-content article>*[style*="opacity: 0"]');
            hiddenElements.forEach(el => {
                el.style.opacity = '1';
                el.style.transform = 'translateY(0)';
            });
        }, 2000); // 2秒后强制显示所有隐藏元素
    });

    (function initTheme() {
        const savedTheme = localStorage.getItem("preferred-theme");
        if (savedTheme) {
            const theme1Link = document.querySelector('link[href*="theme1"]');
            const theme2Link = document.querySelector('link[href*="theme2"]');
            if (theme1Link && theme2Link) {
                if (savedTheme === "theme1") {
                    theme1Link.removeAttribute("disabled");
                    theme2Link.setAttribute("disabled", "true");
                } else {
                    theme2Link.removeAttribute("disabled");
                    theme1Link.setAttribute("disabled", "true");
                }
            }
        }
    })();

    // 通用下拉菜单切换函数
    function toggleDropdown(targetSelector, otherSelector) {
        const dropdown = document.querySelector(targetSelector);
        const otherDropdown = document.querySelector(otherSelector);
        const isActive = dropdown.classList.contains('active');
        
        if (isActive) {
            dropdown.classList.remove('active');
            return;
        }
        
        // 如果其他下拉菜单打开，先关闭并等待过渡完成
        if (otherDropdown && otherDropdown.classList.contains('active')) {
            const handleTransitionEnd = (event) => {
                if (event.target === otherDropdown && (event.propertyName === 'opacity' || event.propertyName === 'transform')) {
                    otherDropdown.removeEventListener('transitionend', handleTransitionEnd);
                    dropdown.classList.add('active');
                }
            };
            
            otherDropdown.addEventListener('transitionend', handleTransitionEnd);
            otherDropdown.classList.remove('active');
            
            // 超时保护
            setTimeout(() => {
                otherDropdown.removeEventListener('transitionend', handleTransitionEnd);
                if (!dropdown.classList.contains('active')) {
                    dropdown.classList.add('active');
                }
            }, 350);
        } else {
            dropdown.classList.add('active');
        }
    }

    // 字体下拉菜单功能
    function toggleFontDropdownToolbar() {
        toggleDropdown('.font-dropdown-toolbar', '.code-font-dropdown-toolbar');
    }

    // 代码字体下拉菜单功能
    function toggleCodeFontDropdownToolbar() {
        toggleDropdown('.code-font-dropdown-toolbar', '.font-dropdown-toolbar');
    }

    // 通用字体应用函数
    function applyFontStyle(config, fontKey, storageKey) {
        // 禁用所有字体样式表
        Object.values(config).forEach(font => {
            const link = document.getElementById(font.id);
            if (link) link.setAttribute("disabled", "true");
        });
        
        // 启用选中的字体样式表
        const selectedLink = document.getElementById(config[fontKey].id);
        if (selectedLink) selectedLink.removeAttribute("disabled");
        
        // 保存设置
        localStorage.setItem(storageKey, fontKey);
    }

    // 通用下拉菜单更新函数
    function updateDropdownDisplay(config, fontKey, nameSelector, optionSelector, dataAttr) {
        const nameEl = document.querySelector(nameSelector);
        const options = document.querySelectorAll(optionSelector);
        
        if (nameEl) nameEl.textContent = config[fontKey].name;
        
        options.forEach(option => {
            const key = option.getAttribute(dataAttr);
            option.classList.toggle('selected', key === fontKey);
        });
    }

    // 字体选择
    function selectFontToolbar(fontKey) {
        applyFontStyle(fontConfig, fontKey, "preferred-font");
        updateDropdownDisplay(fontConfig, fontKey, ".current-font-name-toolbar", ".font-option-toolbar", "data-font");
        document.querySelector('.font-dropdown-toolbar').classList.remove('active');
    }

    // 代码字体选择
    function selectCodeFontToolbar(codeFontKey) {
        applyFontStyle(codeFontConfig, codeFontKey, "preferred-code-font");
        updateDropdownDisplay(codeFontConfig, codeFontKey, ".current-code-font-name-toolbar", ".code-font-option-toolbar", "data-code-font");
        document.querySelector('.code-font-dropdown-toolbar').classList.remove('active');
    }

    // 应用字体（保持向后兼容）
    function applyFont(fontKey) {
        applyFontStyle(fontConfig, fontKey, "preferred-font");
    }

    // 应用代码字体（保持向后兼容）
    function applyCodeFont(codeFontKey) {
        applyFontStyle(codeFontConfig, codeFontKey, "preferred-code-font");
    }

    // 更新字体下拉菜单显示（保持向后兼容）
    function updateFontDropdownToolbar(currentFontKey) {
        updateDropdownDisplay(fontConfig, currentFontKey, ".current-font-name-toolbar", ".font-option-toolbar", "data-font");
    }

    // 更新代码字体下拉菜单显示（保持向后兼容）
    function updateCodeFontDropdownToolbar(currentCodeFontKey) {
        updateDropdownDisplay(codeFontConfig, currentCodeFontKey, ".current-code-font-name-toolbar", ".code-font-option-toolbar", "data-code-font");
    }

    // 返回顶部功能
    function scrollToTop() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }

    // 功能条切换功能
    function toggleToolbar() {
        const toolbar = document.getElementById('floatingToolbar');
        const toggleBtn = document.getElementById('toolbarToggleBtn');
        
        if (!toolbar || !toggleBtn) {
            console.error('无法找到功能条或切换按钮元素');
            return;
        }
        
        const isHidden = toolbar.classList.contains('hidden');
        
        if (isHidden) {
            // 显示功能条
            toolbar.classList.remove('hidden');
            toggleBtn.classList.remove('toolbar-hidden');
            localStorage.setItem('toolbar-visible', 'true');
        } else {
            // 隐藏功能条
            toolbar.classList.add('hidden');
            toggleBtn.classList.add('toolbar-hidden');
            localStorage.setItem('toolbar-visible', 'false');
        }
    }

    // 初始化功能条状态
    function initToolbarState() {
        const toolbar = document.getElementById('floatingToolbar');
        const toggleBtn = document.getElementById('toolbarToggleBtn');
        const isVisible = localStorage.getItem('toolbar-visible');
        
        if (!toolbar || !toggleBtn) {
            return;
        }
        
        // 如果之前设置为隐藏，则保持隐藏状态
        if (isVisible === 'false') {
            toolbar.classList.add('hidden');
            toggleBtn.classList.add('toolbar-hidden');
        } else {
            // 默认显示
            toolbar.classList.remove('hidden');
            toggleBtn.classList.remove('toolbar-hidden');
        }
    }

    // 隐藏所有子菜单的通用函数
    function hideAllSubmenus() {
        const fontDropdown = document.querySelector('.font-dropdown-toolbar');
        if (fontDropdown) {
            fontDropdown.classList.remove('active');
        }
        
        const codeFontDropdown = document.querySelector('.code-font-dropdown-toolbar');
        if (codeFontDropdown) {
            codeFontDropdown.classList.remove('active');
        }
        // 如果将来有其他子菜单，可以在这里添加
    }

    // 点击外部关闭下拉菜单
    document.addEventListener('click', function(event) {
        const fontDropdown = document.querySelector('.font-dropdown-toolbar');
        const codeFontDropdown = document.querySelector('.code-font-dropdown-toolbar');
        
        // 如果点击的不是字体下拉菜单内部，则关闭字体下拉菜单
        const fontSwitcher = document.querySelector('.font-switcher');
        if (fontSwitcher && fontDropdown && !fontSwitcher.contains(event.target)) {
            fontDropdown.classList.remove('active');
        }
        
        // 如果点击的不是代码字体下拉菜单内部，则关闭代码字体下拉菜单
        const codeFontSwitcher = document.querySelector('.code-font-switcher');
        if (codeFontSwitcher && codeFontDropdown && !codeFontSwitcher.contains(event.target)) {
            codeFontDropdown.classList.remove('active');
        }
    });

    // 为功能区的其他功能添加点击和悬浮事件监听器
    document.addEventListener('DOMContentLoaded', function() {
        const toolbarItems = document.querySelectorAll('.toolbar-item:not(.font-switcher):not(.code-font-switcher)');
        
        toolbarItems.forEach(item => {
            // 点击其他功能时隐藏子菜单
            item.addEventListener('click', function() {
                hideAllSubmenus();
            });
            
            // 鼠标悬浮在其他功能时隐藏子菜单
            item.addEventListener('mouseenter', function() {
                hideAllSubmenus();
            });
        });
        
        // 延迟隐藏的定时器
        let fontDropdownTimer = null;
        let codeFontDropdownTimer = null;
        
        // 为字体切换器添加鼠标事件监听器
        const fontSwitcher = document.querySelector('.font-switcher');
        if (fontSwitcher) {
            fontSwitcher.addEventListener('mouseleave', function() {
                // 清除之前的定时器
                if (fontDropdownTimer) {
                    clearTimeout(fontDropdownTimer);
                }
                
                // 设置延迟隐藏
                fontDropdownTimer = setTimeout(function() {
                    const fontDropdown = document.querySelector('.font-dropdown-toolbar');
                    if (fontDropdown) {
                        fontDropdown.classList.remove('active');
                    }
                }, 300); // 300ms延迟
            });
            
            // 鼠标重新进入时取消隐藏
            fontSwitcher.addEventListener('mouseenter', function() {
                if (fontDropdownTimer) {
                    clearTimeout(fontDropdownTimer);
                    fontDropdownTimer = null;
                }
            });
        }
        
        // 为代码字体切换器添加鼠标事件监听器
        const codeFontSwitcher = document.querySelector('.code-font-switcher');
        if (codeFontSwitcher) {
            codeFontSwitcher.addEventListener('mouseleave', function() {
                // 清除之前的定时器
                if (codeFontDropdownTimer) {
                    clearTimeout(codeFontDropdownTimer);
                }
                
                // 设置延迟隐藏
                codeFontDropdownTimer = setTimeout(function() {
                    const codeFontDropdown = document.querySelector('.code-font-dropdown-toolbar');
                    if (codeFontDropdown) {
                        codeFontDropdown.classList.remove('active');
                    }
                }, 150); // 300ms延迟
            });
            
            // 鼠标重新进入时取消隐藏
            codeFontSwitcher.addEventListener('mouseenter', function() {
                if (codeFontDropdownTimer) {
                    clearTimeout(codeFontDropdownTimer);
                    codeFontDropdownTimer = null;
                }
            });
        }
    });

    function switchTheme() {
        // 获取当前和目标主题信息
        const currentTheme =
            localStorage.getItem("preferred-theme") || "theme1";
        const newTheme = currentTheme === "theme1" ? "theme2" : "theme1";
        const targetThemeText = newTheme === "theme1" ? "新版主题" : "原生主题";

        // 获取主题样式链接
        const theme1Link = document.querySelector('link[href*="theme1"]');
        const theme2Link = document.querySelector('link[href*="theme2"]');

        if (!theme1Link || !theme2Link) {
            console.error("无法找到主题样式链接");
            return;
        }

        // 创建和添加过渡覆盖层
        const overlay = document.createElement("div");
        overlay.className = "theme-transition-overlay";
        overlay.innerHTML = `
        <div class="theme-transition-content">
            <div class="theme-transition-spinner"></div>
            <div class="theme-transition-text">正在切换到：${targetThemeText}</div>
        </div>
    `;
        document.body.appendChild(overlay);

        // 确保DOM已更新后再添加active类
        requestAnimationFrame(() => {
            // 激活蒙版
            overlay.classList.add("active");

            // 添加适当的延迟以确保蒙版已完全显示
            setTimeout(() => {
                // 切换主题样式
                if (newTheme === "theme1") {
                    theme1Link.removeAttribute("disabled");
                    theme2Link.setAttribute("disabled", "true");
                } else {
                    theme2Link.removeAttribute("disabled");
                    theme1Link.setAttribute("disabled", "true");
                }

                // 保存主题设置
                localStorage.setItem("preferred-theme", newTheme);

                // 给予足够的时间加载主题
                setTimeout(() => {
                    // 平滑淡出效果
                    fadeOutOverlay(overlay);
                }, 2500); // 主题加载时间
            }, 250); // 蒙版显示时间
        });
    }

    // 平滑淡出蒙版
    function fadeOutOverlay(overlay) {
        // 先改变背景色，制造渐变效果
        overlay.style.backgroundColor = "rgba(255, 255, 255, 0.85)";

        // 短暂延迟后淡出
        setTimeout(() => {
            overlay.classList.remove("active");

            // 等待淡出动画完成后移除元素
            setTimeout(() => {
                document.body.removeChild(overlay);
            }, 300);
        }, 150);
    }
</script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=teal> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#c class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../index.html title=柯懒的知识库 class="md-header__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 柯懒的知识库 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> C语言预处理（部分） </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=teal aria-label type=radio name=__palette id=__palette_1> </form> <!-- 头像元素 - 直接在HTML中定义 --> <div class=header-avatar> <img src=../../作者/作者.assets/20250206-200653.jpg alt=头像> <div class=avatar-dropdown> <p><strong>柯懒不是柯南</strong></p> <a href=../../作者/联系作者/作者.html class=avatar-dropdown-item>吵醒柯懒</a> <div class=avatar-dropdown-divider></div> <a href=../../作者/关于作者/关于作者.html class=avatar-dropdown-item>柯懒自传</a> <div class=avatar-dropdown-divider></div> <a href=https://github.com/H0308 class=avatar-dropdown-item>柯懒的零食库</a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=查找> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <!-- 独立的切换按钮 --> <div class=toolbar-toggle-btn id=toolbarToggleBtn onclick=toggleToolbar()> <div class=toggle-icon> <svg class=toggle-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=16 height=16> <path d="M346.538667 1024L170.666667 853.333333l341.333333-341.333333-341.333333-341.333333 175.872-170.666667L853.333333 512z" fill=currentColor></path> </svg> </div> </div> <!-- 右侧固定功能条 - 独立于内容区 --> <div class=floating-toolbar id=floatingToolbar> <!-- 字体切换功能 --> <div class="toolbar-item font-switcher"> <div class=toolbar-icon> <svg class=font-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M913.408 1024l-66.56 0q-29.696 0-51.2-5.12t-36.864-15.872-26.112-27.136-19.968-37.888q-15.36-38.912-28.16-70.656t-22.016-55.296q-11.264-26.624-20.48-49.152l-254.976 0q-7.168 23.552-17.408 51.2-8.192 23.552-21.504 56.832t-30.72 72.192q-20.48 46.08-47.104 63.488t-60.416 17.408l-70.656 0q-45.056 0-60.928-19.968t2.56-68.096q18.432-46.08 43.008-108.544t52.224-132.608 57.344-143.872 57.344-144.384q65.536-164.864 137.216-343.04 7.168-17.408 18.432-31.744 10.24-11.264 27.136-21.504t42.496-10.24q26.624 0 43.52 10.752t28.16 24.064q12.288 15.36 19.456 33.792 72.704 180.224 138.24 345.088 27.648 70.656 57.344 143.872t56.832 142.336 51.2 129.536 41.472 104.448q14.336 34.816 4.096 62.464t-43.008 27.648zM616.448 634.88l-97.28-347.136-1.024 0-108.544 347.136 206.848 0z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>内容字体</div> <div class=font-dropdown-toolbar> <div class=font-current-toolbar onclick=toggleFontDropdownToolbar()> <span class=current-font-name-toolbar>东观体</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=font-options-toolbar> <div class=font-option-toolbar data-font=dongguanti onclick="selectFontToolbar('dongguanti')">上图东观体</div> <div class=font-option-toolbar data-font=oppoti onclick="selectFontToolbar('oppoti')">OPPO Sans</div> <div class=font-option-toolbar data-font=jiangchengti onclick="selectFontToolbar('jiangchengti')">江城黑体</div> <div class=font-option-toolbar data-font=lxgw onclick="selectFontToolbar('lxgw')">霞鹜臻楷</div> </div> </div> </div> <!-- 代码字体切换功能 --> <div class="toolbar-item code-font-switcher"> <div class=toolbar-icon> <svg class=code-font-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M320 213.333333l-213.333333 213.333334L320 640l60.16-60.16L227.84 426.666667l152.32-153.173334L320 213.333333z m384 0l-60.16 60.16L796.16 426.666667l-152.32 153.173333L704 640l213.333333-213.333333L704 213.333333z m-128 85.333334l-128 426.666666h85.333333l128-426.666666h-85.333333z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>代码字体</div> <div class=code-font-dropdown-toolbar> <div class=code-font-current-toolbar onclick=toggleCodeFontDropdownToolbar()> <span class=current-code-font-name-toolbar>DejaVu Sans Mono</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=code-font-options-toolbar> <div class=code-font-option-toolbar data-code-font=dejavu onclick="selectCodeFontToolbar('dejavu')">DejaVu Sans Mono</div> <div class=code-font-option-toolbar data-code-font=zsft onclick="selectCodeFontToolbar('zsft')">JetBrains Mono</div> </div> </div> </div> <!-- 主题切换功能 --> <div class="toolbar-item theme-switcher" onclick=switchTheme()> <div class=toolbar-icon> <svg class=theme-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M876.572788 522.301623c-1.886977 12.375865-9.657964 30.331819-35.880185 45.48903-56.489572 32.697703-150.21828 83.990926-174.010149 96.958262-13.143345 24.431435-66.067718 122.221646-98.141204 178.503487-16.117073 28.124548-36.055171 34.041304-50.030463 34.041304-0.031722 0-0.031722 0-0.031722 0-14.613836 0-29.1806-6.460132-43.234687-19.218714-47.183626-42.643216-125.994576-117.105115-146.013515-136.083351-27.757181-4.732791-138.338718-23.743774-200.584388-35.752272-17.924231-3.533476-32.649608-14.07046-40.372499-29.084409-5.78782-11.256368-10.281157-30.05962 1.471514-55.658647 26.989701-59.047838 74.126254-157.557432 85.957721-182.196599-3.437286-27.117614-16.996093-135.060045-23.760147-198.905142-1.886977-17.460674 3.901867-35.096333 15.829524-48.351218 12.791327-14.278191 30.667463-21.48943 49.854455-19.426445 63.669088 6.332219 173.259042 19.426445 200.584388 22.705118 24.335245-11.879562 121.085776-58.936297 180.133613-86.34146 9.91379-4.573155 19.85828-6.92369 29.596062-6.92369 28.748764 0 52.172243 20.642133 58.328453 51.421136 12.599969 62.997799 30.93864 166.70272 35.639708 193.484689 18.851347 19.682271 91.953272 96.031147 135.060045 143.07151C872.72004 487.125473 879.307062 504.71406 876.572788 522.301623L876.572788 522.301623zM825.375755 499.085876C776.017604 445.314205 687.245791 352.977193 686.365748 352.017332c-2.942005-3.069919-4.956895-6.971785-5.676279-11.208273-0.207731-1.215688-22.193465-127.001509-36.551474-198.936865-0.799202-3.917216-4.285606-16.836457-16.196891-16.836457-3.453658 0-7.30743 1.006933-11.464099 2.942005-67.282383 31.179117-183.955662 88.180342-185.170327 88.771813-3.693112 1.790786-7.850805 2.558265-11.975752 2.01489-1.295506-0.224104-133.63765-16.165168-205.988468-23.424502-0.079818 0-0.207731 0-0.287549 0-7.30743 0-11.128455 2.89391-13.319353 5.40408-3.677762 4.124947-5.644557 9.91379-5.068436 15.110139 7.674796 72.623018 24.255427 202.934922 24.463158 204.325595 0.511653 4.109598-0.159636 8.266267-1.966795 11.960403-0.591471 1.215688-57.657164 120.04712-88.339977 187.201589-3.565199 7.754614-4.41352 14.214746-2.350534 18.131963 1.935072 3.725858 6.588045 5.820566 10.360975 6.53995 70.719668 13.718443 204.644867 36.519752 206.036563 36.727483 4.189416 0.671289 8.058536 2.686179 11.112082 5.580089 1.006933 0.87902 96.414887 91.281983 150.090367 139.889027 8.314363 7.563256 13.143345 8.106632 14.437827 8.106632 3.485381 0 8.314363-4.621251 12.727882-12.391215 36.343743-63.828724 100.011808-181.988868 100.636025-183.155437 1.983167-3.64604 5.004991-6.667863 8.650007-8.650007 1.134847-0.671289 114.418936-62.373583 178.6314-99.516528 8.698103-5.036713 14.278191-10.568706 14.94948-14.854313C834.681702 511.845481 831.49922 505.800811 825.375755 499.085876L825.375755 499.085876zM935.333076 935.670256c-4.157693 4.157693-9.689686 6.299473-15.141862 6.299473-5.548366 0-11.048637-2.142803-15.238053-6.299473l-171.915441-171.915441c-8.362458-8.394181-8.362458-21.98471 0-30.426987 8.394181-8.394181 21.98471-8.394181 30.379914 0l171.915441 171.915441C943.727257 913.684522 943.727257 927.275052 935.333076 935.670256L935.333076 935.670256z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>主题</div> </div> <!-- 返回顶部功能 --> <div class="toolbar-item back-to-top" onclick=scrollToTop()> <div class=toolbar-icon> <svg class=back-to-top-icon viewbox="0 0 1024 1024" xmlns=http://www.w3.org/2000/svg> <path d="M882.688 624.128l-336.896-583.68c-15.872-27.136-54.784-27.136-70.656 0L138.24 624.128c-15.872 27.136 4.096 61.44 35.328 61.44H317.44c22.528 0 40.96 18.432 40.96 40.96v239.616c0 22.528 18.432 40.96 40.96 40.96h223.232c22.528 0 40.96-18.432 40.96-40.96v-239.616c0-22.528 18.432-40.96 40.96-40.96h143.872c30.208 0 50.176-34.304 34.304-61.44z"></path> </svg> </div> <div class=toolbar-label>顶部</div> </div> </div> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.html class=md-tabs__link> 主页 </a> </li> <li class=md-tabs__item> <a href=../../%E7%BD%91%E7%AB%99%E4%BB%8B%E7%BB%8D/%E7%BD%91%E7%AB%99%E4%BB%8B%E7%BB%8D.html class=md-tabs__link> 网站介绍 </a> </li> <li class=md-tabs__item> <a href=../../%E7%BD%91%E7%AB%99%E6%97%B6%E9%97%B4%E7%BA%BF/%E7%BD%91%E7%AB%99%E6%97%B6%E9%97%B4%E7%BA%BF.html class=md-tabs__link> 网站时间线 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../index.html class=md-tabs__link> 编程语言 </a> </li> <li class=md-tabs__item> <a href=../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1.%20%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%92%8C%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/1.%20%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E4%B8%8E%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6.html class=md-tabs__link> 数据结构与算法 </a> </li> <li class=md-tabs__item> <a href=../../Linux/1.%20Linux%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E5%92%8C%E6%8C%87%E4%BB%A4/1.%20Linux%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E5%92%8C%E6%8C%87%E4%BB%A4.html class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../HTML%E4%B8%8ECSS/HTML%E7%AC%94%E8%AE%B0/HTML%E7%AC%94%E8%AE%B0.html class=md-tabs__link> 前端 </a> </li> <li class=md-tabs__item> <a href=../../MySQL/MySQL%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/MySQL%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8.html class=md-tabs__link> MySQL </a> </li> <li class=md-tabs__item> <a href=../../JavaEE/Spring/1.%20SpringMVC%E5%9F%BA%E7%A1%80/1.%20SpringMVC%E5%9F%BA%E7%A1%80.html class=md-tabs__link> JavaEE应用开发 </a> </li> <li class=md-tabs__item> <a href=../../%E5%85%B6%E5%AE%83/Shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/%E5%85%B3%E4%BA%8EShell.html class=md-tabs__link> 扩展知识 </a> </li> <li class=md-tabs__item> <a href=../../%E5%B7%A5%E5%85%B7%E5%B8%AE%E5%8A%A9/vscode%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/vscode%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5.html class=md-tabs__link> 工具帮助 </a> </li> <li class=md-tabs__item> <a href=../../%E9%A1%B9%E7%9B%AE/1.%20Boost%E5%BA%93%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/1.%20Boost%E5%BA%93%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E.html class=md-tabs__link> 项目 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title=柯懒的知识库 class="md-nav__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> 柯懒的知识库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.html class=md-nav__link> <span class=md-ellipsis> 主页 </span> </a> </li> <li class=md-nav__item> <a href=../../%E7%BD%91%E7%AB%99%E4%BB%8B%E7%BB%8D/%E7%BD%91%E7%AB%99%E4%BB%8B%E7%BB%8D.html class=md-nav__link> <span class=md-ellipsis> 网站介绍 </span> </a> </li> <li class=md-nav__item> <a href=../../%E7%BD%91%E7%AB%99%E6%97%B6%E9%97%B4%E7%BA%BF/%E7%BD%91%E7%AB%99%E6%97%B6%E9%97%B4%E7%BA%BF.html class=md-nav__link> <span class=md-ellipsis> 网站时间线 </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> 编程语言 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> 编程语言 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> C语言 </span> </a> <label class="md-nav__link " for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=true> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> C语言 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../1.%20C%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.%20C%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html class=md-nav__link> <span class=md-ellipsis> C语言基础知识 </span> </a> </li> <li class=md-nav__item> <a href=../2.%20%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E4%B8%8E%E7%B1%BB%E5%9E%8B%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F/2.%20%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E4%B8%8E%E7%B1%BB%E5%9E%8B%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F.html class=md-nav__link> <span class=md-ellipsis> 进制转换与类型在内存的存储方式 </span> </a> </li> <li class=md-nav__item> <a href=../3.%20C%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%8F%98%E9%87%8F/3.%20C%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%8F%98%E9%87%8F.html class=md-nav__link> <span class=md-ellipsis> C语言数据类型与变量 </span> </a> </li> <li class=md-nav__item> <a href=../4.%20C%E8%AF%AD%E8%A8%80%E6%93%8D%E4%BD%9C%E7%AC%A6/4.%20C%E8%AF%AD%E8%A8%80%E6%93%8D%E4%BD%9C%E7%AC%A6.html class=md-nav__link> <span class=md-ellipsis> C语言操作符 </span> </a> </li> <li class=md-nav__item> <a href=../5.%20C%E8%AF%AD%E8%A8%80%E7%9A%84%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E5%87%BD%E6%95%B0scanf%E5%8F%8A%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA%E5%87%BD%E6%95%B0printf/5.%20C%E8%AF%AD%E8%A8%80%E7%9A%84%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E5%87%BD%E6%95%B0scanf%E5%8F%8A%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA%E5%87%BD%E6%95%B0printf.html class=md-nav__link> <span class=md-ellipsis> C语言的标准输入函数scanf及标准输出函数printf </span> </a> </li> <li class=md-nav__item> <a href=../6.%20C%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E5%88%86%E6%94%AF%E8%AF%AD%E5%8F%A5/6.%20C%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E5%88%86%E6%94%AF%E8%AF%AD%E5%8F%A5.html class=md-nav__link> <span class=md-ellipsis> C语言中的分支语句 </span> </a> </li> <li class=md-nav__item> <a href=../7.%20C%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5/7.%20C%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5.html class=md-nav__link> <span class=md-ellipsis> C语言中的循环语句 </span> </a> </li> <li class=md-nav__item> <a href=../8.%20C%E8%AF%AD%E8%A8%80%E5%87%BD%E6%95%B0/8.%20C%E8%AF%AD%E8%A8%80%E5%87%BD%E6%95%B0.html class=md-nav__link> <span class=md-ellipsis> C语言函数 </span> </a> </li> <li class=md-nav__item> <a href=../9.%20C%E8%AF%AD%E8%A8%80%E6%8C%87%E9%92%88/9.%20C%E8%AF%AD%E8%A8%80%E6%8C%87%E9%92%88.html class=md-nav__link> <span class=md-ellipsis> C语言指针 </span> </a> </li> <li class=md-nav__item> <a href=../10.%20C%E8%AF%AD%E8%A8%80%E5%AD%97%E7%AC%A6%E5%87%BD%E6%95%B0%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0%E4%B8%8E%E5%86%85%E5%AD%98%E5%87%BD%E6%95%B0/10.%20C%E8%AF%AD%E8%A8%80%E5%AD%97%E7%AC%A6%E5%87%BD%E6%95%B0%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0%E4%B8%8E%E5%86%85%E5%AD%98%E5%87%BD%E6%95%B0.html class=md-nav__link> <span class=md-ellipsis> C语言字符函数、字符串函数与内存函数 </span> </a> </li> <li class=md-nav__item> <a href=../11.%20C%E8%AF%AD%E8%A8%80%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/11.%20C%E8%AF%AD%E8%A8%80%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html class=md-nav__link> <span class=md-ellipsis> C语言动态内存管理 </span> </a> </li> <li class=md-nav__item> <a href=../12.%20C%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/12.%20C%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C.html class=md-nav__link> <span class=md-ellipsis> C语言文件操作 </span> </a> </li> <li class=md-nav__item> <a href=../13.%20C%E8%AF%AD%E8%A8%80%E7%BC%96%E8%AF%91%E4%B8%8E%E9%93%BE%E6%8E%A5%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89/13.%20C%E8%AF%AD%E8%A8%80%E7%BC%96%E8%AF%91%E4%B8%8E%E9%93%BE%E6%8E%A5%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89.html class=md-nav__link> <span class=md-ellipsis> C语言编译与链接（基础） </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> C语言预处理（部分） </span> <span class="md-nav__icon md-icon"></span> </label> <a href=14.%20C%E8%AF%AD%E8%A8%80%E9%A2%84%E5%A4%84%E7%90%86%EF%BC%88%E9%83%A8%E5%88%86%EF%BC%89.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> C语言预处理（部分） </span> </a> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 预定义符号 </span> </a> </li> <li class=md-nav__item> <a href=#define class=md-nav__link> <span class=md-ellipsis> #define定义常量 </span> </a> </li> <li class=md-nav__item> <a href=#define_1 class=md-nav__link> <span class=md-ellipsis> #define定义宏 </span> </a> <nav class=md-nav aria-label=#define定义宏> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 宏命名约定 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 宏替换规则 </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 宏与函数对比 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> #与##运算符 </span> </a> <nav class=md-nav aria-label=#与##运算符> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> #运算符 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> ##运算符 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#undef class=md-nav__link> <span class=md-ellipsis> #undef预处理指令 </span> </a> </li> <li class=md-nav__item> <a href=#linux class=md-nav__link> <span class=md-ellipsis> 命令行定义（Linux） </span> </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 条件编译 </span> </a> </li> <li class=md-nav__item> <a href=#include class=md-nav__link> <span class=md-ellipsis> 头文件包含指令#include </span> </a> <nav class=md-nav aria-label=头文件包含指令#include> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 嵌套文件包含 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../C%2B%2B/index.html class=md-nav__link> <span class=md-ellipsis> C++ </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Java/1.%20Java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/Java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html class=md-nav__link> <span class=md-ellipsis> Java </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.%20Python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/1.%20Python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html class=md-nav__link> <span class=md-ellipsis> Python </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1.%20%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%92%8C%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/1.%20%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E4%B8%8E%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6.html class=md-nav__link> <span class=md-ellipsis> 数据结构与算法 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Linux/1.%20Linux%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E5%92%8C%E6%8C%87%E4%BB%A4/1.%20Linux%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E5%92%8C%E6%8C%87%E4%BB%A4.html class=md-nav__link> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../HTML%E4%B8%8ECSS/HTML%E7%AC%94%E8%AE%B0/HTML%E7%AC%94%E8%AE%B0.html class=md-nav__link> <span class=md-ellipsis> 前端 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../MySQL/MySQL%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/MySQL%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8.html class=md-nav__link> <span class=md-ellipsis> MySQL </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../JavaEE/Spring/1.%20SpringMVC%E5%9F%BA%E7%A1%80/1.%20SpringMVC%E5%9F%BA%E7%A1%80.html class=md-nav__link> <span class=md-ellipsis> JavaEE应用开发 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../%E5%85%B6%E5%AE%83/Shell%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80/%E5%85%B3%E4%BA%8EShell.html class=md-nav__link> <span class=md-ellipsis> 扩展知识 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../%E5%B7%A5%E5%85%B7%E5%B8%AE%E5%8A%A9/vscode%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/vscode%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5.html class=md-nav__link> <span class=md-ellipsis> 工具帮助 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../%E9%A1%B9%E7%9B%AE/1.%20Boost%E5%BA%93%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/1.%20Boost%E5%BA%93%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E.html class=md-nav__link> <span class=md-ellipsis> 项目 </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 预定义符号 </span> </a> </li> <li class=md-nav__item> <a href=#define class=md-nav__link> <span class=md-ellipsis> #define定义常量 </span> </a> </li> <li class=md-nav__item> <a href=#define_1 class=md-nav__link> <span class=md-ellipsis> #define定义宏 </span> </a> <nav class=md-nav aria-label=#define定义宏> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 宏命名约定 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 宏替换规则 </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 宏与函数对比 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> #与##运算符 </span> </a> <nav class=md-nav aria-label=#与##运算符> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> #运算符 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> ##运算符 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#undef class=md-nav__link> <span class=md-ellipsis> #undef预处理指令 </span> </a> </li> <li class=md-nav__item> <a href=#linux class=md-nav__link> <span class=md-ellipsis> 命令行定义（Linux） </span> </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 条件编译 </span> </a> </li> <li class=md-nav__item> <a href=#include class=md-nav__link> <span class=md-ellipsis> 头文件包含指令#include </span> </a> <nav class=md-nav aria-label=头文件包含指令#include> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 嵌套文件包含 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=c>C语言预处理（部分）<a class=headerlink href=#c title="Permanent link">&para;</a></h1> <div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;"> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span> 约 1886 个字 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"/></svg></span> 352 行代码 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span> 预计阅读时间 11 分钟</p> </div> <h2 id=_1>预定义符号<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <p>在C语言中，设置了⼀些预定义符号，可以直接使用，预定义符号同样在预处理期间处理，直接进行替换操作</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><span class=n>__FILE__</span><span class=w>      </span><span class=c1>//进⾏编译的源文件 </span>
</span><span id=__span-0-2><span class=n>__LINE__</span><span class=w>     </span><span class=c1>//⽂件当前的行号 </span>
</span><span id=__span-0-3><span class=n>__DATE__</span><span class=w>    </span><span class=c1>//⽂件被编译的日期 </span>
</span><span id=__span-0-4><span class=n>__TIME__</span><span class=w>    </span><span class=c1>//⽂件被编译的时间 </span>
</span><span id=__span-0-5><span class=n>__STDC__</span><span class=w>    </span><span class=c1>//如果编译器遵循ANSI C，其值为1，否则未定义（VS2022不遵循）</span>
</span></code></pre></div></td></tr></table></div> <p>代码实例</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-1-2>
</span><span id=__span-1-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-1-4>
</span><span id=__span-1-5><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-1-6><span class=p>{</span>
</span><span id=__span-1-7>
</span><span id=__span-1-8><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;文件位置:%s</span><span class=se>\n</span><span class=s>当前代码所在行数：%d</span><span class=se>\n</span><span class=s>代码编译日期：%s</span><span class=se>\n</span><span class=s>代码编译时间：%s</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>__FILE__</span><span class=p>,</span><span class=w> </span><span class=n>__LINE__</span><span class=p>,</span><span class=w> </span><span class=n>__DATE__</span><span class=p>,</span><span class=w> </span><span class=n>__TIME__</span><span class=p>);</span>
</span><span id=__span-1-9>
</span><span id=__span-1-10><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-1-11><span class=p>}</span>
</span><span id=__span-1-12><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-1-13><span class=nl>文件位置</span><span class=p>:</span><span class=n>E</span><span class=o>:</span><span class=err>\</span><span class=n>C_language</span><span class=err>\</span><span class=n>c_</span><span class=o>-</span><span class=n>language</span><span class=err>\</span><span class=n>test</span><span class=err>\</span><span class=n>test</span><span class=p>.</span><span class=n>c</span>
</span><span id=__span-1-14><span class=n>当前代码所在行数</span><span class=err>：</span><span class=mi>8</span>
</span><span id=__span-1-15><span class=n>代码编译日期</span><span class=err>：</span><span class=n>Jan</span><span class=w> </span><span class=mi>16</span><span class=w> </span><span class=mi>2024</span>
</span><span id=__span-1-16><span class=n>代码编译时间</span><span class=err>：</span><span class=mi>20</span><span class=o>:</span><span class=mi>34</span><span class=o>:</span><span class=mi>25</span>
</span></code></pre></div></td></tr></table></div> <h2 id=define><code>#define</code>定义常量<a class=headerlink href=#define title="Permanent link">&para;</a></h2> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><span class=n>使用方法</span>
</span><span id=__span-2-2><span class=cp>#define name content</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p><code>#define</code>定义中content后面不要带<code>;</code>避免不必要的错误</p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p><code>#define</code>定义的表达式在替换过程中不会进行计算</p> </div> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-3-1><span class=cp>#define PLUS 50 + 5</span>
</span><span id=__span-3-2><span class=c1>//在替换过程中，不会替换为50 + 5之后的值55，而是直接替换为50 + 5</span>
</span></code></pre></div></td></tr></table></div> <p>代码实例</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-4-1><span class=c1>//#define定义常量</span>
</span><span id=__span-4-2><span class=cp>#define MAX 100 </span><span class=c1>//定义一个MAX常量，其值为100</span>
</span><span id=__span-4-3><span class=cp>#define RES register </span><span class=c1>//为register关键字定义一个更简短的名字</span>
</span><span id=__span-4-4><span class=cp>#define cycle_forever for(;;) </span><span class=c1>//为死循环的实现定义一个只管的符号</span>
</span><span id=__span-4-5><span class=cp>#define CASE break;case </span><span class=c1>//在case语句后自动加上break，使用CASE:时，将替换为break;case:</span>
</span><span id=__span-4-6><span class=c1>//如果定义的content过⻓，可以分成多行写，除了最后一⾏外，每行的后⾯都加一个反斜杠(续⾏符)</span>
</span><span id=__span-4-7><span class=cp>#define DEBUG_PRINT printf(&quot;file: %s\tline:%d\t \</span>
</span><span id=__span-4-8><span class=cp>                            date:%s\ttime:%s\n&quot;, \</span>
</span><span id=__span-4-9><span class=cp>                           __FILE__,__LINE__, __DATE__,__TIME__)</span>
</span></code></pre></div></td></tr></table></div> <h2 id=define_1><code>#define</code>定义宏<a class=headerlink href=#define_1 title="Permanent link">&para;</a></h2> <p><code>#define</code>机制包括了⼀个规定，允许把参数替换到文本中，这种实现通常称为宏（macro）或定义宏（define macro）</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-5-1><span class=n>使用方法</span>
</span><span id=__span-5-2><span class=cp>#define name( parament-list ) content</span>
</span><span id=__span-5-3><span class=n>其中的</span><span class=w> </span><span class=n>parament</span><span class=o>-</span><span class=n>list是</span><span class=err>⼀</span><span class=n>个由逗号隔开的符号表</span><span class=err>（</span><span class=n>类似于函数参数列表</span><span class=err>，</span><span class=n>但是没有类型书写和限制</span><span class=err>，</span><span class=n>只有符号</span><span class=err>），</span><span class=n>它们可能出现在content中</span>
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>参数列表的左括号必须与<code>name</code>紧邻，如果两者之间有任何空白存在，参数列表就会被解释为<code>content</code>的一部分</p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>在使用<code>#define</code>定义宏时，需要考虑到宏content部分运算符、parament-list部分的运算符以及使用宏时邻近的运算符的优先级和表达式的副作用</p> </div> <div class="admonition quote"> <p class=admonition-title>Quote</p> <p>表达式副作用：运算符本身不仅仅是计算出两个操作数的运算结果，而是既会计算出结果，也会改变本身操作数的值，例如<code>a + 1</code>，此时只是计算出<code>a</code>变量加上1之后的值，但是<code>a++</code>不但会计算出<code>a + 1</code>的值，还会改变<code>a</code>本身的值</p> </div> <p>代码实例</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-6-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-6-2>
</span><span id=__span-6-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-6-4>
</span><span id=__span-6-5><span class=c1>//#define MAX 100</span>
</span><span id=__span-6-6><span class=cp>#define DOUBLE(x) x * x </span><span class=c1>//定义一个宏实现一个数值的平方，未考虑到宏定义表达式不计算以及parament-list部分的运算符和宏定义content部分的运算符优先级</span>
</span><span id=__span-6-7><span class=cp>#define DOUBLE1(y) (y) * (y) </span><span class=c1>//考虑到宏定义中的表达式不计算以及parament-list部分的运算符和宏定义content部分的运算符优先级</span>
</span><span id=__span-6-8><span class=cp>#define DOUBLE2(z) (z) * (z) + 1 </span><span class=c1>//未考虑到宏定义content部分的优先级与宏使用宏时邻近的运算符的优先级</span>
</span><span id=__span-6-9><span class=cp>#define DOUBLE3(n) ((n) * (n) + 1) </span><span class=c1>//考虑到宏定义content部分的优先级与宏使用宏时邻近的运算符的优先级</span>
</span><span id=__span-6-10>
</span><span id=__span-6-11><span class=cp>#define MAX(a, b) (((a) &gt; (b)) ? (a) : (b)) </span><span class=c1>//定义宏求两个数之间的较大数</span>
</span><span id=__span-6-12>
</span><span id=__span-6-13><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-6-14><span class=p>{</span>
</span><span id=__span-6-15><span class=w>    </span><span class=c1>//运算符优先级</span>
</span><span id=__span-6-16><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>DOUBLE</span><span class=p>(</span><span class=mi>5</span><span class=p>));</span>
</span><span id=__span-6-17><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>DOUBLE</span><span class=p>(</span><span class=mi>5</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>));</span><span class=c1>//因为宏定义中的表达式5 + 1不会进行计算，在代入宏中时，将直接替换，即5 + 1 * 5 + 1，而不是(5 + 1) * (5 + 1)</span>
</span><span id=__span-6-18><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>DOUBLE1</span><span class=p>(</span><span class=mi>5</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>));</span><span class=c1>//正常输出36，即(5 + 1) * (5 + 1)</span>
</span><span id=__span-6-19><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>DOUBLE2</span><span class=p>(</span><span class=mi>5</span><span class=p>));</span><span class=c1>//直接替换时为2 * (5) * (5) + 1，而不是2 * ((5) * (5) + 1)</span>
</span><span id=__span-6-20><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>DOUBLE3</span><span class=p>(</span><span class=mi>5</span><span class=p>));</span><span class=c1>//正常输出52，即2 * ((5) * (5) + 1)</span>
</span><span id=__span-6-21>
</span><span id=__span-6-22><span class=w>    </span><span class=n>putchar</span><span class=p>(</span><span class=sc>&#39;\n&#39;</span><span class=p>);</span>
</span><span id=__span-6-23>
</span><span id=__span-6-24><span class=w>    </span><span class=c1>//表达式副作用</span>
</span><span id=__span-6-25><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>3</span><span class=p>;</span>
</span><span id=__span-6-26><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>5</span><span class=p>;</span>
</span><span id=__span-6-27>
</span><span id=__span-6-28><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>ret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MAX</span><span class=p>(</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>);</span><span class=c1>//直接比较没有副作用</span>
</span><span id=__span-6-29>
</span><span id=__span-6-30><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>ret</span><span class=p>);</span>
</span><span id=__span-6-31><span class=w>    </span><span class=c1>//不改变a和b中的值</span>
</span><span id=__span-6-32><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>a</span><span class=p>);</span>
</span><span id=__span-6-33><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>);</span>
</span><span id=__span-6-34>
</span><span id=__span-6-35><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>ret1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MAX</span><span class=p>(</span><span class=n>a</span><span class=o>++</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=o>++</span><span class=p>);</span><span class=c1>//存在使操作数本身发生改变的副作用</span>
</span><span id=__span-6-36>
</span><span id=__span-6-37><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>ret1</span><span class=p>);</span>
</span><span id=__span-6-38><span class=w>    </span><span class=c1>//a和b中的值发生改变</span>
</span><span id=__span-6-39><span class=w>    </span><span class=c1>//(((a++) &gt; (b++)) ? (a++) : (b++))</span>
</span><span id=__span-6-40><span class=w>    </span><span class=c1>//因为是后置++，故先使用再+1，故有3 &gt; 5，此时再改变a和b中的值，此时a为4， b为6</span>
</span><span id=__span-6-41><span class=w>    </span><span class=c1>//因为三目操作符表达式的值即为满足条件的表达式的值，故即为b的值6，使用完b后进行++。此时b中的值为7，但是a++表达式并未计算，故a还是4</span>
</span><span id=__span-6-42><span class=w>    </span><span class=c1>//故此时a为4，b为7</span>
</span><span id=__span-6-43><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>a</span><span class=p>);</span>
</span><span id=__span-6-44><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>);</span>
</span><span id=__span-6-45>
</span><span id=__span-6-46><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-6-47><span class=p>}</span>
</span><span id=__span-6-48><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-6-49><span class=mi>25</span>
</span><span id=__span-6-50><span class=mi>11</span>
</span><span id=__span-6-51><span class=mi>36</span>
</span><span id=__span-6-52><span class=mi>51</span>
</span><span id=__span-6-53><span class=mi>52</span>
</span><span id=__span-6-54>
</span><span id=__span-6-55><span class=mi>5</span>
</span><span id=__span-6-56><span class=mi>3</span>
</span><span id=__span-6-57><span class=mi>5</span>
</span><span id=__span-6-58><span class=mi>6</span>
</span><span id=__span-6-59><span class=mi>4</span>
</span><span id=__span-6-60><span class=mi>7</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_2>宏命名约定<a class=headerlink href=#_2 title="Permanent link">&para;</a></h3> <ul> <li>把宏名全部大写</li> <li>函数名不要全部大写</li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>存在部分例外，例如宏<code>offsetof</code></p> </div> <h3 id=_3>宏替换规则<a class=headerlink href=#_3 title="Permanent link">&para;</a></h3> <p>在程序中扩展<code>#define</code>定义符号和宏时，需要涉及下面的步骤。</p> <ol> <li>在调用宏时，首先对参数进行检查，看看是否包含任何由<code>#define</code>定义的符号。如果是，它们首先被替换。</li> <li>替换文本随后被插入到程序中原来文本的位置。对于宏，参数名被他们的值所替换。</li> <li>最后，再次对结果文件进行扫描，看看它是否包含任何由<code>#define</code>定义的符号。如果是，就重复上述处理过程</li> </ol> <div class="admonition note"> <p class=admonition-title>Note</p> <p>宏参数和<code>#define</code>定义中可以出现其他<code>#define</code>定义的符号。但是对于宏，不能出现递归</p> <p>当预处理器搜索<code>#define</code>定义的符号的时候，字符串常量的内容并不被搜索</p> </div> <p>代码实例</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-7-2>
</span><span id=__span-7-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-7-4>
</span><span id=__span-7-5><span class=cp>#define MAX 100</span>
</span><span id=__span-7-6>
</span><span id=__span-7-7><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-7-8><span class=p>{</span>
</span><span id=__span-7-9><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;MAX is %d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>MAXN</span><span class=p>);</span><span class=c1>//由于MAXN在字符串常量&quot;MAX is %d\n&quot;中，故不会被替换为100</span>
</span><span id=__span-7-10>
</span><span id=__span-7-11><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-7-12><span class=p>}</span>
</span><span id=__span-7-13><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-7-14><span class=n>MAX</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=mi>100</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_4>宏与函数对比<a class=headerlink href=#_4 title="Permanent link">&para;</a></h3> <p>在C语言中，宏通常被用于执行简单的计算，例如找两个数中的较大数</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-8-1><span class=n>宏实现</span>
</span><span id=__span-8-2><span class=cp>#define MAX(a, b) (((a) &gt; (b)) ? (a) : (b))</span>
</span><span id=__span-8-3>
</span><span id=__span-8-4><span class=n>函数实现</span>
</span><span id=__span-8-5><span class=kt>int</span><span class=w> </span><span class=n>max</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>b</span><span class=p>)</span>
</span><span id=__span-8-6><span class=p>{</span>
</span><span id=__span-8-7><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>((</span><span class=n>a</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>b</span><span class=p>)</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>b</span><span class=p>);</span>
</span><span id=__span-8-8><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <ul> <li> <p>上面两种方式比较中宏的优势：</p> </li> <li> <p>用于调用函数和从函数返回的代码可能比实际执行这个小型计算⼯作所需要的时间更多。所以宏比函数在程序的规模和速度方面更胜一筹</p> </li> <li> <p>宏与类型无关。函数的参数必须声明为特定的类型，所以函数只能在类型合适的表达式上使用。而宏可以适用于整型、长整型、浮点型等可以用 <code>&gt;</code> 来比较的类型。</p> </li> <li> <p>上面两种方式比较中宏的劣势：</p> </li> <li>每次使用宏的时候，宏定义的代码将插入到程序中。除非宏比较短，否则可能大幅度增加程序的长度</li> <li>宏没法调试，因为在预编译过程中已经发生了替换</li> <li>宏由于类型无关，也就不够严谨</li> <li>宏可能会带来运算符优先级的问题，导致程容易出现错误</li> </ul> <p>宏可以做到函数做不到的事情：</p> <ul> <li>宏的参数可以为类型</li> </ul> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-9-1><span class=cp>#define MALLOC(num, type) (type*)malloc(num, sizeof(type))</span>
</span><span id=__span-9-2>
</span><span id=__span-9-3><span class=n>MALLOC</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=p>);</span><span class=c1>//int类型名作为参数</span>
</span><span id=__span-9-4><span class=n>替换后为</span>
</span><span id=__span-9-5><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=n>malloc</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>))</span>
</span><span id=__span-9-6>
</span><span id=__span-9-7><span class=n>代码实例</span>
</span><span id=__span-9-8><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-9-9>
</span><span id=__span-9-10><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-9-11><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;assert.h&gt;</span>
</span><span id=__span-9-12><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdlib.h&gt;</span>
</span><span id=__span-9-13>
</span><span id=__span-9-14><span class=cp>#define MALLOC(num, type) (type*)malloc(num, sizeof(type))</span>
</span><span id=__span-9-15>
</span><span id=__span-9-16><span class=kt>int</span><span class=w> </span><span class=n>main</span><span class=p>()</span>
</span><span id=__span-9-17><span class=p>{</span>
</span><span id=__span-9-18><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>p</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>MALLOC</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=p>);</span>
</span><span id=__span-9-19><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>p</span><span class=p>);</span>
</span><span id=__span-9-20>
</span><span id=__span-9-21><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-9-22><span class=w>    </span><span class=p>{</span>
</span><span id=__span-9-23><span class=w>        </span><span class=n>p</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-9-24><span class=w>        </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d &quot;</span><span class=p>,</span><span class=w> </span><span class=n>p</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span><span id=__span-9-25><span class=w>    </span><span class=p>}</span>
</span><span id=__span-9-26>
</span><span id=__span-9-27><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-9-28><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <table> <thead> <tr> <th>属性</th> <th><code>#define</code>定义宏</th> <th>函数</th> </tr> </thead> <tbody> <tr> <td>代码长度</td> <td>每次使用时，宏代码都会被插入到程序中。除了非常小的宏之外，程序的长度会大幅度增长</td> <td>函数代码只出现一个地方，而每次使用函数时，都调用同一份代码</td> </tr> <tr> <td>执行速度</td> <td>更快</td> <td>存在函数的调用和返回的额外时间和空间开销，所以相对可能慢一些</td> </tr> <tr> <td>操作符优先级</td> <td>宏参数的求值是在所有周围表达式的上下文环境中，除非加上括号改变优先级，否则运算符优先级可能影响最后的计算结果</td> <td>函数参数只在函数调用的时候进行求值，并且进行一次，求值后的结果传递给函数，表达式的结果更容易预测</td> </tr> <tr> <td>带有副作用的参数</td> <td>参数可能被替换到宏中的多个位置，如果宏的参数被多次使用，带有副作用的参数可能导致最后结果出错</td> <td>函数参数只在传参时计算一次，结果更容易控制</td> </tr> <tr> <td>参数类型</td> <td>宏的参数与类型无关，只要对参数的操作是合法的，则可以使用任何参数类型</td> <td>函数的参数与类型有关，如果参数的类型不同，则需要不同的函数，即使函数执行的任务不同</td> </tr> <tr> <td>调试</td> <td>宏无法调试</td> <td>函数可以逐语句进行调试</td> </tr> <tr> <td>递归</td> <td>宏无法递归</td> <td>函数可以递归</td> </tr> </tbody> </table> <h2 id=_5><code>#</code>与<code>##</code>运算符<a class=headerlink href=#_5 title="Permanent link">&para;</a></h2> <h3 id=_6><code>#</code>运算符<a class=headerlink href=#_6 title="Permanent link">&para;</a></h3> <p><code>#</code>运算符将宏的一个参数转换为字符串字面量。它仅允许出现在带参数的宏的替换列表中</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><code>#</code>运算符所执行的操作可以理解为“字符串化”</p> </div> <p>代码实例</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-10-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-10-2>
</span><span id=__span-10-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-10-4>
</span><span id=__span-10-5><span class=cp>#define PRINT(n, type) printf(#n&quot; = &quot;type&quot;\n&quot;, n) </span><span class=c1>//printf语句支持有多个&quot;&quot;的字符串构成一句字符串，例如printf(&quot;hello world&quot;);相当于printf(&quot;hello&quot;&quot;world&quot;);</span>
</span><span id=__span-10-6>
</span><span id=__span-10-7><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-10-8><span class=p>{</span>
</span><span id=__span-10-9><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>10</span><span class=p>;</span>
</span><span id=__span-10-10><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>10</span><span class=p>;</span>
</span><span id=__span-10-11><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>10.5f</span><span class=p>;</span>
</span><span id=__span-10-12>
</span><span id=__span-10-13><span class=w>    </span><span class=c1>//常规做法</span>
</span><span id=__span-10-14><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;a = %d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>a</span><span class=p>);</span>
</span><span id=__span-10-15><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;b = %d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>);</span>
</span><span id=__span-10-16><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;f = %f</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>f</span><span class=p>);</span>
</span><span id=__span-10-17>
</span><span id=__span-10-18><span class=w>    </span><span class=c1>//使用#运算符与#define定义宏</span>
</span><span id=__span-10-19><span class=w>    </span><span class=n>PRINT</span><span class=p>(</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=s>&quot;%d&quot;</span><span class=p>);</span>
</span><span id=__span-10-20><span class=w>    </span><span class=n>PRINT</span><span class=p>(</span><span class=n>b</span><span class=p>,</span><span class=w> </span><span class=s>&quot;%d&quot;</span><span class=p>);</span>
</span><span id=__span-10-21><span class=w>    </span><span class=n>PRINT</span><span class=p>(</span><span class=n>f</span><span class=p>,</span><span class=w> </span><span class=s>&quot;%f&quot;</span><span class=p>);</span>
</span><span id=__span-10-22>
</span><span id=__span-10-23><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-10-24><span class=p>}</span>
</span><span id=__span-10-25><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-10-26><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>10</span>
</span><span id=__span-10-27><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>10</span>
</span><span id=__span-10-28><span class=n>f</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>10.500000</span>
</span><span id=__span-10-29><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>10</span>
</span><span id=__span-10-30><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>10</span>
</span><span id=__span-10-31><span class=n>f</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>10.500000</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_7><code>##</code>运算符<a class=headerlink href=#_7 title="Permanent link">&para;</a></h3> <p><code>##</code> 可以把位于它两边的符号合成一个符号，它允许宏定义从分离的文本片段创建标识符。 <code>##</code> 被称为记号粘合</p> <p>代码实例</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-11-1><span class=c1>//求int类型数据的两个数中较大数</span>
</span><span id=__span-11-2><span class=kt>int</span><span class=w> </span><span class=nf>int_max</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>y</span><span class=p>)</span>
</span><span id=__span-11-3><span class=p>{</span>
</span><span id=__span-11-4><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=n>x</span><span class=o>&gt;</span><span class=n>y</span><span class=o>?</span><span class=n>x</span><span class=o>:</span><span class=n>y</span><span class=p>);</span>
</span><span id=__span-11-5><span class=p>}</span>
</span><span id=__span-11-6>
</span><span id=__span-11-7><span class=c1>//求float类型数据的两个数中较大数</span>
</span><span id=__span-11-8><span class=kt>float</span><span class=w> </span><span class=nf>float_max</span><span class=p>(</span><span class=kt>float</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>y</span><span class=p>)</span>
</span><span id=__span-11-9><span class=p>{</span>
</span><span id=__span-11-10><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=n>x</span><span class=o>&gt;</span><span class=n>y</span><span class=o>?</span><span class=w> </span><span class=n>x</span><span class=o>:</span><span class=n>y</span><span class=p>);</span>
</span><span id=__span-11-11><span class=p>}</span>
</span><span id=__span-11-12>
</span><span id=__span-11-13><span class=c1>//使用##运算符以及#define定义宏</span>
</span><span id=__span-11-14><span class=cp>#define GENERIC_MAX(type)\</span>
</span><span id=__span-11-15><span class=cp>type type##_max1(type x, type y)\</span>
</span><span id=__span-11-16><span class=cp>{\</span>
</span><span id=__span-11-17><span class=cp>    return (x &gt; y ? x : y);\</span>
</span><span id=__span-11-18><span class=cp>}</span>
</span><span id=__span-11-19>
</span><span id=__span-11-20><span class=n>GENERIC_MAX</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span>
</span><span id=__span-11-21><span class=n>GENERIC_MAX</span><span class=p>(</span><span class=kt>float</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> <p>代码实例</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-12-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-12-2>
</span><span id=__span-12-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-12-4>
</span><span id=__span-12-5><span class=c1>//求int类型数据的两个数中较大数</span>
</span><span id=__span-12-6><span class=kt>int</span><span class=w> </span><span class=nf>int_max</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>y</span><span class=p>)</span>
</span><span id=__span-12-7><span class=p>{</span>
</span><span id=__span-12-8><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=n>x</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>y</span><span class=p>);</span>
</span><span id=__span-12-9><span class=p>}</span>
</span><span id=__span-12-10>
</span><span id=__span-12-11><span class=c1>//求float类型数据的两个数中较大数</span>
</span><span id=__span-12-12><span class=kt>float</span><span class=w> </span><span class=nf>float_max</span><span class=p>(</span><span class=kt>float</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=kt>float</span><span class=w> </span><span class=n>y</span><span class=p>)</span>
</span><span id=__span-12-13><span class=p>{</span>
</span><span id=__span-12-14><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=n>x</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>y</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>y</span><span class=p>);</span>
</span><span id=__span-12-15><span class=p>}</span>
</span><span id=__span-12-16>
</span><span id=__span-12-17><span class=cp>#define GENERIC_MAX(type)\</span>
</span><span id=__span-12-18><span class=cp>type type##_max1(type x, type y)\</span>
</span><span id=__span-12-19><span class=cp>{\</span>
</span><span id=__span-12-20><span class=cp>    return (x &gt; y ? x : y);\</span>
</span><span id=__span-12-21><span class=cp>}</span>
</span><span id=__span-12-22>
</span><span id=__span-12-23><span class=n>GENERIC_MAX</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span>
</span><span id=__span-12-24><span class=n>GENERIC_MAX</span><span class=p>(</span><span class=kt>float</span><span class=p>)</span>
</span><span id=__span-12-25>
</span><span id=__span-12-26><span class=kt>int</span><span class=w> </span><span class=n>main</span><span class=p>()</span>
</span><span id=__span-12-27><span class=p>{</span>
</span><span id=__span-12-28>
</span><span id=__span-12-29><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>10</span><span class=p>;</span>
</span><span id=__span-12-30><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>20</span><span class=p>;</span>
</span><span id=__span-12-31><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>f</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>10.5f</span><span class=p>;</span>
</span><span id=__span-12-32><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>f1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>20.5f</span><span class=p>;</span>
</span><span id=__span-12-33>
</span><span id=__span-12-34><span class=w>    </span><span class=c1>//两个类型写两个函数</span>
</span><span id=__span-12-35><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>ret_i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>int_max</span><span class=p>(</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>);</span>
</span><span id=__span-12-36><span class=w>    </span><span class=kt>float</span><span class=w> </span><span class=n>ret_f</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>float_max</span><span class=p>(</span><span class=n>f</span><span class=p>,</span><span class=w> </span><span class=n>f1</span><span class=p>);</span>
</span><span id=__span-12-37><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>ret_i</span><span class=p>);</span>
</span><span id=__span-12-38><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%f</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>ret_f</span><span class=p>);</span>
</span><span id=__span-12-39>
</span><span id=__span-12-40><span class=w>    </span><span class=c1>//##运算符和#define定义宏，只需要写一个函数</span>
</span><span id=__span-12-41><span class=w>    </span><span class=n>ret_i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>int_max1</span><span class=p>(</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>);</span>
</span><span id=__span-12-42><span class=w>    </span><span class=n>ret_f</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>float_max1</span><span class=p>(</span><span class=n>f</span><span class=p>,</span><span class=w> </span><span class=n>f1</span><span class=p>);</span>
</span><span id=__span-12-43><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>ret_i</span><span class=p>);</span>
</span><span id=__span-12-44><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%f</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>ret_f</span><span class=p>);</span>
</span><span id=__span-12-45>
</span><span id=__span-12-46><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-12-47><span class=p>}</span>
</span><span id=__span-12-48><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-12-49><span class=mi>20</span>
</span><span id=__span-12-50><span class=mf>20.500000</span>
</span><span id=__span-12-51><span class=mi>20</span>
</span><span id=__span-12-52><span class=mf>20.500000</span>
</span></code></pre></div></td></tr></table></div> <h2 id=undef><code>#undef</code>预处理指令<a class=headerlink href=#undef title="Permanent link">&para;</a></h2> <p>作用：移除一个宏定义</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-13-1><span class=cp>#undef NAME</span>
</span><span id=__span-13-2><span class=c1>//如果现存的一个名字需要被重新定义，那么它的旧名字首先要被移除。</span>
</span></code></pre></div></td></tr></table></div> <p>代码实例</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-14-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-14-2>
</span><span id=__span-14-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-14-4>
</span><span id=__span-14-5><span class=cp>#define MAXNUM 100</span>
</span><span id=__span-14-6>
</span><span id=__span-14-7><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-14-8><span class=p>{</span>
</span><span id=__span-14-9><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>MAXNUM</span><span class=p>);</span>
</span><span id=__span-14-10><span class=cp>#undef MAXNUM </span><span class=c1>//移除MAXNUM定义</span>
</span><span id=__span-14-11><span class=w>    </span><span class=c1>//printf(&quot;%d\n&quot;, MAXNUM);//未重新定义之前不可以再使用</span>
</span><span id=__span-14-12><span class=cp>#define MAXNUM 100 </span><span class=c1>//重新定义可以使用</span>
</span><span id=__span-14-13><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>MAXNUM</span><span class=p>);</span>
</span><span id=__span-14-14>
</span><span id=__span-14-15><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-14-16><span class=p>}</span>
</span><span id=__span-14-17><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-14-18><span class=mi>100</span>
</span><span id=__span-14-19><span class=mi>100</span>
</span></code></pre></div></td></tr></table></div> <h2 id=linux>命令行定义（Linux）<a class=headerlink href=#linux title="Permanent link">&para;</a></h2> <p>许多C的编译器提供了⼀种能力，允许在命令行中定义符号。用于启动编译过程</p> <p>例如：</p> <p>当我们根据同一个源文件要编译出一个程序的不同版本的时候，这个特性有点用处。（假定某个程序中声明了一个某个长度的数组，如果机器内存有限，我们需要一个很小的数组，但是另外一个机器内存大，我们需要一个数组能够大）</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-15-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-15-2><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-15-3><span class=p>{</span>
</span><span id=__span-15-4><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>array</span><span class=w> </span><span class=p>[</span><span class=n>ARRAY_SIZE</span><span class=p>];</span>
</span><span id=__span-15-5><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-15-6><span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>&lt;</span><span class=w> </span><span class=n>ARRAY_SIZE</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-15-7><span class=w>    </span><span class=p>{</span>
</span><span id=__span-15-8><span class=w>        </span><span class=n>array</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-15-9><span class=w>    </span><span class=p>}</span>
</span><span id=__span-15-10><span class=w>    </span><span class=k>for</span><span class=p>(</span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>&lt;</span><span class=w> </span><span class=n>ARRAY_SIZE</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-15-11><span class=w>    </span><span class=p>{</span>
</span><span id=__span-15-12><span class=w>        </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d &quot;</span><span class=w> </span><span class=p>,</span><span class=n>array</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span><span id=__span-15-13><span class=w>    </span><span class=p>}</span>
</span><span id=__span-15-14><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;</span><span class=se>\n</span><span class=s>&quot;</span><span class=w> </span><span class=p>);</span>
</span><span id=__span-15-15><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-15-16><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>使用<code>gcc</code>命令</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-16-1><span class=n>gcc</span><span class=w> </span><span class=o>-</span><span class=n>D</span><span class=w> </span><span class=n>ARRAY_SIZE</span><span class=o>=</span><span class=mi>10</span><span class=w> </span><span class=n>programe</span><span class=p>.</span><span class=n>c</span>
</span><span id=__span-16-2><span class=c1>//-D ARRAY_SIZE=10为ARRAY_SIZE指定大小</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_8>条件编译<a class=headerlink href=#_8 title="Permanent link">&para;</a></h2> <p>所谓条件编译，即满足指定条件时进行编译，不满足时不编译</p> <p>常见的条件编译指令</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-17-1><span class=mf>1.</span>
</span><span id=__span-17-2><span class=cp>#if  常量表达式</span>
</span><span id=__span-17-3><span class=w>        </span><span class=c1>//语句</span>
</span><span id=__span-17-4><span class=cp>#endif</span>
</span><span id=__span-17-5><span class=c1>//常量表达式由预处理器求值，并且不能使用变量，因为变量在预处理过程中并没有具体值</span>
</span><span id=__span-17-6><span class=n>如</span><span class=err>：</span>
</span><span id=__span-17-7><span class=cp>#define __DEBUG__ 1</span>
</span><span id=__span-17-8><span class=cp>#if __DEBUG__ </span><span class=c1>//如果DEBUG值为非0值，则编译语句，为0则不编译</span>
</span><span id=__span-17-9><span class=w>        </span><span class=c1>//语句</span>
</span><span id=__span-17-10><span class=cp>#endif</span>
</span><span id=__span-17-11>
</span><span id=__span-17-12><span class=cp>#if 1==2 </span><span class=c1>//1==2为假，不编译语句</span>
</span><span id=__span-17-13><span class=w>        </span><span class=c1>//语句</span>
</span><span id=__span-17-14><span class=cp>#endif</span>
</span><span id=__span-17-15>
</span><span id=__span-17-16><span class=mf>2.</span><span class=n>多个分</span><span class=err>⽀</span><span class=n>的条件编译</span><span class=err>（</span><span class=n>只会走其中一个条件</span><span class=err>，</span><span class=n>与if</span><span class=o>-</span><span class=k>else</span><span class=o>-</span><span class=n>if逻辑相同</span><span class=err>）</span>
</span><span id=__span-17-17><span class=cp>#if 常量表达式</span>
</span><span id=__span-17-18><span class=w>        </span><span class=c1>//语句</span>
</span><span id=__span-17-19><span class=cp>#elif 常量表达式</span>
</span><span id=__span-17-20><span class=w>        </span><span class=c1>//语句</span>
</span><span id=__span-17-21><span class=cp>#else</span>
</span><span id=__span-17-22><span class=w>        </span><span class=c1>//语句</span>
</span><span id=__span-17-23><span class=cp>#endif</span>
</span><span id=__span-17-24>
</span><span id=__span-17-25><span class=mf>3.</span><span class=n>判断是否被定义</span><span class=err>（</span><span class=n>只关注是否被定义</span><span class=err>，</span><span class=n>不会关注具体值大小</span><span class=err>）</span>
</span><span id=__span-17-26><span class=cp>#if defined(symbol) </span><span class=c1>//定义了symbol就编译，否则不编译</span>
</span><span id=__span-17-27><span class=w>        </span><span class=c1>//语句</span>
</span><span id=__span-17-28><span class=cp>#endif</span>
</span><span id=__span-17-29>
</span><span id=__span-17-30><span class=cp>#ifdef symbol </span><span class=c1>//定义了symbol就编译，否则不编译</span>
</span><span id=__span-17-31><span class=w>        </span><span class=c1>//语句</span>
</span><span id=__span-17-32><span class=cp>#endif</span>
</span><span id=__span-17-33>
</span><span id=__span-17-34><span class=cp>#if !defined(symbol) </span><span class=c1>//未定义symbol就编译，否则不编译</span>
</span><span id=__span-17-35><span class=w>        </span><span class=c1>//语句</span>
</span><span id=__span-17-36><span class=cp>#endif </span>
</span><span id=__span-17-37>
</span><span id=__span-17-38><span class=cp>#ifndef symbol </span><span class=c1>//未定义symbol就编译，否则不编译</span>
</span><span id=__span-17-39><span class=w>        </span><span class=c1>//语句</span>
</span><span id=__span-17-40><span class=cp>#endif</span>
</span><span id=__span-17-41>
</span><span id=__span-17-42><span class=mf>4.</span><span class=n>嵌套指令</span>
</span><span id=__span-17-43><span class=cp>#if defined(OS_UNIX)</span><span class=c1>//定义了OS_UNIX则编译if内的内容</span>
</span><span id=__span-17-44><span class=w>        </span><span class=cp>#ifdef OPTION1 </span><span class=c1>//定义了OPTION1，则编译</span>
</span><span id=__span-17-45><span class=w>                </span><span class=n>unix_version_option1</span><span class=p>();</span>
</span><span id=__span-17-46><span class=w>        </span><span class=cp>#endif</span>
</span><span id=__span-17-47><span class=w>        </span><span class=cp>#ifdef OPTION2 </span><span class=c1>//定义了OPTION2，则编译</span>
</span><span id=__span-17-48><span class=w>                </span><span class=n>unix_version_option2</span><span class=p>();</span>
</span><span id=__span-17-49><span class=w>        </span><span class=cp>#endif</span>
</span><span id=__span-17-50><span class=cp>#elif defined(OS_MSDOS)</span><span class=c1>//定义了OS_UNIX则编译elif内的内容</span>
</span><span id=__span-17-51><span class=w>        </span><span class=cp>#ifdef OPTION2 </span><span class=c1>//定义了OPTION2，则编译</span>
</span><span id=__span-17-52><span class=w>                </span><span class=n>msdos_version_option2</span><span class=p>();</span>
</span><span id=__span-17-53><span class=w>        </span><span class=cp>#endif</span>
</span><span id=__span-17-54><span class=cp>#endif</span>
</span></code></pre></div></td></tr></table></div> <h2 id=include>头文件包含指令<code>#include</code><a class=headerlink href=#include title="Permanent link">&para;</a></h2> <p>双引号<code>""</code>引用的头文件查找策略：先在源文件所在目录下查找，如果该头文件未找到，编译器就像查找库函数头文件一样在标准位置查找头文件，如果找不到就提示编译错误</p> <p>双箭头<code>&lt;&gt;</code>引用的头文件查找策略：查找头文件直接去标准路径下去查找，如果找不到就提示编译错误</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>对于库文件也可以使用<code>""</code>的形式，但是这样做查找的效率就低些，因为库文件一般都不在源文件所在目录，但是有需要再原文件所在目录进行查找，浪费一定的时间，并且这样也不容易区分是库文件还是本地文件</p> </div> <h3 id=_9>嵌套文件包含<a class=headerlink href=#_9 title="Permanent link">&para;</a></h3> <p>在使用<code>#include</code>指令时，预处理器先删除<code>#include</code>，并用包含文件的内容替换。如果一个头文件被包含10次，那就实际被编译10次，如果重复包含，对编译的压力就比较大</p> <p>可以使用条件编译防止头文件被多次包含</p> <div class="language-C highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-18-1><span class=c1>//头文件中的#ifndef/#define/#endif用于防止头文件被重复引入</span>
</span><span id=__span-18-2><span class=cp>#ifndef __TEST_H__</span><span class=c1>//在第二次之后，查找发现文件中定义了__TEST_H__，则不进行编译后面的语句</span>
</span><span id=__span-18-3><span class=cp>#define __TEST_H__</span><span class=c1>//在原来的头文件中第一次未定义__TEST_H__，则会编译本条语句以及头文件的内容</span>
</span><span id=__span-18-4><span class=c1>//头⽂件的内容 </span>
</span><span id=__span-18-5><span class=cp>#endif   </span><span class=c1>//__TEST_H__</span>
</span><span id=__span-18-6>
</span><span id=__span-18-7><span class=n>或者</span>
</span><span id=__span-18-8><span class=cp>#pragma once</span>
</span></code></pre></div></td></tr></table></div> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年8月10日</span> </span> <span class=md-source-file__fact> <span class=md-icon title=创建日期> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年8月9日</span> </span> </aside> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> 页面有帮助吗？ </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title=页面对我有帮助 data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title=页面没有帮助到我 data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> 谢谢你的反馈！ </div> <div data-md-value=0 hidden> 谢谢你的反馈！联系<a href=https://www.help-doc.top/%E4%BD%9C%E8%80%85/%E4%BD%9C%E8%80%85.html>作者</a>提供更详细的信息 </div> </div> </div> </fieldset> </form> <!-- 阅读进度条 - 直接在HTML中定义 --> <div class=reading-progress></div> <!-- 滚动指示器 - 直接在HTML中定义 --> <div class=scroll-indicator></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Footer --> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2024-2025 柯懒不是柯南 </div> </div> <!-- "一闪一闪亮晶晶"元素 - 插入在copyright和social之间 --> <div class="md-footer-love md-typeset"> 一闪一闪亮晶晶，不及<span class=love-highlight>小亮</span><span class=love-heart>♥</span>照我心。To Li Liang </div> <div class=md-social> <a href=https://github.com/H0308 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.help-doc.top/%E4%BD%9C%E8%80%85/%E4%BD%9C%E8%80%85.html target=_blank rel=noopener title=www.help-doc.top class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.indexes", "navigation.prune", "navigation.tabs", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src=../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../javascripts/katex.min.js></script> <script src=../../javascripts/other.min.js></script> <script src=../../javascripts/copyright.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js></script> <script src=../../assets/javascripts/toggle-sidebar.js async></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>