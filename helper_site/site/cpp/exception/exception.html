<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://www.help-doc.top/cpp/exception/exception.html><link rel=prev href=../new-in-cpp11/new-in-cpp11.html><link rel=next href=../smart-ptr/smart-ptr.html><link rel=icon href=../../images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.12"><title>C++异常 - 柯懒的知识库</title><link rel=stylesheet href=../../assets/stylesheets/main.2afb09e1.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=stylesheet href=../../css/timeline.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-9XWRGNRRSY"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-9XWRGNRRSY",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-9XWRGNRRSY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=stylesheet href=../../stylesheets/colors.min.css><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (max-width: 1199px)"><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (min-width: 1200px)" id=theme2-desktop><link rel=stylesheet href=../../stylesheets/theme1.min.css media="screen and (min-width: 1200px)" id=theme1-desktop><link rel=stylesheet href=../../stylesheets/print.min.css><link rel=stylesheet href=../../stylesheets/font-dongguanti.min.css id=font-dongguanti><link rel=stylesheet href=../../stylesheets/font-oppoti.min.css id=font-oppoti disabled><link rel=stylesheet href=../../stylesheets/font-jiangchengti.min.css id=font-jiangchengti disabled><link rel=stylesheet href=../../stylesheets/font-lxgw.min.css id=font-lxgw disabled><link rel=stylesheet href=../../stylesheets/code-font-dejavu-sans-mono.min.css id=code-font-dejavu-sans-mono><link rel=stylesheet href=../../stylesheets/code-font-zsft-hk.min.css id=code-font-zsft-hk disabled><link rel=stylesheet href=../../stylesheets/code-font-google-sans-code.min.css id=code-font-google-sans-code disabled><link rel=stylesheet href=https://unpkg.com/@waline/client@v3/dist/waline.css><link rel=stylesheet href=../../stylesheets/waline.min.css><script src=../../javascripts/start.min.js></script><script defer src=https://cloud.umami.is/script.js data-website-id=02f9b8b7-93d4-4026-bdd8-221f2fcea2cf></script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#c class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../index.html title=柯懒的知识库 class="md-header__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 柯懒的知识库 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> C++异常 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan aria-label type=radio name=__palette id=__palette_1> </form> <div class=header-avatar> <img src=../../author/作者.assets/20250206-200653.jpg alt=头像> <div class=avatar-dropdown> <p><strong>柯懒不是柯南</strong></p> <a href=../../author/contact/contact.html class=avatar-dropdown-item>联系作者</a> <div class=avatar-dropdown-divider></div> <a href=../../author/about/about.html class=avatar-dropdown-item>关于作者</a> <div class=avatar-dropdown-divider></div> <a href=https://github.com/H0308 class=avatar-dropdown-item>Github仓库</a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=查找> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=toolbar-toggle-btn id=toolbarToggleBtn onclick=toggleToolbar()> <div class=toggle-icon> <svg class=toggle-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=16 height=16> <path d="M346.538667 1024L170.666667 853.333333l341.333333-341.333333-341.333333-341.333333 175.872-170.666667L853.333333 512z" fill=currentColor></path> </svg> </div> </div> <div class=floating-toolbar id=floatingToolbar> <div class="toolbar-item font-switcher"> <div class=toolbar-icon> <svg class=font-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M913.408 1024l-66.56 0q-29.696 0-51.2-5.12t-36.864-15.872-26.112-27.136-19.968-37.888q-15.36-38.912-28.16-70.656t-22.016-55.296q-11.264-26.624-20.48-49.152l-254.976 0q-7.168 23.552-17.408 51.2-8.192 23.552-21.504 56.832t-30.72 72.192q-20.48 46.08-47.104 63.488t-60.416 17.408l-70.656 0q-45.056 0-60.928-19.968t2.56-68.096q18.432-46.08 43.008-108.544t52.224-132.608 57.344-143.872 57.344-144.384q65.536-164.864 137.216-343.04 7.168-17.408 18.432-31.744 10.24-11.264 27.136-21.504t42.496-10.24q26.624 0 43.52 10.752t28.16 24.064q12.288 15.36 19.456 33.792 72.704 180.224 138.24 345.088 27.648 70.656 57.344 143.872t56.832 142.336 51.2 129.536 41.472 104.448q14.336 34.816 4.096 62.464t-43.008 27.648zM616.448 634.88l-97.28-347.136-1.024 0-108.544 347.136 206.848 0z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>内容字体</div> <div class=font-dropdown-toolbar> <div class=font-current-toolbar onclick=toggleFontDropdownToolbar()> <span class=current-font-name-toolbar>东观体</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=font-options-toolbar> <div class=font-option-toolbar data-font=dongguanti onclick="selectFontToolbar('dongguanti')">上图东观体 </div> <div class=font-option-toolbar data-font=oppoti onclick="selectFontToolbar('oppoti')">OPPO Sans </div> <div class=font-option-toolbar data-font=jiangchengti onclick="selectFontToolbar('jiangchengti')"> 江城黑体</div> <div class=font-option-toolbar data-font=lxgw onclick="selectFontToolbar('lxgw')">霞鹜臻楷</div> </div> </div> </div> <div class="toolbar-item code-font-switcher"> <div class=toolbar-icon> <svg t=1753672111433 class="icon code-font-icon" viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg p-id=5148 width=20 height=20> <path d="M941.709938 0H82.290062A82.290062 82.290062 0 0 0 0 82.290062v859.419876A82.290062 82.290062 0 0 0 82.290062 1022.53923h859.419876A82.290062 82.290062 0 0 0 1022.53923 941.709938V82.290062A82.290062 82.290062 0 0 0 941.709938 0zM188.439372 553.631954a40.901569 40.901569 0 0 1-29.215406-70.116975L292.154066 351.558726 159.223966 218.628626a40.901569 40.901569 0 0 1 58.430813-57.94389l160.197813 162.145507a40.901569 40.901569 0 0 1 0 57.943889l-160.197813 160.684736a40.901569 40.901569 0 0 1-29.215407 12.173086z m443.587257 0H405.120304a40.901569 40.901569 0 0 1 0-82.290061H633.000476a40.901569 40.901569 0 0 1 0 82.290061z" fill=currentColor p-id=5149></path> </svg> </div> <div class=toolbar-label>代码字体</div> <div class=code-font-dropdown-toolbar> <div class=code-font-current-toolbar onclick=toggleCodeFontDropdownToolbar()> <span class=current-code-font-name-toolbar>DejaVu Sans Mono</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=code-font-options-toolbar> <div class=code-font-option-toolbar data-code-font=dejavu onclick="selectCodeFontToolbar('dejavu')"> DejaVu Sans Mono</div> <div class=code-font-option-toolbar data-code-font=google-sans-code onclick="selectCodeFontToolbar('google-sans-code')"> Google Sans Code</div> <div class=code-font-option-toolbar data-code-font=zsft onclick="selectCodeFontToolbar('zsft')"> JetBrains Mono</div> </div> </div> </div> <div class="toolbar-item theme-switcher" onclick=switchTheme()> <div class=toolbar-icon> <svg class=theme-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M876.572788 522.301623c-1.886977 12.375865-9.657964 30.331819-35.880185 45.48903-56.489572 32.697703-150.21828 83.990926-174.010149 96.958262-13.143345 24.431435-66.067718 122.221646-98.141204 178.503487-16.117073 28.124548-36.055171 34.041304-50.030463 34.041304-0.031722 0-0.031722 0-0.031722 0-14.613836 0-29.1806-6.460132-43.234687-19.218714-47.183626-42.643216-125.994576-117.105115-146.013515-136.083351-27.757181-4.732791-138.338718-23.743774-200.584388-35.752272-17.924231-3.533476-32.649608-14.07046-40.372499-29.084409-5.78782-11.256368-10.281157-30.05962 1.471514-55.658647 26.989701-59.047838 74.126254-157.557432 85.957721-182.196599-3.437286-27.117614-16.996093-135.060045-23.760147-198.905142-1.886977-17.460674 3.901867-35.096333 15.829524-48.351218 12.791327-14.278191 30.667463-21.48943 49.854455-19.426445 63.669088 6.332219 173.259042 19.426445 200.584388 22.705118 24.335245-11.879562 121.085776-58.936297 180.133613-86.34146 9.91379-4.573155 19.85828-6.92369 29.596062-6.92369 28.748764 0 52.172243 20.642133 58.328453 51.421136 12.599969 62.997799 30.93864 166.70272 35.639708 193.484689 18.851347 19.682271 91.953272 96.031147 135.060045 143.07151C872.72004 487.125473 879.307062 504.71406 876.572788 522.301623L876.572788 522.301623zM825.375755 499.085876C776.017604 445.314205 687.245791 352.977193 686.365748 352.017332c-2.942005-3.069919-4.956895-6.971785-5.676279-11.208273-0.207731-1.215688-22.193465-127.001509-36.551474-198.936865-0.799202-3.917216-4.285606-16.836457-16.196891-16.836457-3.453658 0-7.30743 1.006933-11.464099 2.942005-67.282383 31.179117-183.955662 88.180342-185.170327 88.771813-3.693112 1.790786-7.850805 2.558265-11.975752 2.01489-1.295506-0.224104-133.63765-16.165168-205.988468-23.424502-0.079818 0-0.207731 0-0.287549 0-7.30743 0-11.128455 2.89391-13.319353 5.40408-3.677762 4.124947-5.644557 9.91379-5.068436 15.110139 7.674796 72.623018 24.255427 202.934922 24.463158 204.325595 0.511653 4.109598-0.159636 8.266267-1.966795 11.960403-0.591471 1.215688-57.657164 120.04712-88.339977 187.201589-3.565199 7.754614-4.41352 14.214746-2.350534 18.131963 1.935072 3.725858 6.588045 5.820566 10.360975 6.53995 70.719668 13.718443 204.644867 36.519752 206.036563 36.727483 4.189416 0.671289 8.058536 2.686179 11.112082 5.580089 1.006933 0.87902 96.414887 91.281983 150.090367 139.889027 8.314363 7.563256 13.143345 8.106632 14.437827 8.106632 3.485381 0 8.314363-4.621251 12.727882-12.391215 36.343743-63.828724 100.011808-181.988868 100.636025-183.155437 1.983167-3.64604 5.004991-6.667863 8.650007-8.650007 1.134847-0.671289 114.418936-62.373583 178.6314-99.516528 8.698103-5.036713 14.278191-10.568706 14.94948-14.854313C834.681702 511.845481 831.49922 505.800811 825.375755 499.085876L825.375755 499.085876zM935.333076 935.670256c-4.157693 4.157693-9.689686 6.299473-15.141862 6.299473-5.548366 0-11.048637-2.142803-15.238053-6.299473l-171.915441-171.915441c-8.362458-8.394181-8.362458-21.98471 0-30.426987 8.394181-8.394181 21.98471-8.394181 30.379914 0l171.915441 171.915441C943.727257 913.684522 943.727257 927.275052 935.333076 935.670256L935.333076 935.670256z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>主题切换</div> </div> <div class="toolbar-item back-to-top" onclick=scrollToTop()> <div class=toolbar-icon> <svg class=back-to-top-icon viewbox="0 0 1024 1024" xmlns=http://www.w3.org/2000/svg> <path d="M882.688 624.128l-336.896-583.68c-15.872-27.136-54.784-27.136-70.656 0L138.24 624.128c-15.872 27.136 4.096 61.44 35.328 61.44H317.44c22.528 0 40.96 18.432 40.96 40.96v239.616c0 22.528 18.432 40.96 40.96 40.96h223.232c22.528 0 40.96-18.432 40.96-40.96v-239.616c0-22.528 18.432-40.96 40.96-40.96h143.872c30.208 0 50.176-34.304 34.304-61.44z"> </path> </svg> </div> <div class=toolbar-label>返回顶部</div> </div> </div> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.html class=md-tabs__link> 主页 </a> </li> <li class=md-tabs__item> <a href=../../timeline/timeline.html class=md-tabs__link> 网站时间线 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../languages/index.html class=md-tabs__link> 编程语言 </a> </li> <li class=md-tabs__item> <a href=../../data-structure-algo/index.html class=md-tabs__link> 数据结构与算法 </a> </li> <li class=md-tabs__item> <a href=../../Linux/index.html class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../front-end/index.html class=md-tabs__link> 前端 </a> </li> <li class=md-tabs__item> <a href=../../MySQL/index.html class=md-tabs__link> MySQL </a> </li> <li class=md-tabs__item> <a href=../../JavaEE/index.html class=md-tabs__link> JavaEE应用开发 </a> </li> <li class=md-tabs__item> <a href=../../software-test/index.html class=md-tabs__link> 软件测试 </a> </li> <li class=md-tabs__item> <a href=../../other/index.html class=md-tabs__link> 扩展知识 </a> </li> <li class=md-tabs__item> <a href=../../tooltips/index.html class=md-tabs__link> 工具帮助 </a> </li> <li class=md-tabs__item> <a href=../../test-encrypt/test-encrypt.html class=md-tabs__link> 测试加密功能 </a> </li> <li class=md-tabs__item> <a href=../../projects/index.html class=md-tabs__link> 项目 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title=柯懒的知识库 class="md-nav__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> 柯懒的知识库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.html class=md-nav__link> <span class=md-ellipsis> 主页 </span> </a> </li> <li class=md-nav__item> <a href=../../timeline/timeline.html class=md-nav__link> <span class=md-ellipsis> 网站时间线 </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <div class="md-nav__link md-nav__container"> <a href=../../languages/index.html class="md-nav__link "> <span class=md-ellipsis> 编程语言 </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> 编程语言 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../c-lang/index.html class=md-nav__link> <span class=md-ellipsis> C语言 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> C++ </span> </a> <label class="md-nav__link " for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> C++ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../c-to-cpp/c-to-cpp.html class=md-nav__link> <span class=md-ellipsis> C语言过渡C++基础知识 </span> </a> </li> <li class=md-nav__item> <a href=../class-obj/class-obj.html class=md-nav__link> <span class=md-ellipsis> C++类和对象 </span> </a> </li> <li class=md-nav__item> <a href=../member-func/member-func.html class=md-nav__link> <span class=md-ellipsis> C++默认成员函数 </span> </a> </li> <li class=md-nav__item> <a href=../class-obj-other/class-obj-other.html class=md-nav__link> <span class=md-ellipsis> C++类和对象相关内容 </span> </a> </li> <li class=md-nav__item> <a href=../memory/memory.html class=md-nav__link> <span class=md-ellipsis> C++内存管理 </span> </a> </li> <li class=md-nav__item> <a href=../template/template.html class=md-nav__link> <span class=md-ellipsis> C++模版 </span> </a> </li> <li class=md-nav__item> <a href=../stl-intro-string/stl-intro-string.html class=md-nav__link> <span class=md-ellipsis> C++STL简介与string类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-string/sim-string.html class=md-nav__link> <span class=md-ellipsis> string类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../vector/vector.html class=md-nav__link> <span class=md-ellipsis> vector类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-vector/sim-vector.html class=md-nav__link> <span class=md-ellipsis> vector类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../list/list.html class=md-nav__link> <span class=md-ellipsis> list类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-list/sim-list.html class=md-nav__link> <span class=md-ellipsis> list类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../stack/stack.html class=md-nav__link> <span class=md-ellipsis> stack类 </span> </a> </li> <li class=md-nav__item> <a href=../queue-priority-queue/queue-priority-queue.html class=md-nav__link> <span class=md-ellipsis> queue与priority_queue类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-stack-queue/sim-stack-queue.html class=md-nav__link> <span class=md-ellipsis> stack和queue模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../sim-priority-queue/sim-priority-queue.html class=md-nav__link> <span class=md-ellipsis> priority_queue模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../reverse-iterator/reverse-iterator.html class=md-nav__link> <span class=md-ellipsis> 反向迭代器设计 </span> </a> </li> <li class=md-nav__item> <a href=../extend/extend.html class=md-nav__link> <span class=md-ellipsis> C++继承 </span> </a> </li> <li class=md-nav__item> <a href=../polymorphic/polymorphic.html class=md-nav__link> <span class=md-ellipsis> C++多态 </span> </a> </li> <li class=md-nav__item> <a href=../set/set.html class=md-nav__link> <span class=md-ellipsis> set类 </span> </a> </li> <li class=md-nav__item> <a href=../map/map.html class=md-nav__link> <span class=md-ellipsis> map类 </span> </a> </li> <li class=md-nav__item> <a href=../sim-map-set/sim-map-set.html class=md-nav__link> <span class=md-ellipsis> map和set类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../sim-unordered-map-set/sim-unordered-map-set.html class=md-nav__link> <span class=md-ellipsis> unordered_map和unordered_set类模拟实现 </span> </a> </li> <li class=md-nav__item> <a href=../bitset/bitset.html class=md-nav__link> <span class=md-ellipsis> bitset类 </span> </a> </li> <li class=md-nav__item> <a href=../initializer-list/initializer-list.html class=md-nav__link> <span class=md-ellipsis> initializer_list类 </span> </a> </li> <li class=md-nav__item> <a href=../new-in-cpp11/new-in-cpp11.html class=md-nav__link> <span class=md-ellipsis> C++ 11相关新特性 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> C++异常 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=exception.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> C++异常 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=本节目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 本节目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 基础使用 </span> </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 异常的匹配机制 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 异常的多次抛出 </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 异常与内存泄漏问题 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 自定义异常体系 </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 异常书写规范 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 异常的优缺点 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../smart-ptr/smart-ptr.html class=md-nav__link> <span class=md-ellipsis> C++智能指针 </span> </a> </li> <li class=md-nav__item> <a href=../special-class-design/special-class-design.html class=md-nav__link> <span class=md-ellipsis> 特殊类设计 </span> </a> </li> <li class=md-nav__item> <a href=../type-cast/type-cast.html class=md-nav__link> <span class=md-ellipsis> C++中的类型转换 </span> </a> </li> <li class=md-nav__item> <a href=../cppio/cppio.html class=md-nav__link> <span class=md-ellipsis> C++ IO流 </span> </a> </li> <li class=md-nav__item> <a href=../new-in-cpp17/new-in-cpp17.html class=md-nav__link> <span class=md-ellipsis> C++ 17相关新特性 </span> </a> </li> <li class=md-nav__item> <a href=../time-rand/time-rand.html class=md-nav__link> <span class=md-ellipsis> C++时间和随机数相关库 </span> </a> </li> <li class=md-nav__item> <a href=../multi-thread/multi-thread.html class=md-nav__link> <span class=md-ellipsis> C++并发支持库 </span> </a> </li> <li class=md-nav__item> <a href=../format/format.html class=md-nav__link> <span class=md-ellipsis> C++中的格式化字符串 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Java/index.html class=md-nav__link> <span class=md-ellipsis> Java </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../python/index.html class=md-nav__link> <span class=md-ellipsis> Python </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../data-structure-algo/index.html class=md-nav__link> <span class=md-ellipsis> 数据结构与算法 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Linux/index.html class=md-nav__link> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../front-end/index.html class=md-nav__link> <span class=md-ellipsis> 前端 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../MySQL/index.html class=md-nav__link> <span class=md-ellipsis> MySQL </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../JavaEE/index.html class=md-nav__link> <span class=md-ellipsis> JavaEE应用开发 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../software-test/index.html class=md-nav__link> <span class=md-ellipsis> 软件测试 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../other/index.html class=md-nav__link> <span class=md-ellipsis> 扩展知识 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tooltips/index.html class=md-nav__link> <span class=md-ellipsis> 工具帮助 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../test-encrypt/test-encrypt.html class=md-nav__link> <span class=md-ellipsis> 测试加密功能 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../projects/index.html class=md-nav__link> <span class=md-ellipsis> 项目 </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=本节目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 本节目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 基础使用 </span> </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 异常的匹配机制 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 异常的多次抛出 </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 异常与内存泄漏问题 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 自定义异常体系 </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 异常书写规范 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 异常的优缺点 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=c>C++异常<a class=headerlink href=#c title="Permanent link">&para;</a></h1> <div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;"> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span> 约 2487 个字 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"/></svg></span> 389 行代码 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"/></svg></span> 1 张图片 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span> 预计阅读时间 13 分钟</p> </div> <h2 id=_1>基础使用<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <p>在C语言中，处理错误一共有两种方式：</p> <ol> <li>终止程序，如<code>assert</code>，缺陷：用户难以接受。例如发生内存错误，除0错误时就会终止程序</li> <li>返回错误码，缺陷：需要程序员自己去查找对应的错误。例如系统的很多库的接口函数都是通过把错误码放到<code>errno</code>中，表示错误，如果想查看错误信息而不是错误码，就需要使用<code>perror</code>函数，大部分错误的处理方式</li> </ol> <p>但是如果使用类似于终止程序的方式处理，对程序的运行影响是比较大的，所以为了能够处理错误并且不影响程序其他部分的正常运行，C++引入了异常处理</p> <p>C++的异常处理是当一个函数发现自己无法处理的错误时就可以抛出异常，接着由最近的捕捉异常语句进行捕捉处理</p> <p>在C++异常中需要使用到三个关键字：</p> <ol> <li><code>throw</code>：抛出当前函数出现的异常</li> <li><code>try</code>：包裹可能出现异常的部分，该部分代码一般被称为保护代码</li> <li><code>catch</code>：根据异常的类型进行捕捉</li> </ol> <p>基本结构如下：</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><span class=kt>void</span><span class=w> </span><span class=nf>func</span><span class=p>()</span>
</span><span id=__span-0-2><span class=p>{</span>
</span><span id=__span-0-3><span class=w>    </span><span class=c1>// ...</span>
</span><span id=__span-0-4><span class=w>    </span><span class=k>throw</span><span class=w> </span><span class=n>exception</span><span class=p>;</span><span class=c1>// 抛出exception异常</span>
</span><span id=__span-0-5><span class=p>}</span>
</span><span id=__span-0-6>
</span><span id=__span-0-7><span class=k>try</span>
</span><span id=__span-0-8><span class=p>{</span>
</span><span id=__span-0-9><span class=w>    </span><span class=n>func</span><span class=p>();</span><span class=c1>// 包裹可能出现异常的部分</span>
</span><span id=__span-0-10><span class=p>}</span>
</span><span id=__span-0-11><span class=k>catch</span><span class=p>(</span><span class=n>exception</span><span class=p>)</span><span class=w> </span><span class=c1>// 根据异常类型捕获异常</span>
</span><span id=__span-0-12><span class=p>{</span>
</span><span id=__span-0-13><span class=w>    </span><span class=c1>// 处理异常语句</span>
</span><span id=__span-0-14><span class=p>}</span>
</span><span id=__span-0-15><span class=c1>// ... 可以有多个catch进行捕捉</span>
</span></code></pre></div></td></tr></table></div> <p>使用异常需要注意以下内容：</p> <ol> <li>一个<code>try</code>语句可以有多个<code>catch</code>跟随</li> <li>一个<code>catch</code>只能捕捉一种类型的异常，并且异常类型的匹配是基本完全匹配（除了父类捕捉子类异常）</li> <li>当<code>try</code>中的部分出现异常，执行完<code>catch</code>语句后会继续执行<code>try</code>...<code>catch</code>语句之后的内容</li> <li><code>throw</code>可以抛出一条语句或者一个对象，当函数执行了<code>throw</code>语句后，就会结束当前函数</li> </ol> <p>基本使用如下：</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><span class=kt>double</span><span class=w> </span><span class=nf>divide</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>b</span><span class=p>)</span>
</span><span id=__span-1-2><span class=p>{</span>
</span><span id=__span-1-3><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-1-4><span class=w>    </span><span class=p>{</span>
</span><span id=__span-1-5><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=s>&quot;Division by zero condition!&quot;</span><span class=p>;</span>
</span><span id=__span-1-6><span class=w>    </span><span class=p>}</span>
</span><span id=__span-1-7><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=kt>double</span><span class=p>)</span><span class=n>a</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>b</span><span class=p>;</span>
</span><span id=__span-1-8><span class=p>}</span>
</span><span id=__span-1-9>
</span><span id=__span-1-10><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-1-11><span class=p>{</span>
</span><span id=__span-1-12><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>num1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-1-13><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>num2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-1-14><span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>num1</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>num2</span><span class=p>;</span>
</span><span id=__span-1-15>
</span><span id=__span-1-16><span class=w>    </span><span class=k>try</span>
</span><span id=__span-1-17><span class=w>    </span><span class=p>{</span>
</span><span id=__span-1-18><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>divide</span><span class=p>(</span><span class=n>num1</span><span class=p>,</span><span class=w> </span><span class=n>num2</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-1-19><span class=w>    </span><span class=p>}</span>
</span><span id=__span-1-20><span class=w>    </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=o>*</span><span class=w> </span><span class=n>errmsg</span><span class=p>)</span>
</span><span id=__span-1-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-1-22><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>errmsg</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-1-23><span class=w>    </span><span class=p>}</span>
</span><span id=__span-1-24><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-1-25><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_2>异常的匹配机制<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <p>C++中匹配异常会以优先匹配离<code>throw</code>最近一层的<code>catch</code>语句（遵循逐层向上抛出捕获的原则），例如下面代码中：</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><span class=kt>double</span><span class=w> </span><span class=nf>divide</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>b</span><span class=p>)</span>
</span><span id=__span-2-2><span class=p>{</span>
</span><span id=__span-2-3><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-2-4><span class=w>    </span><span class=p>{</span>
</span><span id=__span-2-5><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=s>&quot;Division by zero condition!&quot;</span><span class=p>;</span>
</span><span id=__span-2-6><span class=w>    </span><span class=p>}</span>
</span><span id=__span-2-7><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=kt>double</span><span class=p>)</span><span class=n>a</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>b</span><span class=p>;</span>
</span><span id=__span-2-8><span class=p>}</span>
</span><span id=__span-2-9>
</span><span id=__span-2-10><span class=kt>void</span><span class=w> </span><span class=nf>func</span><span class=p>()</span>
</span><span id=__span-2-11><span class=p>{</span>
</span><span id=__span-2-12><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>num1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-2-13><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>num2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-2-14><span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>num1</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>num2</span><span class=p>;</span>
</span><span id=__span-2-15><span class=w>    </span><span class=k>try</span>
</span><span id=__span-2-16><span class=w>    </span><span class=p>{</span>
</span><span id=__span-2-17><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>divide</span><span class=p>(</span><span class=n>num1</span><span class=p>,</span><span class=w> </span><span class=n>num2</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-2-18><span class=w>    </span><span class=p>}</span>
</span><span id=__span-2-19><span class=w>    </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=o>*</span><span class=w> </span><span class=n>errmsg</span><span class=p>)</span>
</span><span id=__span-2-20><span class=w>    </span><span class=p>{</span>
</span><span id=__span-2-21><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;1 &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>errmsg</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-2-22><span class=w>    </span><span class=p>}</span>
</span><span id=__span-2-23><span class=p>}</span>
</span><span id=__span-2-24>
</span><span id=__span-2-25><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-2-26><span class=p>{</span>
</span><span id=__span-2-27><span class=w>    </span><span class=k>try</span>
</span><span id=__span-2-28><span class=w>    </span><span class=p>{</span>
</span><span id=__span-2-29><span class=w>        </span><span class=n>func</span><span class=p>();</span>
</span><span id=__span-2-30><span class=w>    </span><span class=p>}</span>
</span><span id=__span-2-31><span class=w>    </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=o>*</span><span class=w> </span><span class=n>errmsg</span><span class=p>)</span>
</span><span id=__span-2-32><span class=w>    </span><span class=p>{</span>
</span><span id=__span-2-33><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;2 &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>errmsg</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-2-34><span class=w>    </span><span class=p>}</span>
</span><span id=__span-2-35><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-2-36><span class=p>}</span>
</span><span id=__span-2-37>
</span><span id=__span-2-38><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-2-39><span class=mi>1</span><span class=w> </span><span class=n>Division</span><span class=w> </span><span class=n>by</span><span class=w> </span><span class=n>zero</span><span class=w> </span><span class=n>condition</span><span class=o>!</span>
</span></code></pre></div></td></tr></table></div> <p>在<code>main</code>函数和<code>func</code>函数中均有对<code>divide</code>函数的异常捕捉，并且<code>catch</code>的参数类型均完全匹配<code>divide</code>函数中<code>throw</code>的类型，在这个过程中，当<code>b</code>为0时，<code>divide</code>函数会抛出异常，此时<code>divide</code>函数执行结束，回到<code>func</code>函数的栈帧空间，因为<code>func</code>函数中存在参数类型与异常类型匹配的<code>catch</code>语句，此时<code>divide</code>抛出的异常会被<code>func</code>函数中的<code>catch</code>捕捉，执行<code>func</code>函数<code>catch</code>中的语句，因为<code>func</code>后面没有内容，所以当<code>func</code>函数执行完成后回到<code>main</code>函数的栈帧空间，因为<code>divide</code>函数的异常已经被捕获，所以<code>main</code>函数不会再执行一次<code>catch</code>，尽管存在参数类型与异常类型匹配的<code>catch</code>，过程如图以下：</p> <p><a class=glightbox href="26. C++异常.assets\image.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="26. C++异常.assets\image.png"></a></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>如果异常即将抛出的是一个对象，那么<code>catch</code>接收到的对象是抛出的对象的拷贝，这个对象会在<code>catch</code>语句捕捉到后销毁</p> </div> <p>如果抛出的异常没有被任何<code>catch</code>语句捕捉到，此时程序会报错，提示存在未捕捉的异常，为了防止出现这种现象发生，可以在<code>main</code>函数中的<code>try</code>...<code>catch</code>语句的最后一句<code>catch</code>后加入<code>catch(...)</code>用于捕获到无法被确定类型的<code>catch</code>语句块捕获到的异常，这个<code>catch(...)</code>语句可以捕获任意类型的异常</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-3-1><span class=kt>double</span><span class=w> </span><span class=nf>divide</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>b</span><span class=p>)</span>
</span><span id=__span-3-2><span class=p>{</span>
</span><span id=__span-3-3><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-3-4><span class=w>    </span><span class=p>{</span>
</span><span id=__span-3-5><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=s>&quot;Division by zero condition!&quot;</span><span class=p>;</span>
</span><span id=__span-3-6><span class=w>    </span><span class=p>}</span>
</span><span id=__span-3-7><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=kt>double</span><span class=p>)</span><span class=n>a</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>b</span><span class=p>;</span>
</span><span id=__span-3-8><span class=p>}</span>
</span><span id=__span-3-9>
</span><span id=__span-3-10><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-3-11><span class=p>{</span>
</span><span id=__span-3-12><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>num1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-3-13><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>num2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-3-14><span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>num1</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>num2</span><span class=p>;</span>
</span><span id=__span-3-15>
</span><span id=__span-3-16><span class=w>    </span><span class=k>try</span>
</span><span id=__span-3-17><span class=w>    </span><span class=p>{</span>
</span><span id=__span-3-18><span class=w>        </span><span class=n>divide</span><span class=p>(</span><span class=n>num1</span><span class=p>,</span><span class=w> </span><span class=n>num2</span><span class=p>);</span>
</span><span id=__span-3-19><span class=w>    </span><span class=p>}</span>
</span><span id=__span-3-20><span class=w>    </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=w> </span><span class=n>errmsg</span><span class=p>)</span>
</span><span id=__span-3-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-3-22><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;2 &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>errmsg</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-3-23><span class=w>    </span><span class=p>}</span>
</span><span id=__span-3-24><span class=w>    </span><span class=k>catch</span><span class=w> </span><span class=p>(...)</span><span class=w> </span><span class=c1>// catch all exceptions</span>
</span><span id=__span-3-25><span class=w>    </span><span class=p>{</span>
</span><span id=__span-3-26><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;3 Unknown exception&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-3-27><span class=w>    </span><span class=p>}</span>
</span><span id=__span-3-28><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-3-29><span class=p>}</span>
</span><span id=__span-3-30>
</span><span id=__span-3-31><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-3-32><span class=mi>3</span><span class=w> </span><span class=n>Unknown</span><span class=w> </span><span class=n>exception</span>
</span></code></pre></div></td></tr></table></div> <p>因为<code>divide</code>函数抛出的异常是<code>const char*</code>类型的常量字符串，在<code>main</code>函数中只有一个string类型的<code>catch</code>语句（不会隐式类型转换），所以并不会匹配对应的<code>catch</code>语句块，接下里匹配<code>catch(...)</code>，因为该<code>catch</code>语句块可以接收任何类型的异常，所以会被<code>catch(...)</code>捕捉</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>需要注意，<code>catch(...)</code>语句一定要写在<code>try</code>...<code>catch</code>语句的最后，一般在<code>main</code>函数写<code>catch(...)</code>，如果<code>catch(...)</code>语句写在最前面，则不论后面的<code>catch</code>语句是否会捕捉，编译器都会报错，因为此时不论什么异常都会优先被<code>catch(...)</code>捕捉，此时后面的异常不论是否类型匹配都会失效</p> </div> <h2 id=_3>异常的多次抛出<a class=headerlink href=#_3 title="Permanent link">&para;</a></h2> <p>有时执行的函数抛出的异常在某个函数内没有被处理，此时需要再一次向外抛出，这个过程被称为异常的多次抛出，例如下面的代码：</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-4-1><span class=kt>double</span><span class=w> </span><span class=nf>divide</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>b</span><span class=p>)</span>
</span><span id=__span-4-2><span class=p>{</span>
</span><span id=__span-4-3><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-4-4><span class=w>    </span><span class=p>{</span>
</span><span id=__span-4-5><span class=w>        </span><span class=n>string</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Division by zero condition!&quot;</span><span class=p>;</span>
</span><span id=__span-4-6><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=n>s</span><span class=p>;</span>
</span><span id=__span-4-7><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-8><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=kt>double</span><span class=p>)</span><span class=n>a</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>b</span><span class=p>;</span>
</span><span id=__span-4-9><span class=p>}</span>
</span><span id=__span-4-10>
</span><span id=__span-4-11><span class=kt>void</span><span class=w> </span><span class=nf>func</span><span class=p>()</span>
</span><span id=__span-4-12><span class=p>{</span>
</span><span id=__span-4-13><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>num1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-4-14><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>num2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-4-15><span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>num1</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>num2</span><span class=p>;</span>
</span><span id=__span-4-16><span class=w>    </span><span class=k>try</span>
</span><span id=__span-4-17><span class=w>    </span><span class=p>{</span>
</span><span id=__span-4-18><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>divide</span><span class=p>(</span><span class=n>num1</span><span class=p>,</span><span class=w> </span><span class=n>num2</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-4-19><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-20><span class=w>    </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=kt>char</span><span class=o>*</span><span class=w> </span><span class=n>errmsg</span><span class=p>)</span>
</span><span id=__span-4-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-4-22><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;1 &quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>errmsg</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-4-23><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-24>
</span><span id=__span-4-25><span class=w>    </span><span class=k>throw</span><span class=p>;</span><span class=w> </span><span class=c1>// 再一次抛出未处理的异常</span>
</span><span id=__span-4-26><span class=p>}</span>
</span><span id=__span-4-27>
</span><span id=__span-4-28><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-4-29><span class=p>{</span>
</span><span id=__span-4-30><span class=w>    </span><span class=k>try</span>
</span><span id=__span-4-31><span class=w>    </span><span class=p>{</span>
</span><span id=__span-4-32><span class=w>        </span><span class=n>func</span><span class=p>();</span>
</span><span id=__span-4-33><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-34><span class=w>    </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=w> </span><span class=n>e</span><span class=p>)</span>
</span><span id=__span-4-35><span class=w>    </span><span class=p>{</span>
</span><span id=__span-4-36><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;catch string&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-4-37><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-38><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-4-39><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>上面的代码中，当<code>divide</code>抛出异常时，<code>func</code>函数中没有匹配的<code>catch</code>语句块，此时<code>divide</code>函数抛出的异常还没有被捕获，所以可以单独写<code>throw</code>语句代表再次将<code>divide</code>函数的异常抛出，回到<code>main</code>函数时被<code>catch</code>语句块捕捉</p> <h2 id=_4>异常与内存泄漏问题<a class=headerlink href=#_4 title="Permanent link">&para;</a></h2> <p>因为有异常的存在，导致函数的语句执行具有跳转的效果，当出现有资源释放的问题，需要在异常抛出之前或者函数栈帧销毁之前释放，例如下面的代码：</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-5-1><span class=kt>double</span><span class=w> </span><span class=nf>divide</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>b</span><span class=p>)</span>
</span><span id=__span-5-2><span class=p>{</span>
</span><span id=__span-5-3><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-5-4><span class=w>    </span><span class=p>{</span>
</span><span id=__span-5-5><span class=w>        </span><span class=n>string</span><span class=w> </span><span class=n>s</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;Division by zero condition!&quot;</span><span class=p>;</span>
</span><span id=__span-5-6><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=n>s</span><span class=p>;</span>
</span><span id=__span-5-7><span class=w>    </span><span class=p>}</span>
</span><span id=__span-5-8><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=kt>double</span><span class=p>)</span><span class=n>a</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=n>b</span><span class=p>;</span>
</span><span id=__span-5-9><span class=p>}</span>
</span><span id=__span-5-10>
</span><span id=__span-5-11><span class=kt>void</span><span class=w> </span><span class=nf>func</span><span class=p>()</span>
</span><span id=__span-5-12><span class=p>{</span>
</span><span id=__span-5-13><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>num1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-5-14><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>num2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-5-15><span class=w>    </span><span class=n>cin</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>num1</span><span class=w> </span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>num2</span><span class=p>;</span>
</span><span id=__span-5-16>
</span><span id=__span-5-17><span class=w>    </span><span class=c1>// 在堆上开辟空间</span>
</span><span id=__span-5-18><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>arr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=kt>int</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
</span><span id=__span-5-19>
</span><span id=__span-5-20><span class=w>    </span><span class=k>try</span>
</span><span id=__span-5-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-5-22><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>divide</span><span class=p>(</span><span class=n>num1</span><span class=p>,</span><span class=w> </span><span class=n>num2</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-5-23><span class=w>    </span><span class=p>}</span>
</span><span id=__span-5-24><span class=w>    </span><span class=k>catch</span><span class=w> </span><span class=p>(...)</span>
</span><span id=__span-5-25><span class=w>    </span><span class=p>{</span>
</span><span id=__span-5-26><span class=w>        </span><span class=k>delete</span><span class=p>[]</span><span class=w> </span><span class=n>arr</span><span class=p>;</span><span class=w> </span><span class=c1>// 先释放资源</span>
</span><span id=__span-5-27><span class=w>        </span><span class=k>throw</span><span class=p>;</span><span class=w> </span><span class=c1>// 再一次抛出未处理的异常</span>
</span><span id=__span-5-28><span class=w>    </span><span class=p>}</span>
</span><span id=__span-5-29>
</span><span id=__span-5-30><span class=w>    </span><span class=c1>// 如果异常已经处理，则释放资源</span>
</span><span id=__span-5-31>
</span><span id=__span-5-32><span class=w>    </span><span class=k>delete</span><span class=p>[]</span><span class=w> </span><span class=n>arr</span><span class=p>;</span>
</span><span id=__span-5-33><span class=p>}</span>
</span><span id=__span-5-34>
</span><span id=__span-5-35><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-5-36><span class=p>{</span>
</span><span id=__span-5-37><span class=w>    </span><span class=k>try</span>
</span><span id=__span-5-38><span class=w>    </span><span class=p>{</span>
</span><span id=__span-5-39><span class=w>        </span><span class=n>func</span><span class=p>();</span>
</span><span id=__span-5-40><span class=w>    </span><span class=p>}</span>
</span><span id=__span-5-41><span class=w>    </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=w> </span><span class=n>errmsg</span><span class=p>)</span>
</span><span id=__span-5-42><span class=w>    </span><span class=p>{</span>
</span><span id=__span-5-43><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>errmsg</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-5-44><span class=w>    </span><span class=p>}</span>
</span><span id=__span-5-45>
</span><span id=__span-5-46><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-5-47><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>如果将上面的代码修改为下面的代码：</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-6-1><span class=kt>double</span><span class=w> </span><span class=nf>divide</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>b</span><span class=p>)</span>
</span><span id=__span-6-2><span class=p>{</span>
</span><span id=__span-6-3><span class=w>    </span><span class=c1>// ...</span>
</span><span id=__span-6-4><span class=p>}</span>
</span><span id=__span-6-5>
</span><span id=__span-6-6><span class=kt>void</span><span class=w> </span><span class=nf>func</span><span class=p>()</span>
</span><span id=__span-6-7><span class=p>{</span>
</span><span id=__span-6-8><span class=w>    </span><span class=c1>// ...</span>
</span><span id=__span-6-9>
</span><span id=__span-6-10><span class=w>    </span><span class=c1>// 在堆上开辟两个空间</span>
</span><span id=__span-6-11><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>arr</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=kt>int</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
</span><span id=__span-6-12><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>arr1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=kt>int</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
</span><span id=__span-6-13>
</span><span id=__span-6-14><span class=w>    </span><span class=k>try</span>
</span><span id=__span-6-15><span class=w>    </span><span class=p>{</span>
</span><span id=__span-6-16><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>divide</span><span class=p>(</span><span class=n>num1</span><span class=p>,</span><span class=w> </span><span class=n>num2</span><span class=p>)</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-6-17><span class=w>    </span><span class=p>}</span>
</span><span id=__span-6-18><span class=w>    </span><span class=k>catch</span><span class=w> </span><span class=p>(...)</span>
</span><span id=__span-6-19><span class=w>    </span><span class=p>{</span>
</span><span id=__span-6-20><span class=w>        </span><span class=c1>// 释放空间</span>
</span><span id=__span-6-21><span class=w>        </span><span class=k>delete</span><span class=p>[]</span><span class=w> </span><span class=n>arr</span><span class=p>;</span>
</span><span id=__span-6-22><span class=w>        </span><span class=k>delete</span><span class=p>[]</span><span class=w> </span><span class=n>arr1</span><span class=p>;</span>
</span><span id=__span-6-23><span class=w>        </span><span class=k>throw</span><span class=p>;</span><span class=w> </span><span class=c1>// 再一次抛出未处理的异常</span>
</span><span id=__span-6-24><span class=w>    </span><span class=p>}</span>
</span><span id=__span-6-25>
</span><span id=__span-6-26><span class=w>    </span><span class=c1>// 如果异常已经处理，则释放资源</span>
</span><span id=__span-6-27>
</span><span id=__span-6-28><span class=w>    </span><span class=k>delete</span><span class=p>[]</span><span class=w> </span><span class=n>arr</span><span class=p>;</span>
</span><span id=__span-6-29><span class=w>    </span><span class=k>delete</span><span class=p>[]</span><span class=w> </span><span class=n>arr1</span><span class=p>;</span>
</span><span id=__span-6-30><span class=p>}</span>
</span><span id=__span-6-31>
</span><span id=__span-6-32><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-6-33><span class=p>{</span>
</span><span id=__span-6-34><span class=w>    </span><span class=k>try</span>
</span><span id=__span-6-35><span class=w>    </span><span class=p>{</span>
</span><span id=__span-6-36><span class=w>        </span><span class=n>func</span><span class=p>();</span>
</span><span id=__span-6-37><span class=w>    </span><span class=p>}</span>
</span><span id=__span-6-38><span class=w>    </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=w> </span><span class=n>errmsg</span><span class=p>)</span>
</span><span id=__span-6-39><span class=w>    </span><span class=p>{</span>
</span><span id=__span-6-40><span class=w>        </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>errmsg</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-6-41><span class=w>    </span><span class=p>}</span>
</span><span id=__span-6-42>
</span><span id=__span-6-43><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-6-44><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>上面的代码看似与第一次的代码不同的位置只是多开了一块空间，但是实际上在第二次开辟空间时可能会出现开辟失败的问题，即<code>int* arr1 = new int[10];</code>可能会执行失败，标准库中<code>new</code>关键字会抛出<code>bad_alloc</code>异常，所以此位置需要进行<code>try</code>...<code>catch</code>，但是此时会出现第二个问题，第一次开辟的<code>arr</code>空间并未释放，所以修改后的代码如下：</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1><span class=k>try</span>
</span><span id=__span-7-2><span class=p>{</span>
</span><span id=__span-7-3><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>arr1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=kt>int</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>
</span><span id=__span-7-4><span class=p>}</span>
</span><span id=__span-7-5><span class=k>catch</span><span class=p>(...)</span>
</span><span id=__span-7-6><span class=p>{</span>
</span><span id=__span-7-7><span class=w>    </span><span class=k>delete</span><span class=p>[]</span><span class=w> </span><span class=n>arr</span><span class=p>;</span>
</span><span id=__span-7-8><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>但是如果开了多个空间，就需要更多的<code>try</code>...<code>catch</code>语句，使得代码变得更加冗长，为了解决这个问题，C++ 11引入了智能指针，具体内容在指针指针部分讲解</p> <p>上面的问题也称为异常安全问题，资源泄漏是其中的一种，另外还有两种常见的异常安全问题：</p> <ol> <li>构造函数完成对象的构造和初始化，最好不要在构造函数中抛出异常，否则可能导致对象不完整或没有完全初始化</li> <li>析构函数主要完成资源的清理，最好不要在析构函数内抛出异常，否则可能导致资源泄漏(内存泄漏、句柄未关闭等)</li> </ol> <h2 id=_5>自定义异常体系<a class=headerlink href=#_5 title="Permanent link">&para;</a></h2> <p>在C++ 标准库中，有一套基本的异常体系（在<code>&lt;exception&gt;</code>中），但是这套体系并不完善，所以大部分情况需要自定义一个异常体系，该自定义异常体系一般由父类异常和子类异常组成，父类定义一个基本的异常，由子类继承父类异常，结合多态完善自定义的异常体系，例如下面的例子：</p> <details class=info> <summary>服务器开发中通常使用的自定义异常体系实例</summary> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>  1</span>
<span class=normal>  2</span>
<span class=normal>  3</span>
<span class=normal>  4</span>
<span class=normal>  5</span>
<span class=normal>  6</span>
<span class=normal>  7</span>
<span class=normal>  8</span>
<span class=normal>  9</span>
<span class=normal> 10</span>
<span class=normal> 11</span>
<span class=normal> 12</span>
<span class=normal> 13</span>
<span class=normal> 14</span>
<span class=normal> 15</span>
<span class=normal> 16</span>
<span class=normal> 17</span>
<span class=normal> 18</span>
<span class=normal> 19</span>
<span class=normal> 20</span>
<span class=normal> 21</span>
<span class=normal> 22</span>
<span class=normal> 23</span>
<span class=normal> 24</span>
<span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-8-1><span class=c1>// 定义父类异常</span>
</span><span id=__span-8-2><span class=k>class</span><span class=w> </span><span class=nc>Exception</span>
</span><span id=__span-8-3><span class=p>{</span>
</span><span id=__span-8-4><span class=k>public</span><span class=o>:</span>
</span><span id=__span-8-5><span class=w>    </span><span class=n>Exception</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=w> </span><span class=n>errmsg</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>id</span><span class=p>)</span>
</span><span id=__span-8-6><span class=w>        </span><span class=o>:</span><span class=n>_errmsg</span><span class=p>(</span><span class=n>errmsg</span><span class=p>)</span>
</span><span id=__span-8-7><span class=w>        </span><span class=p>,</span><span class=w> </span><span class=n>_id</span><span class=p>(</span><span class=n>id</span><span class=p>)</span>
</span><span id=__span-8-8><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-8-9><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=n>string</span><span class=w> </span><span class=n>what</span><span class=p>()</span><span class=w> </span><span class=k>const</span>
</span><span id=__span-8-10><span class=w>    </span><span class=p>{</span>
</span><span id=__span-8-11><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>_errmsg</span><span class=p>;</span>
</span><span id=__span-8-12><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-13><span class=k>protected</span><span class=o>:</span>
</span><span id=__span-8-14><span class=w>    </span><span class=n>string</span><span class=w> </span><span class=n>_errmsg</span><span class=p>;</span>
</span><span id=__span-8-15><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>_id</span><span class=p>;</span>
</span><span id=__span-8-16><span class=p>};</span>
</span><span id=__span-8-17>
</span><span id=__span-8-18><span class=c1>// 子类SQL异常，继承自父类异常</span>
</span><span id=__span-8-19><span class=k>class</span><span class=w> </span><span class=nc>SqlException</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Exception</span>
</span><span id=__span-8-20><span class=p>{</span>
</span><span id=__span-8-21><span class=k>public</span><span class=o>:</span>
</span><span id=__span-8-22><span class=w>    </span><span class=n>SqlException</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=w> </span><span class=n>errmsg</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=w> </span><span class=n>sql</span><span class=p>)</span>
</span><span id=__span-8-23><span class=w>        </span><span class=o>:</span><span class=n>Exception</span><span class=p>(</span><span class=n>errmsg</span><span class=p>,</span><span class=w> </span><span class=n>id</span><span class=p>)</span>
</span><span id=__span-8-24><span class=w>        </span><span class=p>,</span><span class=w> </span><span class=n>_sql</span><span class=p>(</span><span class=n>sql</span><span class=p>)</span>
</span><span id=__span-8-25><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-8-26><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=n>string</span><span class=w> </span><span class=n>what</span><span class=p>()</span><span class=w> </span><span class=k>const</span>
</span><span id=__span-8-27><span class=w>    </span><span class=p>{</span>
</span><span id=__span-8-28><span class=w>        </span><span class=n>string</span><span class=w> </span><span class=n>str</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;SqlException:&quot;</span><span class=p>;</span>
</span><span id=__span-8-29><span class=w>        </span><span class=n>str</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>_errmsg</span><span class=p>;</span>
</span><span id=__span-8-30><span class=w>        </span><span class=n>str</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=s>&quot;-&gt;&quot;</span><span class=p>;</span>
</span><span id=__span-8-31><span class=w>        </span><span class=n>str</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>_sql</span><span class=p>;</span>
</span><span id=__span-8-32><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>str</span><span class=p>;</span>
</span><span id=__span-8-33><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-34><span class=k>private</span><span class=o>:</span>
</span><span id=__span-8-35><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=w> </span><span class=n>_sql</span><span class=p>;</span>
</span><span id=__span-8-36><span class=p>};</span>
</span><span id=__span-8-37>
</span><span id=__span-8-38><span class=c1>// 子类Cache异常，继承自父类异常</span>
</span><span id=__span-8-39><span class=k>class</span><span class=w> </span><span class=nc>CacheException</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Exception</span>
</span><span id=__span-8-40><span class=p>{</span>
</span><span id=__span-8-41><span class=k>public</span><span class=o>:</span>
</span><span id=__span-8-42><span class=w>    </span><span class=n>CacheException</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=w> </span><span class=n>errmsg</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>id</span><span class=p>)</span>
</span><span id=__span-8-43><span class=w>        </span><span class=o>:</span><span class=n>Exception</span><span class=p>(</span><span class=n>errmsg</span><span class=p>,</span><span class=w> </span><span class=n>id</span><span class=p>)</span>
</span><span id=__span-8-44><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-8-45><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=n>string</span><span class=w> </span><span class=n>what</span><span class=p>()</span><span class=w> </span><span class=k>const</span>
</span><span id=__span-8-46><span class=w>    </span><span class=p>{</span>
</span><span id=__span-8-47><span class=w>        </span><span class=n>string</span><span class=w> </span><span class=n>str</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;CacheException:&quot;</span><span class=p>;</span>
</span><span id=__span-8-48><span class=w>        </span><span class=n>str</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>_errmsg</span><span class=p>;</span>
</span><span id=__span-8-49><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>str</span><span class=p>;</span>
</span><span id=__span-8-50><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-51><span class=p>};</span>
</span><span id=__span-8-52>
</span><span id=__span-8-53><span class=c1>// 子类HttpServer异常，继承自父类异常</span>
</span><span id=__span-8-54><span class=k>class</span><span class=w> </span><span class=nc>HttpServerException</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=k>public</span><span class=w> </span><span class=n>Exception</span>
</span><span id=__span-8-55><span class=p>{</span>
</span><span id=__span-8-56><span class=k>public</span><span class=o>:</span>
</span><span id=__span-8-57><span class=w>    </span><span class=n>HttpServerException</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=w> </span><span class=n>errmsg</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=o>&amp;</span><span class=w> </span><span class=n>type</span><span class=p>)</span>
</span><span id=__span-8-58><span class=w>        </span><span class=o>:</span><span class=n>Exception</span><span class=p>(</span><span class=n>errmsg</span><span class=p>,</span><span class=w> </span><span class=n>id</span><span class=p>)</span>
</span><span id=__span-8-59><span class=w>        </span><span class=p>,</span><span class=w> </span><span class=n>_type</span><span class=p>(</span><span class=n>type</span><span class=p>)</span>
</span><span id=__span-8-60><span class=w>    </span><span class=p>{}</span>
</span><span id=__span-8-61><span class=w>    </span><span class=k>virtual</span><span class=w> </span><span class=n>string</span><span class=w> </span><span class=n>what</span><span class=p>()</span><span class=w> </span><span class=k>const</span>
</span><span id=__span-8-62><span class=w>    </span><span class=p>{</span>
</span><span id=__span-8-63><span class=w>        </span><span class=n>string</span><span class=w> </span><span class=n>str</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&quot;HttpServerException:&quot;</span><span class=p>;</span>
</span><span id=__span-8-64><span class=w>        </span><span class=n>str</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>_type</span><span class=p>;</span>
</span><span id=__span-8-65><span class=w>        </span><span class=n>str</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=s>&quot;:&quot;</span><span class=p>;</span>
</span><span id=__span-8-66><span class=w>        </span><span class=n>str</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>_errmsg</span><span class=p>;</span>
</span><span id=__span-8-67>
</span><span id=__span-8-68><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>str</span><span class=p>;</span>
</span><span id=__span-8-69><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-70><span class=k>private</span><span class=o>:</span>
</span><span id=__span-8-71><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=n>string</span><span class=w> </span><span class=n>_type</span><span class=p>;</span>
</span><span id=__span-8-72><span class=p>};</span>
</span><span id=__span-8-73>
</span><span id=__span-8-74><span class=c1>// 模拟服务器开发中的异常处理</span>
</span><span id=__span-8-75><span class=kt>void</span><span class=w> </span><span class=nf>SQLMgr</span><span class=p>()</span>
</span><span id=__span-8-76><span class=p>{</span>
</span><span id=__span-8-77><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>rand</span><span class=p>()</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=mi>7</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-8-78><span class=w>    </span><span class=p>{</span>
</span><span id=__span-8-79><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=n>SqlException</span><span class=p>(</span><span class=s>&quot;权限不足&quot;</span><span class=p>,</span><span class=w> </span><span class=mi>100</span><span class=p>,</span><span class=w> </span><span class=s>&quot;select * from name = &#39;张三&#39;&quot;</span><span class=p>);</span>
</span><span id=__span-8-80><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-81><span class=p>}</span>
</span><span id=__span-8-82>
</span><span id=__span-8-83><span class=kt>void</span><span class=w> </span><span class=nf>CacheMgr</span><span class=p>()</span>
</span><span id=__span-8-84><span class=p>{</span>
</span><span id=__span-8-85><span class=w>    </span><span class=c1>// 随机数模拟异常</span>
</span><span id=__span-8-86><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>rand</span><span class=p>()</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=mi>5</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-8-87><span class=w>    </span><span class=p>{</span>
</span><span id=__span-8-88><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=n>CacheException</span><span class=p>(</span><span class=s>&quot;权限不足&quot;</span><span class=p>,</span><span class=w> </span><span class=mi>100</span><span class=p>);</span>
</span><span id=__span-8-89><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-90><span class=w>    </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>rand</span><span class=p>()</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=mi>6</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-8-91><span class=w>    </span><span class=p>{</span>
</span><span id=__span-8-92><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=n>CacheException</span><span class=p>(</span><span class=s>&quot;数据不存在&quot;</span><span class=p>,</span><span class=w> </span><span class=mi>101</span><span class=p>);</span>
</span><span id=__span-8-93><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-94><span class=w>    </span><span class=n>SQLMgr</span><span class=p>();</span>
</span><span id=__span-8-95><span class=p>}</span>
</span><span id=__span-8-96>
</span><span id=__span-8-97><span class=kt>void</span><span class=w> </span><span class=nf>HttpServer</span><span class=p>()</span>
</span><span id=__span-8-98><span class=p>{</span>
</span><span id=__span-8-99><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>rand</span><span class=p>()</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=mi>3</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-8-100><span class=w>    </span><span class=p>{</span>
</span><span id=__span-8-101><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=n>HttpServerException</span><span class=p>(</span><span class=s>&quot;请求资源不存在&quot;</span><span class=p>,</span><span class=w> </span><span class=mi>100</span><span class=p>,</span><span class=w> </span><span class=s>&quot;get&quot;</span><span class=p>);</span>
</span><span id=__span-8-102><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-103><span class=w>    </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>rand</span><span class=p>()</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=mi>4</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-8-104><span class=w>    </span><span class=p>{</span>
</span><span id=__span-8-105><span class=w>        </span><span class=k>throw</span><span class=w> </span><span class=n>HttpServerException</span><span class=p>(</span><span class=s>&quot;权限不足&quot;</span><span class=p>,</span><span class=w> </span><span class=mi>101</span><span class=p>,</span><span class=w> </span><span class=s>&quot;post&quot;</span><span class=p>);</span>
</span><span id=__span-8-106><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-107><span class=w>    </span><span class=n>CacheMgr</span><span class=p>();</span>
</span><span id=__span-8-108><span class=p>}</span>
</span><span id=__span-8-109>
</span><span id=__span-8-110><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-8-111><span class=p>{</span>
</span><span id=__span-8-112><span class=w>    </span><span class=n>srand</span><span class=p>(</span><span class=n>time</span><span class=p>(</span><span class=mi>0</span><span class=p>));</span>
</span><span id=__span-8-113><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span><span id=__span-8-114><span class=w>    </span><span class=p>{</span>
</span><span id=__span-8-115><span class=w>        </span><span class=k>try</span><span class=w> </span>
</span><span id=__span-8-116><span class=w>        </span><span class=p>{</span>
</span><span id=__span-8-117><span class=w>            </span><span class=c1>// 调用服务器</span>
</span><span id=__span-8-118><span class=w>            </span><span class=n>HttpServer</span><span class=p>();</span>
</span><span id=__span-8-119><span class=w>        </span><span class=p>}</span>
</span><span id=__span-8-120><span class=w>        </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>Exception</span><span class=o>&amp;</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=c1>// 这里捕获父类对象就可以</span>
</span><span id=__span-8-121><span class=w>        </span><span class=p>{</span>
</span><span id=__span-8-122><span class=w>            </span><span class=c1>// 多态</span>
</span><span id=__span-8-123><span class=w>            </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>what</span><span class=p>()</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-8-124><span class=w>        </span><span class=p>}</span>
</span><span id=__span-8-125><span class=w>        </span><span class=k>catch</span><span class=w> </span><span class=p>(...)</span>
</span><span id=__span-8-126><span class=w>        </span><span class=p>{</span>
</span><span id=__span-8-127><span class=w>            </span><span class=n>cout</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=s>&quot;Unkown Exception&quot;</span><span class=w> </span><span class=o>&lt;&lt;</span><span class=w> </span><span class=n>endl</span><span class=p>;</span>
</span><span id=__span-8-128><span class=w>        </span><span class=p>}</span>
</span><span id=__span-8-129><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-130><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-8-131><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> </details> <h2 id=_6>异常书写规范<a class=headerlink href=#_6 title="Permanent link">&para;</a></h2> <p>在C++ 98中，为了保证异常的抛出和捕捉规范，标准库定义当函数需要抛出异常时，可以指定抛出的异常类型（例如<code>throw(A, B, C, D)</code>，其中A，B，C，D为异常类型），如果想表示函数不抛出异常，可以写<code>throw()</code>，例如下面的代码：</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-9-1><span class=c1>// 这里表示这个函数会抛出A/B/C/D中的某种类型的异常</span>
</span><span id=__span-9-2><span class=kt>void</span><span class=w> </span><span class=nf>fun</span><span class=p>()</span><span class=w> </span><span class=k>throw</span><span class=p>(</span><span class=n>A</span><span class=err>，</span><span class=n>B</span><span class=err>，</span><span class=n>C</span><span class=err>，</span><span class=n>D</span><span class=p>);</span>
</span><span id=__span-9-3><span class=c1>// 这里表示这个函数只会抛出bad_alloc的异常</span>
</span><span id=__span-9-4><span class=kt>void</span><span class=o>*</span><span class=w> </span><span class=k>operator</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span><span class=w> </span><span class=n>size</span><span class=p>)</span><span class=w> </span><span class=k>throw</span><span class=w> </span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>bad_alloc</span><span class=p>);</span>
</span><span id=__span-9-5><span class=c1>// 这里表示这个函数不会抛出异常</span>
</span><span id=__span-9-6><span class=kt>void</span><span class=o>*</span><span class=w> </span><span class=k>operator</span><span class=w> </span><span class=k>delete</span><span class=w> </span><span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=kt>size_t</span><span class=w> </span><span class=n>size</span><span class=p>,</span><span class=w> </span><span class=kt>void</span><span class=o>*</span><span class=w> </span><span class=n>ptr</span><span class=p>)</span><span class=w> </span><span class=k>throw</span><span class=p>();</span>
</span></code></pre></div></td></tr></table></div> <p>但是因为这个方式有的人遵循，有的人不遵循，导致标准并没有实施得很完善，并且这样写的复杂程度也变高，为了尽可能解决这个问题，C++ 11中可以使用<code>noexcept</code>表示函数没有异常抛出，如果函数有异常则不用写任何内容</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-10-1><span class=c1>// C++11 中新增的noexcept，表示不会抛异常</span>
</span><span id=__span-10-2><span class=kr>thread</span><span class=p>()</span><span class=w> </span><span class=k>noexcept</span><span class=p>;</span>
</span><span id=__span-10-3><span class=kr>thread</span><span class=w> </span><span class=p>(</span><span class=kr>thread</span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>x</span><span class=p>)</span><span class=w> </span><span class=k>noexcept</span><span class=p>;</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_7>异常的优缺点<a class=headerlink href=#_7 title="Permanent link">&para;</a></h2> <p>C++异常的优点： </p> <ol> <li>异常对象定义好了，相比错误码的方式可以清晰准确的展示出错误的各种信息，甚至可以包含堆栈调用的信息，这样可以帮助更好的定位程序的bug。</li> <li>返回错误码的传统方式有个很大的问题就是，在函数调用链中，深层的函数返回了错误，则需要层层返回错误，最外层才能拿到错误</li> <li>很多的第三方库都包含异常，比如boost、gtest、gmock等等常用的库，那么我们使用它们也需要使用异常</li> <li>部分函数使用异常更好处理，比如构造函数没有返回值，不方便使用错误码方式处理。比如<code>T&amp; operator[]</code>这样的函数，如果<code>pos</code>越界了只能使用异常或者终止程序处理，没办法通过返回值表示错误</li> </ol> <p>C++异常的缺点： </p> <ol> <li>异常会导致程序的执行流混乱，并且运行时出错抛异常就会乱跳，从而导致跟踪调试时以及分析程序时比较困难</li> <li>异常会有一些性能的开销，但是目前基本上可以忽略不计</li> <li>C++没有垃圾回收机制，资源需要自己管理。有了异常非常容易导致内存泄漏、死锁等异常安全问题。这个需要使用RAII（见智能指针部分）来处理资源的管理问题。</li> <li>C++标准库的异常体系定义得不好，导致大家各自定义各自的异常体系，非常的混乱。</li> <li>异常尽量规范使用，否则后果不堪设想，随意抛异常，外层捕获的用户苦不堪言。所以常见的异常规范有两点：1. 抛出异常类型都继承自一个父类 2. 函数是否抛异常以及抛什么异常，都使用<code>func() throw();</code>的方式规范化</li> </ol> <p>总结：异常总体而言，只要控制得好，异常的利大于弊，所以工程中还是鼓励使用异常的。另外面向对象的语言基本都是用异常处理错误，这也可以看出这是大势所趋</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年8月15日</span> </span> </aside> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> 页面有帮助吗？ </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title=页面对我有帮助 data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title=页面没有帮助到我 data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> 谢谢你的反馈！ </div> <div data-md-value=0 hidden> 谢谢你的反馈！联系<a href=https://www.help-doc.top/author/contact/contact.html>作者</a>提供更详细的信息 </div> </div> </div> </fieldset> </form> <!-- Waline 评论系统 --> <div id=waline></div> <!-- 评论系统 --> <!-- Waline 评论系统 --> <div id=waline></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2024-2025 柯懒不是柯南 </div> </div> <div class="md-footer-love md-typeset"> 一闪一闪亮晶晶，不及<span class=love-highlight>小亮</span><span class=love-heart>♥</span>照我心。To Li Liang </div> <div class=md-social> <a href=https://github.com/H0308 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.help-doc.top/author/contact/contact.html target=_blank rel=noopener title=www.help-doc.top class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.indexes", "navigation.prune", "navigation.tabs", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src=../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../javascripts/katex.min.js></script> <script src=../../javascripts/other.min.js></script> <script src=../../javascripts/copyright.min.js></script> <script src=../../javascripts/waline.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js></script> <script src=https://cdn.jsdelivr.net/npm/mermaid@11.5.0/dist/mermaid.min.js></script> <script src=../../assets/javascripts/toggle-sidebar.js async></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>