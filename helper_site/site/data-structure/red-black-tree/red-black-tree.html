<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://www.help-doc.top/data-structure/red-black-tree/red-black-tree.html><link rel=prev href=../avl-tree/avl-tree.html><link rel=next href=../hash-table/hash-table.html><link rel=icon href=../../images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.12"><title>红黑树 - 柯懒的知识库</title><link rel=stylesheet href=../../assets/stylesheets/main.2afb09e1.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=stylesheet href=../../css/timeline.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-9XWRGNRRSY"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-9XWRGNRRSY",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-9XWRGNRRSY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=stylesheet href=../../stylesheets/colors.min.css><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (max-width: 1199px)"><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (min-width: 1200px)" id=theme2-desktop><link rel=stylesheet href=../../stylesheets/theme1.min.css media="screen and (min-width: 1200px)" id=theme1-desktop><link rel=stylesheet href=../../stylesheets/print.min.css><link rel=stylesheet href=../../stylesheets/font-dongguanti.min.css id=font-dongguanti><link rel=stylesheet href=../../stylesheets/font-oppoti.min.css id=font-oppoti disabled><link rel=stylesheet href=../../stylesheets/font-jiangchengti.min.css id=font-jiangchengti disabled><link rel=stylesheet href=../../stylesheets/font-lxgw.min.css id=font-lxgw disabled><link rel=stylesheet href=../../stylesheets/code-font-dejavu-sans-mono.min.css id=code-font-dejavu-sans-mono><link rel=stylesheet href=../../stylesheets/code-font-zsft-hk.min.css id=code-font-zsft-hk disabled><link rel=stylesheet href=../../stylesheets/code-font-google-sans-code.min.css id=code-font-google-sans-code disabled><link rel=stylesheet href=https://unpkg.com/@waline/client@v3/dist/waline.css><link rel=stylesheet href=../../stylesheets/waline.min.css><script src=../../javascripts/start.min.js></script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#_1 class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../index.html title=柯懒的知识库 class="md-header__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 柯懒的知识库 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 红黑树 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan aria-label type=radio name=__palette id=__palette_1> </form> <!-- 头像元素 - 直接在HTML中定义 --> <div class=header-avatar> <img src=../../author/作者.assets/20250206-200653.jpg alt=头像> <div class=avatar-dropdown> <p><strong>柯懒不是柯南</strong></p> <a href=../../author/contact/contact.html class=avatar-dropdown-item>吵醒柯懒</a> <div class=avatar-dropdown-divider></div> <a href=../../author/about/about.html class=avatar-dropdown-item>柯懒自传</a> <div class=avatar-dropdown-divider></div> <a href=https://github.com/H0308 class=avatar-dropdown-item>柯懒的零食库</a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=查找> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <!-- 独立的切换按钮 --> <div class=toolbar-toggle-btn id=toolbarToggleBtn onclick=toggleToolbar()> <div class=toggle-icon> <svg class=toggle-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=16 height=16> <path d="M346.538667 1024L170.666667 853.333333l341.333333-341.333333-341.333333-341.333333 175.872-170.666667L853.333333 512z" fill=currentColor></path> </svg> </div> </div> <!-- 右侧固定功能条 - 独立于内容区 --> <div class=floating-toolbar id=floatingToolbar> <!-- 字体切换功能 --> <div class="toolbar-item font-switcher"> <div class=toolbar-icon> <svg class=font-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M913.408 1024l-66.56 0q-29.696 0-51.2-5.12t-36.864-15.872-26.112-27.136-19.968-37.888q-15.36-38.912-28.16-70.656t-22.016-55.296q-11.264-26.624-20.48-49.152l-254.976 0q-7.168 23.552-17.408 51.2-8.192 23.552-21.504 56.832t-30.72 72.192q-20.48 46.08-47.104 63.488t-60.416 17.408l-70.656 0q-45.056 0-60.928-19.968t2.56-68.096q18.432-46.08 43.008-108.544t52.224-132.608 57.344-143.872 57.344-144.384q65.536-164.864 137.216-343.04 7.168-17.408 18.432-31.744 10.24-11.264 27.136-21.504t42.496-10.24q26.624 0 43.52 10.752t28.16 24.064q12.288 15.36 19.456 33.792 72.704 180.224 138.24 345.088 27.648 70.656 57.344 143.872t56.832 142.336 51.2 129.536 41.472 104.448q14.336 34.816 4.096 62.464t-43.008 27.648zM616.448 634.88l-97.28-347.136-1.024 0-108.544 347.136 206.848 0z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>内容字体</div> <div class=font-dropdown-toolbar> <div class=font-current-toolbar onclick=toggleFontDropdownToolbar()> <span class=current-font-name-toolbar>东观体</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=font-options-toolbar> <div class=font-option-toolbar data-font=dongguanti onclick="selectFontToolbar('dongguanti')">上图东观体 </div> <div class=font-option-toolbar data-font=oppoti onclick="selectFontToolbar('oppoti')">OPPO Sans </div> <div class=font-option-toolbar data-font=jiangchengti onclick="selectFontToolbar('jiangchengti')"> 江城黑体</div> <div class=font-option-toolbar data-font=lxgw onclick="selectFontToolbar('lxgw')">霞鹜臻楷</div> </div> </div> </div> <!-- 代码字体切换功能 --> <div class="toolbar-item code-font-switcher"> <div class=toolbar-icon> <svg t=1753672111433 class="icon code-font-icon" viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg p-id=5148 width=20 height=20> <path d="M941.709938 0H82.290062A82.290062 82.290062 0 0 0 0 82.290062v859.419876A82.290062 82.290062 0 0 0 82.290062 1022.53923h859.419876A82.290062 82.290062 0 0 0 1022.53923 941.709938V82.290062A82.290062 82.290062 0 0 0 941.709938 0zM188.439372 553.631954a40.901569 40.901569 0 0 1-29.215406-70.116975L292.154066 351.558726 159.223966 218.628626a40.901569 40.901569 0 0 1 58.430813-57.94389l160.197813 162.145507a40.901569 40.901569 0 0 1 0 57.943889l-160.197813 160.684736a40.901569 40.901569 0 0 1-29.215407 12.173086z m443.587257 0H405.120304a40.901569 40.901569 0 0 1 0-82.290061H633.000476a40.901569 40.901569 0 0 1 0 82.290061z" fill=currentColor p-id=5149></path> </svg> </div> <div class=toolbar-label>代码字体</div> <div class=code-font-dropdown-toolbar> <div class=code-font-current-toolbar onclick=toggleCodeFontDropdownToolbar()> <span class=current-code-font-name-toolbar>DejaVu Sans Mono</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=code-font-options-toolbar> <div class=code-font-option-toolbar data-code-font=dejavu onclick="selectCodeFontToolbar('dejavu')"> DejaVu Sans Mono</div> <div class=code-font-option-toolbar data-code-font=google-sans-code onclick="selectCodeFontToolbar('google-sans-code')"> Google Sans Code</div> <div class=code-font-option-toolbar data-code-font=zsft onclick="selectCodeFontToolbar('zsft')"> JetBrains Mono</div> </div> </div> </div> <!-- 主题切换功能 --> <div class="toolbar-item theme-switcher" onclick=switchTheme()> <div class=toolbar-icon> <svg class=theme-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M876.572788 522.301623c-1.886977 12.375865-9.657964 30.331819-35.880185 45.48903-56.489572 32.697703-150.21828 83.990926-174.010149 96.958262-13.143345 24.431435-66.067718 122.221646-98.141204 178.503487-16.117073 28.124548-36.055171 34.041304-50.030463 34.041304-0.031722 0-0.031722 0-0.031722 0-14.613836 0-29.1806-6.460132-43.234687-19.218714-47.183626-42.643216-125.994576-117.105115-146.013515-136.083351-27.757181-4.732791-138.338718-23.743774-200.584388-35.752272-17.924231-3.533476-32.649608-14.07046-40.372499-29.084409-5.78782-11.256368-10.281157-30.05962 1.471514-55.658647 26.989701-59.047838 74.126254-157.557432 85.957721-182.196599-3.437286-27.117614-16.996093-135.060045-23.760147-198.905142-1.886977-17.460674 3.901867-35.096333 15.829524-48.351218 12.791327-14.278191 30.667463-21.48943 49.854455-19.426445 63.669088 6.332219 173.259042 19.426445 200.584388 22.705118 24.335245-11.879562 121.085776-58.936297 180.133613-86.34146 9.91379-4.573155 19.85828-6.92369 29.596062-6.92369 28.748764 0 52.172243 20.642133 58.328453 51.421136 12.599969 62.997799 30.93864 166.70272 35.639708 193.484689 18.851347 19.682271 91.953272 96.031147 135.060045 143.07151C872.72004 487.125473 879.307062 504.71406 876.572788 522.301623L876.572788 522.301623zM825.375755 499.085876C776.017604 445.314205 687.245791 352.977193 686.365748 352.017332c-2.942005-3.069919-4.956895-6.971785-5.676279-11.208273-0.207731-1.215688-22.193465-127.001509-36.551474-198.936865-0.799202-3.917216-4.285606-16.836457-16.196891-16.836457-3.453658 0-7.30743 1.006933-11.464099 2.942005-67.282383 31.179117-183.955662 88.180342-185.170327 88.771813-3.693112 1.790786-7.850805 2.558265-11.975752 2.01489-1.295506-0.224104-133.63765-16.165168-205.988468-23.424502-0.079818 0-0.207731 0-0.287549 0-7.30743 0-11.128455 2.89391-13.319353 5.40408-3.677762 4.124947-5.644557 9.91379-5.068436 15.110139 7.674796 72.623018 24.255427 202.934922 24.463158 204.325595 0.511653 4.109598-0.159636 8.266267-1.966795 11.960403-0.591471 1.215688-57.657164 120.04712-88.339977 187.201589-3.565199 7.754614-4.41352 14.214746-2.350534 18.131963 1.935072 3.725858 6.588045 5.820566 10.360975 6.53995 70.719668 13.718443 204.644867 36.519752 206.036563 36.727483 4.189416 0.671289 8.058536 2.686179 11.112082 5.580089 1.006933 0.87902 96.414887 91.281983 150.090367 139.889027 8.314363 7.563256 13.143345 8.106632 14.437827 8.106632 3.485381 0 8.314363-4.621251 12.727882-12.391215 36.343743-63.828724 100.011808-181.988868 100.636025-183.155437 1.983167-3.64604 5.004991-6.667863 8.650007-8.650007 1.134847-0.671289 114.418936-62.373583 178.6314-99.516528 8.698103-5.036713 14.278191-10.568706 14.94948-14.854313C834.681702 511.845481 831.49922 505.800811 825.375755 499.085876L825.375755 499.085876zM935.333076 935.670256c-4.157693 4.157693-9.689686 6.299473-15.141862 6.299473-5.548366 0-11.048637-2.142803-15.238053-6.299473l-171.915441-171.915441c-8.362458-8.394181-8.362458-21.98471 0-30.426987 8.394181-8.394181 21.98471-8.394181 30.379914 0l171.915441 171.915441C943.727257 913.684522 943.727257 927.275052 935.333076 935.670256L935.333076 935.670256z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>主题切换</div> </div> <!-- 返回顶部功能 --> <div class="toolbar-item back-to-top" onclick=scrollToTop()> <div class=toolbar-icon> <svg class=back-to-top-icon viewbox="0 0 1024 1024" xmlns=http://www.w3.org/2000/svg> <path d="M882.688 624.128l-336.896-583.68c-15.872-27.136-54.784-27.136-70.656 0L138.24 624.128c-15.872 27.136 4.096 61.44 35.328 61.44H317.44c22.528 0 40.96 18.432 40.96 40.96v239.616c0 22.528 18.432 40.96 40.96 40.96h223.232c22.528 0 40.96-18.432 40.96-40.96v-239.616c0-22.528 18.432-40.96 40.96-40.96h143.872c30.208 0 50.176-34.304 34.304-61.44z"> </path> </svg> </div> <div class=toolbar-label>返回顶部</div> </div> </div> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.html class=md-tabs__link> 主页 </a> </li> <li class=md-tabs__item> <a href=../../intro/intro.html class=md-tabs__link> 网站介绍 </a> </li> <li class=md-tabs__item> <a href=../../timeline/timeline.html class=md-tabs__link> 网站时间线 </a> </li> <li class=md-tabs__item> <a href=../../languages/index.html class=md-tabs__link> 编程语言 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../data-structure-algo/index.html class=md-tabs__link> 数据结构与算法 </a> </li> <li class=md-tabs__item> <a href=../../Linux/index.html class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../front-end/index.html class=md-tabs__link> 前端 </a> </li> <li class=md-tabs__item> <a href=../../MySQL/index.html class=md-tabs__link> MySQL </a> </li> <li class=md-tabs__item> <a href=../../JavaEE/index.html class=md-tabs__link> JavaEE应用开发 </a> </li> <li class=md-tabs__item> <a href=../../other/index.html class=md-tabs__link> 扩展知识 </a> </li> <li class=md-tabs__item> <a href=../../tooltips/index.html class=md-tabs__link> 工具帮助 </a> </li> <li class=md-tabs__item> <a href=../../test-encrypt/test-encrypt.html class=md-tabs__link> 测试加密功能 </a> </li> <li class=md-tabs__item> <a href=../../projects/index.html class=md-tabs__link> 项目 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title=柯懒的知识库 class="md-nav__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> 柯懒的知识库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.html class=md-nav__link> <span class=md-ellipsis> 主页 </span> </a> </li> <li class=md-nav__item> <a href=../../intro/intro.html class=md-nav__link> <span class=md-ellipsis> 网站介绍 </span> </a> </li> <li class=md-nav__item> <a href=../../timeline/timeline.html class=md-nav__link> <span class=md-ellipsis> 网站时间线 </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../languages/index.html class=md-nav__link> <span class=md-ellipsis> 编程语言 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <div class="md-nav__link md-nav__container"> <a href=../../data-structure-algo/index.html class="md-nav__link "> <span class=md-ellipsis> 数据结构与算法 </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> 数据结构与算法 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> 数据结构 </span> </a> <label class="md-nav__link " for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=true> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> 数据结构 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../time-space-complexity/time-space-complexity.html class=md-nav__link> <span class=md-ellipsis> 数据结构基础 </span> </a> </li> <li class=md-nav__item> <a href=../sequential-structure-and-sequential-table/sequential-structure-and-sequential-table.html class=md-nav__link> <span class=md-ellipsis> 顺序结构与顺序表 </span> </a> </li> <li class=md-nav__item> <a href=../linked-list/linked-list.html class=md-nav__link> <span class=md-ellipsis> 链表 </span> </a> </li> <li class=md-nav__item> <a href=../stack/stack.html class=md-nav__link> <span class=md-ellipsis> 栈 </span> </a> </li> <li class=md-nav__item> <a href=../queue/queue.html class=md-nav__link> <span class=md-ellipsis> 队列 </span> </a> </li> <li class=md-nav__item> <a href=../binary-tree/binary-tree.html class=md-nav__link> <span class=md-ellipsis> 树基础与二叉树的实现 </span> </a> </li> <li class=md-nav__item> <a href=../heap/heap.html class=md-nav__link> <span class=md-ellipsis> 堆 </span> </a> </li> <li class=md-nav__item> <a href=../binary-search-tree/binary-search-tree.html class=md-nav__link> <span class=md-ellipsis> 二叉搜索树 </span> </a> </li> <li class=md-nav__item> <a href=../avl-tree/avl-tree.html class=md-nav__link> <span class=md-ellipsis> AVL树 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> 红黑树 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=red-black-tree.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> 红黑树 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=本节目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 本节目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 红黑树介绍 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 红黑树的性质与平衡控制关系 </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 红黑树节点的插入 </span> </a> <nav class=md-nav aria-label=红黑树节点的插入> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1 class=md-nav__link> <span class=md-ellipsis> 情况1：不需要调整 </span> </a> </li> <li class=md-nav__item> <a href=#2uncle class=md-nav__link> <span class=md-ellipsis> 情况2：uncle节点为红色 </span> </a> </li> <li class=md-nav__item> <a href=#3uncle class=md-nav__link> <span class=md-ellipsis> 情况3：uncle节点为黑色 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 总结与代码实现 </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 红黑树的删除（待实现） </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 红黑树的效率 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../hash-table/hash-table.html class=md-nav__link> <span class=md-ellipsis> 哈希表 </span> </a> </li> <li class=md-nav__item> <a href=../bitset/bitset.html class=md-nav__link> <span class=md-ellipsis> 位图 </span> </a> </li> <li class=md-nav__item> <a href=../bloom-filter/bloom-filter.html class=md-nav__link> <span class=md-ellipsis> 布隆过滤器与海量数据处理 </span> </a> </li> <li class=md-nav__item> <a href=../sort/sort.html class=md-nav__link> <span class=md-ellipsis> 排序 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../algorithm/index.html class=md-nav__link> <span class=md-ellipsis> 算法 </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Linux/index.html class=md-nav__link> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../front-end/index.html class=md-nav__link> <span class=md-ellipsis> 前端 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../MySQL/index.html class=md-nav__link> <span class=md-ellipsis> MySQL </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../JavaEE/index.html class=md-nav__link> <span class=md-ellipsis> JavaEE应用开发 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../other/index.html class=md-nav__link> <span class=md-ellipsis> 扩展知识 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tooltips/index.html class=md-nav__link> <span class=md-ellipsis> 工具帮助 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../test-encrypt/test-encrypt.html class=md-nav__link> <span class=md-ellipsis> 测试加密功能 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../projects/index.html class=md-nav__link> <span class=md-ellipsis> 项目 </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=本节目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 本节目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 红黑树介绍 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 红黑树的性质与平衡控制关系 </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 红黑树节点的插入 </span> </a> <nav class=md-nav aria-label=红黑树节点的插入> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1 class=md-nav__link> <span class=md-ellipsis> 情况1：不需要调整 </span> </a> </li> <li class=md-nav__item> <a href=#2uncle class=md-nav__link> <span class=md-ellipsis> 情况2：uncle节点为红色 </span> </a> </li> <li class=md-nav__item> <a href=#3uncle class=md-nav__link> <span class=md-ellipsis> 情况3：uncle节点为黑色 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 总结与代码实现 </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 红黑树的删除（待实现） </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 红黑树的效率 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=_1>红黑树<a class=headerlink href=#_1 title="Permanent link">&para;</a></h1> <div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;"> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span> 约 2645 个字 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"/></svg></span> 141 行代码 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"/></svg></span> 15 张图片 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span> 预计阅读时间 11 分钟</p> </div> <h2 id=_2>红黑树介绍<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <p>红黑树是第二种平衡二叉搜索树，为了解决普通二叉搜索树的效率问题，红黑树在控制平衡时选择近似平衡而不是AVL树的绝对平衡，每一个节点都会存储一个表示颜色的属性，包括红色和黑色，通过对颜色的控制，<strong>红黑树可以保证最长路径的长度不会超过最短路径长度的两倍</strong></p> <p>红黑树的性质</p> <ol> <li>根节点一定是黑色</li> <li>一条简单路径下不会出现连续的红色节点，如果父亲节点为红色，则其孩子节点一定为黑色，如果父亲节点为黑色，则没有限制</li> <li>对于每个节点来说，从该节点开始到其后代所有节点的简单路径上均包含相同数量的黑色节点</li> <li>（了解）每个空叶子结点都是黑色的</li> </ol> <p><a class=glightbox href="12. 红黑树.assets\image.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="12. 红黑树.assets\image.png"></a></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>在上图中，<code>NIL</code>表示空叶子节点，以<code>NIL</code>作为结束条件，一共有11条路径，需要注意不是以叶子节点为结束条件</p> </div> <p>满足上面的四个性质，红黑树就可以保证其相对平衡的条件：<strong>红黑树可以保证最长路径的长度不会超过最短路径长度的两倍。</strong></p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>最短路径：节点颜色为全黑的路径，此时黑色节点的个数即为路径的长度</p> <p>最长路径：节点颜色为红色和黑色交替出现的路径</p> </div> <h2 id=_3>红黑树的性质与平衡控制关系<a class=headerlink href=#_3 title="Permanent link">&para;</a></h2> <p>因为黑色节点的个数可以决定一条路径的长度，假设黑色节点的个数为h，则最短路径的长度也为h，满足第二条规则时，红色节点的个数不会超过黑色节点（1个或者h个），从而最长路径的最大长度为2h，因为红色节点是在黑色节点出现后才会出现。</p> <p>如果按照下图的插入方式导致红色节点连续出现：</p> <p><a class=glightbox href="12. 红黑树.assets\image1.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="12. 红黑树.assets\image1.png" style=zoom:50%;></a></p> <p>违反了规则二，此时最短路径的长度的两倍会小于最长路径的长度，从而打破了红黑树的平衡。</p> <p>如果插入的27为黑色节点，则最长路径的长度增加，并且黑色节点的个数也增加，违反了规则三，此时对于其他路径来说也需要增加一个黑色节点。</p> <p>所以为了维持平衡，不可以插入黑色节点，此时最长路径的长度刚好为2h，如下图所示：</p> <p><a class=glightbox href="12. 红黑树.assets\image2.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="12. 红黑树.assets\image2.png" style=zoom:50%;></a></p> <p>综上所述，在满足第二条规则和第三条规则下可以保证红黑树的最长路径始终不会超过最短路径的2倍</p> <h2 id=_4>红黑树节点的插入<a class=headerlink href=#_4 title="Permanent link">&para;</a></h2> <p>根据红黑树的性质可以看出红黑树如何控制高度近似平衡，但是如果插入了节点，可能会破坏原有的平衡，此时需要通过重新填色或者旋转调整使红黑树重新达到平衡</p> <p>在前面的分析中可以得知，如果插入的节点是黑色节点，可能会导致每一条路径都需要多一个黑色节点，为了更加方便处理，<strong>规定插入的节点是红色节点</strong></p> <h3 id=1>情况1：不需要调整<a class=headerlink href=#1 title="Permanent link">&para;</a></h3> <p>如果插入的节点是<strong>红色节点</strong>，并且其父亲节点是<strong>黑色节点</strong>，此时不需要进行任何处理，当父亲节点是黑色节点时，保证了规则三没有违背，因为黑色节点的个数决定了高度，插入前如果保证原树是红黑树，那么高度一定满足红黑树的近似平衡，并且此时插入红色节点也不会违背规则二，如下图的一种情况所示：</p> <p><a class=glightbox href="12. 红黑树.assets\image2.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="12. 红黑树.assets\image2.png" style=zoom:50%;></a></p> <h3 id=2uncle>情况2：<code>uncle</code>节点为红色<a class=headerlink href=#2uncle title="Permanent link">&para;</a></h3> <p>如果<code>cur</code>的节点是红色，并且其父亲节点（假设为<code>parent</code>）是红色节点，此时说明父亲的兄弟节点（假设为<code>uncle</code>）也一定为红色，因为插入前一定是红黑树（插入前不是红黑树那么插入前就已经出现了不平衡，需要进行调整），当父亲节点时红色，说明父亲节点所在的路径缺少黑色节点，违反了规则三。父亲节点的父亲节点（假设为<code>grandfather</code>）也一定为黑色，如果为红色则违反了第二条规则所以插入前的状态应该为：</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><code>cur</code>节点可能为新增的红色节点，也可能为上一次调整变为的红色节点</p> </div> <p><a class=glightbox href="12. 红黑树.assets\image4.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="12. 红黑树.assets\image4.png" style=zoom:50%;></a></p> <ol> <li> <p>假设a、b、c、d和e为黑色节点个数为0的红黑树，此时<code>cur</code>为新插入节点如下图所示：</p> <p><a class=glightbox href="12. 红黑树.assets\image5.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="12. 红黑树.assets\image5.png"></a></p> <p>因为出现了连续的红色节点，为了恢复红黑树的平衡，此时需要进行调整，因为<code>uncle</code>节点为红色，为了保证每条路径上都有一个黑色节点并且保证没有连续的红色节点出现，将<code>parent</code>节点的颜色改为黑色，将<code>uncle</code>节点的颜色改为黑色，将<code>grandfather</code>节点改为红色（如果<code>grandfather</code>节点为根节点则再处理为黑色），处理完后，<code>cur = grandfather</code>继续向上调整直到遇到根节点：</p> <p><a class=glightbox href="12. 红黑树.assets\image6.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="12. 红黑树.assets\image6.png"></a></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>对于<code>uncle</code>为红色的情况来说，不需要考虑插入位置在<code>parent</code>左或者右、<code>parent</code>在<code>grandfather</code>的左或者右已经<code>uncle</code>在<code>grandfather</code>的左或者右，因为不论是哪种情况，本质都是将<code>uncle</code>和<code>parent</code>变为黑色增加两边路径的黑色节点使其满足规则二和规则三</p> </div> </li> <li> <p>假设a、b、c、d和e为黑色节点个数大于0，此时<code>cur</code>为上一次调整变成的红色节点，如下图所示：</p> <p><a class=glightbox href="12. 红黑树.assets\image7.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="12. 红黑树.assets\image7.png"></a></p> <p>对于当前情况来说，只有<code>cur</code>位置的节点是红色，其余几棵子树已经通过调整变成了符合规则的红黑树，所以也可以归类为上面的情形，处理方式与上面相同</p> </li> </ol> <h3 id=3uncle>情况3：<code>uncle</code>节点为黑色<a class=headerlink href=#3uncle title="Permanent link">&para;</a></h3> <p><code>uncle</code>节点为黑色时一共有两种情况：</p> <ol> <li><code>uncle</code>节点不存在</li> <li><code>uncle</code>节点存在且为黑</li> </ol> <p>因为红黑树规定下空节点是黑色的，所以<code>uncle</code>节点不存在与存在且为黑可以视为一种情况，下面主要以<code>uncle</code>节点不存在进行分析，对于<code>uncle</code>节点存在且为黑的情况给出一种分析，剩下与<code>uncle</code>节点不存在的情况类似</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>下面分析中，<code>uncle</code>节点不存在时将不展示<code>NIL</code>节点</p> </div> <p>当<code>cur</code>节点在<code>parent</code>的右子树并且<code>parent</code>在<code>grandfather</code>的右子树时，并且<code>uncle</code>不存在时，此时需要进行左单旋，将<code>parent</code>的颜色更新为黑色，<code>grandfather</code>的颜色更新为红色，因为如果仅仅是将<code>parent</code>变成黑色，则依旧不满足规则三，其余路径还是少一个黑色节点，通过左单旋使得当前子树的根节点变为黑色时可以使当前根节点出发的所有路径都至少有一个黑色节点，如下图所示：</p> <p><a class=glightbox href="12. 红黑树.assets\image8.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="12. 红黑树.assets\image8.png"></a></p> <p>当<code>cur</code>节点在<code>parent</code>的左子树并且<code>parent</code>在<code>grandfather</code>的左子树时，此时需要进行右单旋，将<code>parent</code>的颜色更新为黑色，<code>grandfather</code>的颜色更新为红色，原因类比左单旋，过程如下图所示：</p> <p><a class=glightbox href="12. 红黑树.assets\image9.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="12. 红黑树.assets\image9.png"></a></p> <p>当<code>cur</code>节点在<code>parent</code>的左子树并且<code>parent</code>在<code>grandfather</code>的右子树时，此时需要进行右左双旋，将<code>cur</code>的颜色更新为黑色，将<code>grandfather</code>的颜色更新为红色，过程如下：</p> <p><a class=glightbox href="12. 红黑树.assets\image10.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="12. 红黑树.assets\image10.png"></a></p> <p>当<code>cur</code>节点在<code>parent</code>的右子树并且<code>parent</code>在<code>grandfather</code>的左子树时，此时需要进行左右双旋，将<code>cur</code>的颜色更新为黑色，将<code>grandfather</code>的颜色更新为红色，过程如下：</p> <p><a class=glightbox href="12. 红黑树.assets\image11.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="12. 红黑树.assets\image11.png"></a></p> <p>如果<code>uncle</code>节点本身存在，那么经过<code>uncle</code>节点的路径下方的两个子树为红色，而<code>parent</code>插入节点前至少会有一个黑色节点，如下图所示：</p> <p><a class=glightbox href="12. 红黑树.assets\image12.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="12. 红黑树.assets\image12.png" style=zoom:50%;></a></p> <p>此时在<code>parent</code>的右侧插入一个<code>cur</code>节点（本身就是红色节点<code>cur</code>节点也是如此）如下：</p> <p><a class=glightbox href="12. 红黑树.assets\image13.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="12. 红黑树.assets\image13.png" style=zoom:50%;></a></p> <p>此时如果只是对<code>parent</code>节点的颜色进行改变，则会出现<code>parent</code>所在路径比<code>uncle</code>所在路径多一个黑色节点，所以为了解决这个问题，单单改变颜色无法解决，当<code>cur</code>在<code>parent</code>的右边时，只需要一次左单旋即可，而<code>cur</code>在<code>parent</code>的左边时，需要先进行右旋再进行左旋，以右左双旋为例，如下图所示：</p> <p><a class=glightbox href="12. 红黑树.assets\image14.png" data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src="12. 红黑树.assets\image14.png"></a></p> <p>对于其他两种情况也是一样的道理，此处不再赘述</p> <h2 id=_5>总结与代码实现<a class=headerlink href=#_5 title="Permanent link">&para;</a></h2> <p>红黑树的插入过程一共有三种情况：</p> <ol> <li>当插入节点的父亲节点为黑色时，直接插入节点即可，不需要进行任何调整</li> <li>当uncle节点为红色时，<code>cur</code>节点的<code>parent</code>节点和<code>uncle</code>节点均变为黑色，将所在子树的根节点变为红色，如果子树的根节点为整棵树的根节点，则再处理为黑色</li> <li>当uncle节点为黑色（包括空节点的黑色和存在且为黑色节点）时，需要进行旋转<ol> <li><code>parent</code>和<code>cur</code>节点是同方向时，进行一次旋转（左旋或者右旋），将<code>parent</code>节点变为黑色，将<code>grandfather</code>节点变为红色，此时因为parent是本棵子树的根，所以更新完后当前子树也是一棵红黑树，颜色是黑色不需要再进行调整</li> <li><code>parent</code>和<code>cur</code>节点不是同方向时，进行两次旋转（先左后右或者先右后左），再将<code>cur</code>节点变为黑色，<code>grandfather</code>节点变为红色，更新完后当前子树也是一棵红黑树，并且因为<code>cur</code>的颜色是黑色不需要再进行调整</li> </ol> </li> </ol> <p>代码实现：</p> <div class="language-c++ highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C++</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>  1</span>
<span class=normal>  2</span>
<span class=normal>  3</span>
<span class=normal>  4</span>
<span class=normal>  5</span>
<span class=normal>  6</span>
<span class=normal>  7</span>
<span class=normal>  8</span>
<span class=normal>  9</span>
<span class=normal> 10</span>
<span class=normal> 11</span>
<span class=normal> 12</span>
<span class=normal> 13</span>
<span class=normal> 14</span>
<span class=normal> 15</span>
<span class=normal> 16</span>
<span class=normal> 17</span>
<span class=normal> 18</span>
<span class=normal> 19</span>
<span class=normal> 20</span>
<span class=normal> 21</span>
<span class=normal> 22</span>
<span class=normal> 23</span>
<span class=normal> 24</span>
<span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><span class=c1>// 树插入</span>
</span><span id=__span-0-2><span class=kt>bool</span><span class=w> </span><span class=nf>insertNode</span><span class=p>(</span><span class=k>const</span><span class=w> </span><span class=n>pair</span><span class=o>&lt;</span><span class=n>T</span><span class=p>,</span><span class=w> </span><span class=n>V</span><span class=o>&gt;&amp;</span><span class=w> </span><span class=n>kv</span><span class=p>)</span>
</span><span id=__span-0-3><span class=p>{</span>
</span><span id=__span-0-4><span class=w>    </span><span class=c1>// 判断key是否已经存在</span>
</span><span id=__span-0-5><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>findNode</span><span class=p>(</span><span class=n>kv</span><span class=p>.</span><span class=n>first</span><span class=p>))</span>
</span><span id=__span-0-6><span class=w>    </span><span class=p>{</span>
</span><span id=__span-0-7><span class=w>        </span><span class=c1>// 已经存在时插入失败</span>
</span><span id=__span-0-8><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=nb>false</span><span class=p>;</span>
</span><span id=__span-0-9><span class=w>    </span><span class=p>}</span>
</span><span id=__span-0-10><span class=w>    </span><span class=c1>// 判断根节点是否为空，为空则作为第一个节点</span>
</span><span id=__span-0-11><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>_root</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=k>nullptr</span><span class=p>)</span>
</span><span id=__span-0-12><span class=w>    </span><span class=p>{</span>
</span><span id=__span-0-13><span class=w>        </span><span class=n>_root</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>node</span><span class=p>(</span><span class=n>kv</span><span class=p>);</span>
</span><span id=__span-0-14><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=nb>true</span><span class=p>;</span>
</span><span id=__span-0-15><span class=w>    </span><span class=p>}</span>
</span><span id=__span-0-16><span class=w>    </span><span class=c1>// 根节点不为空时接着遍历插入</span>
</span><span id=__span-0-17><span class=w>    </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_root</span><span class=p>;</span>
</span><span id=__span-0-18><span class=w>    </span><span class=c1>// 定义父亲节点记录父亲的位置</span>
</span><span id=__span-0-19><span class=w>    </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>_root</span><span class=p>;</span>
</span><span id=__span-0-20><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>cur</span><span class=p>)</span>
</span><span id=__span-0-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-0-22><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>kv</span><span class=p>.</span><span class=n>first</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_kv</span><span class=p>.</span><span class=n>first</span><span class=p>)</span>
</span><span id=__span-0-23><span class=w>        </span><span class=p>{</span>
</span><span id=__span-0-24><span class=w>            </span><span class=c1>// 大于根节点数据，插入在右子树，走到左子树的空位置</span>
</span><span id=__span-0-25><span class=w>            </span><span class=n>parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=p>;</span>
</span><span id=__span-0-26><span class=w>            </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_right</span><span class=p>;</span>
</span><span id=__span-0-27><span class=w>        </span><span class=p>}</span>
</span><span id=__span-0-28><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>kv</span><span class=p>.</span><span class=n>first</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_kv</span><span class=p>.</span><span class=n>first</span><span class=p>)</span>
</span><span id=__span-0-29><span class=w>        </span><span class=p>{</span>
</span><span id=__span-0-30><span class=w>            </span><span class=c1>// 小于根节点数据，插入在左子树，走到右子树的空位置</span>
</span><span id=__span-0-31><span class=w>            </span><span class=n>parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=p>;</span>
</span><span id=__span-0-32><span class=w>            </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_left</span><span class=p>;</span>
</span><span id=__span-0-33><span class=w>        </span><span class=p>}</span>
</span><span id=__span-0-34><span class=w>    </span><span class=p>}</span>
</span><span id=__span-0-35>
</span><span id=__span-0-36><span class=w>    </span><span class=c1>// 创建node节点</span>
</span><span id=__span-0-37><span class=w>    </span><span class=c1>// 创建节点可以使用新节点，但是要使cur走到新节点的位置，便于下面判断新节点的平衡因子，再通过cur判断祖先节点的平衡因子</span>
</span><span id=__span-0-38><span class=w>    </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>node</span><span class=p>(</span><span class=n>kv</span><span class=p>);</span>
</span><span id=__span-0-39>
</span><span id=__span-0-40><span class=w>    </span><span class=c1>// parent为叶子节点，链接新节点</span>
</span><span id=__span-0-41><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_kv</span><span class=p>.</span><span class=n>first</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>kv</span><span class=p>.</span><span class=n>first</span><span class=p>)</span>
</span><span id=__span-0-42><span class=w>    </span><span class=p>{</span>
</span><span id=__span-0-43><span class=w>        </span><span class=c1>// 如果是右子树，则插入在右子树</span>
</span><span id=__span-0-44><span class=w>        </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_right</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=p>;</span>
</span><span id=__span-0-45><span class=w>    </span><span class=p>}</span>
</span><span id=__span-0-46><span class=w>    </span><span class=k>else</span>
</span><span id=__span-0-47><span class=w>    </span><span class=p>{</span>
</span><span id=__span-0-48><span class=w>        </span><span class=c1>// 否则插入在左子树</span>
</span><span id=__span-0-49><span class=w>        </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_left</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=p>;</span>
</span><span id=__span-0-50><span class=w>    </span><span class=p>}</span>
</span><span id=__span-0-51>
</span><span id=__span-0-52><span class=w>    </span><span class=c1>// 链接父亲</span>
</span><span id=__span-0-53><span class=w>    </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=p>;</span>
</span><span id=__span-0-54><span class=w>    </span><span class=c1>// 插入节点颜色为红色</span>
</span><span id=__span-0-55><span class=w>    </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Red</span><span class=p>;</span>
</span><span id=__span-0-56>
</span><span id=__span-0-57><span class=w>    </span><span class=c1>// 存在父亲且当父亲节点为红色时需要判断是否更新</span>
</span><span id=__span-0-58><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>parent</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_parent</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>Red</span><span class=p>)</span>
</span><span id=__span-0-59><span class=w>    </span><span class=p>{</span>
</span><span id=__span-0-60><span class=w>        </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>grandfather</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_parent</span><span class=p>;</span>
</span><span id=__span-0-61><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_right</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>parent</span><span class=p>)</span>
</span><span id=__span-0-62><span class=w>        </span><span class=p>{</span>
</span><span id=__span-0-63><span class=w>            </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>uncle</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_left</span><span class=p>;</span>
</span><span id=__span-0-64><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>uncle</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>uncle</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>Red</span><span class=p>)</span>
</span><span id=__span-0-65><span class=w>            </span><span class=p>{</span>
</span><span id=__span-0-66><span class=w>                </span><span class=c1>// 叔叔存在且为红</span>
</span><span id=__span-0-67><span class=w>                </span><span class=n>uncle</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Black</span><span class=p>;</span>
</span><span id=__span-0-68><span class=w>                </span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Red</span><span class=p>;</span>
</span><span id=__span-0-69>
</span><span id=__span-0-70><span class=w>                </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>grandfather</span><span class=p>;</span>
</span><span id=__span-0-71><span class=w>                </span><span class=n>parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_parent</span><span class=p>;</span>
</span><span id=__span-0-72><span class=w>            </span><span class=p>}</span>
</span><span id=__span-0-73><span class=w>            </span><span class=k>else</span>
</span><span id=__span-0-74><span class=w>            </span><span class=p>{</span>
</span><span id=__span-0-75><span class=w>                </span><span class=c1>// cur在parent的右孩子</span>
</span><span id=__span-0-76><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>cur</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_right</span><span class=p>)</span>
</span><span id=__span-0-77><span class=w>                </span><span class=p>{</span>
</span><span id=__span-0-78><span class=w>                    </span><span class=c1>// 右右-&gt;左单旋</span>
</span><span id=__span-0-79><span class=w>                    </span><span class=n>rotateLeft</span><span class=p>(</span><span class=n>grandfather</span><span class=p>);</span>
</span><span id=__span-0-80><span class=w>                    </span><span class=c1>// 改变颜色</span>
</span><span id=__span-0-81><span class=w>                    </span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Red</span><span class=p>;</span>
</span><span id=__span-0-82><span class=w>                    </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Black</span><span class=p>;</span>
</span><span id=__span-0-83><span class=w>                </span><span class=p>}</span>
</span><span id=__span-0-84><span class=w>                </span><span class=k>else</span>
</span><span id=__span-0-85><span class=w>                </span><span class=p>{</span>
</span><span id=__span-0-86><span class=w>                    </span><span class=c1>// 右左-&gt;右左双旋</span>
</span><span id=__span-0-87><span class=w>                    </span><span class=n>rotateRight</span><span class=p>(</span><span class=n>parent</span><span class=p>);</span>
</span><span id=__span-0-88><span class=w>                    </span><span class=n>rotateLeft</span><span class=p>(</span><span class=n>grandfather</span><span class=p>);</span>
</span><span id=__span-0-89>
</span><span id=__span-0-90><span class=w>                    </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Black</span><span class=p>;</span>
</span><span id=__span-0-91><span class=w>                    </span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Red</span><span class=p>;</span>
</span><span id=__span-0-92><span class=w>                </span><span class=p>}</span>
</span><span id=__span-0-93><span class=w>                </span><span class=c1>// 旋转结束后不需要再向上更新</span>
</span><span id=__span-0-94><span class=w>                </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-0-95><span class=w>            </span><span class=p>}</span>
</span><span id=__span-0-96><span class=w>        </span><span class=p>}</span>
</span><span id=__span-0-97><span class=w>        </span><span class=k>else</span>
</span><span id=__span-0-98><span class=w>        </span><span class=p>{</span>
</span><span id=__span-0-99><span class=w>            </span><span class=n>node</span><span class=o>*</span><span class=w> </span><span class=n>uncle</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_right</span><span class=p>;</span>
</span><span id=__span-0-100><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>uncle</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>uncle</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>Red</span><span class=p>)</span>
</span><span id=__span-0-101><span class=w>            </span><span class=p>{</span>
</span><span id=__span-0-102><span class=w>                </span><span class=c1>// 叔叔存在且为红</span>
</span><span id=__span-0-103><span class=w>                </span><span class=n>uncle</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Black</span><span class=p>;</span>
</span><span id=__span-0-104><span class=w>                </span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Red</span><span class=p>;</span>
</span><span id=__span-0-105>
</span><span id=__span-0-106><span class=w>                </span><span class=c1>// 继续向上更新</span>
</span><span id=__span-0-107><span class=w>                </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>grandfather</span><span class=p>;</span>
</span><span id=__span-0-108><span class=w>                </span><span class=n>parent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_parent</span><span class=p>;</span>
</span><span id=__span-0-109><span class=w>            </span><span class=p>}</span>
</span><span id=__span-0-110><span class=w>            </span><span class=k>else</span>
</span><span id=__span-0-111><span class=w>            </span><span class=p>{</span>
</span><span id=__span-0-112><span class=w>                </span><span class=k>if</span><span class=p>(</span><span class=n>cur</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_left</span><span class=p>)</span>
</span><span id=__span-0-113><span class=w>                </span><span class=p>{</span>
</span><span id=__span-0-114><span class=w>                    </span><span class=c1>// 叔叔不存在</span>
</span><span id=__span-0-115><span class=w>                    </span><span class=c1>// 左左-&gt;右单旋</span>
</span><span id=__span-0-116><span class=w>                    </span><span class=n>rotateRight</span><span class=p>(</span><span class=n>grandfather</span><span class=p>);</span>
</span><span id=__span-0-117><span class=w>                    </span><span class=c1>// 改变颜色</span>
</span><span id=__span-0-118><span class=w>                    </span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Red</span><span class=p>;</span>
</span><span id=__span-0-119><span class=w>                    </span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Black</span><span class=p>;</span>
</span><span id=__span-0-120><span class=w>                </span><span class=p>}</span>
</span><span id=__span-0-121><span class=w>                </span><span class=k>else</span>
</span><span id=__span-0-122><span class=w>                </span><span class=p>{</span>
</span><span id=__span-0-123><span class=w>                    </span><span class=c1>// 左右-&gt;左右双旋</span>
</span><span id=__span-0-124><span class=w>                    </span><span class=n>rotateLeft</span><span class=p>(</span><span class=n>parent</span><span class=p>);</span>
</span><span id=__span-0-125><span class=w>                    </span><span class=n>rotateRight</span><span class=p>(</span><span class=n>grandfather</span><span class=p>);</span>
</span><span id=__span-0-126>
</span><span id=__span-0-127><span class=w>                    </span><span class=c1>// 改变颜色</span>
</span><span id=__span-0-128><span class=w>                    </span><span class=n>grandfather</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Red</span><span class=p>;</span>
</span><span id=__span-0-129><span class=w>                    </span><span class=n>cur</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Black</span><span class=p>;</span>
</span><span id=__span-0-130><span class=w>                </span><span class=p>}</span>
</span><span id=__span-0-131><span class=w>                </span><span class=c1>// 旋转结束后不需要再向上更新</span>
</span><span id=__span-0-132><span class=w>                </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-0-133><span class=w>            </span><span class=p>}</span>
</span><span id=__span-0-134><span class=w>        </span><span class=p>}</span>
</span><span id=__span-0-135><span class=w>    </span><span class=p>}</span>
</span><span id=__span-0-136>
</span><span id=__span-0-137><span class=w>    </span><span class=c1>// 根节点为黑色</span>
</span><span id=__span-0-138><span class=w>    </span><span class=n>_root</span><span class=o>-&gt;</span><span class=n>_col</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Black</span><span class=p>;</span>
</span><span id=__span-0-139>
</span><span id=__span-0-140><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=nb>true</span><span class=p>;</span>
</span><span id=__span-0-141><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_6>红黑树的删除（待实现）<a class=headerlink href=#_6 title="Permanent link">&para;</a></h2> <h2 id=_7>红黑树的效率<a class=headerlink href=#_7 title="Permanent link">&para;</a></h2> <p>红黑树和AVL树都是高效的平衡二叉树，增删改查的时间复杂度都是O(<span class=arithmatex>\(log_{2}{N}\)</span>)，红黑树不追求绝对平衡，其只需保证最长路径不超过最短路径的2倍，相对而言，降低了插入和旋转的次数，所以在经常进行增删的结构中性能比AVL树更优，而且红黑树实现比较简单，所以实际运用中红黑树更多</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2025年8月13日</span> </span> </aside> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> 页面有帮助吗？ </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title=页面对我有帮助 data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title=页面没有帮助到我 data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> 谢谢你的反馈！ </div> <div data-md-value=0 hidden> 谢谢你的反馈！联系<a href=https://www.help-doc.top/author/contact/contact.html>作者</a>提供更详细的信息 </div> </div> </div> </fieldset> </form> <!-- Waline 评论系统 --> <div id=waline></div> <!-- 阅读进度条 - 直接在HTML中定义 --> <div class=reading-progress></div> <!-- 滚动指示器 - 直接在HTML中定义 --> <div class=scroll-indicator></div> <!-- 评论系统 --> <!-- Waline 评论系统 --> <div id=waline></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2024-2025 柯懒不是柯南 </div> </div> <div class="md-footer-love md-typeset"> 一闪一闪亮晶晶，不及<span class=love-highlight>小亮</span><span class=love-heart>♥</span>照我心。To Li Liang </div> <div class=md-social> <a href=https://github.com/H0308 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.help-doc.top/author/contact/contact.html target=_blank rel=noopener title=www.help-doc.top class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.indexes", "navigation.prune", "navigation.tabs", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src=../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../javascripts/katex.min.js></script> <script src=../../javascripts/other.min.js></script> <script src=../../javascripts/copyright.min.js></script> <script src=../../javascripts/waline.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js></script> <script src=https://cdn.jsdelivr.net/npm/mermaid@11.5.0/dist/mermaid.min.js></script> <script src=../../assets/javascripts/toggle-sidebar.js async></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>