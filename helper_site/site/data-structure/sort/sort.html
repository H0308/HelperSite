<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://www.help-doc.top/data-structure/sort/sort.html><link rel=prev href=../bloom-filter/bloom-filter.html><link rel=next href=../../algorithm/index.html><link rel=icon href=../../images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.12"><title>排序 - 柯懒的知识库</title><link rel=stylesheet href=../../assets/stylesheets/main.2afb09e1.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=stylesheet href=../../css/timeline.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-9XWRGNRRSY"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-9XWRGNRRSY",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-9XWRGNRRSY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=stylesheet href=../../stylesheets/colors.min.css><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (max-width: 1199px)"><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (min-width: 1200px)" id=theme2-desktop><link rel=stylesheet href=../../stylesheets/theme1.min.css media="screen and (min-width: 1200px)" id=theme1-desktop><link rel=stylesheet href=../../stylesheets/print.min.css><link rel=stylesheet href=../../stylesheets/font-dongguanti.min.css id=font-dongguanti><link rel=stylesheet href=../../stylesheets/font-oppoti.min.css id=font-oppoti disabled><link rel=stylesheet href=../../stylesheets/font-jiangchengti.min.css id=font-jiangchengti disabled><link rel=stylesheet href=../../stylesheets/font-lxgw.min.css id=font-lxgw disabled><link rel=stylesheet href=../../stylesheets/code-font-dejavu-sans-mono.min.css id=code-font-dejavu-sans-mono><link rel=stylesheet href=../../stylesheets/code-font-zsft-hk.min.css id=code-font-zsft-hk disabled><link rel=stylesheet href=../../stylesheets/code-font-google-sans-code.min.css id=code-font-google-sans-code disabled><link rel=stylesheet href=https://unpkg.com/@waline/client@v3/dist/waline.css><link rel=stylesheet href=../../stylesheets/waline.min.css><script src=../../javascripts/start.min.js></script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#_1 class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../index.html title=柯懒的知识库 class="md-header__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 柯懒的知识库 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 排序 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan aria-label type=radio name=__palette id=__palette_1> </form> <!-- 头像元素 - 直接在HTML中定义 --> <div class=header-avatar> <img src=../../author/作者.assets/20250206-200653.jpg alt=头像> <div class=avatar-dropdown> <p><strong>柯懒不是柯南</strong></p> <a href=../../author/contact/contact.html class=avatar-dropdown-item>吵醒柯懒</a> <div class=avatar-dropdown-divider></div> <a href=../../author/about/about.html class=avatar-dropdown-item>柯懒自传</a> <div class=avatar-dropdown-divider></div> <a href=https://github.com/H0308 class=avatar-dropdown-item>柯懒的零食库</a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=查找> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <!-- 独立的切换按钮 --> <div class=toolbar-toggle-btn id=toolbarToggleBtn onclick=toggleToolbar()> <div class=toggle-icon> <svg class=toggle-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=16 height=16> <path d="M346.538667 1024L170.666667 853.333333l341.333333-341.333333-341.333333-341.333333 175.872-170.666667L853.333333 512z" fill=currentColor></path> </svg> </div> </div> <!-- 右侧固定功能条 - 独立于内容区 --> <div class=floating-toolbar id=floatingToolbar> <!-- 字体切换功能 --> <div class="toolbar-item font-switcher"> <div class=toolbar-icon> <svg class=font-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M913.408 1024l-66.56 0q-29.696 0-51.2-5.12t-36.864-15.872-26.112-27.136-19.968-37.888q-15.36-38.912-28.16-70.656t-22.016-55.296q-11.264-26.624-20.48-49.152l-254.976 0q-7.168 23.552-17.408 51.2-8.192 23.552-21.504 56.832t-30.72 72.192q-20.48 46.08-47.104 63.488t-60.416 17.408l-70.656 0q-45.056 0-60.928-19.968t2.56-68.096q18.432-46.08 43.008-108.544t52.224-132.608 57.344-143.872 57.344-144.384q65.536-164.864 137.216-343.04 7.168-17.408 18.432-31.744 10.24-11.264 27.136-21.504t42.496-10.24q26.624 0 43.52 10.752t28.16 24.064q12.288 15.36 19.456 33.792 72.704 180.224 138.24 345.088 27.648 70.656 57.344 143.872t56.832 142.336 51.2 129.536 41.472 104.448q14.336 34.816 4.096 62.464t-43.008 27.648zM616.448 634.88l-97.28-347.136-1.024 0-108.544 347.136 206.848 0z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>内容字体</div> <div class=font-dropdown-toolbar> <div class=font-current-toolbar onclick=toggleFontDropdownToolbar()> <span class=current-font-name-toolbar>东观体</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=font-options-toolbar> <div class=font-option-toolbar data-font=dongguanti onclick="selectFontToolbar('dongguanti')">上图东观体 </div> <div class=font-option-toolbar data-font=oppoti onclick="selectFontToolbar('oppoti')">OPPO Sans </div> <div class=font-option-toolbar data-font=jiangchengti onclick="selectFontToolbar('jiangchengti')"> 江城黑体</div> <div class=font-option-toolbar data-font=lxgw onclick="selectFontToolbar('lxgw')">霞鹜臻楷</div> </div> </div> </div> <!-- 代码字体切换功能 --> <div class="toolbar-item code-font-switcher"> <div class=toolbar-icon> <svg t=1753672111433 class="icon code-font-icon" viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg p-id=5148 width=20 height=20> <path d="M941.709938 0H82.290062A82.290062 82.290062 0 0 0 0 82.290062v859.419876A82.290062 82.290062 0 0 0 82.290062 1022.53923h859.419876A82.290062 82.290062 0 0 0 1022.53923 941.709938V82.290062A82.290062 82.290062 0 0 0 941.709938 0zM188.439372 553.631954a40.901569 40.901569 0 0 1-29.215406-70.116975L292.154066 351.558726 159.223966 218.628626a40.901569 40.901569 0 0 1 58.430813-57.94389l160.197813 162.145507a40.901569 40.901569 0 0 1 0 57.943889l-160.197813 160.684736a40.901569 40.901569 0 0 1-29.215407 12.173086z m443.587257 0H405.120304a40.901569 40.901569 0 0 1 0-82.290061H633.000476a40.901569 40.901569 0 0 1 0 82.290061z" fill=currentColor p-id=5149></path> </svg> </div> <div class=toolbar-label>代码字体</div> <div class=code-font-dropdown-toolbar> <div class=code-font-current-toolbar onclick=toggleCodeFontDropdownToolbar()> <span class=current-code-font-name-toolbar>DejaVu Sans Mono</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=code-font-options-toolbar> <div class=code-font-option-toolbar data-code-font=dejavu onclick="selectCodeFontToolbar('dejavu')"> DejaVu Sans Mono</div> <div class=code-font-option-toolbar data-code-font=google-sans-code onclick="selectCodeFontToolbar('google-sans-code')"> Google Sans Code</div> <div class=code-font-option-toolbar data-code-font=zsft onclick="selectCodeFontToolbar('zsft')"> JetBrains Mono</div> </div> </div> </div> <!-- 主题切换功能 --> <div class="toolbar-item theme-switcher" onclick=switchTheme()> <div class=toolbar-icon> <svg class=theme-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M876.572788 522.301623c-1.886977 12.375865-9.657964 30.331819-35.880185 45.48903-56.489572 32.697703-150.21828 83.990926-174.010149 96.958262-13.143345 24.431435-66.067718 122.221646-98.141204 178.503487-16.117073 28.124548-36.055171 34.041304-50.030463 34.041304-0.031722 0-0.031722 0-0.031722 0-14.613836 0-29.1806-6.460132-43.234687-19.218714-47.183626-42.643216-125.994576-117.105115-146.013515-136.083351-27.757181-4.732791-138.338718-23.743774-200.584388-35.752272-17.924231-3.533476-32.649608-14.07046-40.372499-29.084409-5.78782-11.256368-10.281157-30.05962 1.471514-55.658647 26.989701-59.047838 74.126254-157.557432 85.957721-182.196599-3.437286-27.117614-16.996093-135.060045-23.760147-198.905142-1.886977-17.460674 3.901867-35.096333 15.829524-48.351218 12.791327-14.278191 30.667463-21.48943 49.854455-19.426445 63.669088 6.332219 173.259042 19.426445 200.584388 22.705118 24.335245-11.879562 121.085776-58.936297 180.133613-86.34146 9.91379-4.573155 19.85828-6.92369 29.596062-6.92369 28.748764 0 52.172243 20.642133 58.328453 51.421136 12.599969 62.997799 30.93864 166.70272 35.639708 193.484689 18.851347 19.682271 91.953272 96.031147 135.060045 143.07151C872.72004 487.125473 879.307062 504.71406 876.572788 522.301623L876.572788 522.301623zM825.375755 499.085876C776.017604 445.314205 687.245791 352.977193 686.365748 352.017332c-2.942005-3.069919-4.956895-6.971785-5.676279-11.208273-0.207731-1.215688-22.193465-127.001509-36.551474-198.936865-0.799202-3.917216-4.285606-16.836457-16.196891-16.836457-3.453658 0-7.30743 1.006933-11.464099 2.942005-67.282383 31.179117-183.955662 88.180342-185.170327 88.771813-3.693112 1.790786-7.850805 2.558265-11.975752 2.01489-1.295506-0.224104-133.63765-16.165168-205.988468-23.424502-0.079818 0-0.207731 0-0.287549 0-7.30743 0-11.128455 2.89391-13.319353 5.40408-3.677762 4.124947-5.644557 9.91379-5.068436 15.110139 7.674796 72.623018 24.255427 202.934922 24.463158 204.325595 0.511653 4.109598-0.159636 8.266267-1.966795 11.960403-0.591471 1.215688-57.657164 120.04712-88.339977 187.201589-3.565199 7.754614-4.41352 14.214746-2.350534 18.131963 1.935072 3.725858 6.588045 5.820566 10.360975 6.53995 70.719668 13.718443 204.644867 36.519752 206.036563 36.727483 4.189416 0.671289 8.058536 2.686179 11.112082 5.580089 1.006933 0.87902 96.414887 91.281983 150.090367 139.889027 8.314363 7.563256 13.143345 8.106632 14.437827 8.106632 3.485381 0 8.314363-4.621251 12.727882-12.391215 36.343743-63.828724 100.011808-181.988868 100.636025-183.155437 1.983167-3.64604 5.004991-6.667863 8.650007-8.650007 1.134847-0.671289 114.418936-62.373583 178.6314-99.516528 8.698103-5.036713 14.278191-10.568706 14.94948-14.854313C834.681702 511.845481 831.49922 505.800811 825.375755 499.085876L825.375755 499.085876zM935.333076 935.670256c-4.157693 4.157693-9.689686 6.299473-15.141862 6.299473-5.548366 0-11.048637-2.142803-15.238053-6.299473l-171.915441-171.915441c-8.362458-8.394181-8.362458-21.98471 0-30.426987 8.394181-8.394181 21.98471-8.394181 30.379914 0l171.915441 171.915441C943.727257 913.684522 943.727257 927.275052 935.333076 935.670256L935.333076 935.670256z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>主题切换</div> </div> <!-- 返回顶部功能 --> <div class="toolbar-item back-to-top" onclick=scrollToTop()> <div class=toolbar-icon> <svg class=back-to-top-icon viewbox="0 0 1024 1024" xmlns=http://www.w3.org/2000/svg> <path d="M882.688 624.128l-336.896-583.68c-15.872-27.136-54.784-27.136-70.656 0L138.24 624.128c-15.872 27.136 4.096 61.44 35.328 61.44H317.44c22.528 0 40.96 18.432 40.96 40.96v239.616c0 22.528 18.432 40.96 40.96 40.96h223.232c22.528 0 40.96-18.432 40.96-40.96v-239.616c0-22.528 18.432-40.96 40.96-40.96h143.872c30.208 0 50.176-34.304 34.304-61.44z"> </path> </svg> </div> <div class=toolbar-label>返回顶部</div> </div> </div> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.html class=md-tabs__link> 主页 </a> </li> <li class=md-tabs__item> <a href=../../intro/intro.html class=md-tabs__link> 网站介绍 </a> </li> <li class=md-tabs__item> <a href=../../timeline/timeline.html class=md-tabs__link> 网站时间线 </a> </li> <li class=md-tabs__item> <a href=../../languages/index.html class=md-tabs__link> 编程语言 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../data-structure-algo/index.html class=md-tabs__link> 数据结构与算法 </a> </li> <li class=md-tabs__item> <a href=../../Linux/index.html class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../front-end/index.html class=md-tabs__link> 前端 </a> </li> <li class=md-tabs__item> <a href=../../MySQL/index.html class=md-tabs__link> MySQL </a> </li> <li class=md-tabs__item> <a href=../../JavaEE/index.html class=md-tabs__link> JavaEE应用开发 </a> </li> <li class=md-tabs__item> <a href=../../other/index.html class=md-tabs__link> 扩展知识 </a> </li> <li class=md-tabs__item> <a href=../../tooltips/index.html class=md-tabs__link> 工具帮助 </a> </li> <li class=md-tabs__item> <a href=../../test-encrypt/test-encrypt.html class=md-tabs__link> 测试加密功能 </a> </li> <li class=md-tabs__item> <a href=../../projects/index.html class=md-tabs__link> 项目 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title=柯懒的知识库 class="md-nav__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> 柯懒的知识库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.html class=md-nav__link> <span class=md-ellipsis> 主页 </span> </a> </li> <li class=md-nav__item> <a href=../../intro/intro.html class=md-nav__link> <span class=md-ellipsis> 网站介绍 </span> </a> </li> <li class=md-nav__item> <a href=../../timeline/timeline.html class=md-nav__link> <span class=md-ellipsis> 网站时间线 </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../languages/index.html class=md-nav__link> <span class=md-ellipsis> 编程语言 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <div class="md-nav__link md-nav__container"> <a href=../../data-structure-algo/index.html class="md-nav__link "> <span class=md-ellipsis> 数据结构与算法 </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> 数据结构与算法 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> 数据结构 </span> </a> <label class="md-nav__link " for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=true> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> 数据结构 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../time-space-complexity/time-space-complexity.html class=md-nav__link> <span class=md-ellipsis> 数据结构基础 </span> </a> </li> <li class=md-nav__item> <a href=../sequential-structure-and-sequential-table/sequential-structure-and-sequential-table.html class=md-nav__link> <span class=md-ellipsis> 顺序结构与顺序表 </span> </a> </li> <li class=md-nav__item> <a href=../linked-list/linked-list.html class=md-nav__link> <span class=md-ellipsis> 链表 </span> </a> </li> <li class=md-nav__item> <a href=../stack/stack.html class=md-nav__link> <span class=md-ellipsis> 栈 </span> </a> </li> <li class=md-nav__item> <a href=../queue/queue.html class=md-nav__link> <span class=md-ellipsis> 队列 </span> </a> </li> <li class=md-nav__item> <a href=../binary-tree/binary-tree.html class=md-nav__link> <span class=md-ellipsis> 树基础与二叉树的实现 </span> </a> </li> <li class=md-nav__item> <a href=../heap/heap.html class=md-nav__link> <span class=md-ellipsis> 堆 </span> </a> </li> <li class=md-nav__item> <a href=../binary-search-tree/binary-search-tree.html class=md-nav__link> <span class=md-ellipsis> 二叉搜索树 </span> </a> </li> <li class=md-nav__item> <a href=../avl-tree/avl-tree.html class=md-nav__link> <span class=md-ellipsis> AVL树 </span> </a> </li> <li class=md-nav__item> <a href=../red-black-tree/red-black-tree.html class=md-nav__link> <span class=md-ellipsis> 红黑树 </span> </a> </li> <li class=md-nav__item> <a href=../hash-table/hash-table.html class=md-nav__link> <span class=md-ellipsis> 哈希表 </span> </a> </li> <li class=md-nav__item> <a href=../bitset/bitset.html class=md-nav__link> <span class=md-ellipsis> 位图 </span> </a> </li> <li class=md-nav__item> <a href=../bloom-filter/bloom-filter.html class=md-nav__link> <span class=md-ellipsis> 布隆过滤器与海量数据处理 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> 排序 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=sort.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> 排序 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=本节目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 本节目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 排序的概念 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 排序的稳定性 </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 常见的排序算法 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 插入排序 </span> </a> <nav class=md-nav aria-label=插入排序> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 直接插入排序 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 希尔排序 </span> </a> <nav class=md-nav aria-label=希尔排序> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 希尔排序基本思路解析 </span> </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 希尔排序优化思路解析 </span> </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 完整希尔排序文件 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 选择排序 </span> </a> <nav class=md-nav aria-label=选择排序> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 选择排序 </span> </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 堆排序 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 交换排序 </span> </a> <nav class=md-nav aria-label=交换排序> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 冒泡排序 </span> </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 快速排序 </span> </a> <nav class=md-nav aria-label=快速排序> <ul class=md-nav__list> <li class=md-nav__item> <a href=#hoare class=md-nav__link> <span class=md-ellipsis> Hoare版本快速排序 </span> </a> </li> <li class=md-nav__item> <a href=#hoare_1 class=md-nav__link> <span class=md-ellipsis> Hoare版本问题分析 </span> </a> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> <span class=md-ellipsis> 挖坑法快速排序 </span> </a> </li> <li class=md-nav__item> <a href=#_18 class=md-nav__link> <span class=md-ellipsis> 前后指针法快速排序 </span> </a> </li> <li class=md-nav__item> <a href=#_19 class=md-nav__link> <span class=md-ellipsis> 快速排序优化 </span> </a> </li> <li class=md-nav__item> <a href=#_20 class=md-nav__link> <span class=md-ellipsis> 快速排序非递归版 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_21 class=md-nav__link> <span class=md-ellipsis> 归并排序 </span> </a> <nav class=md-nav aria-label=归并排序> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_22 class=md-nav__link> <span class=md-ellipsis> 递归版本 </span> </a> </li> <li class=md-nav__item> <a href=#_23 class=md-nav__link> <span class=md-ellipsis> 非递归版本 </span> </a> </li> <li class=md-nav__item> <a href=#_24 class=md-nav__link> <span class=md-ellipsis> 归并排序小优化 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_25 class=md-nav__link> <span class=md-ellipsis> 计数排序 </span> </a> <nav class=md-nav aria-label=计数排序> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_26 class=md-nav__link> <span class=md-ellipsis> 计数排序基本思路 </span> </a> </li> <li class=md-nav__item> <a href=#_27 class=md-nav__link> <span class=md-ellipsis> 计数排序改进思路 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../algorithm/index.html class=md-nav__link> <span class=md-ellipsis> 算法 </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Linux/index.html class=md-nav__link> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../front-end/index.html class=md-nav__link> <span class=md-ellipsis> 前端 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../MySQL/index.html class=md-nav__link> <span class=md-ellipsis> MySQL </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../JavaEE/index.html class=md-nav__link> <span class=md-ellipsis> JavaEE应用开发 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../other/index.html class=md-nav__link> <span class=md-ellipsis> 扩展知识 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tooltips/index.html class=md-nav__link> <span class=md-ellipsis> 工具帮助 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../test-encrypt/test-encrypt.html class=md-nav__link> <span class=md-ellipsis> 测试加密功能 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../projects/index.html class=md-nav__link> <span class=md-ellipsis> 项目 </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=本节目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 本节目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 排序的概念 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 排序的稳定性 </span> </a> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 常见的排序算法 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 插入排序 </span> </a> <nav class=md-nav aria-label=插入排序> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 直接插入排序 </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 希尔排序 </span> </a> <nav class=md-nav aria-label=希尔排序> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 希尔排序基本思路解析 </span> </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 希尔排序优化思路解析 </span> </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 完整希尔排序文件 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 选择排序 </span> </a> <nav class=md-nav aria-label=选择排序> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 选择排序 </span> </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 堆排序 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 交换排序 </span> </a> <nav class=md-nav aria-label=交换排序> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 冒泡排序 </span> </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 快速排序 </span> </a> <nav class=md-nav aria-label=快速排序> <ul class=md-nav__list> <li class=md-nav__item> <a href=#hoare class=md-nav__link> <span class=md-ellipsis> Hoare版本快速排序 </span> </a> </li> <li class=md-nav__item> <a href=#hoare_1 class=md-nav__link> <span class=md-ellipsis> Hoare版本问题分析 </span> </a> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> <span class=md-ellipsis> 挖坑法快速排序 </span> </a> </li> <li class=md-nav__item> <a href=#_18 class=md-nav__link> <span class=md-ellipsis> 前后指针法快速排序 </span> </a> </li> <li class=md-nav__item> <a href=#_19 class=md-nav__link> <span class=md-ellipsis> 快速排序优化 </span> </a> </li> <li class=md-nav__item> <a href=#_20 class=md-nav__link> <span class=md-ellipsis> 快速排序非递归版 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_21 class=md-nav__link> <span class=md-ellipsis> 归并排序 </span> </a> <nav class=md-nav aria-label=归并排序> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_22 class=md-nav__link> <span class=md-ellipsis> 递归版本 </span> </a> </li> <li class=md-nav__item> <a href=#_23 class=md-nav__link> <span class=md-ellipsis> 非递归版本 </span> </a> </li> <li class=md-nav__item> <a href=#_24 class=md-nav__link> <span class=md-ellipsis> 归并排序小优化 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_25 class=md-nav__link> <span class=md-ellipsis> 计数排序 </span> </a> <nav class=md-nav aria-label=计数排序> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_26 class=md-nav__link> <span class=md-ellipsis> 计数排序基本思路 </span> </a> </li> <li class=md-nav__item> <a href=#_27 class=md-nav__link> <span class=md-ellipsis> 计数排序改进思路 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=_1>排序<a class=headerlink href=#_1 title="Permanent link">&para;</a></h1> <div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;"> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span> 约 5149 个字 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"/></svg></span> 1103 行代码 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"/></svg></span> 29 张图片 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span> 预计阅读时间 31 分钟</p> </div> <h2 id=_2>排序的概念<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <p>排序：所谓排序，就是使一串记录，按照其中的某个或某些关键字的大小，递增或递减的排列起来的操作</p> <h2 id=_3>排序的稳定性<a class=headerlink href=#_3 title="Permanent link">&para;</a></h2> <p>假定在待排序的记录序列中，存在多个具有相同的关键字的记录，若经过排序，这些记录的相对次序保持不变，即在原序列中，<code>r[i]=r[j]</code>，且<code>r[i]</code>在<code>r[j]</code>之前，而在排序后的序列中，<code>r[i]</code>仍在<code>r[j]</code>之前，则称这种排序算法是稳定的；否则称为不稳定的</p> <p>内部排序：数据元素全部放在内存中的排序</p> <p>外部排序：数据元素太多不能同时放在内存中，根据排序过程的要求不能在内外存之间移动数据的排序</p> <h2 id=_4>常见的排序算法<a class=headerlink href=#_4 title="Permanent link">&para;</a></h2> <p>本篇将分析下面的图中提到的算法进行：</p> <p><a class=glightbox href=images\image.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image.png></a></p> <p>对应地，每一个排序的函数声明如下：</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1><span class=c1>//常见的排序算法实现</span>
</span><span id=__span-0-2><span class=c1>// 排序实现的接口</span>
</span><span id=__span-0-3>
</span><span id=__span-0-4><span class=c1>// 插入排序</span>
</span><span id=__span-0-5><span class=kt>void</span><span class=w> </span><span class=nf>InsertSort</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>);</span>
</span><span id=__span-0-6>
</span><span id=__span-0-7><span class=c1>// 希尔排序</span>
</span><span id=__span-0-8><span class=kt>void</span><span class=w> </span><span class=nf>ShellSort</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>);</span>
</span><span id=__span-0-9>
</span><span id=__span-0-10><span class=c1>// 选择排序</span>
</span><span id=__span-0-11><span class=kt>void</span><span class=w> </span><span class=nf>SelectSort</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>);</span>
</span><span id=__span-0-12>
</span><span id=__span-0-13><span class=c1>// 堆排序</span>
</span><span id=__span-0-14><span class=kt>void</span><span class=w> </span><span class=nf>AdjustDwon</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>root</span><span class=p>);</span>
</span><span id=__span-0-15><span class=kt>void</span><span class=w> </span><span class=nf>HeapSort</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>);</span>
</span><span id=__span-0-16>
</span><span id=__span-0-17><span class=c1>// 冒泡排序</span>
</span><span id=__span-0-18><span class=kt>void</span><span class=w> </span><span class=nf>BubbleSort</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>)</span>
</span><span id=__span-0-19>
</span><span id=__span-0-20><span class=c1>// 快速排序递归实现</span>
</span><span id=__span-0-21><span class=c1>// 快速排序hoare版本</span>
</span><span id=__span-0-22><span class=kt>int</span><span class=w> </span><span class=n>PartSort1</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-0-23><span class=c1>// 快速排序挖坑法</span>
</span><span id=__span-0-24><span class=kt>int</span><span class=w> </span><span class=nf>PartSort2</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-0-25><span class=c1>// 快速排序前后指针法</span>
</span><span id=__span-0-26><span class=kt>int</span><span class=w> </span><span class=nf>PartSort3</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-0-27><span class=kt>void</span><span class=w> </span><span class=nf>QuickSort</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-0-28>
</span><span id=__span-0-29><span class=c1>// 快速排序 非递归实现</span>
</span><span id=__span-0-30><span class=kt>void</span><span class=w> </span><span class=n>QuickSortNonR</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-0-31>
</span><span id=__span-0-32><span class=c1>// 归并排序递归实现</span>
</span><span id=__span-0-33><span class=kt>void</span><span class=w> </span><span class=n>MergeSort</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>)</span>
</span><span id=__span-0-34><span class=c1>// 归并排序非递归实现</span>
</span><span id=__span-0-35><span class=kt>void</span><span class=w> </span><span class=n>MergeSortNonR</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>)</span>
</span><span id=__span-0-36>
</span><span id=__span-0-37><span class=c1>// 计数排序</span>
</span><span id=__span-0-38><span class=kt>void</span><span class=w> </span><span class=n>CountSort</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>n</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> <p>如果需要简单地比较不同排序算法的时间消耗，可以使用下面的函数：</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><span class=c1>// 测试排序的性能对比</span>
</span><span id=__span-1-2><span class=kt>void</span><span class=w> </span><span class=nf>TestOP</span><span class=p>()</span>
</span><span id=__span-1-3><span class=p>{</span>
</span><span id=__span-1-4><span class=w>    </span><span class=n>srand</span><span class=p>(</span><span class=n>time</span><span class=p>(</span><span class=mi>0</span><span class=p>));</span>
</span><span id=__span-1-5><span class=w>    </span><span class=k>const</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>N</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>100000</span><span class=p>;</span>
</span><span id=__span-1-6><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=n>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=o>*</span><span class=n>N</span><span class=p>);</span>
</span><span id=__span-1-7><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=n>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=o>*</span><span class=n>N</span><span class=p>);</span>
</span><span id=__span-1-8><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a3</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=n>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=o>*</span><span class=n>N</span><span class=p>);</span>
</span><span id=__span-1-9><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a4</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=n>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=o>*</span><span class=n>N</span><span class=p>);</span>
</span><span id=__span-1-10><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a5</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=n>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=o>*</span><span class=n>N</span><span class=p>);</span>
</span><span id=__span-1-11><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>a6</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=n>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=o>*</span><span class=n>N</span><span class=p>);</span>
</span><span id=__span-1-12>
</span><span id=__span-1-13><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>N</span><span class=p>;</span><span class=w> </span><span class=o>++</span><span class=n>i</span><span class=p>)</span>
</span><span id=__span-1-14><span class=w>    </span><span class=p>{</span>
</span><span id=__span-1-15><span class=w>        </span><span class=n>a1</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>rand</span><span class=p>();</span>
</span><span id=__span-1-16><span class=w>        </span><span class=n>a2</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a1</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span><span id=__span-1-17><span class=w>        </span><span class=n>a3</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a1</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span><span id=__span-1-18><span class=w>        </span><span class=n>a4</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a1</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span><span id=__span-1-19><span class=w>        </span><span class=n>a5</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a1</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span><span id=__span-1-20><span class=w>        </span><span class=n>a6</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a1</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span><span id=__span-1-21><span class=w>    </span><span class=p>}</span>
</span><span id=__span-1-22>
</span><span id=__span-1-23><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>begin1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>clock</span><span class=p>();</span>
</span><span id=__span-1-24><span class=w>    </span><span class=n>InsertSort</span><span class=p>(</span><span class=n>a1</span><span class=p>,</span><span class=w> </span><span class=n>N</span><span class=p>);</span>
</span><span id=__span-1-25><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>end1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>clock</span><span class=p>();</span>
</span><span id=__span-1-26>
</span><span id=__span-1-27><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>begin2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>clock</span><span class=p>();</span>
</span><span id=__span-1-28><span class=w>    </span><span class=n>ShellSort</span><span class=p>(</span><span class=n>a2</span><span class=p>,</span><span class=w> </span><span class=n>N</span><span class=p>);</span>
</span><span id=__span-1-29><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>end2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>clock</span><span class=p>();</span>
</span><span id=__span-1-30>
</span><span id=__span-1-31><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>begin3</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>clock</span><span class=p>();</span>
</span><span id=__span-1-32><span class=w>    </span><span class=n>SelectSort</span><span class=p>(</span><span class=n>a3</span><span class=p>,</span><span class=w> </span><span class=n>N</span><span class=p>);</span>
</span><span id=__span-1-33><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>end3</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>clock</span><span class=p>();</span>
</span><span id=__span-1-34>
</span><span id=__span-1-35><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>begin4</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>clock</span><span class=p>();</span>
</span><span id=__span-1-36><span class=w>    </span><span class=n>HeapSort</span><span class=p>(</span><span class=n>a4</span><span class=p>,</span><span class=w> </span><span class=n>N</span><span class=p>);</span>
</span><span id=__span-1-37><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>end4</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>clock</span><span class=p>();</span>
</span><span id=__span-1-38>
</span><span id=__span-1-39><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>begin5</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>clock</span><span class=p>();</span>
</span><span id=__span-1-40><span class=w>    </span><span class=n>QuickSort</span><span class=p>(</span><span class=n>a5</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>N</span><span class=mi>-1</span><span class=p>);</span>
</span><span id=__span-1-41><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>end5</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>clock</span><span class=p>();</span>
</span><span id=__span-1-42>
</span><span id=__span-1-43><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>begin6</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>clock</span><span class=p>();</span>
</span><span id=__span-1-44><span class=w>    </span><span class=n>MergeSort</span><span class=p>(</span><span class=n>a6</span><span class=p>,</span><span class=w> </span><span class=n>N</span><span class=p>);</span>
</span><span id=__span-1-45><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>end6</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>clock</span><span class=p>();</span>
</span><span id=__span-1-46>
</span><span id=__span-1-47><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;InsertSort:%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>end1</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>begin1</span><span class=p>);</span>
</span><span id=__span-1-48><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;ShellSort:%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>end2</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>begin2</span><span class=p>);</span>
</span><span id=__span-1-49><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;SelectSort:%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>end3</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>begin3</span><span class=p>);</span>
</span><span id=__span-1-50><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;HeapSort:%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>end4</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>begin4</span><span class=p>);</span>
</span><span id=__span-1-51><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;QuickSort:%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>end5</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>begin5</span><span class=p>);</span>
</span><span id=__span-1-52><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;MergeSort:%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>end6</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>begin6</span><span class=p>);</span>
</span><span id=__span-1-53>
</span><span id=__span-1-54><span class=w>    </span><span class=n>free</span><span class=p>(</span><span class=n>a1</span><span class=p>);</span>
</span><span id=__span-1-55><span class=w>    </span><span class=n>free</span><span class=p>(</span><span class=n>a2</span><span class=p>);</span>
</span><span id=__span-1-56><span class=w>    </span><span class=n>free</span><span class=p>(</span><span class=n>a3</span><span class=p>);</span>
</span><span id=__span-1-57><span class=w>    </span><span class=n>free</span><span class=p>(</span><span class=n>a4</span><span class=p>);</span>
</span><span id=__span-1-58><span class=w>    </span><span class=n>free</span><span class=p>(</span><span class=n>a5</span><span class=p>);</span>
</span><span id=__span-1-59><span class=w>    </span><span class=n>free</span><span class=p>(</span><span class=n>a6</span><span class=p>);</span>
</span><span id=__span-1-60><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h2 id=_5>插入排序<a class=headerlink href=#_5 title="Permanent link">&para;</a></h2> <h3 id=_6>直接插入排序<a class=headerlink href=#_6 title="Permanent link">&para;</a></h3> <p>所谓直接插入排序，即每一个元素和当前元素之前的元素进行大小比较，如果较大放在该元素的后面，否则放在其前面，如果两个元素相等可以不处理，具体思路分析如下：</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><span class=c1>//以下面的数组为例</span>
</span><span id=__span-2-2><span class=kt>int</span><span class=w> </span><span class=n>data</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>23</span><span class=p>,</span><span class=mi>34</span><span class=p>,</span><span class=mi>84</span><span class=p>,</span><span class=mi>99</span><span class=p>,</span><span class=mi>67</span><span class=p>,</span><span class=mi>26</span><span class=p>,</span><span class=mi>21</span><span class=p>,</span><span class=mi>89</span><span class=w> </span><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p>为了更好理解插入排序，首先考虑在已经有序数组中插入一个数据保证整个数组依旧有序的情况</p> <p>在一个已经有序的数组中插入数据保证整个数组依旧有序，就需要先确定这个元素的插入位置，以升序为例，考虑从后向前比较，如果当前元素大于待插入的元素，那么就需要向后挪动当前数据，这一步是为了确保可以为插入的元素腾出空位，如果当前元素小于待插入的元素，说明该元素的后一个位置就是待插入的元素需要插入的位置</p> <p>因为要涉及到向后挪动数据且插入的元素只有一个，所以插入前需要确保数组的空间大于等于原数组大小+一个元素的大小</p> <p>示意图如下：</p> <p><a class=glightbox href=images\直接插入排序1.gif data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\直接插入排序1.gif></a></p> <p>再根据上面的插入思路扩展到对整个数组进行排序</p> <p>对整个数组进行排序可以考虑额外开辟一个数组，最后将排序的数组覆盖原数组即可，但是这样会有一定空间复杂度消耗，所以本次考虑原地处理</p> <p>因为对整个数组排序就需要依次比较当前元素和当前元素之前的元素，同样考虑升序，如果当前元素比前一个元素小，说明需要进行排序，否则一定可以保证当前元素及之前的元素一定满足升序，下面考虑需要挪动的情况：</p> <p>如果当前元素小于前一个元素，此时就需要找到插入位置，因为当前元素需要改变位置，所以先用一个变量存储当前元素的值，此时就相当于空出一个空间用于挪动数据，再将当前元素之前的元素依次向后挪动（即上面的思路），直到确定插入位置即可</p> <p>因为数组的第一个元素前面没有其他的元素，所以可以直接跳过，从第二个元素开始进行比较</p> <p>示意图如下，以移动一个元素为例：</p> <p><a class=glightbox href=images\直接插入排序2.gif data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\直接插入排序2.gif></a></p> <p>参考代码：</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-3-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-3-2>
</span><span id=__span-3-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-3-4>
</span><span id=__span-3-5><span class=kt>void</span><span class=w> </span><span class=nf>DirectInsert_sort</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-3-6><span class=p>{</span>
</span><span id=__span-3-7><span class=w>    </span><span class=c1>// 遍历数组</span>
</span><span id=__span-3-8><span class=w>    </span><span class=c1>// 只有一个元素时可以不进行排序，所以从第二个元素（下标为1）开始</span>
</span><span id=__span-3-9><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-3-10><span class=w>    </span><span class=p>{</span>
</span><span id=__span-3-11><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>];</span><span class=c1>//获取数组的当前元素</span>
</span><span id=__span-3-12><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=c1>//获取数组的当前元素的上一个元素的下标</span>
</span><span id=__span-3-13><span class=w>        </span><span class=c1>//当遇到比tmp大数值时，挪动数据，直到遇到比当前数据小的数据时跳出循环</span>
</span><span id=__span-3-14><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>end</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>tmp</span><span class=p>)</span>
</span><span id=__span-3-15><span class=w>        </span><span class=p>{</span>
</span><span id=__span-3-16><span class=w>            </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=p>];</span>
</span><span id=__span-3-17><span class=w>            </span><span class=n>end</span><span class=o>--</span><span class=p>;</span>
</span><span id=__span-3-18><span class=w>        </span><span class=p>}</span>
</span><span id=__span-3-19><span class=w>        </span><span class=c1>//在end的后一个位置插入数据，插入完毕后直接更新i和end继续比较</span>
</span><span id=__span-3-20><span class=w>        </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tmp</span><span class=p>;</span>
</span><span id=__span-3-21><span class=w>    </span><span class=p>}</span>
</span><span id=__span-3-22><span class=p>}</span>
</span><span id=__span-3-23>
</span><span id=__span-3-24><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-3-25><span class=p>{</span>
</span><span id=__span-3-26><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>data</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>23</span><span class=p>,</span><span class=mi>34</span><span class=p>,</span><span class=mi>84</span><span class=p>,</span><span class=mi>99</span><span class=p>,</span><span class=mi>67</span><span class=p>,</span><span class=mi>26</span><span class=p>,</span><span class=mi>21</span><span class=p>,</span><span class=mi>89</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-3-27><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>data</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>);</span>
</span><span id=__span-3-28><span class=w>    </span><span class=n>DirectInsert_sort</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>sz</span><span class=p>);</span>
</span><span id=__span-3-29><span class=w>    </span><span class=c1>//打印排序后的数组</span>
</span><span id=__span-3-30><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-3-31><span class=w>        </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d &quot;</span><span class=p>,</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span><span id=__span-3-32>
</span><span id=__span-3-33><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-3-34><span class=p>}</span>
</span><span id=__span-3-35><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-3-36><span class=mi>21</span><span class=w> </span><span class=mi>23</span><span class=w> </span><span class=mi>26</span><span class=w> </span><span class=mi>34</span><span class=w> </span><span class=mi>67</span><span class=w> </span><span class=mi>84</span><span class=w> </span><span class=mi>89</span><span class=w> </span><span class=mi>99</span>
</span></code></pre></div></td></tr></table></div> <p>通过分析可以得出直接插入排序在最坏的情况下（数据为完全逆序的状态）时间复杂度为O(<span class=arithmatex>\(N^2\)</span>)，而在最好的情况下（已经为有序状态，只需要遍历一遍数据即可），时间复杂度为<span class=arithmatex>\(O(N)\)</span></p> <p>因为在比较过程中没有对相等的元素进行判定，即相等的元素之间不会触发移动和交换，所以直接插入排序是稳定的算法</p> <h3 id=_7>希尔排序<a class=headerlink href=#_7 title="Permanent link">&para;</a></h3> <p>希尔排序是直接插入排序的升级版</p> <h4 id=_8>希尔排序基本思路解析<a class=headerlink href=#_8 title="Permanent link">&para;</a></h4> <p>希尔排序的基本思路是将一组数据按照间隔值<code>gap</code>分成<code>gap</code>组，对各组进行插入排序，这一步被称作预排序，接着再使用直接插入排序对整体再进行一次排序，具体过程如下：</p> <p><a class=glightbox href=images\image2.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image2.png></a></p> <p>参考代码如下：</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-4-1><span class=c1>//希尔排序基础思路</span>
</span><span id=__span-4-2><span class=kt>void</span><span class=w> </span><span class=nf>ShellSort</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-4-3><span class=p>{</span>
</span><span id=__span-4-4><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>gap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>3</span><span class=p>;</span>
</span><span id=__span-4-5><span class=w>    </span><span class=c1>//首先进行三组预排序</span>
</span><span id=__span-4-6><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>gap</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-4-7><span class=w>    </span><span class=p>{</span>
</span><span id=__span-4-8><span class=w>        </span><span class=c1>//每一组的排序</span>
</span><span id=__span-4-9><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>gap</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>i</span><span class=p>;</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>;</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>gap</span><span class=p>)</span>
</span><span id=__span-4-10><span class=w>        </span><span class=p>{</span>
</span><span id=__span-4-11><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>gap</span><span class=p>;</span>
</span><span id=__span-4-12><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>j</span><span class=p>];</span>
</span><span id=__span-4-13><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>end</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-4-14><span class=w>            </span><span class=p>{</span>
</span><span id=__span-4-15><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>tmp</span><span class=p>)</span>
</span><span id=__span-4-16><span class=w>                </span><span class=p>{</span>
</span><span id=__span-4-17><span class=w>                    </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>gap</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=p>];</span>
</span><span id=__span-4-18><span class=w>                    </span><span class=n>end</span><span class=w> </span><span class=o>-=</span><span class=w> </span><span class=n>gap</span><span class=p>;</span>
</span><span id=__span-4-19><span class=w>                </span><span class=p>}</span>
</span><span id=__span-4-20><span class=w>                </span><span class=k>else</span>
</span><span id=__span-4-21><span class=w>                </span><span class=p>{</span>
</span><span id=__span-4-22><span class=w>                    </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-4-23><span class=w>                </span><span class=p>}</span>
</span><span id=__span-4-24><span class=w>            </span><span class=p>}</span>
</span><span id=__span-4-25><span class=w>            </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>gap</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tmp</span><span class=p>;</span>
</span><span id=__span-4-26><span class=w>        </span><span class=p>}</span>
</span><span id=__span-4-27><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-28>
</span><span id=__span-4-29><span class=w>    </span><span class=c1>//最后进行整体插入排序</span>
</span><span id=__span-4-30><span class=w>    </span><span class=n>gap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-4-31><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>gap</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=n>gap</span><span class=p>)</span>
</span><span id=__span-4-32><span class=w>    </span><span class=p>{</span>
</span><span id=__span-4-33><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-4-34><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span><span id=__span-4-35><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>end</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-4-36><span class=w>        </span><span class=p>{</span>
</span><span id=__span-4-37><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>tmp</span><span class=p>)</span>
</span><span id=__span-4-38><span class=w>            </span><span class=p>{</span>
</span><span id=__span-4-39><span class=w>                </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>gap</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=p>];</span>
</span><span id=__span-4-40><span class=w>                </span><span class=n>end</span><span class=o>--</span><span class=p>;</span>
</span><span id=__span-4-41><span class=w>            </span><span class=p>}</span>
</span><span id=__span-4-42><span class=w>            </span><span class=k>else</span>
</span><span id=__span-4-43><span class=w>            </span><span class=p>{</span>
</span><span id=__span-4-44><span class=w>                </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-4-45><span class=w>            </span><span class=p>}</span>
</span><span id=__span-4-46><span class=w>        </span><span class=p>}</span>
</span><span id=__span-4-47><span class=w>        </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>gap</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tmp</span><span class=p>;</span>
</span><span id=__span-4-48><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-49><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h4 id=_9>希尔排序优化思路解析<a class=headerlink href=#_9 title="Permanent link">&para;</a></h4> <p>接下来对细节进行分析优化</p> <p>首先是间隔值<code>gap</code>，<code>gap</code>决定了分组的数量，也间接决定了最大值走到最后需要的次数，当<code>gap</code>特别大时，最大值很快就会到数据的最末尾，但是同时整体越不接近需要的升序；相反，当<code>gap</code>特别小时，最大值到数据末尾的次数变多，同时整体越接近有序，所以<code>gap</code>数值不容易确定，但是一般取<code>gap</code>为整体的<code>1/3</code>或者取<code>1/2</code>，即<code>gap = size / 3</code>或<code>gap = size / 2</code> (<code>size</code>是数组长度)</p> <p>第二个问题，如果将预排序和最后的插入排序分开写，那么需要写五个循环，三层循环解决预排序，两层循环解决最后的插入排序，所以可以考虑将预排序与直接插入排序放在一起，达到在同一个循环中解决问题</p> <p>可以考虑将每一次循环变量移动的位置改为移动一位，代替原来的一次移动<code>gap</code>位，如下图所示</p> <p><a class=glightbox href=images\image3.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image3.png></a></p> <p>而改进后的思路与原来的思路对比：原来的思路是先排一组，排完一组后再排第二组，而改进后的思路是遇到i当前位置是哪一组的就排哪一组的数据，但是需要注意的是，当前的<code>tmp</code>所在位置为下一个相差<code>gap</code>的位置，该位置需要有确切的数值可以与<code>end</code>进行比较，所以<code>tmp</code>不能越界，假设当前<code>tmp</code>为3，数组最大下标为7，也就是<code>tmp</code>所在的下标最大只能为7，即<code>i + gap</code>不能超过7，故i最大只能为4，所以i不能超过5</p> <p><a class=glightbox href=images\image4.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image4.png></a></p> <p>接下来是如何处理预排序和之后的直接排序放在一起的问题，对于这个问题，首先就是<code>gap</code>不能为一个固定值，如果<code>gap</code>为固定的某一个数值，例如3，那么预排序和直接插入排序还是需要两组循环才能解决，鉴于<code>gap</code>最后需要回到1，可以考虑从<code>gap/3</code>分组开始，当预排序完<code>gap</code>为3的一组时，接下来排<code>gap</code>为2的一组，最后着排<code>gap</code>为1的一组，因为第一次<code>gap</code>为3时已经将数据处理了一遍，而<code>gap</code>数值越小，就会使预排序的结果更接近预期的排序结果，所以可以考虑<code>gap = gap / 3</code>，每执行完一次预排序就更换一次<code>gap</code>间隔值，从而达到预排序与最后的直接插入排序放在一起，因为当<code>gap</code>为1时也可以满足预排序的思路，故放在一起也不会有任何冲突，只是间隔值从3变成了1,但是需要注意一个问题，当<code>gap</code>小于3时，<code>gap</code>最后的商为0，导致<code>gap</code>无法取到1，所以需要写成<code>gap = gap / 3 + 1</code></p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-5-1><span class=c1>//希尔排序优化思路</span>
</span><span id=__span-5-2><span class=kt>void</span><span class=w> </span><span class=nf>ShellSort_modified</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-5-3><span class=p>{</span>
</span><span id=__span-5-4><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>gap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sz</span><span class=p>;</span>
</span><span id=__span-5-5><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>gap</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>1</span><span class=p>)</span>
</span><span id=__span-5-6><span class=w>    </span><span class=p>{</span>
</span><span id=__span-5-7><span class=w>        </span><span class=n>gap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>gap</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>3</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=c1>// 此处加1是为了确保最后一个gap一定为1，因为最后的直接插入排序是整体各自比较</span>
</span><span id=__span-5-8><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>gap</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-5-9><span class=w>        </span><span class=p>{</span>
</span><span id=__span-5-10><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-5-11><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>gap</span><span class=p>];</span>
</span><span id=__span-5-12><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>end</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-5-13><span class=w>            </span><span class=p>{</span>
</span><span id=__span-5-14><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>tmp</span><span class=p>)</span>
</span><span id=__span-5-15><span class=w>                </span><span class=p>{</span>
</span><span id=__span-5-16><span class=w>                    </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>gap</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=p>];</span>
</span><span id=__span-5-17><span class=w>                    </span><span class=n>end</span><span class=w> </span><span class=o>-=</span><span class=w> </span><span class=n>gap</span><span class=p>;</span>
</span><span id=__span-5-18><span class=w>                </span><span class=p>}</span>
</span><span id=__span-5-19><span class=w>                </span><span class=k>else</span>
</span><span id=__span-5-20><span class=w>                </span><span class=p>{</span>
</span><span id=__span-5-21><span class=w>                    </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-5-22><span class=w>                </span><span class=p>}</span>
</span><span id=__span-5-23><span class=w>            </span><span class=p>}</span>
</span><span id=__span-5-24><span class=w>            </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>gap</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tmp</span><span class=p>;</span>
</span><span id=__span-5-25><span class=w>        </span><span class=p>}</span>
</span><span id=__span-5-26><span class=w>    </span><span class=p>}</span><span class=w>    </span>
</span><span id=__span-5-27><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h4 id=_10>完整希尔排序文件<a class=headerlink href=#_10 title="Permanent link">&para;</a></h4> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-6-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-6-2>
</span><span id=__span-6-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-6-4>
</span><span id=__span-6-5><span class=c1>//希尔排序优化思路</span>
</span><span id=__span-6-6><span class=kt>void</span><span class=w> </span><span class=nf>ShellSort_modified</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-6-7><span class=p>{</span>
</span><span id=__span-6-8><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>gap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sz</span><span class=p>;</span>
</span><span id=__span-6-9><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>gap</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>1</span><span class=p>)</span>
</span><span id=__span-6-10><span class=w>    </span><span class=p>{</span>
</span><span id=__span-6-11><span class=w>        </span><span class=n>gap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>gap</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>3</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=c1>// 此处加1是为了确保最后一个gap一定为1，因为最后的直接插入排序是整体各自比较</span>
</span><span id=__span-6-12><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>gap</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-6-13><span class=w>        </span><span class=p>{</span>
</span><span id=__span-6-14><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-6-15><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>gap</span><span class=p>];</span>
</span><span id=__span-6-16><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>end</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-6-17><span class=w>            </span><span class=p>{</span>
</span><span id=__span-6-18><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>tmp</span><span class=p>)</span>
</span><span id=__span-6-19><span class=w>                </span><span class=p>{</span>
</span><span id=__span-6-20><span class=w>                    </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>gap</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=p>];</span>
</span><span id=__span-6-21><span class=w>                    </span><span class=n>end</span><span class=w> </span><span class=o>-=</span><span class=w> </span><span class=n>gap</span><span class=p>;</span>
</span><span id=__span-6-22><span class=w>                </span><span class=p>}</span>
</span><span id=__span-6-23><span class=w>                </span><span class=k>else</span>
</span><span id=__span-6-24><span class=w>                </span><span class=p>{</span>
</span><span id=__span-6-25><span class=w>                    </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-6-26><span class=w>                </span><span class=p>}</span>
</span><span id=__span-6-27><span class=w>            </span><span class=p>}</span>
</span><span id=__span-6-28><span class=w>            </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>gap</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tmp</span><span class=p>;</span>
</span><span id=__span-6-29><span class=w>        </span><span class=p>}</span>
</span><span id=__span-6-30><span class=w>    </span><span class=p>}</span><span class=w>    </span>
</span><span id=__span-6-31><span class=p>}</span>
</span><span id=__span-6-32>
</span><span id=__span-6-33><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-6-34><span class=p>{</span>
</span><span id=__span-6-35><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>data</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>23</span><span class=p>,</span><span class=mi>34</span><span class=p>,</span><span class=mi>84</span><span class=p>,</span><span class=mi>99</span><span class=p>,</span><span class=mi>67</span><span class=p>,</span><span class=mi>26</span><span class=p>,</span><span class=mi>21</span><span class=p>,</span><span class=mi>89</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-6-36><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>data</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>);</span>
</span><span id=__span-6-37><span class=w>    </span><span class=n>ShellSort_modified</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>sz</span><span class=p>);</span>
</span><span id=__span-6-38><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-6-39><span class=w>    </span><span class=p>{</span>
</span><span id=__span-6-40><span class=w>        </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d &quot;</span><span class=p>,</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span><span id=__span-6-41><span class=w>    </span><span class=p>}</span>
</span><span id=__span-6-42>
</span><span id=__span-6-43><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-6-44><span class=p>}</span>
</span><span id=__span-6-45><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-6-46><span class=mi>21</span><span class=w> </span><span class=mi>23</span><span class=w> </span><span class=mi>26</span><span class=w> </span><span class=mi>34</span><span class=w> </span><span class=mi>67</span><span class=w> </span><span class=mi>84</span><span class=w> </span><span class=mi>89</span><span class=w> </span><span class=mi>99</span>
</span></code></pre></div></td></tr></table></div> <p>希尔排序总结：</p> <ol> <li>希尔排序是对直接插入排序的优化</li> <li>当<code>gap &gt; 1</code>时都是预排序，目的是让数组更接近于有序。当<code>gap == 1</code>时，数组已经接近有序的了，这样就会很快。这样整体而言，可以达到优化的效果。我们实现后可以进行性能测试的对比</li> <li>希尔排序的时间复杂度不好计算，因为<code>gap</code>的取值方法很多，导致很难去计算，因此在好些树中给出的希尔排序的时间复杂度都不固定，因为gap是按照Knuth提出的方式取值的，而且Knuth进行了大量的试验统计，所以时间复杂度就按照O(<span class=arithmatex>\(N^{1.25}\)</span>)到O(<span class=arithmatex>\(1.6 \times N^{1.25}\)</span>)来算</li> <li>稳定性：不稳定</li> </ol> <h2 id=_11>选择排序<a class=headerlink href=#_11 title="Permanent link">&para;</a></h2> <h3 id=_12>选择排序<a class=headerlink href=#_12 title="Permanent link">&para;</a></h3> <p>选择排序的基本思路是，定义两个区间指针begin和end，遍历数组中的每一个数据找出最大的数据的下标和最小的数据的下标，之后与<code>begin</code>和<code>end</code>指针分别交换小数据与<code>begin</code>的位置以及大数据和<code>end</code>的数值，具体思路如下</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1><span class=c1>//以下面的数据为例</span>
</span><span id=__span-7-2><span class=kt>int</span><span class=w> </span><span class=n>data</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>23</span><span class=p>,</span><span class=mi>34</span><span class=p>,</span><span class=mi>90</span><span class=p>,</span><span class=mi>16</span><span class=p>,</span><span class=mi>54</span><span class=p>,</span><span class=mi>44</span><span class=p>,</span><span class=mi>78</span><span class=p>,</span><span class=mi>67</span><span class=w> </span><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p><a class=glightbox href=images\image5.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image5.png></a></p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-8-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-8-2>
</span><span id=__span-8-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-8-4>
</span><span id=__span-8-5><span class=kt>void</span><span class=w> </span><span class=nf>swap</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>p1</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>p2</span><span class=p>)</span>
</span><span id=__span-8-6><span class=p>{</span>
</span><span id=__span-8-7><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>*</span><span class=n>p1</span><span class=p>;</span>
</span><span id=__span-8-8><span class=w>    </span><span class=o>*</span><span class=n>p1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>*</span><span class=n>p2</span><span class=p>;</span>
</span><span id=__span-8-9><span class=w>    </span><span class=o>*</span><span class=n>p2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tmp</span><span class=p>;</span>
</span><span id=__span-8-10><span class=p>}</span>
</span><span id=__span-8-11>
</span><span id=__span-8-12><span class=kt>void</span><span class=w> </span><span class=nf>SelectSort</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=o>*</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-8-13><span class=p>{</span>
</span><span id=__span-8-14><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>begin</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-8-15><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sz</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-8-16><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>begin</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>end</span><span class=p>)</span>
</span><span id=__span-8-17><span class=w>    </span><span class=p>{</span>
</span><span id=__span-8-18><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>max_i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>begin</span><span class=p>;</span><span class=c1>//最大值下标</span>
</span><span id=__span-8-19><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>min_i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>begin</span><span class=p>;</span><span class=c1>//最小值下标</span>
</span><span id=__span-8-20><span class=w>        </span><span class=c1>//遍历数组找到最大值的下标和最小值的下标</span>
</span><span id=__span-8-21><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>begin</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-8-22><span class=w>        </span><span class=p>{</span>
</span><span id=__span-8-23><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>max_i</span><span class=p>])</span>
</span><span id=__span-8-24><span class=w>            </span><span class=p>{</span>
</span><span id=__span-8-25><span class=w>                </span><span class=n>max_i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-8-26><span class=w>            </span><span class=p>}</span>
</span><span id=__span-8-27>
</span><span id=__span-8-28><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>min_i</span><span class=p>])</span>
</span><span id=__span-8-29><span class=w>            </span><span class=p>{</span>
</span><span id=__span-8-30><span class=w>                </span><span class=n>min_i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-8-31><span class=w>            </span><span class=p>}</span>
</span><span id=__span-8-32><span class=w>        </span><span class=p>}</span>
</span><span id=__span-8-33>
</span><span id=__span-8-34><span class=w>        </span><span class=c1>//走完循环交换最大值和最小值</span>
</span><span id=__span-8-35><span class=w>        </span><span class=n>swap</span><span class=p>(</span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>begin</span><span class=p>],</span><span class=w> </span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>min_i</span><span class=p>]);</span>
</span><span id=__span-8-36><span class=w>        </span><span class=c1>//如果begin和max_i重合，则需要更新max_i</span>
</span><span id=__span-8-37><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>begin</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>max_i</span><span class=p>)</span>
</span><span id=__span-8-38><span class=w>        </span><span class=p>{</span>
</span><span id=__span-8-39><span class=w>            </span><span class=n>max_i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>min_i</span><span class=p>;</span>
</span><span id=__span-8-40><span class=w>        </span><span class=p>}</span>
</span><span id=__span-8-41><span class=w>        </span><span class=n>swap</span><span class=p>(</span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=p>],</span><span class=w> </span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>max_i</span><span class=p>]);</span>
</span><span id=__span-8-42>
</span><span id=__span-8-43><span class=w>        </span><span class=c1>//更新比较区间</span>
</span><span id=__span-8-44><span class=w>        </span><span class=n>begin</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-8-45><span class=w>        </span><span class=n>end</span><span class=o>--</span><span class=p>;</span>
</span><span id=__span-8-46><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-47><span class=p>}</span>
</span><span id=__span-8-48>
</span><span id=__span-8-49><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-8-50><span class=p>{</span>
</span><span id=__span-8-51><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>data</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>23</span><span class=p>,</span><span class=mi>34</span><span class=p>,</span><span class=mi>90</span><span class=p>,</span><span class=mi>16</span><span class=p>,</span><span class=mi>54</span><span class=p>,</span><span class=mi>44</span><span class=p>,</span><span class=mi>78</span><span class=p>,</span><span class=mi>67</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-8-52><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>data</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>);</span>
</span><span id=__span-8-53><span class=w>    </span><span class=n>SelectSort</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>sz</span><span class=p>);</span>
</span><span id=__span-8-54><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-8-55><span class=w>    </span><span class=p>{</span>
</span><span id=__span-8-56><span class=w>        </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d &quot;</span><span class=p>,</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span><span id=__span-8-57><span class=w>    </span><span class=p>}</span>
</span><span id=__span-8-58><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-8-59><span class=p>}</span>
</span><span id=__span-8-60><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-8-61><span class=mi>16</span><span class=w> </span><span class=mi>23</span><span class=w> </span><span class=mi>34</span><span class=w> </span><span class=mi>44</span><span class=w> </span><span class=mi>54</span><span class=w> </span><span class=mi>67</span><span class=w> </span><span class=mi>78</span><span class=w> </span><span class=mi>90</span>
</span></code></pre></div></td></tr></table></div> <p>根据上面的分析，可以看出选择排序的时间复杂度为O(<span class=arithmatex>\(N^2\)</span>)，并且选择排序算法不稳定</p> <h3 id=_13>堆排序<a class=headerlink href=#_13 title="Permanent link">&para;</a></h3> <p><a href=https://help-doc.top/data-structure/heap/heap.html#_13>见堆</a></p> <h2 id=_14>交换排序<a class=headerlink href=#_14 title="Permanent link">&para;</a></h2> <h3 id=_15>冒泡排序<a class=headerlink href=#_15 title="Permanent link">&para;</a></h3> <p><a href=https://help-doc.top/c-lang/ptr/ptr.html#_22>见C语言指针</a></p> <h3 id=_16>快速排序<a class=headerlink href=#_16 title="Permanent link">&para;</a></h3> <h4 id=hoare>Hoare版本快速排序<a class=headerlink href=#hoare title="Permanent link">&para;</a></h4> <p>Hoare版本快速排序的过程类似于二叉树前序遍历的过程，基本思想是：在需要排序的数据中选择一个值的下标作为<code>key</code>，接着使用左指针和右指针从待排序数据集的起始位置以及其末端位置向中间遍历，左指针找数值比<code>key</code>大的数据，右指针找数值比<code>key</code>小的数据，交换这两个指针的数据之后接着向中间移动，直到两个指针最后相遇时交换<code>key</code>所在的数值以及相遇位置的数值，完成第一趟排序，接着进行左边部分的排序，方法如同第一趟排序，左边排序完毕后进行右边部分的排序，方法如同第二趟排序，直到最后全部排序完成后为止。具体思路如下：</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>注意<code>key</code>是数值的下标</p> </div> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-9-1><span class=c1>//以下面的数组为例</span>
</span><span id=__span-9-2><span class=kt>int</span><span class=w> </span><span class=n>data</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>23</span><span class=p>,</span><span class=mi>48</span><span class=p>,</span><span class=mi>67</span><span class=p>,</span><span class=mi>45</span><span class=p>,</span><span class=mi>21</span><span class=p>,</span><span class=mi>90</span><span class=p>,</span><span class=mi>33</span><span class=p>,</span><span class=mi>11</span><span class=w> </span><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p><a class=glightbox href=images\image6.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image6.png></a></p> <p><a class=glightbox href=images\image7.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image7.png></a></p> <p><a class=glightbox href=images\image8.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image8.png></a></p> <p>下面是完整过程递归图</p> <p><a class=glightbox href=images\image9.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image9.png></a></p> <p>参考代码</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-10-1><span class=kt>void</span><span class=w> </span><span class=nf>swap</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>num1</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>num2</span><span class=p>)</span>
</span><span id=__span-10-2><span class=p>{</span>
</span><span id=__span-10-3><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>*</span><span class=n>num1</span><span class=p>;</span>
</span><span id=__span-10-4><span class=w>    </span><span class=o>*</span><span class=n>num1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>*</span><span class=n>num2</span><span class=p>;</span>
</span><span id=__span-10-5><span class=w>    </span><span class=o>*</span><span class=n>num2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tmp</span><span class=p>;</span>
</span><span id=__span-10-6><span class=p>}</span>
</span><span id=__span-10-7>
</span><span id=__span-10-8><span class=c1>//一趟排序，返回key指向的位置</span>
</span><span id=__span-10-9><span class=kt>int</span><span class=w> </span><span class=nf>PartSort</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-10-10><span class=p>{</span>
</span><span id=__span-10-11><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>left</span><span class=p>;</span><span class=c1>//使key指向区间的第一个元素位置</span>
</span><span id=__span-10-12><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-10-13><span class=w>    </span><span class=p>{</span>
</span><span id=__span-10-14><span class=w>        </span><span class=c1>//先让右侧指针先走，右指针找小</span>
</span><span id=__span-10-15><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>right</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>]</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>key</span><span class=p>])</span>
</span><span id=__span-10-16><span class=w>        </span><span class=p>{</span>
</span><span id=__span-10-17><span class=w>            </span><span class=n>right</span><span class=o>--</span><span class=p>;</span>
</span><span id=__span-10-18><span class=w>        </span><span class=p>}</span>
</span><span id=__span-10-19><span class=w>        </span><span class=c1>//再让左侧指针走，左侧指针找大</span>
</span><span id=__span-10-20><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>right</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>key</span><span class=p>])</span>
</span><span id=__span-10-21><span class=w>        </span><span class=p>{</span>
</span><span id=__span-10-22><span class=w>            </span><span class=n>left</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-10-23><span class=w>        </span><span class=p>}</span>
</span><span id=__span-10-24>
</span><span id=__span-10-25><span class=w>        </span><span class=c1>//交换右侧指针和左侧指针的数据</span>
</span><span id=__span-10-26><span class=w>        </span><span class=n>swap</span><span class=p>(</span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>],</span><span class=w> </span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>]);</span>
</span><span id=__span-10-27><span class=w>    </span><span class=p>}</span>
</span><span id=__span-10-28><span class=w>    </span><span class=c1>//执行完循环后，交换key所在位置的数据和right与left指针相遇的位置的数值</span>
</span><span id=__span-10-29><span class=w>    </span><span class=n>swap</span><span class=p>(</span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>key</span><span class=p>],</span><span class=w> </span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>]);</span>
</span><span id=__span-10-30><span class=w>    </span><span class=c1>//返回交换后的key指向的元素的位置</span>
</span><span id=__span-10-31><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-10-32><span class=p>}</span>
</span><span id=__span-10-33>
</span><span id=__span-10-34><span class=c1>//Hoare版本</span>
</span><span id=__span-10-35><span class=kt>void</span><span class=w> </span><span class=nf>QuickSort_Hoare</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-10-36><span class=p>{</span>
</span><span id=__span-10-37><span class=w>    </span><span class=c1>//当left和right指针指向同一个位置或后一个位置结束排序</span>
</span><span id=__span-10-38><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-10-39><span class=w>    </span><span class=p>{</span>
</span><span id=__span-10-40><span class=w>        </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-10-41><span class=w>    </span><span class=p>}</span>
</span><span id=__span-10-42>
</span><span id=__span-10-43><span class=w>    </span><span class=c1>//获取到当前key的位置</span>
</span><span id=__span-10-44><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>PartSort</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-10-45>
</span><span id=__span-10-46><span class=w>    </span><span class=n>QuickSort_Hoare</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-10-47><span class=w>    </span><span class=n>QuickSort_Hoare</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-10-48><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h4 id=hoare_1>Hoare版本问题分析<a class=headerlink href=#hoare_1 title="Permanent link">&para;</a></h4> <ol> <li> <p>在上面的过程分析中，使用第一个元素的位置作为<code>key</code>的位置，也可以使用最后一个元素作为<code>key</code>的位置，但是需要注意的是，以<code>key</code>指向第一个元素的位置为例，<code>left</code>指针一定需要指向第一个元素，而不是从第二个元素开始，例如下面的情况：当<code>key</code>位置的数据比其他数据都小时，<code>right</code>找小将一直向<code>key</code>所在位置移动</p> <p><a class=glightbox href=images\image10.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image10.png></a></p> <p><a class=glightbox href=images\image11.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image11.png></a></p> </li> <li> <p>在判断<code>left</code>指针或者<code>right</code>指针是否需要移动时，需要包括等于的情况，否则会进入死循环，例如下面的情况：当<code>left</code>和<code>right</code>指针同时指向一个等于<code>key</code>所在位置的元素</p> <p><a class=glightbox href=images\image12.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image12.png></a></p> </li> <li> <p>对于递归结束的条件来说，需要出现<code>left</code>指针的值大于或者等于<code>right</code>指针的值，而不是仅仅一个大于或者等于，因为返回相遇的位置，即返回<code>left</code>指针或者<code>right</code>指针的位置而不是实际返回<code>key</code>所在位置，在交换过程中，只是交换<code>key</code>对应位置的数值和相遇位置的数值，并没有改变<code>key</code>指向的位置</p> </li> <li>对于<code>left</code>指针和<code>right</code>指针相遇的位置的数值一定比<code>key</code>所在位置的数值小的问题，下面是基本分析：</li> </ol> <p>分析主问题之前，先分析<code>right</code>比<code>left</code>指针先走的原因：在初始位置时，<code>left</code>指针和<code>right</code>指针各指向第一个元素和最后一个元素但是<code>left</code>指针与<code>key</code>指针指向的位置相同，此时让<code>right</code>指针先走，而不是<code>left</code>指针先走，反之同理，具体原因如下：</p> <p><a class=glightbox href=images\image13.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image13.png></a></p> <p>接下来分析当<code>right</code>指针比<code>left</code>指针先走时，两个指针相遇时一定相遇到一个比<code>key</code>小的数值的问题</p> <p>两个指针相遇的方式有两种情况</p> <ul> <li>第一种情况：<code>left</code>指针向<code>right</code>指针移动与其相遇</li> <li>第二种情况：<code>right</code>指针向<code>left</code>指针移动与其相遇</li> </ul> <p>对于第一种情况，分析如下：</p> <p><a class=glightbox href=images\image14.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image14.png></a></p> <p>对于第二种情况，分析如下：</p> <p><a class=glightbox href=images\image15.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image15.png></a></p> <h4 id=_17>挖坑法快速排序<a class=headerlink href=#_17 title="Permanent link">&para;</a></h4> <p>挖坑法快速排序相较于Hoare版本的快速排序没有效率上的优化，但是在理解方式上相对简单，其基本思路为：在数据中随机取出一个数值放入<code>key</code>变量中，此时该数值的位置即为一个坑位，接下来<code>left</code>指针从第一个元素开始<code>key</code>值大的数值，<code>right</code>指针从最后一个元素找比<code>key</code>值小的数值，此时不用考虑<code>left</code>指针和<code>right</code>指针谁先走，考虑<code>right</code>指针先走，当<code>right</code>指针找到小时，将该值放置到<code>hole</code>所在位置，更新<code>hole</code>到<code>right</code>指针的位置，接下来<code>left</code>指针找大，当<code>left</code>指针找到较<code>key</code>大的数值时，将该数值存入<code>hole</code>中，更新<code>hole</code>为<code>left</code>所在位置，如此往复，直到第一趟排序结束。接着进行左边部分的排序，方法如同第一趟排序，左边排序完毕后进行右边部分的排序，方法如同第二趟排序，直到最后全部排序完成后为止。具体思路如下：</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>注意<code>key</code>是数值</p> </div> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-11-1><span class=c1>//以下面的数组为例</span>
</span><span id=__span-11-2><span class=kt>int</span><span class=w> </span><span class=n>data</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>23</span><span class=p>,</span><span class=mi>48</span><span class=p>,</span><span class=mi>67</span><span class=p>,</span><span class=mi>45</span><span class=p>,</span><span class=mi>21</span><span class=p>,</span><span class=mi>90</span><span class=p>,</span><span class=mi>33</span><span class=p>,</span><span class=mi>11</span><span class=w> </span><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p><a class=glightbox href=images\image16.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image16.png></a></p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-12-1><span class=kt>int</span><span class=w> </span><span class=nf>PartSort_DigHole</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-12-2><span class=p>{</span>
</span><span id=__span-12-3><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>hole</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-12-4><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>];</span>
</span><span id=__span-12-5><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-12-6><span class=w>    </span><span class=p>{</span>
</span><span id=__span-12-7><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>right</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>]</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>key</span><span class=p>)</span>
</span><span id=__span-12-8><span class=w>        </span><span class=p>{</span>
</span><span id=__span-12-9><span class=w>            </span><span class=n>right</span><span class=o>--</span><span class=p>;</span>
</span><span id=__span-12-10><span class=w>        </span><span class=p>}</span>
</span><span id=__span-12-11><span class=w>        </span><span class=n>data</span><span class=p>[</span><span class=n>hole</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>];</span>
</span><span id=__span-12-12><span class=w>        </span><span class=n>hole</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>right</span><span class=p>;</span>
</span><span id=__span-12-13><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>right</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>key</span><span class=p>)</span>
</span><span id=__span-12-14><span class=w>        </span><span class=p>{</span>
</span><span id=__span-12-15><span class=w>            </span><span class=n>left</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-12-16><span class=w>        </span><span class=p>}</span>
</span><span id=__span-12-17><span class=w>        </span><span class=n>data</span><span class=p>[</span><span class=n>hole</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>];</span>
</span><span id=__span-12-18><span class=w>        </span><span class=n>hole</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-12-19><span class=w>    </span><span class=p>}</span>
</span><span id=__span-12-20><span class=w>    </span><span class=n>data</span><span class=p>[</span><span class=n>hole</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>key</span><span class=p>;</span>
</span><span id=__span-12-21><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>hole</span><span class=p>;</span>
</span><span id=__span-12-22><span class=p>}</span>
</span><span id=__span-12-23>
</span><span id=__span-12-24><span class=c1>//挖坑法</span>
</span><span id=__span-12-25><span class=kt>void</span><span class=w> </span><span class=nf>QuickSort_DigHole</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-12-26><span class=p>{</span>
</span><span id=__span-12-27><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-12-28><span class=w>    </span><span class=p>{</span>
</span><span id=__span-12-29><span class=w>        </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-12-30><span class=w>    </span><span class=p>}</span>
</span><span id=__span-12-31>
</span><span id=__span-12-32><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>hole</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>PartSort_DigHole</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-12-33>
</span><span id=__span-12-34><span class=w>    </span><span class=n>QuickSort_DigHole</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=n>hole</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-12-35><span class=w>    </span><span class=n>QuickSort_DigHole</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>hole</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-12-36><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h4 id=_18>前后指针法快速排序<a class=headerlink href=#_18 title="Permanent link">&para;</a></h4> <p>前后指针法相对Hoare版本和挖坑法也没有效率上的优化，但是理解相对容易，基本思路如下：在前后指针法中，有一个<code>key</code>指针，该指针指向一个随机的数值的下标位置，接下来是一个<code>prev</code>指针，指向数据的第一个元素的下标位置，以及一个<code>cur</code>指针指向第二个元素的下标位置，<code>cur</code>指针和<code>prev</code>指针向前遍历，当遇到比<code>key</code>小的数值时，<code>prev</code>指针先移动，再进行<code>cur</code>和<code>prev</code>进行对应位置的数值交换，接着<code>cur</code>指着移动，否则只让<code>cur</code>指针移动，当<code>cur</code>走到数据的结尾时结束循环，交换<code>prev</code>和<code>key</code>指针的数据，完成第一趟排序。接着进行左边部分的排序，方法如同第一趟排序，左边排序完毕后进行右边部分的排序，方法如同第二趟排序，直到最后全部排序完成后为止。具体思路如下：</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>注意<code>key</code>是数值的下标，并且用<code>left</code>和<code>right</code>控制递归区间</p> </div> <p><a class=glightbox href=images\image17.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image17.png></a></p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-13-1><span class=kt>int</span><span class=w> </span><span class=nf>PartSort_Prev_postPointer</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=o>*</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-13-2><span class=p>{</span>
</span><span id=__span-13-3><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-13-4><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>left</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-13-5><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>prev</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-13-6><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>cur</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-13-7><span class=w>    </span><span class=p>{</span>
</span><span id=__span-13-8><span class=w>        </span><span class=c1>//++prev != cur可以防止cur和自己本身交换导致多交换一次</span>
</span><span id=__span-13-9><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>cur</span><span class=p>]</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=o>++</span><span class=n>prev</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>cur</span><span class=p>)</span>
</span><span id=__span-13-10><span class=w>        </span><span class=p>{</span>
</span><span id=__span-13-11><span class=w>            </span><span class=n>prev</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-13-12><span class=w>            </span><span class=n>swap</span><span class=p>(</span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>cur</span><span class=p>],</span><span class=w> </span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>prev</span><span class=p>]);</span>
</span><span id=__span-13-13><span class=w>        </span><span class=p>}</span>
</span><span id=__span-13-14><span class=w>        </span><span class=n>cur</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-13-15><span class=w>    </span><span class=p>}</span>
</span><span id=__span-13-16><span class=w>    </span><span class=n>swap</span><span class=p>(</span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>prev</span><span class=p>],</span><span class=w> </span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>key</span><span class=p>]);</span>
</span><span id=__span-13-17><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>prev</span><span class=p>;</span>
</span><span id=__span-13-18><span class=p>}</span>
</span><span id=__span-13-19>
</span><span id=__span-13-20><span class=c1>//前后指针法</span>
</span><span id=__span-13-21><span class=kt>void</span><span class=w> </span><span class=nf>QuickSort_Prev_postPointer</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-13-22><span class=p>{</span>
</span><span id=__span-13-23><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-13-24><span class=w>    </span><span class=p>{</span>
</span><span id=__span-13-25><span class=w>        </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-13-26><span class=w>    </span><span class=p>}</span>
</span><span id=__span-13-27>
</span><span id=__span-13-28><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>PartSort_Prev_postPointer</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-13-29>
</span><span id=__span-13-30><span class=w>    </span><span class=n>QuickSort_Prev_postPointer</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-13-31><span class=w>    </span><span class=n>QuickSort_Prev_postPointer</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-13-32><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h4 id=_19>快速排序优化<a class=headerlink href=#_19 title="Permanent link">&para;</a></h4> <p>在快速排序优化部分，采用三数取中的思路对快速排序有大量重复数据或者有序情况下进行优化，所谓三数取中，即第一个元素的位置和最后一个元素的位置加和取一半的数值在数据中的位置，但是此时需要注意的是<code>key</code>当前位置为<code>mid</code>所在位置，为了不改变原来的快速排序代码，获得中间值下标时，交换<code>key</code>位置的值和<code>mid</code>位置的值即可</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-14-1><span class=c1>//三数取中</span>
</span><span id=__span-14-2><span class=kt>int</span><span class=w> </span><span class=nf>GetMidIndex</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-14-3><span class=p>{</span>
</span><span id=__span-14-4><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>mid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>right</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>2</span><span class=p>;</span>
</span><span id=__span-14-5><span class=w>    </span><span class=c1>//获取左、中、有三个数中的中间数</span>
</span><span id=__span-14-6><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>mid</span><span class=p>])</span>
</span><span id=__span-14-7><span class=w>    </span><span class=p>{</span>
</span><span id=__span-14-8><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>mid</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>])</span>
</span><span id=__span-14-9><span class=w>        </span><span class=p>{</span>
</span><span id=__span-14-10><span class=w>            </span><span class=c1>//left&gt;mid&gt;right</span>
</span><span id=__span-14-11><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>mid</span><span class=p>;</span>
</span><span id=__span-14-12><span class=w>        </span><span class=p>}</span>
</span><span id=__span-14-13><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>])</span>
</span><span id=__span-14-14><span class=w>        </span><span class=p>{</span>
</span><span id=__span-14-15><span class=w>            </span><span class=c1>//left&gt;right&gt;mid</span>
</span><span id=__span-14-16><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>right</span><span class=p>;</span>
</span><span id=__span-14-17><span class=w>        </span><span class=p>}</span>
</span><span id=__span-14-18><span class=w>        </span><span class=k>else</span>
</span><span id=__span-14-19><span class=w>        </span><span class=p>{</span>
</span><span id=__span-14-20><span class=w>            </span><span class=c1>//right&gt;left&gt;mid</span>
</span><span id=__span-14-21><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-14-22><span class=w>        </span><span class=p>}</span>
</span><span id=__span-14-23><span class=w>    </span><span class=p>}</span>
</span><span id=__span-14-24><span class=w>    </span><span class=k>else</span>
</span><span id=__span-14-25><span class=w>    </span><span class=p>{</span>
</span><span id=__span-14-26><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>mid</span><span class=p>]</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>])</span>
</span><span id=__span-14-27><span class=w>        </span><span class=p>{</span>
</span><span id=__span-14-28><span class=w>            </span><span class=c1>//right&gt;mid&gt;left</span>
</span><span id=__span-14-29><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>mid</span><span class=p>;</span>
</span><span id=__span-14-30><span class=w>        </span><span class=p>}</span>
</span><span id=__span-14-31><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>])</span>
</span><span id=__span-14-32><span class=w>        </span><span class=p>{</span>
</span><span id=__span-14-33><span class=w>            </span><span class=c1>//mid&gt;right&gt;left</span>
</span><span id=__span-14-34><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>right</span><span class=p>;</span>
</span><span id=__span-14-35><span class=w>        </span><span class=p>}</span>
</span><span id=__span-14-36><span class=w>        </span><span class=k>else</span>
</span><span id=__span-14-37><span class=w>        </span><span class=p>{</span>
</span><span id=__span-14-38><span class=w>            </span><span class=c1>//mid&gt;left&gt;right</span>
</span><span id=__span-14-39><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-14-40><span class=w>        </span><span class=p>}</span>
</span><span id=__span-14-41><span class=w>    </span><span class=p>}</span>
</span><span id=__span-14-42><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>以前后指针版本修改为例</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>  1</span>
<span class=normal>  2</span>
<span class=normal>  3</span>
<span class=normal>  4</span>
<span class=normal>  5</span>
<span class=normal>  6</span>
<span class=normal>  7</span>
<span class=normal>  8</span>
<span class=normal>  9</span>
<span class=normal> 10</span>
<span class=normal> 11</span>
<span class=normal> 12</span>
<span class=normal> 13</span>
<span class=normal> 14</span>
<span class=normal> 15</span>
<span class=normal> 16</span>
<span class=normal> 17</span>
<span class=normal> 18</span>
<span class=normal> 19</span>
<span class=normal> 20</span>
<span class=normal> 21</span>
<span class=normal> 22</span>
<span class=normal> 23</span>
<span class=normal> 24</span>
<span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-15-1><span class=cp>#define _CRT_SECURE_NO_WARNINGS 1</span>
</span><span id=__span-15-2>
</span><span id=__span-15-3><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-15-4><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;time.h&gt;</span>
</span><span id=__span-15-5><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdlib.h&gt;</span>
</span><span id=__span-15-6><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;assert.h&gt;</span>
</span><span id=__span-15-7>
</span><span id=__span-15-8><span class=kt>void</span><span class=w> </span><span class=nf>swap</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>num1</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>num2</span><span class=p>)</span>
</span><span id=__span-15-9><span class=p>{</span>
</span><span id=__span-15-10><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>*</span><span class=n>num1</span><span class=p>;</span>
</span><span id=__span-15-11><span class=w>    </span><span class=o>*</span><span class=n>num1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=o>*</span><span class=n>num2</span><span class=p>;</span>
</span><span id=__span-15-12><span class=w>    </span><span class=o>*</span><span class=n>num2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tmp</span><span class=p>;</span>
</span><span id=__span-15-13><span class=p>}</span>
</span><span id=__span-15-14>
</span><span id=__span-15-15><span class=c1>//三数取中</span>
</span><span id=__span-15-16><span class=kt>int</span><span class=w> </span><span class=nf>GetMidIndex</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-15-17><span class=p>{</span>
</span><span id=__span-15-18><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>mid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>right</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>2</span><span class=p>;</span>
</span><span id=__span-15-19><span class=w>    </span><span class=c1>//获取左、中、有三个数中的中间数</span>
</span><span id=__span-15-20><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>mid</span><span class=p>])</span>
</span><span id=__span-15-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-15-22><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>mid</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>])</span>
</span><span id=__span-15-23><span class=w>        </span><span class=p>{</span>
</span><span id=__span-15-24><span class=w>            </span><span class=c1>//left&gt;mid&gt;right</span>
</span><span id=__span-15-25><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>mid</span><span class=p>;</span>
</span><span id=__span-15-26><span class=w>        </span><span class=p>}</span>
</span><span id=__span-15-27><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>])</span>
</span><span id=__span-15-28><span class=w>        </span><span class=p>{</span>
</span><span id=__span-15-29><span class=w>            </span><span class=c1>//left&gt;right&gt;mid</span>
</span><span id=__span-15-30><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>right</span><span class=p>;</span>
</span><span id=__span-15-31><span class=w>        </span><span class=p>}</span>
</span><span id=__span-15-32><span class=w>        </span><span class=k>else</span>
</span><span id=__span-15-33><span class=w>        </span><span class=p>{</span>
</span><span id=__span-15-34><span class=w>            </span><span class=c1>//right&gt;left&gt;mid</span>
</span><span id=__span-15-35><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-15-36><span class=w>        </span><span class=p>}</span>
</span><span id=__span-15-37><span class=w>    </span><span class=p>}</span>
</span><span id=__span-15-38><span class=w>    </span><span class=k>else</span>
</span><span id=__span-15-39><span class=w>    </span><span class=p>{</span>
</span><span id=__span-15-40><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>mid</span><span class=p>]</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>])</span>
</span><span id=__span-15-41><span class=w>        </span><span class=p>{</span>
</span><span id=__span-15-42><span class=w>            </span><span class=c1>//right&gt;mid&gt;left</span>
</span><span id=__span-15-43><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>mid</span><span class=p>;</span>
</span><span id=__span-15-44><span class=w>        </span><span class=p>}</span>
</span><span id=__span-15-45><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>])</span>
</span><span id=__span-15-46><span class=w>        </span><span class=p>{</span>
</span><span id=__span-15-47><span class=w>            </span><span class=c1>//mid&gt;right&gt;left</span>
</span><span id=__span-15-48><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>right</span><span class=p>;</span>
</span><span id=__span-15-49><span class=w>        </span><span class=p>}</span>
</span><span id=__span-15-50><span class=w>        </span><span class=k>else</span>
</span><span id=__span-15-51><span class=w>        </span><span class=p>{</span>
</span><span id=__span-15-52><span class=w>            </span><span class=c1>//mid&gt;left&gt;right</span>
</span><span id=__span-15-53><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-15-54><span class=w>        </span><span class=p>}</span>
</span><span id=__span-15-55><span class=w>    </span><span class=p>}</span>
</span><span id=__span-15-56><span class=p>}</span>
</span><span id=__span-15-57>
</span><span id=__span-15-58><span class=kt>int</span><span class=w> </span><span class=nf>PartSort_Prev_postPointer</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=o>*</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-15-59><span class=p>{</span>
</span><span id=__span-15-60><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>mid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>GetMidIndex</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-15-61><span class=w>    </span><span class=n>swap</span><span class=p>(</span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>],</span><span class=w> </span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>mid</span><span class=p>]);</span>
</span><span id=__span-15-62><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-15-63><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>left</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-15-64><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>prev</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-15-65><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>cur</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-15-66><span class=w>    </span><span class=p>{</span>
</span><span id=__span-15-67><span class=w>        </span><span class=c1>//++prev != cur可以防止cur和自己本身交换导致多交换一次</span>
</span><span id=__span-15-68><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>cur</span><span class=p>]</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=o>++</span><span class=n>prev</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>cur</span><span class=p>)</span>
</span><span id=__span-15-69><span class=w>        </span><span class=p>{</span>
</span><span id=__span-15-70><span class=w>            </span><span class=n>swap</span><span class=p>(</span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>cur</span><span class=p>],</span><span class=w> </span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>prev</span><span class=p>]);</span>
</span><span id=__span-15-71><span class=w>        </span><span class=p>}</span>
</span><span id=__span-15-72><span class=w>        </span><span class=n>cur</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-15-73><span class=w>    </span><span class=p>}</span>
</span><span id=__span-15-74><span class=w>    </span><span class=n>swap</span><span class=p>(</span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>prev</span><span class=p>],</span><span class=w> </span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>key</span><span class=p>]);</span>
</span><span id=__span-15-75><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>prev</span><span class=p>;</span>
</span><span id=__span-15-76><span class=p>}</span>
</span><span id=__span-15-77>
</span><span id=__span-15-78><span class=c1>//前后指针法</span>
</span><span id=__span-15-79><span class=kt>void</span><span class=w> </span><span class=nf>QuickSort_Prev_postPointer</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-15-80><span class=p>{</span>
</span><span id=__span-15-81><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-15-82><span class=w>    </span><span class=p>{</span>
</span><span id=__span-15-83><span class=w>        </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-15-84><span class=w>    </span><span class=p>}</span>
</span><span id=__span-15-85>
</span><span id=__span-15-86><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>PartSort_Prev_postPointer</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-15-87>
</span><span id=__span-15-88><span class=w>    </span><span class=n>QuickSort_Prev_postPointer</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-15-89><span class=w>    </span><span class=n>QuickSort_Prev_postPointer</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-15-90><span class=p>}</span>
</span><span id=__span-15-91>
</span><span id=__span-15-92><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-15-93><span class=p>{</span>
</span><span id=__span-15-94><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>data</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>23</span><span class=p>,</span><span class=mi>48</span><span class=p>,</span><span class=mi>67</span><span class=p>,</span><span class=mi>45</span><span class=p>,</span><span class=mi>21</span><span class=p>,</span><span class=mi>90</span><span class=p>,</span><span class=mi>33</span><span class=p>,</span><span class=mi>11</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-15-95><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=n>data</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>);</span>
</span><span id=__span-15-96><span class=w>    </span><span class=n>QuickSort_Prev_postPointer</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>sz</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-15-97><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-15-98><span class=w>    </span><span class=p>{</span>
</span><span id=__span-15-99><span class=w>        </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d &quot;</span><span class=p>,</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span><span id=__span-15-100><span class=w>    </span><span class=p>}</span>
</span><span id=__span-15-101>
</span><span id=__span-15-102><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-15-103><span class=p>}</span>
</span><span id=__span-15-104><span class=n>输出结果</span><span class=err>：</span>
</span><span id=__span-15-105><span class=mi>11</span><span class=w> </span><span class=mi>21</span><span class=w> </span><span class=mi>23</span><span class=w> </span><span class=mi>33</span><span class=w> </span><span class=mi>45</span><span class=w> </span><span class=mi>48</span><span class=w> </span><span class=mi>67</span><span class=w> </span><span class=mi>90</span>
</span></code></pre></div></td></tr></table></div> <p>快速排序结合三路划分以及三数随机取中优化</p> <p>前面提到的快速排序划分实际上都是两路划分，包括相等的值在内分成左右两路，而三路划分是Hoare版本和前后指针法的结合，将数组分为三个部分：左边小于<code>key</code>的部分，中间等于<code>key</code>的部分，右边大于<code>key</code>的部分，这个优化可以解决快速排序在遇到大量等于<code>key</code>的数值时效率是最坏的情况，再通过三数随机取中解决出现数据波动大的情况</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-16-1><span class=c1>//以下面的数组为例</span>
</span><span id=__span-16-2><span class=kt>int</span><span class=w> </span><span class=n>data</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>23</span><span class=p>,</span><span class=mi>23</span><span class=p>,</span><span class=mi>87</span><span class=p>,</span><span class=mi>99</span><span class=p>,</span><span class=mi>23</span><span class=p>,</span><span class=mi>19</span><span class=p>,</span><span class=mi>57</span><span class=p>,</span><span class=mi>45</span><span class=w> </span><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p><a class=glightbox href=images\image18.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image18.png></a></p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-17-1><span class=c1>//三数随机取中</span>
</span><span id=__span-17-2><span class=kt>int</span><span class=w> </span><span class=nf>GetMidIndex_random</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-17-3><span class=p>{</span>
</span><span id=__span-17-4><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>mid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=p>(</span><span class=n>rand</span><span class=p>()</span><span class=w> </span><span class=o>%</span><span class=w> </span><span class=p>(</span><span class=n>right</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>left</span><span class=p>)))</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>2</span><span class=p>;</span><span class=c1>//注意将随机值限制在有效区间</span>
</span><span id=__span-17-5><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>mid</span><span class=p>])</span>
</span><span id=__span-17-6><span class=w>    </span><span class=p>{</span>
</span><span id=__span-17-7><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>mid</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>])</span>
</span><span id=__span-17-8><span class=w>        </span><span class=p>{</span>
</span><span id=__span-17-9><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>mid</span><span class=p>;</span>
</span><span id=__span-17-10><span class=w>        </span><span class=p>}</span>
</span><span id=__span-17-11><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>])</span>
</span><span id=__span-17-12><span class=w>        </span><span class=p>{</span>
</span><span id=__span-17-13><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>right</span><span class=p>;</span>
</span><span id=__span-17-14><span class=w>        </span><span class=p>}</span>
</span><span id=__span-17-15><span class=w>        </span><span class=k>else</span>
</span><span id=__span-17-16><span class=w>        </span><span class=p>{</span>
</span><span id=__span-17-17><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-17-18><span class=w>        </span><span class=p>}</span>
</span><span id=__span-17-19><span class=w>    </span><span class=p>}</span>
</span><span id=__span-17-20><span class=w>    </span><span class=k>else</span>
</span><span id=__span-17-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-17-22><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>mid</span><span class=p>])</span>
</span><span id=__span-17-23><span class=w>        </span><span class=p>{</span>
</span><span id=__span-17-24><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>mid</span><span class=p>;</span>
</span><span id=__span-17-25><span class=w>        </span><span class=p>}</span>
</span><span id=__span-17-26><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>])</span>
</span><span id=__span-17-27><span class=w>        </span><span class=p>{</span>
</span><span id=__span-17-28><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-17-29><span class=w>        </span><span class=p>}</span>
</span><span id=__span-17-30><span class=w>        </span><span class=k>else</span>
</span><span id=__span-17-31><span class=w>        </span><span class=p>{</span>
</span><span id=__span-17-32><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>right</span><span class=p>;</span>
</span><span id=__span-17-33><span class=w>        </span><span class=p>}</span>
</span><span id=__span-17-34><span class=w>    </span><span class=p>}</span>
</span><span id=__span-17-35><span class=p>}</span>
</span><span id=__span-17-36>
</span><span id=__span-17-37><span class=kt>void</span><span class=w> </span><span class=nf>QuickSort_TPart</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>begin</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>end</span><span class=p>)</span>
</span><span id=__span-17-38><span class=p>{</span>
</span><span id=__span-17-39><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>begin</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>end</span><span class=p>)</span>
</span><span id=__span-17-40><span class=w>    </span><span class=p>{</span>
</span><span id=__span-17-41><span class=w>        </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-17-42><span class=w>    </span><span class=p>}</span>
</span><span id=__span-17-43>
</span><span id=__span-17-44><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>begin</span><span class=p>;</span>
</span><span id=__span-17-45><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>end</span><span class=p>;</span>
</span><span id=__span-17-46>
</span><span id=__span-17-47><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>mid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>GetMidIndex_random</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-17-48><span class=w>    </span><span class=n>swap</span><span class=p>(</span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>],</span><span class=w> </span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>mid</span><span class=p>]);</span>
</span><span id=__span-17-49><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>];</span><span class=c1>//注意比较的是key值，不是key所在位置的值</span>
</span><span id=__span-17-50>
</span><span id=__span-17-51><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>cur</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>left</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-17-52><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>cur</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-17-53><span class=w>    </span><span class=p>{</span>
</span><span id=__span-17-54><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>cur</span><span class=p>]</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>key</span><span class=p>)</span>
</span><span id=__span-17-55><span class=w>        </span><span class=p>{</span>
</span><span id=__span-17-56><span class=w>            </span><span class=n>swap</span><span class=p>(</span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>left</span><span class=p>],</span><span class=w> </span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>cur</span><span class=p>]);</span>
</span><span id=__span-17-57><span class=w>            </span><span class=n>left</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-17-58><span class=w>            </span><span class=n>cur</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-17-59><span class=w>        </span><span class=p>}</span>
</span><span id=__span-17-60><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>cur</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>key</span><span class=p>)</span>
</span><span id=__span-17-61><span class=w>        </span><span class=p>{</span>
</span><span id=__span-17-62><span class=w>            </span><span class=n>swap</span><span class=p>(</span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>right</span><span class=p>],</span><span class=w> </span><span class=o>&amp;</span><span class=n>data</span><span class=p>[</span><span class=n>cur</span><span class=p>]);</span>
</span><span id=__span-17-63><span class=w>            </span><span class=n>right</span><span class=o>--</span><span class=p>;</span>
</span><span id=__span-17-64><span class=w>        </span><span class=p>}</span>
</span><span id=__span-17-65><span class=w>        </span><span class=k>else</span>
</span><span id=__span-17-66><span class=w>        </span><span class=p>{</span>
</span><span id=__span-17-67><span class=w>            </span><span class=n>cur</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-17-68><span class=w>        </span><span class=p>}</span>
</span><span id=__span-17-69><span class=w>    </span><span class=p>}</span>
</span><span id=__span-17-70>
</span><span id=__span-17-71><span class=w>    </span><span class=n>QuickSort_TPart</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>begin</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-17-72><span class=w>    </span><span class=n>QuickSort_TPart</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>right</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>end</span><span class=p>);</span>
</span><span id=__span-17-73><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h4 id=_20>快速排序非递归版<a class=headerlink href=#_20 title="Permanent link">&para;</a></h4> <p>由于递归的函数栈帧空间是在栈上创建的，而且栈上的空间较堆空间小，所以当数据量太大时，可以考虑用快速排序的非递归版，一般用栈来实现，基本思路如下：首先将数据的头和尾进行入栈操作，再在循环中通过出栈和获取栈顶元素控制左区间和右区间，可以先执行左区间或者右区间，本处以先右区间再左区间为例，通过需要拆分数据的部分出栈排序，再接着重复步骤最后排序完成，具体思路分析如下：</p> <p><a class=glightbox href=images\image19.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image19.png></a></p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-18-1><span class=kt>void</span><span class=w> </span><span class=nf>QuickSort_NotRecursion</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-18-2><span class=p>{</span>
</span><span id=__span-18-3><span class=w>    </span><span class=n>ST</span><span class=w> </span><span class=n>st</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-18-4><span class=w>    </span><span class=n>STInit</span><span class=p>(</span><span class=o>&amp;</span><span class=n>st</span><span class=p>);</span>
</span><span id=__span-18-5><span class=w>    </span><span class=c1>//压入第一个元素和最后一个元素所在位置</span>
</span><span id=__span-18-6><span class=w>    </span><span class=n>STPush</span><span class=p>(</span><span class=o>&amp;</span><span class=n>st</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=p>);</span>
</span><span id=__span-18-7><span class=w>    </span><span class=n>STPush</span><span class=p>(</span><span class=o>&amp;</span><span class=n>st</span><span class=p>,</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-18-8>
</span><span id=__span-18-9><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=n>STEmpty</span><span class=p>(</span><span class=o>&amp;</span><span class=n>st</span><span class=p>))</span>
</span><span id=__span-18-10><span class=w>    </span><span class=p>{</span>
</span><span id=__span-18-11><span class=w>        </span><span class=c1>//获取区间</span>
</span><span id=__span-18-12><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>STTop</span><span class=p>(</span><span class=o>&amp;</span><span class=n>st</span><span class=p>);</span>
</span><span id=__span-18-13><span class=w>        </span><span class=n>STPop</span><span class=p>(</span><span class=o>&amp;</span><span class=n>st</span><span class=p>);</span>
</span><span id=__span-18-14><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>STTop</span><span class=p>(</span><span class=o>&amp;</span><span class=n>st</span><span class=p>);</span>
</span><span id=__span-18-15><span class=w>        </span><span class=n>STPop</span><span class=p>(</span><span class=o>&amp;</span><span class=n>st</span><span class=p>);</span>
</span><span id=__span-18-16>
</span><span id=__span-18-17><span class=w>        </span><span class=c1>//单趟排序</span>
</span><span id=__span-18-18><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>PartSort_Hoare</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-18-19>
</span><span id=__span-18-20><span class=w>        </span><span class=c1>//更新区间</span>
</span><span id=__span-18-21><span class=w>        </span><span class=c1>//先压右侧区间</span>
</span><span id=__span-18-22><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>key</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-18-23><span class=w>        </span><span class=p>{</span>
</span><span id=__span-18-24><span class=w>            </span><span class=n>STPush</span><span class=p>(</span><span class=o>&amp;</span><span class=n>st</span><span class=p>,</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-18-25><span class=w>            </span><span class=n>STPush</span><span class=p>(</span><span class=o>&amp;</span><span class=n>st</span><span class=p>,</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-18-26><span class=w>        </span><span class=p>}</span>
</span><span id=__span-18-27>
</span><span id=__span-18-28><span class=w>        </span><span class=c1>//再压左侧区间</span>
</span><span id=__span-18-29><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>)</span>
</span><span id=__span-18-30><span class=w>        </span><span class=p>{</span>
</span><span id=__span-18-31><span class=w>            </span><span class=n>STPush</span><span class=p>(</span><span class=o>&amp;</span><span class=n>st</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=p>);</span>
</span><span id=__span-18-32><span class=w>            </span><span class=n>STPush</span><span class=p>(</span><span class=o>&amp;</span><span class=n>st</span><span class=p>,</span><span class=w> </span><span class=n>key</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-18-33><span class=w>        </span><span class=p>}</span>
</span><span id=__span-18-34><span class=w>    </span><span class=p>}</span>
</span><span id=__span-18-35>
</span><span id=__span-18-36><span class=w>    </span><span class=n>STDestroy</span><span class=p>(</span><span class=o>&amp;</span><span class=n>st</span><span class=p>);</span>
</span><span id=__span-18-37><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>快速排序的时间复杂度为<span class=arithmatex>\(O(Nlog_{2}{N})\)</span>，空间复杂度为<span class=arithmatex>\(O(log_{2}{N})\)</span>，属于不稳定算法</p> <h2 id=_21>归并排序<a class=headerlink href=#_21 title="Permanent link">&para;</a></h2> <p>归并排序，分为分治以及合并，分治部分可以使用递归或者非递归完成，归并排序的基本思路是：将已有序的子序列合并，得到完全有序的序列；即先使每个子序列有序，再使子序列段间有序。若将两个有序表合并成一个有序表，称为二路归并</p> <h3 id=_22>递归版本<a class=headerlink href=#_22 title="Permanent link">&para;</a></h3> <p>递归版本的归并排序思路如下：先将数组分为不可再分割的只有一个数据的部分，再取小的部分进行尾插，每排序一次就将排序好的数据拷贝到原来的数组中</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-19-1><span class=c1>//以下面的数组为例</span>
</span><span id=__span-19-2><span class=kt>int</span><span class=w> </span><span class=n>data</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>10</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>7</span><span class=w> </span><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p><a class=glightbox href=images\image20.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image20.png></a></p> <p><a class=glightbox href=images\image21.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image21.png></a></p> <p><a class=glightbox href=images\image22.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image22.png></a></p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-20-1><span class=kt>void</span><span class=w> </span><span class=nf>_MergeSort</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>tmp</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-20-2><span class=p>{</span>
</span><span id=__span-20-3><span class=w>    </span><span class=c1>//确定递归结束条件</span>
</span><span id=__span-20-4><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-20-5><span class=w>    </span><span class=p>{</span>
</span><span id=__span-20-6><span class=w>        </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-20-7><span class=w>    </span><span class=p>}</span>
</span><span id=__span-20-8>
</span><span id=__span-20-9><span class=w>    </span><span class=c1>//分割数组，首先确定当前数组的中间位置</span>
</span><span id=__span-20-10><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>mid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>right</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>2</span><span class=p>;</span>
</span><span id=__span-20-11><span class=w>    </span><span class=n>_MergeSort</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>tmp</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=n>mid</span><span class=p>);</span>
</span><span id=__span-20-12><span class=w>    </span><span class=n>_MergeSort</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>tmp</span><span class=p>,</span><span class=w> </span><span class=n>mid</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-20-13>
</span><span id=__span-20-14><span class=w>    </span><span class=c1>//取小的数值尾插到tmp数组中</span>
</span><span id=__span-20-15><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>begin1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-20-16><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>end1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mid</span><span class=p>;</span>
</span><span id=__span-20-17><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>begin2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mid</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-20-18><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>end2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>right</span><span class=p>;</span>
</span><span id=__span-20-19><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-20-20><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>begin1</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end1</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>begin2</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end2</span><span class=p>)</span>
</span><span id=__span-20-21><span class=w>    </span><span class=p>{</span>
</span><span id=__span-20-22><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>begin1</span><span class=p>]</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin2</span><span class=p>])</span>
</span><span id=__span-20-23><span class=w>        </span><span class=p>{</span>
</span><span id=__span-20-24><span class=w>            </span><span class=n>tmp</span><span class=p>[</span><span class=n>i</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin1</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-20-25><span class=w>        </span><span class=p>}</span>
</span><span id=__span-20-26><span class=w>        </span><span class=k>else</span>
</span><span id=__span-20-27><span class=w>        </span><span class=p>{</span>
</span><span id=__span-20-28><span class=w>            </span><span class=n>tmp</span><span class=p>[</span><span class=n>i</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin2</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-20-29><span class=w>        </span><span class=p>}</span>
</span><span id=__span-20-30><span class=w>    </span><span class=p>}</span>
</span><span id=__span-20-31><span class=w>    </span><span class=c1>//存在一个数组先走完的情况</span>
</span><span id=__span-20-32><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>begin1</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end1</span><span class=p>)</span>
</span><span id=__span-20-33><span class=w>    </span><span class=p>{</span>
</span><span id=__span-20-34><span class=w>        </span><span class=n>tmp</span><span class=p>[</span><span class=n>i</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin1</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-20-35><span class=w>    </span><span class=p>}</span>
</span><span id=__span-20-36>
</span><span id=__span-20-37><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>begin2</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end2</span><span class=p>)</span>
</span><span id=__span-20-38><span class=w>    </span><span class=p>{</span>
</span><span id=__span-20-39><span class=w>        </span><span class=n>tmp</span><span class=p>[</span><span class=n>i</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin2</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-20-40><span class=w>    </span><span class=p>}</span>
</span><span id=__span-20-41>
</span><span id=__span-20-42><span class=w>    </span><span class=c1>//排序完之后将tmp数组中的数据拷贝回原来的数组</span>
</span><span id=__span-20-43><span class=w>    </span><span class=n>memcpy</span><span class=p>(</span><span class=n>data</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=n>right</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>left</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>));</span>
</span><span id=__span-20-44><span class=p>}</span>
</span><span id=__span-20-45>
</span><span id=__span-20-46><span class=c1>//归并排序递归版</span>
</span><span id=__span-20-47><span class=kt>void</span><span class=w> </span><span class=nf>MergeSort</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-20-48><span class=p>{</span>
</span><span id=__span-20-49><span class=w>    </span><span class=c1>//因为需要将排序好的数据重新拷贝到原来的数组中，所以需要开辟数组</span>
</span><span id=__span-20-50><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=n>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sz</span><span class=p>);</span>
</span><span id=__span-20-51><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>tmp</span><span class=p>);</span>
</span><span id=__span-20-52><span class=w>    </span><span class=c1>//防止主函数递归导致每次都会重新开辟空间，所以使用子函数</span>
</span><span id=__span-20-53><span class=w>    </span><span class=n>_MergeSort</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>tmp</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>sz</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-20-54><span class=w>    </span><span class=n>free</span><span class=p>(</span><span class=n>tmp</span><span class=p>);</span>
</span><span id=__span-20-55><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_23>非递归版本<a class=headerlink href=#_23 title="Permanent link">&para;</a></h3> <p>在归并排序中，不使用递归版本时，需要考虑如何对数据进行分堆以及区间的控制，基本思路如下：在循环中，排序间隔为<code>gap</code>的部分数值，再改变<code>gap</code>值，重复前面的步骤，直到最后排序完成。具体思路如下：</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-21-1><span class=c1>//以下面的数组为例</span>
</span><span id=__span-21-2><span class=kt>int</span><span class=w> </span><span class=n>data</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>10</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>7</span><span class=w> </span><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p><a class=glightbox href=images\image23.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image23.png></a></p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-22-1><span class=c1>//归并排序非递归版本</span>
</span><span id=__span-22-2><span class=kt>void</span><span class=w> </span><span class=nf>MergeSort_NotRecursion</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-22-3><span class=p>{</span>
</span><span id=__span-22-4><span class=w>    </span><span class=c1>//因为需要将排序好的数据重新拷贝到原来的数组中，所以需要开辟数组</span>
</span><span id=__span-22-5><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=n>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sz</span><span class=p>);</span>
</span><span id=__span-22-6><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>tmp</span><span class=p>);</span>
</span><span id=__span-22-7><span class=w>    </span><span class=c1>//开始间隔为1</span>
</span><span id=__span-22-8><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>gap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-22-9><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>gap</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-22-10><span class=w>    </span><span class=p>{</span>
</span><span id=__span-22-11><span class=w>        </span><span class=c1>//注意i每一次更新为两倍的gap，因为gap只是代表一组有多少个数据，需要i找到下一组</span>
</span><span id=__span-22-12><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>gap</span><span class=p>)</span>
</span><span id=__span-22-13><span class=w>        </span><span class=p>{</span>
</span><span id=__span-22-14><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>begin1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-22-15><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>end1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>gap</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-22-16><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>begin2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>gap</span><span class=p>;</span>
</span><span id=__span-22-17><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>end2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>gap</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-22-18><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>begin1</span><span class=p>;</span>
</span><span id=__span-22-19><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>begin1</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end1</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>begin2</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end2</span><span class=p>)</span>
</span><span id=__span-22-20><span class=w>            </span><span class=p>{</span>
</span><span id=__span-22-21><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>begin1</span><span class=p>]</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin2</span><span class=p>])</span><span class=w> </span>
</span><span id=__span-22-22><span class=w>                </span><span class=p>{</span>
</span><span id=__span-22-23><span class=w>                    </span><span class=n>tmp</span><span class=p>[</span><span class=n>j</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin1</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-22-24><span class=w>                </span><span class=p>}</span>
</span><span id=__span-22-25><span class=w>                </span><span class=k>else</span>
</span><span id=__span-22-26><span class=w>                </span><span class=p>{</span>
</span><span id=__span-22-27><span class=w>                    </span><span class=n>tmp</span><span class=p>[</span><span class=n>j</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin2</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-22-28><span class=w>                </span><span class=p>}</span>
</span><span id=__span-22-29><span class=w>            </span><span class=p>}</span>
</span><span id=__span-22-30>
</span><span id=__span-22-31><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>begin1</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end1</span><span class=p>)</span>
</span><span id=__span-22-32><span class=w>            </span><span class=p>{</span>
</span><span id=__span-22-33><span class=w>                </span><span class=n>tmp</span><span class=p>[</span><span class=n>j</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin1</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-22-34><span class=w>            </span><span class=p>}</span>
</span><span id=__span-22-35>
</span><span id=__span-22-36><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>begin2</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end2</span><span class=p>)</span>
</span><span id=__span-22-37><span class=w>            </span><span class=p>{</span>
</span><span id=__span-22-38><span class=w>                </span><span class=n>tmp</span><span class=p>[</span><span class=n>j</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin2</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-22-39><span class=w>            </span><span class=p>}</span>
</span><span id=__span-22-40><span class=w>        </span><span class=p>}</span>
</span><span id=__span-22-41><span class=w>        </span><span class=n>memcpy</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>tmp</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sz</span><span class=p>);</span>
</span><span id=__span-22-42><span class=w>        </span><span class=n>gap</span><span class=w> </span><span class=o>*=</span><span class=w> </span><span class=mi>2</span><span class=p>;</span>
</span><span id=__span-22-43><span class=w>    </span><span class=p>}</span>
</span><span id=__span-22-44>
</span><span id=__span-22-45><span class=w>    </span><span class=n>free</span><span class=p>(</span><span class=n>tmp</span><span class=p>);</span>
</span><span id=__span-22-46><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>但是上面的方法存在一个问题，如果数组的数据不是2的次方个，那么将无法完成排序，存在越界问题</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-23-1><span class=c1>//下面是当数组数据为9个时的越界情况</span>
</span><span id=__span-23-2><span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>1</span><span class=w> </span><span class=mi>1</span><span class=p>]</span>
</span><span id=__span-23-3><span class=p>[</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=mi>2</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>3</span><span class=w> </span><span class=mi>3</span><span class=p>]</span>
</span><span id=__span-23-4><span class=p>[</span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>4</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>5</span><span class=w> </span><span class=mi>5</span><span class=p>]</span>
</span><span id=__span-23-5><span class=p>[</span><span class=mi>6</span><span class=p>,</span><span class=w> </span><span class=mi>6</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>7</span><span class=w> </span><span class=mi>7</span><span class=p>]</span>
</span><span id=__span-23-6><span class=p>[</span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=mi>8</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>9</span><span class=w> </span><span class=mi>9</span><span class=p>]</span>
</span><span id=__span-23-7>
</span><span id=__span-23-8><span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>2</span><span class=w> </span><span class=mi>3</span><span class=p>]</span>
</span><span id=__span-23-9><span class=p>[</span><span class=mi>4</span><span class=p>,</span><span class=w> </span><span class=mi>5</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>6</span><span class=w> </span><span class=mi>7</span><span class=p>]</span>
</span><span id=__span-23-10><span class=p>[</span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=mi>9</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>10</span><span class=w> </span><span class=mi>11</span><span class=p>]</span>
</span><span id=__span-23-11>
</span><span id=__span-23-12><span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>4</span><span class=w> </span><span class=mi>7</span><span class=p>]</span>
</span><span id=__span-23-13><span class=p>[</span><span class=mi>8</span><span class=p>,</span><span class=w> </span><span class=mi>11</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>12</span><span class=w> </span><span class=mi>15</span><span class=p>]</span>
</span><span id=__span-23-14>
</span><span id=__span-23-15><span class=p>[</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>7</span><span class=p>]</span><span class=w> </span><span class=p>[</span><span class=mi>8</span><span class=w> </span><span class=mi>15</span><span class=p>]</span>
</span></code></pre></div></td></tr></table></div> <p>越界的情况分为三种：</p> <ol> <li><code>end1</code>、<code>begin2</code>、<code>end2</code>越界，例如[8, 11]、[12, 15]</li> <li><code>begin2</code>、<code>end2</code>越界，例如[10, 11]</li> <li><code>end2</code>越界，例如[8, 15]</li> </ol> <p>对于上面的问题可以考虑对边界进行修正</p> <p><a class=glightbox href=images\image24.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image24.png></a></p> <p>第一种解决方法：</p> <ol> <li>当<code>begin2</code>和<code>end1</code>越界时，跳出循环不进行后方数据的调整</li> <li>当<code>end2</code>越界时，修正<code>end2</code>为数组最后一个元素的位置</li> </ol> <p><a class=glightbox href=images\image25.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image25.png></a></p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-24-1><span class=c1>//归并排序非递归版本</span>
</span><span id=__span-24-2><span class=kt>void</span><span class=w> </span><span class=nf>MergeSort_NotRecursion</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-24-3><span class=p>{</span>
</span><span id=__span-24-4><span class=w>    </span><span class=c1>//因为需要将排序好的数据重新拷贝到原来的数组中，所以需要开辟数组</span>
</span><span id=__span-24-5><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=n>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sz</span><span class=p>);</span>
</span><span id=__span-24-6><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>tmp</span><span class=p>);</span>
</span><span id=__span-24-7><span class=w>    </span><span class=c1>//开始间隔为1</span>
</span><span id=__span-24-8><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>gap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-24-9><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>gap</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-24-10><span class=w>    </span><span class=p>{</span><span class=w>    </span>
</span><span id=__span-24-11><span class=w>        </span><span class=c1>//注意i每一次更新为两倍的gap，因为gap只是代表一组有多少个数据，需要i找到下一组</span>
</span><span id=__span-24-12><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>gap</span><span class=p>)</span>
</span><span id=__span-24-13><span class=w>        </span><span class=p>{</span>
</span><span id=__span-24-14><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>begin1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-24-15><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>end1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>gap</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-24-16><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>begin2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>gap</span><span class=p>;</span>
</span><span id=__span-24-17><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>end2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>gap</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-24-18><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>begin1</span><span class=p>;</span>
</span><span id=__span-24-19>
</span><span id=__span-24-20><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>begin2</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>sz</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>end1</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-24-21><span class=w>            </span><span class=p>{</span>
</span><span id=__span-24-22><span class=w>                </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-24-23><span class=w>            </span><span class=p>}</span>
</span><span id=__span-24-24>
</span><span id=__span-24-25><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>end2</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-24-26><span class=w>            </span><span class=p>{</span>
</span><span id=__span-24-27><span class=w>                </span><span class=n>end2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sz</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-24-28><span class=w>            </span><span class=p>}</span>
</span><span id=__span-24-29>
</span><span id=__span-24-30><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>begin1</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end1</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>begin2</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end2</span><span class=p>)</span>
</span><span id=__span-24-31><span class=w>            </span><span class=p>{</span>
</span><span id=__span-24-32><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>begin1</span><span class=p>]</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin2</span><span class=p>])</span><span class=w> </span>
</span><span id=__span-24-33><span class=w>                </span><span class=p>{</span>
</span><span id=__span-24-34><span class=w>                    </span><span class=n>tmp</span><span class=p>[</span><span class=n>j</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin1</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-24-35><span class=w>                </span><span class=p>}</span>
</span><span id=__span-24-36><span class=w>                </span><span class=k>else</span>
</span><span id=__span-24-37><span class=w>                </span><span class=p>{</span>
</span><span id=__span-24-38><span class=w>                    </span><span class=n>tmp</span><span class=p>[</span><span class=n>j</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin2</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-24-39><span class=w>                </span><span class=p>}</span>
</span><span id=__span-24-40><span class=w>            </span><span class=p>}</span>
</span><span id=__span-24-41>
</span><span id=__span-24-42><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>begin1</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end1</span><span class=p>)</span>
</span><span id=__span-24-43><span class=w>            </span><span class=p>{</span>
</span><span id=__span-24-44><span class=w>                </span><span class=n>tmp</span><span class=p>[</span><span class=n>j</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin1</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-24-45><span class=w>            </span><span class=p>}</span>
</span><span id=__span-24-46>
</span><span id=__span-24-47><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>begin2</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end2</span><span class=p>)</span>
</span><span id=__span-24-48><span class=w>            </span><span class=p>{</span>
</span><span id=__span-24-49><span class=w>                </span><span class=n>tmp</span><span class=p>[</span><span class=n>j</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin2</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-24-50><span class=w>            </span><span class=p>}</span>
</span><span id=__span-24-51><span class=w>            </span><span class=n>memcpy</span><span class=p>(</span><span class=n>data</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>i</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=n>end2</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>));</span>
</span><span id=__span-24-52><span class=w>        </span><span class=p>}</span>
</span><span id=__span-24-53><span class=w>        </span><span class=n>gap</span><span class=w> </span><span class=o>*=</span><span class=w> </span><span class=mi>2</span><span class=p>;</span>
</span><span id=__span-24-54><span class=w>    </span><span class=p>}</span>
</span><span id=__span-24-55>
</span><span id=__span-24-56><span class=w>    </span><span class=n>free</span><span class=p>(</span><span class=n>tmp</span><span class=p>);</span>
</span><span id=__span-24-57><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>第二种解决方法：</p> <p>直接对所有区间进行修正，将越界的区间修正成左区间大于右区间的不存在区间，此时不存在的区间将不会进入循环，而存在的区间也是有效区间，直接整体拷贝即可</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-25-1><span class=kt>void</span><span class=w> </span><span class=nf>MergeSort_NotRecursion1</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-25-2><span class=p>{</span>
</span><span id=__span-25-3><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=n>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sz</span><span class=p>);</span>
</span><span id=__span-25-4><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>tmp</span><span class=p>);</span>
</span><span id=__span-25-5><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>gap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-25-6><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>gap</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-25-7><span class=w>    </span><span class=p>{</span>
</span><span id=__span-25-8><span class=w>        </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+=</span><span class=w> </span><span class=mi>2</span><span class=o>*</span><span class=n>gap</span><span class=p>)</span>
</span><span id=__span-25-9><span class=w>        </span><span class=p>{</span>
</span><span id=__span-25-10><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>begin1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-25-11><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>end1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>gap</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-25-12><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>begin2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>gap</span><span class=p>;</span>
</span><span id=__span-25-13><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>end2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>gap</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-25-14><span class=w>            </span><span class=kt>int</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-25-15>
</span><span id=__span-25-16><span class=w>            </span><span class=c1>//1. end1 begin2 end2越界</span>
</span><span id=__span-25-17><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>end1</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-25-18><span class=w>            </span><span class=p>{</span>
</span><span id=__span-25-19><span class=w>                </span><span class=n>end1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sz</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-25-20><span class=w>                </span><span class=c1>//修正的不存在区间</span>
</span><span id=__span-25-21><span class=w>                </span><span class=n>begin2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sz</span><span class=p>;</span>
</span><span id=__span-25-22><span class=w>                </span><span class=n>end2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sz</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-25-23><span class=w>            </span><span class=p>}</span>
</span><span id=__span-25-24><span class=w>            </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>begin2</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>sz</span><span class=p>)</span><span class=c1>//2. begin2 end2 越界</span>
</span><span id=__span-25-25><span class=w>            </span><span class=p>{</span>
</span><span id=__span-25-26><span class=w>                </span><span class=c1>//修正的不存在区间</span>
</span><span id=__span-25-27><span class=w>                </span><span class=n>begin2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sz</span><span class=p>;</span>
</span><span id=__span-25-28><span class=w>                </span><span class=n>end2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sz</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-25-29><span class=w>            </span><span class=p>}</span>
</span><span id=__span-25-30><span class=w>            </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=p>(</span><span class=n>end2</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=n>sz</span><span class=p>)</span><span class=c1>//3. end2越界</span>
</span><span id=__span-25-31><span class=w>            </span><span class=p>{</span>
</span><span id=__span-25-32><span class=w>                </span><span class=n>end2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sz</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-25-33><span class=w>            </span><span class=p>}</span>
</span><span id=__span-25-34>
</span><span id=__span-25-35><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>begin1</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end1</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>begin2</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end2</span><span class=p>)</span>
</span><span id=__span-25-36><span class=w>            </span><span class=p>{</span>
</span><span id=__span-25-37><span class=w>                </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>begin1</span><span class=p>]</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin2</span><span class=p>])</span><span class=c1>//当使用&lt;=时防止出现相等时进行交换，使得排序稳定</span>
</span><span id=__span-25-38><span class=w>                </span><span class=p>{</span>
</span><span id=__span-25-39><span class=w>                    </span><span class=n>tmp</span><span class=p>[</span><span class=n>j</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin1</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-25-40><span class=w>                </span><span class=p>}</span>
</span><span id=__span-25-41><span class=w>                </span><span class=k>else</span>
</span><span id=__span-25-42><span class=w>                </span><span class=p>{</span>
</span><span id=__span-25-43><span class=w>                    </span><span class=n>tmp</span><span class=p>[</span><span class=n>j</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin2</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-25-44><span class=w>                </span><span class=p>}</span>
</span><span id=__span-25-45><span class=w>            </span><span class=p>}</span>
</span><span id=__span-25-46>
</span><span id=__span-25-47><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>begin1</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end1</span><span class=p>)</span>
</span><span id=__span-25-48><span class=w>            </span><span class=p>{</span>
</span><span id=__span-25-49><span class=w>                </span><span class=n>tmp</span><span class=p>[</span><span class=n>j</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin1</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-25-50><span class=w>            </span><span class=p>}</span>
</span><span id=__span-25-51>
</span><span id=__span-25-52><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>begin2</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end2</span><span class=p>)</span>
</span><span id=__span-25-53><span class=w>            </span><span class=p>{</span>
</span><span id=__span-25-54><span class=w>                </span><span class=n>tmp</span><span class=p>[</span><span class=n>j</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin2</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-25-55><span class=w>            </span><span class=p>}</span>
</span><span id=__span-25-56>
</span><span id=__span-25-57><span class=w>        </span><span class=p>}</span>
</span><span id=__span-25-58><span class=w>        </span><span class=n>memcpy</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>tmp</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sz</span><span class=p>);</span>
</span><span id=__span-25-59><span class=w>        </span><span class=n>gap</span><span class=w> </span><span class=o>*=</span><span class=w> </span><span class=mi>2</span><span class=p>;</span>
</span><span id=__span-25-60><span class=w>    </span><span class=p>}</span>
</span><span id=__span-25-61>
</span><span id=__span-25-62><span class=w>    </span><span class=n>free</span><span class=p>(</span><span class=n>tmp</span><span class=p>);</span>
</span><span id=__span-25-63><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_24>归并排序小优化<a class=headerlink href=#_24 title="Permanent link">&para;</a></h3> <p>如果数据的个数特别大时，再让数据一直递归到只有一个数据的一层时会导致递归太深从而栈溢出，可以考虑在只有十个数据递归时采用其他排序算法进行优化，此处可以采用直接插入排序，因为每进行一次递归，数据会被分成两部分，所以当递归到只有十个数据时时，数据个数就已经比较小了</p> <p><a class=glightbox href=images\image26.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image26.png></a></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>这个优化只是在一定程度上有节省，当数据量特别大时，消耗和递归基本上一致</p> </div> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-26-1><span class=kt>void</span><span class=w> </span><span class=nf>InsertSort</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-26-2><span class=p>{</span>
</span><span id=__span-26-3><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-26-4><span class=w>    </span><span class=p>{</span>
</span><span id=__span-26-5><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span><span id=__span-26-6><span class=w>        </span><span class=kt>int</span><span class=w> </span><span class=n>end</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-26-7><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>end</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-26-8><span class=w>        </span><span class=p>{</span>
</span><span id=__span-26-9><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>tmp</span><span class=p>)</span>
</span><span id=__span-26-10><span class=w>            </span><span class=p>{</span>
</span><span id=__span-26-11><span class=w>                </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=p>];</span>
</span><span id=__span-26-12><span class=w>                </span><span class=n>end</span><span class=o>--</span><span class=p>;</span>
</span><span id=__span-26-13><span class=w>            </span><span class=p>}</span>
</span><span id=__span-26-14><span class=w>            </span><span class=k>else</span>
</span><span id=__span-26-15><span class=w>            </span><span class=p>{</span>
</span><span id=__span-26-16><span class=w>                </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-26-17><span class=w>            </span><span class=p>}</span>
</span><span id=__span-26-18><span class=w>        </span><span class=p>}</span>
</span><span id=__span-26-19><span class=w>        </span><span class=n>data</span><span class=p>[</span><span class=n>end</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>tmp</span><span class=p>;</span>
</span><span id=__span-26-20><span class=w>    </span><span class=p>}</span>
</span><span id=__span-26-21><span class=p>}</span>
</span><span id=__span-26-22>
</span><span id=__span-26-23><span class=c1>//归并排序递归版本优化</span>
</span><span id=__span-26-24><span class=kt>void</span><span class=w> </span><span class=nf>_MergeSort_modified</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>tmp</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-26-25><span class=p>{</span>
</span><span id=__span-26-26><span class=w>    </span><span class=c1>//确定递归结束条件</span>
</span><span id=__span-26-27><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=n>right</span><span class=p>)</span>
</span><span id=__span-26-28><span class=w>    </span><span class=p>{</span>
</span><span id=__span-26-29><span class=w>        </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-26-30><span class=w>    </span><span class=p>}</span>
</span><span id=__span-26-31>
</span><span id=__span-26-32><span class=w>    </span><span class=c1>//小区间优化——直接插入排序</span>
</span><span id=__span-26-33><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>((</span><span class=n>left</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>right</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=mi>10</span><span class=p>)</span>
</span><span id=__span-26-34><span class=w>    </span><span class=p>{</span>
</span><span id=__span-26-35><span class=w>        </span><span class=n>InsertSort</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>right</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-26-36><span class=w>    </span><span class=p>}</span>
</span><span id=__span-26-37>
</span><span id=__span-26-38><span class=w>    </span><span class=c1>//分割数组，首先确定当前数组的中间位置</span>
</span><span id=__span-26-39><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>mid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>left</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>right</span><span class=p>)</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mi>2</span><span class=p>;</span>
</span><span id=__span-26-40><span class=w>    </span><span class=n>_MergeSort_modified</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>tmp</span><span class=p>,</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=n>mid</span><span class=p>);</span>
</span><span id=__span-26-41><span class=w>    </span><span class=n>_MergeSort_modified</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>tmp</span><span class=p>,</span><span class=w> </span><span class=n>mid</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=n>right</span><span class=p>);</span>
</span><span id=__span-26-42>
</span><span id=__span-26-43><span class=w>    </span><span class=c1>//取小的数值尾插到tmp数组中</span>
</span><span id=__span-26-44><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>begin1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-26-45><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>end1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mid</span><span class=p>;</span>
</span><span id=__span-26-46><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>begin2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>mid</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-26-47><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>end2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>right</span><span class=p>;</span>
</span><span id=__span-26-48><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>left</span><span class=p>;</span>
</span><span id=__span-26-49><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>begin1</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end1</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=n>begin2</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end2</span><span class=p>)</span>
</span><span id=__span-26-50><span class=w>    </span><span class=p>{</span>
</span><span id=__span-26-51><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>begin1</span><span class=p>]</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin2</span><span class=p>])</span>
</span><span id=__span-26-52><span class=w>        </span><span class=p>{</span>
</span><span id=__span-26-53><span class=w>            </span><span class=n>tmp</span><span class=p>[</span><span class=n>i</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin1</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-26-54><span class=w>        </span><span class=p>}</span>
</span><span id=__span-26-55><span class=w>        </span><span class=k>else</span>
</span><span id=__span-26-56><span class=w>        </span><span class=p>{</span>
</span><span id=__span-26-57><span class=w>            </span><span class=n>tmp</span><span class=p>[</span><span class=n>i</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin2</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-26-58><span class=w>        </span><span class=p>}</span>
</span><span id=__span-26-59><span class=w>    </span><span class=p>}</span>
</span><span id=__span-26-60><span class=w>    </span><span class=c1>//存在一个数组先走完的情况</span>
</span><span id=__span-26-61><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>begin1</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end1</span><span class=p>)</span>
</span><span id=__span-26-62><span class=w>    </span><span class=p>{</span>
</span><span id=__span-26-63><span class=w>        </span><span class=n>tmp</span><span class=p>[</span><span class=n>i</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin1</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-26-64><span class=w>    </span><span class=p>}</span>
</span><span id=__span-26-65>
</span><span id=__span-26-66><span class=w>    </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>begin2</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=n>end2</span><span class=p>)</span>
</span><span id=__span-26-67><span class=w>    </span><span class=p>{</span>
</span><span id=__span-26-68><span class=w>        </span><span class=n>tmp</span><span class=p>[</span><span class=n>i</span><span class=o>++</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>begin2</span><span class=o>++</span><span class=p>];</span>
</span><span id=__span-26-69><span class=w>    </span><span class=p>}</span>
</span><span id=__span-26-70>
</span><span id=__span-26-71><span class=w>    </span><span class=c1>//排序完之后将tmp数组中的数据拷贝回原来的数组</span>
</span><span id=__span-26-72><span class=w>    </span><span class=n>memcpy</span><span class=p>(</span><span class=n>data</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>left</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=p>(</span><span class=n>right</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>left</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>));</span>
</span><span id=__span-26-73><span class=p>}</span>
</span><span id=__span-26-74>
</span><span id=__span-26-75><span class=c1>//归并排序递归版</span>
</span><span id=__span-26-76><span class=kt>void</span><span class=w> </span><span class=nf>MergeSort_modified</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-26-77><span class=p>{</span>
</span><span id=__span-26-78><span class=w>    </span><span class=c1>//因为需要将排序好的数据重新拷贝到原来的数组中，所以需要开辟数组</span>
</span><span id=__span-26-79><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=n>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=n>sz</span><span class=p>);</span>
</span><span id=__span-26-80><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>tmp</span><span class=p>);</span>
</span><span id=__span-26-81><span class=w>    </span><span class=c1>//防止主函数递归导致每次都会重新开辟空间，所以使用子函数</span>
</span><span id=__span-26-82><span class=w>    </span><span class=n>_MergeSort_modified</span><span class=p>(</span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=n>tmp</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=n>sz</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=mi>1</span><span class=p>);</span>
</span><span id=__span-26-83><span class=w>    </span><span class=n>free</span><span class=p>(</span><span class=n>tmp</span><span class=p>);</span>
</span><span id=__span-26-84><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>归并排序的时间复杂度是<span class=arithmatex>\(O(Nlog_{2}{N})\)</span>，空间复杂度为O(N)，归并排序时稳定排序算法</p> <h2 id=_25>计数排序<a class=headerlink href=#_25 title="Permanent link">&para;</a></h2> <p>计数排序又称为鸽巢原理，是对哈希直接定址法的变形应用。具体思路为：</p> <ol> <li>统计相同元素出现次数</li> <li>根据统计的结果将序列回收到原来的序列中</li> </ol> <h3 id=_26>计数排序基本思路<a class=headerlink href=#_26 title="Permanent link">&para;</a></h3> <p>基本思路分析：</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-27-1><span class=c1>//以下面的数组为例</span>
</span><span id=__span-27-2><span class=kt>int</span><span class=w> </span><span class=n>data</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>5</span><span class=w> </span><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p><a class=glightbox href=images\image27.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=images\image27.png></a></p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-28-1><span class=kt>void</span><span class=w> </span><span class=nf>CountSort</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-28-2><span class=p>{</span>
</span><span id=__span-28-3><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>max</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span><span id=__span-28-4><span class=w>    </span><span class=c1>//遍历数组找出最大值</span>
</span><span id=__span-28-5><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-28-6><span class=w>    </span><span class=p>{</span>
</span><span id=__span-28-7><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>max</span><span class=p>)</span>
</span><span id=__span-28-8><span class=w>        </span><span class=p>{</span>
</span><span id=__span-28-9><span class=w>            </span><span class=n>max</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span><span id=__span-28-10><span class=w>        </span><span class=p>}</span>
</span><span id=__span-28-11><span class=w>    </span><span class=p>}</span>
</span><span id=__span-28-12>
</span><span id=__span-28-13><span class=w>    </span><span class=c1>//根据最大值开辟数组</span>
</span><span id=__span-28-14><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=n>calloc</span><span class=p>(</span><span class=n>max</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>));</span>
</span><span id=__span-28-15><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>tmp</span><span class=p>);</span>
</span><span id=__span-28-16>
</span><span id=__span-28-17><span class=w>    </span><span class=c1>//统计数据个数</span>
</span><span id=__span-28-18><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-28-19><span class=w>    </span><span class=p>{</span>
</span><span id=__span-28-20><span class=w>        </span><span class=n>tmp</span><span class=p>[</span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>]]</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-28-21><span class=w>    </span><span class=p>}</span>
</span><span id=__span-28-22>
</span><span id=__span-28-23><span class=w>    </span><span class=c1>//按照数据个数写回原数组</span>
</span><span id=__span-28-24><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-28-25><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=p>(</span><span class=n>max</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>);</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-28-26><span class=w>    </span><span class=p>{</span>
</span><span id=__span-28-27><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>tmp</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-28-28><span class=w>        </span><span class=p>{</span>
</span><span id=__span-28-29><span class=w>            </span><span class=n>data</span><span class=p>[</span><span class=n>j</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=p>;</span>
</span><span id=__span-28-30><span class=w>            </span><span class=n>tmp</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>--</span><span class=p>;</span>
</span><span id=__span-28-31><span class=w>            </span><span class=n>j</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-28-32><span class=w>        </span><span class=p>}</span>
</span><span id=__span-28-33><span class=w>    </span><span class=p>}</span>
</span><span id=__span-28-34><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h3 id=_27>计数排序改进思路<a class=headerlink href=#_27 title="Permanent link">&para;</a></h3> <p>上面的数据如果出现下面的情况：</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-29-1><span class=kt>int</span><span class=w> </span><span class=n>data</span><span class=p>[]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=mi>100</span><span class=p>,</span><span class=mi>103</span><span class=p>,</span><span class=mi>104</span><span class=p>,</span><span class=mi>105</span><span class=p>,</span><span class=mi>105</span><span class=p>,</span><span class=mi>107</span><span class=p>,</span><span class=mi>109</span><span class=p>,</span><span class=mi>102</span><span class=w> </span><span class=p>};</span>
</span></code></pre></div></td></tr></table></div> <p>则不能考虑开辟最大元素+1个元素的空间，因为此时总数据个数小于数组的总长度，造成了空间浪费，可以考虑找出数组中的最大值和最小值，取其差值+1开辟数组，并且此时对应的下标应该是两数之差</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-30-1><span class=c1>//计数排序改进思路</span>
</span><span id=__span-30-2><span class=kt>void</span><span class=w> </span><span class=nf>CountSort_modified</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>data</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>sz</span><span class=p>)</span>
</span><span id=__span-30-3><span class=p>{</span>
</span><span id=__span-30-4><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>max</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span><span id=__span-30-5><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span><span id=__span-30-6><span class=w>    </span><span class=c1>//遍历数组找出最大值</span>
</span><span id=__span-30-7><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-30-8><span class=w>    </span><span class=p>{</span>
</span><span id=__span-30-9><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>max</span><span class=p>)</span>
</span><span id=__span-30-10><span class=w>        </span><span class=p>{</span>
</span><span id=__span-30-11><span class=w>            </span><span class=n>max</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span><span id=__span-30-12><span class=w>        </span><span class=p>}</span>
</span><span id=__span-30-13>
</span><span id=__span-30-14><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>min</span><span class=p>)</span>
</span><span id=__span-30-15><span class=w>        </span><span class=p>{</span>
</span><span id=__span-30-16><span class=w>            </span><span class=n>min</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>];</span>
</span><span id=__span-30-17><span class=w>        </span><span class=p>}</span>
</span><span id=__span-30-18><span class=w>    </span><span class=p>}</span>
</span><span id=__span-30-19>
</span><span id=__span-30-20><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>range</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>max</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>min</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=p>;</span>
</span><span id=__span-30-21><span class=w>    </span><span class=c1>//根据最大值开辟数组</span>
</span><span id=__span-30-22><span class=w>    </span><span class=kt>int</span><span class=o>*</span><span class=w> </span><span class=n>tmp</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span><span class=n>calloc</span><span class=p>(</span><span class=n>range</span><span class=p>,</span><span class=w> </span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>));</span>
</span><span id=__span-30-23><span class=w>    </span><span class=n>assert</span><span class=p>(</span><span class=n>tmp</span><span class=p>);</span>
</span><span id=__span-30-24>
</span><span id=__span-30-25><span class=w>    </span><span class=c1>//统计数据个数</span>
</span><span id=__span-30-26><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>sz</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-30-27><span class=w>    </span><span class=p>{</span>
</span><span id=__span-30-28><span class=w>        </span><span class=n>tmp</span><span class=p>[</span><span class=n>data</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>min</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-30-29><span class=w>    </span><span class=p>}</span>
</span><span id=__span-30-30>
</span><span id=__span-30-31><span class=w>    </span><span class=c1>//按照数据个数写回原数组</span>
</span><span id=__span-30-32><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>j</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-30-33><span class=w>    </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>&lt;</span><span class=w> </span><span class=n>range</span><span class=p>;</span><span class=w> </span><span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span><span id=__span-30-34><span class=w>    </span><span class=p>{</span>
</span><span id=__span-30-35><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=n>tmp</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-30-36><span class=w>        </span><span class=p>{</span>
</span><span id=__span-30-37><span class=w>            </span><span class=n>data</span><span class=p>[</span><span class=n>j</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>min</span><span class=p>;</span>
</span><span id=__span-30-38><span class=w>            </span><span class=n>tmp</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>--</span><span class=p>;</span>
</span><span id=__span-30-39><span class=w>            </span><span class=n>j</span><span class=o>++</span><span class=p>;</span>
</span><span id=__span-30-40><span class=w>        </span><span class=p>}</span>
</span><span id=__span-30-41><span class=w>    </span><span class=p>}</span>
</span><span id=__span-30-42><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <p>通过上面的思路解析，很明显计数排序的局限性很大，需要排序的数据必须非常集中，并且数据只能是整型，否则不容易计数</p> <p>计数排序的时间复杂度为O(max(N, <code>range</code>))，空间复杂度为O(<code>range</code>)</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2025年8月13日</span> </span> </aside> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> 页面有帮助吗？ </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title=页面对我有帮助 data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title=页面没有帮助到我 data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> 谢谢你的反馈！ </div> <div data-md-value=0 hidden> 谢谢你的反馈！联系<a href=https://www.help-doc.top/author/contact/contact.html>作者</a>提供更详细的信息 </div> </div> </div> </fieldset> </form> <!-- Waline 评论系统 --> <div id=waline></div> <!-- 阅读进度条 - 直接在HTML中定义 --> <div class=reading-progress></div> <!-- 滚动指示器 - 直接在HTML中定义 --> <div class=scroll-indicator></div> <!-- 评论系统 --> <!-- Waline 评论系统 --> <div id=waline></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2024-2025 柯懒不是柯南 </div> </div> <div class="md-footer-love md-typeset"> 一闪一闪亮晶晶，不及<span class=love-highlight>小亮</span><span class=love-heart>♥</span>照我心。To Li Liang </div> <div class=md-social> <a href=https://github.com/H0308 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.help-doc.top/author/contact/contact.html target=_blank rel=noopener title=www.help-doc.top class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.indexes", "navigation.prune", "navigation.tabs", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src=../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../javascripts/katex.min.js></script> <script src=../../javascripts/other.min.js></script> <script src=../../javascripts/copyright.min.js></script> <script src=../../javascripts/waline.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js></script> <script src=https://cdn.jsdelivr.net/npm/mermaid@11.5.0/dist/mermaid.min.js></script> <script src=../../assets/javascripts/toggle-sidebar.js async></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>