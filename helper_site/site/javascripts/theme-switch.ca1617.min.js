document.addEventListener('DOMContentLoaded',()=>{const themeSwitch=document.createElement('div');themeSwitch.className='theme-switch';const savedTheme=localStorage.getItem('preferred-theme')||'theme1';themeSwitch.innerHTML=`
        <select onchange="switchTheme(this.value)">
            <option value="theme1" ${savedTheme === 'theme1' ? 'selected' : ''}>新版主题</option>
            <option value="theme2" ${savedTheme === 'theme2' ? 'selected' : ''}>旧版主题</option>
        </select>
    `;const searchEl=document.querySelector('.md-search');searchEl.parentNode.insertBefore(themeSwitch,searchEl);applyTheme(savedTheme);});function applyTheme(theme){const links=document.querySelectorAll('link[rel="stylesheet"]');links.forEach(link=>{if(link.href.includes('theme')){link.disabled=!link.href.includes(theme);}});}
function switchTheme(theme){const links=document.querySelectorAll('link[rel="stylesheet"]');const ANIMATION_DURATION=800;const overlay=document.createElement('div');overlay.className='theme-overlay';document.body.appendChild(overlay);requestAnimationFrame(()=>{overlay.classList.add('active');document.body.style.transition=`opacity ${ANIMATION_DURATION}ms cubic-bezier(0.4, 0, 0.2, 1)`;document.body.style.opacity='0';});setTimeout(()=>{applyTheme(theme);localStorage.setItem('preferred-theme',theme);setTimeout(()=>{document.body.style.opacity='1';overlay.classList.remove('active');setTimeout(()=>overlay.remove(),800);},100);},ANIMATION_DURATION/2);}