<!doctype html><html lang=zh class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://www.help-doc.top/other/func-stack-c/func-stack-c.html><link rel=prev href=../shell/shell.html><link rel=next href=../xml/xml.html><link rel=icon href=../../images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.12"><title>关于函数栈帧（C语言演示） - 柯懒的知识库</title><link rel=stylesheet href=../../assets/stylesheets/main.2afb09e1.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=stylesheet href=../../css/timeline.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-9XWRGNRRSY"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-9XWRGNRRSY",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-9XWRGNRRSY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=stylesheet href=../../stylesheets/colors.min.css><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (max-width: 1199px)"><link rel=stylesheet href=../../stylesheets/theme2.min.css media="screen and (min-width: 1200px)" id=theme2-desktop><link rel=stylesheet href=../../stylesheets/theme1.min.css media="screen and (min-width: 1200px)" id=theme1-desktop><link rel=stylesheet href=../../stylesheets/print.min.css><link rel=stylesheet href=../../stylesheets/font-dongguanti.min.css id=font-dongguanti><link rel=stylesheet href=../../stylesheets/font-oppoti.min.css id=font-oppoti disabled><link rel=stylesheet href=../../stylesheets/font-jiangchengti.min.css id=font-jiangchengti disabled><link rel=stylesheet href=../../stylesheets/font-lxgw.min.css id=font-lxgw disabled><link rel=stylesheet href=../../stylesheets/code-font-dejavu-sans-mono.min.css id=code-font-dejavu-sans-mono><link rel=stylesheet href=../../stylesheets/code-font-zsft-hk.min.css id=code-font-zsft-hk disabled><link rel=stylesheet href=../../stylesheets/code-font-google-sans-code.min.css id=code-font-google-sans-code disabled><link rel=stylesheet href=https://unpkg.com/@waline/client@v3/dist/waline.css><link rel=stylesheet href=../../stylesheets/waline.min.css><script src=../../javascripts/start.min.js></script> <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#c class=md-skip> 跳转至 </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=页眉> <a href=../../index.html title=柯懒的知识库 class="md-header__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> 柯懒的知识库 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 关于函数栈帧（C语言演示） </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=cyan aria-label type=radio name=__palette id=__palette_1> </form> <!-- 头像元素 - 直接在HTML中定义 --> <div class=header-avatar> <img src=../../author/作者.assets/20250206-200653.jpg alt=头像> <div class=avatar-dropdown> <p><strong>柯懒不是柯南</strong></p> <a href=../../author/contact/contact.html class=avatar-dropdown-item>吵醒柯懒</a> <div class=avatar-dropdown-divider></div> <a href=../../author/about/about.html class=avatar-dropdown-item>柯懒自传</a> <div class=avatar-dropdown-divider></div> <a href=https://github.com/H0308 class=avatar-dropdown-item>柯懒的零食库</a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜索 placeholder=搜索 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=查找> <button type=reset class="md-search__icon md-icon" title=清空当前内容 aria-label=清空当前内容 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜索引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <!-- 独立的切换按钮 --> <div class=toolbar-toggle-btn id=toolbarToggleBtn onclick=toggleToolbar()> <div class=toggle-icon> <svg class=toggle-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=16 height=16> <path d="M346.538667 1024L170.666667 853.333333l341.333333-341.333333-341.333333-341.333333 175.872-170.666667L853.333333 512z" fill=currentColor></path> </svg> </div> </div> <!-- 右侧固定功能条 - 独立于内容区 --> <div class=floating-toolbar id=floatingToolbar> <!-- 字体切换功能 --> <div class="toolbar-item font-switcher"> <div class=toolbar-icon> <svg class=font-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M913.408 1024l-66.56 0q-29.696 0-51.2-5.12t-36.864-15.872-26.112-27.136-19.968-37.888q-15.36-38.912-28.16-70.656t-22.016-55.296q-11.264-26.624-20.48-49.152l-254.976 0q-7.168 23.552-17.408 51.2-8.192 23.552-21.504 56.832t-30.72 72.192q-20.48 46.08-47.104 63.488t-60.416 17.408l-70.656 0q-45.056 0-60.928-19.968t2.56-68.096q18.432-46.08 43.008-108.544t52.224-132.608 57.344-143.872 57.344-144.384q65.536-164.864 137.216-343.04 7.168-17.408 18.432-31.744 10.24-11.264 27.136-21.504t42.496-10.24q26.624 0 43.52 10.752t28.16 24.064q12.288 15.36 19.456 33.792 72.704 180.224 138.24 345.088 27.648 70.656 57.344 143.872t56.832 142.336 51.2 129.536 41.472 104.448q14.336 34.816 4.096 62.464t-43.008 27.648zM616.448 634.88l-97.28-347.136-1.024 0-108.544 347.136 206.848 0z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>内容字体</div> <div class=font-dropdown-toolbar> <div class=font-current-toolbar onclick=toggleFontDropdownToolbar()> <span class=current-font-name-toolbar>东观体</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=font-options-toolbar> <div class=font-option-toolbar data-font=dongguanti onclick="selectFontToolbar('dongguanti')">上图东观体 </div> <div class=font-option-toolbar data-font=oppoti onclick="selectFontToolbar('oppoti')">OPPO Sans </div> <div class=font-option-toolbar data-font=jiangchengti onclick="selectFontToolbar('jiangchengti')"> 江城黑体</div> <div class=font-option-toolbar data-font=lxgw onclick="selectFontToolbar('lxgw')">霞鹜臻楷</div> </div> </div> </div> <!-- 代码字体切换功能 --> <div class="toolbar-item code-font-switcher"> <div class=toolbar-icon> <svg t=1753672111433 class="icon code-font-icon" viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg p-id=5148 width=20 height=20> <path d="M941.709938 0H82.290062A82.290062 82.290062 0 0 0 0 82.290062v859.419876A82.290062 82.290062 0 0 0 82.290062 1022.53923h859.419876A82.290062 82.290062 0 0 0 1022.53923 941.709938V82.290062A82.290062 82.290062 0 0 0 941.709938 0zM188.439372 553.631954a40.901569 40.901569 0 0 1-29.215406-70.116975L292.154066 351.558726 159.223966 218.628626a40.901569 40.901569 0 0 1 58.430813-57.94389l160.197813 162.145507a40.901569 40.901569 0 0 1 0 57.943889l-160.197813 160.684736a40.901569 40.901569 0 0 1-29.215407 12.173086z m443.587257 0H405.120304a40.901569 40.901569 0 0 1 0-82.290061H633.000476a40.901569 40.901569 0 0 1 0 82.290061z" fill=currentColor p-id=5149></path> </svg> </div> <div class=toolbar-label>代码字体</div> <div class=code-font-dropdown-toolbar> <div class=code-font-current-toolbar onclick=toggleCodeFontDropdownToolbar()> <span class=current-code-font-name-toolbar>DejaVu Sans Mono</span> <svg class=dropdown-arrow-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=12 height=12> <path d="M878.592 250.88q29.696 0 48.128 11.264t24.576 29.696 0 41.472-26.624 45.568q-82.944 92.16-159.744 180.224t-148.48 164.864q-19.456 20.48-45.568 31.744t-53.76 11.776-53.248-8.704-43.008-28.672q-39.936-44.032-82.944-90.112l-88.064-92.16q-43.008-46.08-85.504-90.624t-79.36-86.528q-17.408-19.456-22.528-40.448t1.024-38.4 23.552-28.672 45.056-11.264q35.84 0 98.816-0.512t137.728-0.512l153.6 0 150.528 0 125.952 0 79.872 0z" fill=currentColor></path> </svg> </div> <div class=code-font-options-toolbar> <div class=code-font-option-toolbar data-code-font=dejavu onclick="selectCodeFontToolbar('dejavu')"> DejaVu Sans Mono</div> <div class=code-font-option-toolbar data-code-font=google-sans-code onclick="selectCodeFontToolbar('google-sans-code')"> Google Sans Code</div> <div class=code-font-option-toolbar data-code-font=zsft onclick="selectCodeFontToolbar('zsft')"> JetBrains Mono</div> </div> </div> </div> <!-- 主题切换功能 --> <div class="toolbar-item theme-switcher" onclick=switchTheme()> <div class=toolbar-icon> <svg class=theme-icon viewbox="0 0 1024 1024" version=1.1 xmlns=http://www.w3.org/2000/svg width=20 height=20> <path d="M876.572788 522.301623c-1.886977 12.375865-9.657964 30.331819-35.880185 45.48903-56.489572 32.697703-150.21828 83.990926-174.010149 96.958262-13.143345 24.431435-66.067718 122.221646-98.141204 178.503487-16.117073 28.124548-36.055171 34.041304-50.030463 34.041304-0.031722 0-0.031722 0-0.031722 0-14.613836 0-29.1806-6.460132-43.234687-19.218714-47.183626-42.643216-125.994576-117.105115-146.013515-136.083351-27.757181-4.732791-138.338718-23.743774-200.584388-35.752272-17.924231-3.533476-32.649608-14.07046-40.372499-29.084409-5.78782-11.256368-10.281157-30.05962 1.471514-55.658647 26.989701-59.047838 74.126254-157.557432 85.957721-182.196599-3.437286-27.117614-16.996093-135.060045-23.760147-198.905142-1.886977-17.460674 3.901867-35.096333 15.829524-48.351218 12.791327-14.278191 30.667463-21.48943 49.854455-19.426445 63.669088 6.332219 173.259042 19.426445 200.584388 22.705118 24.335245-11.879562 121.085776-58.936297 180.133613-86.34146 9.91379-4.573155 19.85828-6.92369 29.596062-6.92369 28.748764 0 52.172243 20.642133 58.328453 51.421136 12.599969 62.997799 30.93864 166.70272 35.639708 193.484689 18.851347 19.682271 91.953272 96.031147 135.060045 143.07151C872.72004 487.125473 879.307062 504.71406 876.572788 522.301623L876.572788 522.301623zM825.375755 499.085876C776.017604 445.314205 687.245791 352.977193 686.365748 352.017332c-2.942005-3.069919-4.956895-6.971785-5.676279-11.208273-0.207731-1.215688-22.193465-127.001509-36.551474-198.936865-0.799202-3.917216-4.285606-16.836457-16.196891-16.836457-3.453658 0-7.30743 1.006933-11.464099 2.942005-67.282383 31.179117-183.955662 88.180342-185.170327 88.771813-3.693112 1.790786-7.850805 2.558265-11.975752 2.01489-1.295506-0.224104-133.63765-16.165168-205.988468-23.424502-0.079818 0-0.207731 0-0.287549 0-7.30743 0-11.128455 2.89391-13.319353 5.40408-3.677762 4.124947-5.644557 9.91379-5.068436 15.110139 7.674796 72.623018 24.255427 202.934922 24.463158 204.325595 0.511653 4.109598-0.159636 8.266267-1.966795 11.960403-0.591471 1.215688-57.657164 120.04712-88.339977 187.201589-3.565199 7.754614-4.41352 14.214746-2.350534 18.131963 1.935072 3.725858 6.588045 5.820566 10.360975 6.53995 70.719668 13.718443 204.644867 36.519752 206.036563 36.727483 4.189416 0.671289 8.058536 2.686179 11.112082 5.580089 1.006933 0.87902 96.414887 91.281983 150.090367 139.889027 8.314363 7.563256 13.143345 8.106632 14.437827 8.106632 3.485381 0 8.314363-4.621251 12.727882-12.391215 36.343743-63.828724 100.011808-181.988868 100.636025-183.155437 1.983167-3.64604 5.004991-6.667863 8.650007-8.650007 1.134847-0.671289 114.418936-62.373583 178.6314-99.516528 8.698103-5.036713 14.278191-10.568706 14.94948-14.854313C834.681702 511.845481 831.49922 505.800811 825.375755 499.085876L825.375755 499.085876zM935.333076 935.670256c-4.157693 4.157693-9.689686 6.299473-15.141862 6.299473-5.548366 0-11.048637-2.142803-15.238053-6.299473l-171.915441-171.915441c-8.362458-8.394181-8.362458-21.98471 0-30.426987 8.394181-8.394181 21.98471-8.394181 30.379914 0l171.915441 171.915441C943.727257 913.684522 943.727257 927.275052 935.333076 935.670256L935.333076 935.670256z" fill=currentColor></path> </svg> </div> <div class=toolbar-label>主题切换</div> </div> <!-- 返回顶部功能 --> <div class="toolbar-item back-to-top" onclick=scrollToTop()> <div class=toolbar-icon> <svg class=back-to-top-icon viewbox="0 0 1024 1024" xmlns=http://www.w3.org/2000/svg> <path d="M882.688 624.128l-336.896-583.68c-15.872-27.136-54.784-27.136-70.656 0L138.24 624.128c-15.872 27.136 4.096 61.44 35.328 61.44H317.44c22.528 0 40.96 18.432 40.96 40.96v239.616c0 22.528 18.432 40.96 40.96 40.96h223.232c22.528 0 40.96-18.432 40.96-40.96v-239.616c0-22.528 18.432-40.96 40.96-40.96h143.872c30.208 0 50.176-34.304 34.304-61.44z"> </path> </svg> </div> <div class=toolbar-label>返回顶部</div> </div> </div> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=标签 data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../index.html class=md-tabs__link> 主页 </a> </li> <li class=md-tabs__item> <a href=../../intro/intro.html class=md-tabs__link> 网站介绍 </a> </li> <li class=md-tabs__item> <a href=../../timeline/timeline.html class=md-tabs__link> 网站时间线 </a> </li> <li class=md-tabs__item> <a href=../../languages/index.html class=md-tabs__link> 编程语言 </a> </li> <li class=md-tabs__item> <a href=../../data-structure-algo/index.html class=md-tabs__link> 数据结构与算法 </a> </li> <li class=md-tabs__item> <a href=../../Linux/index.html class=md-tabs__link> Linux </a> </li> <li class=md-tabs__item> <a href=../../front-end/index.html class=md-tabs__link> 前端 </a> </li> <li class=md-tabs__item> <a href=../../MySQL/index.html class=md-tabs__link> MySQL </a> </li> <li class=md-tabs__item> <a href=../../JavaEE/index.html class=md-tabs__link> JavaEE应用开发 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../index.html class=md-tabs__link> 扩展知识 </a> </li> <li class=md-tabs__item> <a href=../../tooltips/index.html class=md-tabs__link> 工具帮助 </a> </li> <li class=md-tabs__item> <a href=../../test-encrypt/test-encrypt.html class=md-tabs__link> 测试加密功能 </a> </li> <li class=md-tabs__item> <a href=../../projects/index.html class=md-tabs__link> 项目 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=导航栏 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../index.html title=柯懒的知识库 class="md-nav__button md-logo" aria-label=柯懒的知识库 data-md-component=logo> <img src=../../assets/logo.png alt=logo> </a> 柯懒的知识库 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../index.html class=md-nav__link> <span class=md-ellipsis> 主页 </span> </a> </li> <li class=md-nav__item> <a href=../../intro/intro.html class=md-nav__link> <span class=md-ellipsis> 网站介绍 </span> </a> </li> <li class=md-nav__item> <a href=../../timeline/timeline.html class=md-nav__link> <span class=md-ellipsis> 网站时间线 </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../languages/index.html class=md-nav__link> <span class=md-ellipsis> 编程语言 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../data-structure-algo/index.html class=md-nav__link> <span class=md-ellipsis> 数据结构与算法 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../Linux/index.html class=md-nav__link> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../front-end/index.html class=md-nav__link> <span class=md-ellipsis> 前端 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../MySQL/index.html class=md-nav__link> <span class=md-ellipsis> MySQL </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../JavaEE/index.html class=md-nav__link> <span class=md-ellipsis> JavaEE应用开发 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> 扩展知识 </span> </a> <label class="md-nav__link " for=__nav_10 id=__nav_10_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_10_label aria-expanded=true> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> 扩展知识 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../shell/shell.html class=md-nav__link> <span class=md-ellipsis> 关于Shell </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> 关于函数栈帧（C语言演示） </span> <span class="md-nav__icon md-icon"></span> </label> <a href=func-stack-c.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> 关于函数栈帧（C语言演示） </span> </a> <nav class="md-nav md-nav--secondary" aria-label=本节目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 本节目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 介绍 </span> </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 栈 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 函数栈帧的前置知识 </span> </a> <nav class=md-nav aria-label=函数栈帧的前置知识> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 相关寄存器 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 相关汇编指令 </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 知识基础 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 函数栈帧基础剖析 </span> </a> <nav class=md-nav aria-label=函数栈帧基础剖析> <ul class=md-nav__list> <li class=md-nav__item> <a href=#main class=md-nav__link> <span class=md-ellipsis> main函数由其他函数调用 </span> </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 函数栈帧分析 </span> </a> <nav class=md-nav aria-label=函数栈帧分析> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 反汇编 </span> </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 函数栈帧的创建 </span> </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 函数体 </span> </a> <nav class=md-nav aria-label=函数体> <ul class=md-nav__list> <li class=md-nav__item> <a href=#a class=md-nav__link> <span class=md-ellipsis> 变量a的创建 </span> </a> </li> <li class=md-nav__item> <a href=#b class=md-nav__link> <span class=md-ellipsis> 变量b的创建 </span> </a> </li> <li class=md-nav__item> <a href=#ret class=md-nav__link> <span class=md-ellipsis> 变量ret的创建 </span> </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 传参 </span> </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 函数调用 </span> </a> </li> <li class=md-nav__item> <a href=#z class=md-nav__link> <span class=md-ellipsis> 变量z的创建 </span> </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 执行加法 </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 返回计算结果 </span> </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 函数栈帧销毁 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> <span class=md-ellipsis> 总结 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../xml/xml.html class=md-nav__link> <span class=md-ellipsis> 关于xml文件 </span> </a> </li> <li class=md-nav__item> <a href=../jsoncpp/jsoncpp.html class=md-nav__link> <span class=md-ellipsis> 关于JSONCPP库 </span> </a> </li> <li class=md-nav__item> <a href=../spdlog/spdlog.html class=md-nav__link> <span class=md-ellipsis> 关于C++日志库spdlog </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../git/git-basic/git-basic.html class=md-nav__link> <span class=md-ellipsis> 关于Git </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=../muduo/muduo.html class=md-nav__link> <span class=md-ellipsis> 关于Muduo库 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../tooltips/index.html class=md-nav__link> <span class=md-ellipsis> 工具帮助 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../test-encrypt/test-encrypt.html class=md-nav__link> <span class=md-ellipsis> 测试加密功能 </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../projects/index.html class=md-nav__link> <span class=md-ellipsis> 项目 </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=本节目录> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 本节目录 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 介绍 </span> </a> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 栈 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 函数栈帧的前置知识 </span> </a> <nav class=md-nav aria-label=函数栈帧的前置知识> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 相关寄存器 </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 相关汇编指令 </span> </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 知识基础 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> 函数栈帧基础剖析 </span> </a> <nav class=md-nav aria-label=函数栈帧基础剖析> <ul class=md-nav__list> <li class=md-nav__item> <a href=#main class=md-nav__link> <span class=md-ellipsis> main函数由其他函数调用 </span> </a> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> 函数栈帧分析 </span> </a> <nav class=md-nav aria-label=函数栈帧分析> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> 反汇编 </span> </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> 函数栈帧的创建 </span> </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> 函数体 </span> </a> <nav class=md-nav aria-label=函数体> <ul class=md-nav__list> <li class=md-nav__item> <a href=#a class=md-nav__link> <span class=md-ellipsis> 变量a的创建 </span> </a> </li> <li class=md-nav__item> <a href=#b class=md-nav__link> <span class=md-ellipsis> 变量b的创建 </span> </a> </li> <li class=md-nav__item> <a href=#ret class=md-nav__link> <span class=md-ellipsis> 变量ret的创建 </span> </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> 传参 </span> </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> 函数调用 </span> </a> </li> <li class=md-nav__item> <a href=#z class=md-nav__link> <span class=md-ellipsis> 变量z的创建 </span> </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> 执行加法 </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> 返回计算结果 </span> </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> <span class=md-ellipsis> 函数栈帧销毁 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_17 class=md-nav__link> <span class=md-ellipsis> 总结 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=c>关于函数栈帧（C语言演示）<a class=headerlink href=#c title="Permanent link">&para;</a></h1> <div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;"> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span> 约 2892 个字 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6m80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3"/></svg></span> 361 行代码 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 17H7V3h14m0-2H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2M3 5H1v16a2 2 0 0 0 2 2h16v-2H3m12.96-10.71-2.75 3.54-1.96-2.36L8.5 15h11z"/></svg></span> 71 张图片 <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span> 预计阅读时间 14 分钟</p> </div> <h2 id=_1>介绍<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <p>在C语言中，程序是以函数为基本单位，而函数的调用、函数返回值的处理以及函数参数的传递等问题都与函数栈帧有关</p> <p>函数栈帧（stack frame）就是函数调用过程中在程序的调用栈（call stack）所开辟的空间，这些空间是用来存放：</p> <ul> <li>函数参数和函数返回值</li> <li>临时变量（包括函数的非静态的局部变量以及编译器自动生产的其他临时变量）</li> <li>保存上下文信息（包括在函数调用前后需要保持不变的寄存器）</li> </ul> <h2 id=_2>栈<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <p>栈（stack）是现代计算机程序里最为重要的概念之一，几乎每一个程序都使用了栈，没有栈就没有函数，没有局部变量，也就没有我们如今看到的所有的计算机语言</p> <p>在经典的计算机科学中，栈被定义为一种特殊的容器，用户可以将数据压入栈中（入栈，<code>push</code>），也可以将已经压入栈中的数据弹出（出栈，<code>pop</code>），但是栈这个容器必须遵守一条规则：先入栈的数据后出栈（First In Last Out， <code>FIFO</code>）。就像叠成一叠的书，先叠上去的书在最下面，因此要最后才能取出</p> <p>在计算机系统中，栈则是一个具有以上属性的动态内存区域。程序可以将数据压入栈中，也可以将数据从栈顶弹出。压栈操作使得栈增大，而弹出操作使得栈减小。</p> <p>在经典的操作系统中，栈总是向下增长（由高地址向低地址）的。在我们常见的i386或者x86-64下，栈顶由成为esp的寄存器进行定位的</p> <h2 id=_3>函数栈帧的前置知识<a class=headerlink href=#_3 title="Permanent link">&para;</a></h2> <h3 id=_4>相关寄存器<a class=headerlink href=#_4 title="Permanent link">&para;</a></h3> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-1>eax：通用寄存器，保留临时数据，常用于返回值
</span><span id=__span-0-2>ebx：通用寄存器，在内存寻址时存放基地址
</span><span id=__span-0-3>eip：指令寄存器，保存当前指令的下一条指令的地址
</span><span id=__span-0-4>ebp：栈底寄存器
</span><span id=__span-0-5>esp：栈顶寄存器
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>寄存器<code>ebp</code>和<code>esp</code>：</p> <p><code>esp</code>寄存器全称为Extended Stack Pointer，中文名为扩展栈指针寄存器。它内存放着一个指针，该指针永远指向系统栈最上面一个栈帧的栈顶。</p> <p><code>ebp</code>寄存器全称为Extended Base Pointer，中文名为扩展基址指针寄存器。它内存放着一个指针，该指针永远指向系统栈最上面一个栈帧的底部。这两个寄存器在汇编语言中起到了重要的作用，尤其是在函数调用和参数传递过程中</p> </div> <h3 id=_5>相关汇编指令<a class=headerlink href=#_5 title="Permanent link">&para;</a></h3> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1>mov：数据转移指令
</span><span id=__span-1-2>push：数据入栈，同时esp栈顶寄存器也要发生改变
</span><span id=__span-1-3>pop：将数据弹出并放置在对应寄存器中，同时esp栈顶寄存器也要发生改变
</span><span id=__span-1-4>sub：减法命令
</span><span id=__span-1-5>add：加法命令
</span><span id=__span-1-6>call：函数调用，压入返回地址并转入目标函数
</span><span id=__span-1-7>jump：通过修改eip，转入目标函数，进行调用
</span><span id=__span-1-8>ret：恢复返回地址，压入eip，类似pop eip命令
</span><span id=__span-1-9>lea：加载有效地址
</span></code></pre></div></td></tr></table></div> <h3 id=_6>知识基础<a class=headerlink href=#_6 title="Permanent link">&para;</a></h3> <ul> <li>每一次函数调用，都要为本次函数调用开辟空间，就是函数栈帧的空间。</li> <li>函数栈帧空间的维护是使用了2个寄存器：<code>esp</code>和<code>ebp</code>，<code>ebp</code>记录的是栈底的地址，<code>esp</code>记录的是栈顶的地址</li> <li>内存中，上面是高地址，下面是低地址</li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>本次为了演示和理解方便，将采用上面是低地址，下面是高地址 <a class=glightbox href=关于函数栈帧（C语言演示）.assets\image.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image.png style=zoom:50%;></a></p> </div> <h2 id=_7>函数栈帧基础剖析<a class=headerlink href=#_7 title="Permanent link">&para;</a></h2> <p>演示环境：编译器VS2013</p> <p>演示代码：</p> <div class="language-c highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>C</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><span class=cp>#include</span><span class=w> </span><span class=cpf>&lt;stdio.h&gt;</span>
</span><span id=__span-2-2>
</span><span id=__span-2-3><span class=kt>int</span><span class=w> </span><span class=nf>Add</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>x</span><span class=p>,</span><span class=w> </span><span class=kt>int</span><span class=w> </span><span class=n>y</span><span class=p>)</span>
</span><span id=__span-2-4><span class=p>{</span>
</span><span id=__span-2-5><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>z</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-2-6><span class=w>    </span><span class=n>z</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>x</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>y</span><span class=p>;</span>
</span><span id=__span-2-7><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>z</span><span class=p>;</span>
</span><span id=__span-2-8><span class=p>}</span>
</span><span id=__span-2-9>
</span><span id=__span-2-10><span class=kt>int</span><span class=w> </span><span class=nf>main</span><span class=p>()</span>
</span><span id=__span-2-11><span class=p>{</span>
</span><span id=__span-2-12><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>10</span><span class=p>;</span>
</span><span id=__span-2-13><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>20</span><span class=p>;</span>
</span><span id=__span-2-14><span class=w>    </span><span class=kt>int</span><span class=w> </span><span class=n>ret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-2-15><span class=w>    </span><span class=n>ret</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Add</span><span class=p>(</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>);</span>
</span><span id=__span-2-16><span class=w>    </span><span class=n>printf</span><span class=p>(</span><span class=s>&quot;%d</span><span class=se>\n</span><span class=s>&quot;</span><span class=p>,</span><span class=w> </span><span class=n>ret</span><span class=p>);</span>
</span><span id=__span-2-17>
</span><span id=__span-2-18><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
</span><span id=__span-2-19><span class=p>}</span>
</span></code></pre></div></td></tr></table></div> <h3 id=main><code>main</code>函数由其他函数调用<a class=headerlink href=#main title="Permanent link">&para;</a></h3> <p><code>main</code>函数在编译器VS2013上由以下函数调用：</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image1.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image1.png></a></p> <p>在VS2013中，<code>main</code>函数被<code>__tmainCRTStartup()</code>调用，对应<code>main</code>的返回值给一个名为<code>mainret</code>的变量</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image2.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image2.png></a></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>上述内容了解即可，在不同的编译器下调用可能不同，在下面的分析中不包括调用<code>main</code>函数的函数</p> <p>关于其中的<code>argc</code>、<code>argv</code>和<code>envp</code>见<a href=https://www.help-doc.top/Linux/command-line-env/command-line-env.html>Linux部分讲解</a></p> </div> <h3 id=_8>函数栈帧分析<a class=headerlink href=#_8 title="Permanent link">&para;</a></h3> <h4 id=_9>反汇编<a class=headerlink href=#_9 title="Permanent link">&para;</a></h4> <p>首先，执行函数的调试，并转到反汇编</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-3-1>int main()
</span><span id=__span-3-2>{
</span><span id=__span-3-3>00091410  push        ebp  
</span><span id=__span-3-4>00091411  mov         ebp,esp  
</span><span id=__span-3-5>00091413  sub         esp,0E4h  
</span><span id=__span-3-6>00091419  push        ebx  
</span><span id=__span-3-7>0009141A  push        esi  
</span><span id=__span-3-8>0009141B  push        edi  
</span><span id=__span-3-9>0009141C  lea         edi,[ebp-0E4h]  
</span><span id=__span-3-10>00091422  mov         ecx,39h  
</span><span id=__span-3-11>00091427  mov         eax,0CCCCCCCCh  
</span><span id=__span-3-12>0009142C  rep stos    dword ptr es:[edi]  
</span><span id=__span-3-13>    int a = 10;
</span><span id=__span-3-14>0009142E  mov         dword ptr [a],0Ah  
</span><span id=__span-3-15>    int b = 20;
</span><span id=__span-3-16>00091435  mov         dword ptr [b],14h  
</span><span id=__span-3-17>    int ret = 0;
</span><span id=__span-3-18>0009143C  mov         dword ptr [ret],0  
</span><span id=__span-3-19>    ret = Add(a, b);
</span><span id=__span-3-20>00091443  mov         eax,dword ptr [b]  
</span><span id=__span-3-21>00091446  push        eax  
</span><span id=__span-3-22>00091447  mov         ecx,dword ptr [a]  
</span><span id=__span-3-23>0009144A  push        ecx  
</span><span id=__span-3-24>0009144B  call        _Add (0910E1h)  
</span><span id=__span-3-25>00091450  add         esp,8  
</span><span id=__span-3-26>00091453  mov         dword ptr [ret],eax  
</span><span id=__span-3-27>    printf(&quot;%d\n&quot;, ret);
</span><span id=__span-3-28>00091456  mov         esi,esp  
</span><span id=__span-3-29>00091458  mov         eax,dword ptr [ret]  
</span><span id=__span-3-30>0009145B  push        eax  
</span><span id=__span-3-31>0009145C  push        95858h  
</span><span id=__span-3-32>00091461  call        dword ptr ds:[99114h]  
</span><span id=__span-3-33>00091467  add         esp,8  
</span><span id=__span-3-34>0009146A  cmp         esi,esp  
</span><span id=__span-3-35>0009146C  call        __RTC_CheckEsp (09113Bh)  
</span><span id=__span-3-36>    //system(&quot;pause&quot;);
</span><span id=__span-3-37>
</span><span id=__span-3-38>    return 0;
</span><span id=__span-3-39>00091471  xor         eax,eax  
</span><span id=__span-3-40>}
</span></code></pre></div></td></tr></table></div> <h4 id=_10>函数栈帧的创建<a class=headerlink href=#_10 title="Permanent link">&para;</a></h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-4-1>00091410  push        ebp  
</span><span id=__span-4-2>00091411  mov         ebp,esp  
</span><span id=__span-4-3>00091413  sub         esp,0E4h  
</span><span id=__span-4-4>00091419  push        ebx  
</span><span id=__span-4-5>0009141A  push        esi  
</span><span id=__span-4-6>0009141B  push        edi  
</span><span id=__span-4-7>0009141C  lea         edi,[ebp+FFFFFF1Ch]  
</span><span id=__span-4-8>00091422  mov         ecx,39h  
</span><span id=__span-4-9>00091427  mov         eax,0CCCCCCCCh  
</span><span id=__span-4-10>0009142C  rep stos    dword ptr es:[edi]  
</span><span id=__span-4-11>00F81410  push        ebp 
</span></code></pre></div></td></tr></table></div> <p>对于上述汇编指令来说，首先<code>push</code>表示压栈操作，压入<code>ebp</code>中的数据，并使<code>esp</code>指向栈低该位置，如下图所示</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image3.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image3.png style=zoom:50%;></a></p> <p>当前<code>ebp</code>和<code>esp</code>中的值：</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image4.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image4.png></a></p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-5-1>00F81411  mov         ebp,esp 
</span></code></pre></div></td></tr></table></div> <p>接下来执行<code>mov</code>指令，该指令表示，将<code>esp</code>中的内容给<code>ebp</code></p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image5.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image5.png style=zoom:40%;></a></p> <p>对于上述两句汇编代码，VS2013的效果如下：</p> <ul> <li> <p>未执行<code>push</code>指令之前<code>ebp</code>和<code>esp</code>中的值：</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image6.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image6.png></a></p> </li> <li> <p>执行<code>push</code>指令之后<code>ebp</code>和<code>esp</code>中的值：</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image7.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image7.png></a></p> </li> </ul> <p>观察到<code>esp</code>中的值被赋值到了<code>ebp</code>中</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-6-1>00F81413  sub         esp,0E4h
</span></code></pre></div></td></tr></table></div> <p>接下来执行<code>sub</code>指令，<code>sub</code>指令代表相减，该指令表示将<code>esp</code>指令中的值减去<code>0E4h</code>（h为16进制后缀），如下图所示</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image8.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image8.png style=zoom:33%;></a></p> <p>当前<code>ebp</code>和<code>esp</code>中的值：</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image9.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image9.png></a></p> <p><code>ebp</code>的地址未改变，<code>esp</code>中的地址改变，即<code>esp</code>中的初始地址减去<code>0E4h</code>后的值</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-7-1>00F81419  push        ebx 
</span><span id=__span-7-2>00F8141A  push        esi
</span><span id=__span-7-3>00F8141B  push        edi
</span></code></pre></div></td></tr></table></div> <p>接下来的三条<code>push</code>指令，向<code>esp</code>指向的空间上方压入数据，并且<code>esp</code>要指向新的位置，如图所示</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-8-1>00F81419  push        ebx 
</span></code></pre></div></td></tr></table></div> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image10.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image10.png style=zoom:33%;></a></p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image11.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image11.png></a></p> <p>当前<code>esp</code>指向的地址空间中存储着<code>ebx</code>中的数值</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image12.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image12.png></a></p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-9-1>00F8141A  push        esi
</span></code></pre></div></td></tr></table></div> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image13.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image13.png style=zoom:33%;></a></p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image14.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image14.png></a></p> <p>当前<code>esp</code>指向的地址空间中存储着<code>esi</code>中的数值</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image15.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image15.png></a></p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-10-1>00F8141B  push        edi
</span></code></pre></div></td></tr></table></div> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image16.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image16.png style=zoom:33%;></a></p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image17.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image17.png></a></p> <p>当前<code>esp</code>指向的地址空间中存储着<code>edi</code>中的数值</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image18.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image18.png></a></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>注意每一次<code>push</code>操作相当于<code>esp-4</code>（减去双字节<code>dword</code>）</p> </div> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-11-1>00F8141C  lea         edi,[ebp-0E4h]
</span></code></pre></div></td></tr></table></div> <p>接下来执行<code>lea</code>指令，<code>lea</code>指令表示加载有效地址，上述汇编代码中表示将<code>ebp-0E4h</code>的地址加载到<code>edi</code>中，因为刚才<code>esp</code>中所指的地址为<code>ebp-0E4h</code>，故<code>ebp-0E4h</code>则就是<code>esp</code>未压入<code>edi</code>、esi和<code>ebx</code>之前的地址</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image19.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image19.png style=zoom:33%;></a></p> <p>当前<code>edi</code>中的地址</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image20.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image20.png></a></p> <p>对照初始时<code>esp</code>中的地址</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image21.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image21.png></a></p> <p>当前的<code>esp</code>、<code>esi</code>、<code>ebx</code>和<code>edi</code></p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image22.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image22.png></a></p> <p>当前<code>esp</code>、<code>esi</code>、<code>ebx</code>和<code>edi</code>的地址</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image23.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image23.png></a></p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-12-1>00F81422  mov         ecx,39h
</span><span id=__span-12-2>00F81427  mov         eax,0CCCCCCCCh 
</span><span id=__span-12-3>00F8142C  rep stos    dword ptr es:[edi] 
</span></code></pre></div></td></tr></table></div> <p>接下来执行三条指令，代表从<code>edi</code>空间开始，每次增加4（<code>dword</code>），移动57（十六进制的39）行将该空间内容存入<code>0cccccccch</code>，一直到<code>ebp</code>所在地址</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-13-1>00F81422  mov         ecx,39h
</span></code></pre></div></td></tr></table></div> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image24.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image24.png></a></p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-14-1>00F81427  mov         eax,0CCCCCCCCh 
</span></code></pre></div></td></tr></table></div> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image25.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image25.png></a></p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-15-1>00F8142C  rep stos    dword ptr es:[edi] 
</span><span id=__span-15-2>//当前的esp
</span><span id=__span-15-3>0x00EFF8F4  0e 11 09 00
</span><span id=__span-15-4>//当前的esi
</span><span id=__span-15-5>0x00EFF8F8  0e 11 09 00
</span><span id=__span-15-6>//当前的ebx
</span><span id=__span-15-7>0x00EFF8FC  00 00 c0 00
</span><span id=__span-15-8>//初始的edi
</span><span id=__span-15-9>//总共57行，对应ecx中的39h行dword（cccc为word（两个字节类似short类型），cccccccc为dword（四个字节类似int类型），即）
</span><span id=__span-15-10>0x00EFF900  cc cc cc cc
</span><span id=__span-15-11>0x00EFF904  cc cc cc cc
</span><span id=__span-15-12>0x00EFF908  cc cc cc cc
</span><span id=__span-15-13>0x00EFF90C  cc cc cc cc
</span><span id=__span-15-14>0x00EFF910  cc cc cc cc
</span><span id=__span-15-15>0x00EFF914  cc cc cc cc
</span><span id=__span-15-16>0x00EFF918  cc cc cc cc
</span><span id=__span-15-17>0x00EFF91C  cc cc cc cc
</span><span id=__span-15-18>0x00EFF920  cc cc cc cc
</span><span id=__span-15-19>0x00EFF924  cc cc cc cc
</span><span id=__span-15-20>0x00EFF928  cc cc cc cc
</span><span id=__span-15-21>0x00EFF92C  cc cc cc cc
</span><span id=__span-15-22>0x00EFF930  cc cc cc cc
</span><span id=__span-15-23>0x00EFF934  cc cc cc cc  
</span><span id=__span-15-24>0x00EFF938  cc cc cc cc  
</span><span id=__span-15-25>0x00EFF93C  cc cc cc cc  
</span><span id=__span-15-26>0x00EFF940  cc cc cc cc  
</span><span id=__span-15-27>0x00EFF944  cc cc cc cc  
</span><span id=__span-15-28>0x00EFF948  cc cc cc cc  
</span><span id=__span-15-29>0x00EFF94C  cc cc cc cc  
</span><span id=__span-15-30>0x00EFF950  cc cc cc cc  
</span><span id=__span-15-31>0x00EFF954  cc cc cc cc  
</span><span id=__span-15-32>0x00EFF958  cc cc cc cc  
</span><span id=__span-15-33>0x00EFF95C  cc cc cc cc  
</span><span id=__span-15-34>0x00EFF960  cc cc cc cc  
</span><span id=__span-15-35>0x00EFF964  cc cc cc cc  
</span><span id=__span-15-36>0x00EFF968  cc cc cc cc  
</span><span id=__span-15-37>0x00EFF96C  cc cc cc cc  
</span><span id=__span-15-38>0x00EFF970  cc cc cc cc  
</span><span id=__span-15-39>0x00EFF974  cc cc cc cc  
</span><span id=__span-15-40>0x00EFF978  cc cc cc cc  
</span><span id=__span-15-41>0x00EFF97C  cc cc cc cc  
</span><span id=__span-15-42>0x00EFF980  cc cc cc cc  
</span><span id=__span-15-43>0x00EFF984  cc cc cc cc  
</span><span id=__span-15-44>0x00EFF988  cc cc cc cc  
</span><span id=__span-15-45>0x00EFF98C  cc cc cc cc  
</span><span id=__span-15-46>0x00EFF990  cc cc cc cc  
</span><span id=__span-15-47>0x00EFF994  cc cc cc cc  
</span><span id=__span-15-48>0x00EFF998  cc cc cc cc  
</span><span id=__span-15-49>0x00EFF99C  cc cc cc cc  
</span><span id=__span-15-50>0x00EFF9A0  cc cc cc cc  
</span><span id=__span-15-51>0x00EFF9A4  cc cc cc cc  
</span><span id=__span-15-52>0x00EFF9A8  cc cc cc cc  
</span><span id=__span-15-53>0x00EFF9AC  cc cc cc cc  
</span><span id=__span-15-54>0x00EFF9B0  cc cc cc cc  
</span><span id=__span-15-55>0x00EFF9B4  cc cc cc cc  
</span><span id=__span-15-56>0x00EFF9B8  cc cc cc cc  
</span><span id=__span-15-57>0x00EFF9BC  cc cc cc cc  
</span><span id=__span-15-58>0x00EFF9C0  cc cc cc cc  
</span><span id=__span-15-59>0x00EFF9C4  cc cc cc cc  
</span><span id=__span-15-60>0x00EFF9C8  cc cc cc cc  
</span><span id=__span-15-61>0x00EFF9CC  cc cc cc cc  
</span><span id=__span-15-62>0x00EFF9D0  cc cc cc cc  
</span><span id=__span-15-63>0x00EFF9D4  cc cc cc cc  
</span><span id=__span-15-64>0x00EFF9D8  cc cc cc cc  
</span><span id=__span-15-65>0x00EFF9DC  cc cc cc cc  
</span><span id=__span-15-66>0x00EFF9E0  cc cc cc cc  
</span><span id=__span-15-67>//当前的ebp
</span><span id=__span-15-68>0x00EFF9E4  34 fa ef 00  
</span></code></pre></div></td></tr></table></div> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image26.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image26.png></a></p> <p>对照初始的<code>edi</code></p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image27.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image27.png></a></p> <p>上述代码相当于下面C语言的代码</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-16-1>edi = ebp-0E4h;
</span><span id=__span-16-2>ecx = 0x39;
</span><span id=__span-16-3>eax = 0xCCCCCCCC;
</span><span id=__span-16-4>for(; ecx = 0; --ecx,edi+=4)
</span><span id=__span-16-5>{
</span><span id=__span-16-6>    *(int*)edi = eax;
</span><span id=__span-16-7>}
</span></code></pre></div></td></tr></table></div> <p>至此，<code>main</code>函数的函数栈帧空间创建完成，从<code>esp</code>空间开始一直到<code>ebp</code>为止的空间全为<code>main</code>函数的栈帧空间</p> <h4 id=_11>函数体<a class=headerlink href=#_11 title="Permanent link">&para;</a></h4> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-17-1>//Add函数
</span><span id=__span-17-2>int Add(int x, int y)
</span><span id=__span-17-3>{
</span><span id=__span-17-4>000913C0  push        ebp  
</span><span id=__span-17-5>000913C1  mov         ebp,esp  
</span><span id=__span-17-6>000913C3  sub         esp,0CCh  
</span><span id=__span-17-7>000913C9  push        ebx  
</span><span id=__span-17-8>000913CA  push        esi  
</span><span id=__span-17-9>000913CB  push        edi  
</span><span id=__span-17-10>000913CC  lea         edi,[ebp-0CCh]  
</span><span id=__span-17-11>000913D2  mov         ecx,33h  
</span><span id=__span-17-12>000913D7  mov         eax,0CCCCCCCCh  
</span><span id=__span-17-13>000913DC  rep stos    dword ptr es:[edi]  
</span><span id=__span-17-14>    int z = 0;
</span><span id=__span-17-15>000913DE  mov         dword ptr [z],0  
</span><span id=__span-17-16>    z = x + y;
</span><span id=__span-17-17>000913E5  mov         eax,dword ptr [x]  
</span><span id=__span-17-18>000913E8  add         eax,dword ptr [y]  
</span><span id=__span-17-19>000913EB  mov         dword ptr [z],eax  
</span><span id=__span-17-20>    return z;
</span><span id=__span-17-21>000913EE  mov         eax,dword ptr [z]  
</span><span id=__span-17-22>}
</span><span id=__span-17-23>000913F1  pop         edi  
</span><span id=__span-17-24>000913F2  pop         esi  
</span><span id=__span-17-25>000913F3  pop         ebx  
</span><span id=__span-17-26>000913F4  mov         esp,ebp  
</span><span id=__span-17-27>000913F6  pop         ebp  
</span><span id=__span-17-28>000913F7  ret  
</span><span id=__span-17-29>
</span><span id=__span-17-30>//main函数
</span><span id=__span-17-31>    int a = 10;
</span><span id=__span-17-32>0009142E  mov         dword ptr [ebp-8],0Ah  
</span><span id=__span-17-33>    int b = 20;
</span><span id=__span-17-34>00091435  mov         dword ptr [ebp-14h],14h  
</span><span id=__span-17-35>    int ret = 0;
</span><span id=__span-17-36>0009143C  mov         dword ptr [ebp-20h],0  
</span><span id=__span-17-37>    ret = Add(a, b);
</span><span id=__span-17-38>00091443  mov         eax,dword ptr [ebp-14h]  
</span><span id=__span-17-39>00091446  push        eax  
</span><span id=__span-17-40>00091447  mov         ecx,dword ptr [ebp-8]  
</span><span id=__span-17-41>0009144A  push        ecx  
</span><span id=__span-17-42>0009144B  call        000910E1  
</span><span id=__span-17-43>00091450  add         esp,8  
</span><span id=__span-17-44>00091453  mov         dword ptr [ebp-20h],eax  
</span></code></pre></div></td></tr></table></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>观察变量的创建时，关闭「显示符号名」 <a class=glightbox href=关于函数栈帧（C语言演示）.assets\image28.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image28.png></a></p> </div> <h5 id=a>变量<code>a</code>的创建<a class=headerlink href=#a title="Permanent link">&para;</a></h5> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-18-1>int a = 10;
</span><span id=__span-18-2>0009142E  mov         dword ptr [ebp-8],0Ah  
</span></code></pre></div></td></tr></table></div> <p>执行<code>mov</code>指令，将<code>0Ah</code>值放到地址<code>ebp-8</code>处</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image29.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image29.png style=zoom:33%;></a></p> <p>当前<code>ebp</code>中的地址为：</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image30.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image30.png></a></p> <p>两次减4到新地址，并将该地址上的值从<code>0xcccccccc</code>修改为<code>0x0000000a</code>（注意小端存储）</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image31.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image31.png></a></p> <h5 id=b>变量b的创建<a class=headerlink href=#b title="Permanent link">&para;</a></h5> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-19-1>int b = 20;
</span><span id=__span-19-2>00091435  mov         dword ptr [ebp-14h],14h  
</span></code></pre></div></td></tr></table></div> <p>接下来执行<code>mov</code>指令，将<code>14h</code>值放到<code>ebp-14h</code>（即<code>ebp-20</code>）地址处</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image32.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image32.png style=zoom:33%;></a></p> <p>当前<code>ebp</code>中的地址为：</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image33.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image33.png></a></p> <p>5次减4到新地址，并将该地址上的值从<code>0xcccccccc</code>修改为<code>0x00000014</code>（注意小端存储）</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image34.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image34.png></a></p> <h5 id=ret>变量<code>ret</code>的创建<a class=headerlink href=#ret title="Permanent link">&para;</a></h5> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-20-1>int ret = 0;
</span><span id=__span-20-2>0009143C  mov         dword ptr [ebp-20h],0  
</span></code></pre></div></td></tr></table></div> <p>接下来执行<code>mov</code>指令，将数值0放置到<code>ebp-20h</code>（<code>ebp-32</code>）的地址上</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image35.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image35.png style=zoom:33%;></a></p> <p>当前<code>ebp</code>中的地址为：</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image36.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image36.png></a></p> <p>8次减4到新地址，并将该地址上的值从<code>0xcccccccc</code>修改为<code>0x00000000</code>（注意小端存储）</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image37.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image37.png></a></p> <p>至此所有<code>main</code>函数中的局部变量全部创建完成，如下图所示：</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image38.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image38.png></a></p> <h5 id=_12>传参<a class=headerlink href=#_12 title="Permanent link">&para;</a></h5> <p>在调用函数之前，需要压栈进行传参操作</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-21-1>00091443  mov         eax,dword ptr [ebp-14h]  
</span><span id=__span-21-2>00091446  push        eax  
</span><span id=__span-21-3>00091447  mov         ecx,dword ptr [ebp-8]  
</span><span id=__span-21-4>0009144A  push        ecx  
</span><span id=__span-21-5>00091443  mov         eax,dword ptr [ebp-14h] 
</span></code></pre></div></td></tr></table></div> <p>执行<code>mov</code>指令，将<code>ebp-14h</code>地址上的值给<code>eax</code>，因为<code>ebp-14h</code>为变量<code>b</code>所在的地址，即将<code>b</code>的值给<code>eax</code></p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image39.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image39.png></a></p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-22-1>00091446  push        eax 
</span></code></pre></div></td></tr></table></div> <p>接下来执行<code>push</code>指令，将<code>eax</code>值压入栈顶，并使<code>esp</code>指针指向该位置</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image40.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image40.png style=zoom:33%;></a></p> <p>执行<code>push</code>之后的<code>esp</code>地址：</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image41.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image41.png></a></p> <p>对照<code>push</code>执行之前的<code>esp</code>的地址：</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image42.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image42.png></a></p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-23-1>00091447  mov         ecx,dword ptr [ebp-8] 
</span></code></pre></div></td></tr></table></div> <p>接下来执行<code>mov</code>指令，将<code>ebp-8</code>地址上的数据，即变量<code>a</code>中的值给<code>ecx</code></p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image43.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image43.png></a></p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-24-1>0009144A  push        ecx 
</span></code></pre></div></td></tr></table></div> <p>接下来执行<code>push</code>指令，将<code>ecx</code>值压入栈顶，并使<code>esp</code>指针指向该位置</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image44.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image44.png style=zoom:33%;></a></p> <p>执行<code>push</code>之后的<code>esp</code>地址：</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image45.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image45.png></a></p> <p>对照<code>push</code>执行之前的<code>esp</code>的地址：</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image46.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image46.png></a></p> <h5 id=_13>函数调用<a class=headerlink href=#_13 title="Permanent link">&para;</a></h5> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-25-1>0009144B  call        000910E1  
</span><span id=__span-25-2>00091450  add         esp,8  
</span><span id=__span-25-3>00091453  mov         dword ptr [ebp-20h],eax  
</span></code></pre></div></td></tr></table></div> <p>首先执行<code>call</code>指令，进行函数调用，在执行<code>call</code>指令之前先会把<code>call</code>指令的下一条指令的地址进行压栈操作，这个操作是为了解决当函数调用结束后要回到<code>call</code>指令的下一条指令的地方，继续往后执行</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image47.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image47.png style=zoom:33%;></a></p> <p>执行<code>call</code>指令后的<code>esp</code>的地址和值：</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image48.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image48.png></a></p> <p>对照未执行<code>call</code>指令之前<code>esp</code>的地址：</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image49.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image49.png></a></p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-26-1>//Add函数跳转
</span><span id=__span-26-2>_Add:
</span><span id=__span-26-3>000910E1  jmp         000913C0 
</span><span id=__span-26-4>//Add函数体
</span><span id=__span-26-5>int Add(int x, int y)
</span><span id=__span-26-6>{
</span><span id=__span-26-7>000913C0  push        ebp  
</span><span id=__span-26-8>000913C1  mov         ebp,esp  
</span><span id=__span-26-9>000913C3  sub         esp,0CCh  
</span><span id=__span-26-10>000913C9  push        ebx  
</span><span id=__span-26-11>000913CA  push        esi  
</span><span id=__span-26-12>000913CB  push        edi  
</span><span id=__span-26-13>000913CC  lea         edi,[ebp-0CCh]  
</span><span id=__span-26-14>000913D2  mov         ecx,33h  
</span><span id=__span-26-15>000913D7  mov         eax,0CCCCCCCCh  
</span><span id=__span-26-16>000913DC  rep stos    dword ptr es:[edi]  
</span><span id=__span-26-17>    int z = 0;
</span><span id=__span-26-18>000913DE  mov         dword ptr [z],0  
</span><span id=__span-26-19>    z = x + y;
</span><span id=__span-26-20>000913E5  mov         eax,dword ptr [x]  
</span><span id=__span-26-21>000913E8  add         eax,dword ptr [y]  
</span><span id=__span-26-22>000913EB  mov         dword ptr [z],eax  
</span><span id=__span-26-23>    return z;
</span><span id=__span-26-24>000913EE  mov         eax,dword ptr [z]  
</span><span id=__span-26-25>}
</span><span id=__span-26-26>000913F1  pop         edi  
</span><span id=__span-26-27>000913F2  pop         esi  
</span><span id=__span-26-28>000913F3  pop         ebx  
</span><span id=__span-26-29>000913F4  mov         esp,ebp  
</span><span id=__span-26-30>000913F6  pop         ebp  
</span><span id=__span-26-31>000913F7  ret  
</span><span id=__span-26-32>000910E1  jmp         000913C0 
</span></code></pre></div></td></tr></table></div> <p>执行<code>jmp</code>指令，跳转到指定函数位置</p> <p>进入<code>Add</code>函数后，依旧先要开辟函数栈帧空间</p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-27-1>000913C0  push        ebp  
</span><span id=__span-27-2>000913C1  mov         ebp,esp  
</span><span id=__span-27-3>000913C3  sub         esp,0CCh  
</span><span id=__span-27-4>000913C9  push        ebx  
</span><span id=__span-27-5>000913CA  push        esi  
</span><span id=__span-27-6>000913CB  push        edi  
</span><span id=__span-27-7>000913CC  lea         edi,[ebp-0CCh]  
</span><span id=__span-27-8>000913D2  mov         ecx,33h  
</span><span id=__span-27-9>000913D7  mov         eax,0CCCCCCCCh  
</span><span id=__span-27-10>000913DC  rep stos    dword ptr es:[edi]  
</span><span id=__span-27-11>000913C0  push        ebp  
</span><span id=__span-27-12>000913C1  mov         ebp,esp  
</span></code></pre></div></td></tr></table></div> <p>移动<code>esp</code>和<code>ebp</code>地址，使其开始维护<code>Add</code>函数的栈帧空间</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image50.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image50.png style="zoom: 50%;"></a></p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image51.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image51.png></a></p> <p>后面的操作与<code>main</code>函数相同，不再重复介绍</p> <p>栈帧空间开辟结果图</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image52.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image52.png style="zoom: 67%;"></a></p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image53.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image53.png></a></p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-28-1>//当前的esp
</span><span id=__span-28-2>0x00EFF80C  e4 f9 ef 00  
</span><span id=__span-28-3>//当前的esi
</span><span id=__span-28-4>0x00EFF810  0e 11 09 00  
</span><span id=__span-28-5>//当前的ebx
</span><span id=__span-28-6>0x00EFF814  00 00 c0 00  
</span><span id=__span-28-7>//初始位置的edi
</span><span id=__span-28-8>//33h（十进制下的51）行初始化为0xcccccccc
</span><span id=__span-28-9>0x00EFF818  cc cc cc cc  
</span><span id=__span-28-10>0x00EFF81C  cc cc cc cc  
</span><span id=__span-28-11>0x00EFF820  cc cc cc cc  
</span><span id=__span-28-12>0x00EFF824  cc cc cc cc  
</span><span id=__span-28-13>0x00EFF828  cc cc cc cc  
</span><span id=__span-28-14>0x00EFF82C  cc cc cc cc  
</span><span id=__span-28-15>0x00EFF830  cc cc cc cc  
</span><span id=__span-28-16>0x00EFF834  cc cc cc cc  
</span><span id=__span-28-17>0x00EFF838  cc cc cc cc  
</span><span id=__span-28-18>0x00EFF83C  cc cc cc cc  
</span><span id=__span-28-19>0x00EFF840  cc cc cc cc  
</span><span id=__span-28-20>0x00EFF844  cc cc cc cc  
</span><span id=__span-28-21>0x00EFF848  cc cc cc cc  
</span><span id=__span-28-22>0x00EFF84C  cc cc cc cc  
</span><span id=__span-28-23>0x00EFF850  cc cc cc cc  
</span><span id=__span-28-24>0x00EFF854  cc cc cc cc  
</span><span id=__span-28-25>0x00EFF858  cc cc cc cc  
</span><span id=__span-28-26>0x00EFF85C  cc cc cc cc  
</span><span id=__span-28-27>0x00EFF860  cc cc cc cc  
</span><span id=__span-28-28>0x00EFF864  cc cc cc cc  
</span><span id=__span-28-29>0x00EFF868  cc cc cc cc  
</span><span id=__span-28-30>0x00EFF86C  cc cc cc cc  
</span><span id=__span-28-31>0x00EFF870  cc cc cc cc  
</span><span id=__span-28-32>0x00EFF874  cc cc cc cc  
</span><span id=__span-28-33>0x00EFF878  cc cc cc cc  
</span><span id=__span-28-34>0x00EFF87C  cc cc cc cc  
</span><span id=__span-28-35>0x00EFF880  cc cc cc cc  
</span><span id=__span-28-36>0x00EFF884  cc cc cc cc  
</span><span id=__span-28-37>0x00EFF888  cc cc cc cc  
</span><span id=__span-28-38>0x00EFF88C  cc cc cc cc  
</span><span id=__span-28-39>0x00EFF890  cc cc cc cc  
</span><span id=__span-28-40>0x00EFF894  cc cc cc cc  
</span><span id=__span-28-41>0x00EFF898  cc cc cc cc  
</span><span id=__span-28-42>0x00EFF89C  cc cc cc cc  
</span><span id=__span-28-43>0x00EFF8A0  cc cc cc cc  
</span><span id=__span-28-44>0x00EFF8A4  cc cc cc cc  
</span><span id=__span-28-45>0x00EFF8A8  cc cc cc cc  
</span><span id=__span-28-46>0x00EFF8AC  cc cc cc cc  
</span><span id=__span-28-47>0x00EFF8B0  cc cc cc cc  
</span><span id=__span-28-48>0x00EFF8B4  cc cc cc cc  
</span><span id=__span-28-49>0x00EFF8B8  cc cc cc cc  
</span><span id=__span-28-50>0x00EFF8BC  cc cc cc cc  
</span><span id=__span-28-51>0x00EFF8C0  cc cc cc cc  
</span><span id=__span-28-52>0x00EFF8C4  cc cc cc cc  
</span><span id=__span-28-53>0x00EFF8C8  cc cc cc cc  
</span><span id=__span-28-54>0x00EFF8CC  cc cc cc cc  
</span><span id=__span-28-55>0x00EFF8D0  cc cc cc cc  
</span><span id=__span-28-56>0x00EFF8D4  cc cc cc cc  
</span><span id=__span-28-57>0x00EFF8D8  cc cc cc cc  
</span><span id=__span-28-58>0x00EFF8DC  cc cc cc cc  
</span><span id=__span-28-59>0x00EFF8E0  cc cc cc cc  
</span><span id=__span-28-60>//当前的ebp
</span><span id=__span-28-61>0x00EFF8E4  e4 f9 ef 00  
</span></code></pre></div></td></tr></table></div> <h5 id=z>变量<code>z</code>的创建<a class=headerlink href=#z title="Permanent link">&para;</a></h5> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-29-1>int z = 0;
</span><span id=__span-29-2>000913DE  mov         dword ptr [ebp-8],0 
</span></code></pre></div></td></tr></table></div> <p>执行过程与<code>main</code>函数相同，不再介绍，结果如图</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image54.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image54.png style=zoom:50%;></a></p> <h5 id=_14>执行加法<a class=headerlink href=#_14 title="Permanent link">&para;</a></h5> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-30-1>z = x + y;
</span><span id=__span-30-2>000913E5  mov         eax,dword ptr [ebp+8]  
</span><span id=__span-30-3>000913E8  add         eax,dword ptr [ebp+0Ch]  
</span><span id=__span-30-4>000913EB  mov         dword ptr [ebp-8],eax
</span></code></pre></div></td></tr></table></div> <p>接下来执行<code>z = x + y</code>，首先执行<code>mov</code>指令，将<code>ebp+8</code>位置的值放到<code>eax</code>寄存器中，如下图所示</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image55.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image55.png style="zoom: 50%;"></a></p> <p>再执行<code>add</code>指令，将<code>ebp+0ch</code>（即<code>ebp+12</code>）位置的值与<code>eax</code>中的值相加放置到<code>eax</code>中</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image56.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image56.png style=zoom:50%;></a></p> <p>执行完<code>add</code>指令后<code>eax</code>当前值为30</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image57.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image57.png></a></p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image58.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image58.png></a></p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image59.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image59.png></a></p> <p>最后执行<code>mov</code>指令，将<code>eax</code>中的值移动到<code>ebp-8</code>（即变量<code>z</code>）的地址处</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image60.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image60.png style=zoom:50%;></a></p> <h5 id=_15>返回计算结果<a class=headerlink href=#_15 title="Permanent link">&para;</a></h5> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-31-1>return z;
</span><span id=__span-31-2>000913EE  mov         eax,dword ptr [ebp-8] 
</span></code></pre></div></td></tr></table></div> <p>执行<code>mov</code>指令，将<code>ebp-8</code>处的值放到<code>eax</code>中</p> <h5 id=_16>函数栈帧销毁<a class=headerlink href=#_16 title="Permanent link">&para;</a></h5> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span>
<span class=normal>4</span>
<span class=normal>5</span>
<span class=normal>6</span>
<span class=normal>7</span>
<span class=normal>8</span>
<span class=normal>9</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-32-1>000913F1  pop         edi  
</span><span id=__span-32-2>000913F2  pop         esi  
</span><span id=__span-32-3>000913F3  pop         ebx  
</span><span id=__span-32-4>000913F4  mov         esp,ebp  
</span><span id=__span-32-5>000913F6  pop         ebp  
</span><span id=__span-32-6>000913F7  ret  
</span><span id=__span-32-7>000913F1  pop         edi  
</span><span id=__span-32-8>000913F2  pop         esi  
</span><span id=__span-32-9>000913F3  pop         ebx  
</span></code></pre></div></td></tr></table></div> <p>执行三次<code>pop</code>指令，依次使<code>edi</code>、<code>esi</code>、<code>ebx</code>出栈，同时使<code>esp</code>指针指向<code>ebp-0CCh</code>位置处</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image61.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image61.png style=zoom:50%;></a></p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-33-1>000913F4  mov         esp,ebp 
</span></code></pre></div></td></tr></table></div> <p>接下来执行<code>mov</code>指令，将初始的<code>ebp</code>地址给<code>esp</code>，使函数栈帧空间释放</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image62.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image62.png style=zoom:50%;></a></p> <p>初始时<code>esp</code>和<code>ebp</code>的地址</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image63.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image63.png></a></p> <p>执行<code>mov</code>指令后的<code>esp</code>和<code>ebp</code>的地址</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image64.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image64.png></a></p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-34-1>000913F6  pop         ebp 
</span></code></pre></div></td></tr></table></div> <p>接下来执行<code>pop</code>指令，使开始<code>push</code>的<code>ebp</code>出栈，并且移动<code>ebp</code>至<code>main</code>函数的<code>ebp</code>位置</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image65.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image65.png style="zoom: 67%;"></a></p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image66.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image66.png></a></p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-35-1>000913F7  ret 
</span></code></pre></div></td></tr></table></div> <p>最后执行<code>ret</code>指令，将<code>ebp</code>当前地址<code>0x00091450</code>存入寄存器<code>eip</code>中，并使<code>esp</code>指针向下移动双字节，并且a此时<code>Add</code>函数中所有的局部变量将销毁</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image67.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image67.png></a></p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-36-1>00091450  add         esp,8  
</span></code></pre></div></td></tr></table></div> <p>接下来执行<code>main</code>函数中<code>call</code>指令的下一条指令，即地址<code>0x00091450</code>对应的指令</p> <p>执行<code>add</code>指令，将8加至<code>esp</code>中并使<code>esp</code>移动到<code>main</code>函数的栈顶</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image68.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image68.png style=zoom:50%;></a></p> <div class="language-text highlight"><table class=highlighttable><tr><th colspan=2 class=filename><span class=filename>Text Only</span></th></tr><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1</span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-37-1>00091453  mov         dword ptr [ebp-20h],eax  
</span></code></pre></div></td></tr></table></div> <p>执行<code>mov</code>指令，将<code>eax</code>的值给地址<code>ebp-20h</code>（即变量<code>ret</code>）</p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image69.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image69.png></a></p> <p><a class=glightbox href=关于函数栈帧（C语言演示）.assets\image70.png data-type=image data-width=100% data-height=auto data-desc-position=bottom><img src=关于函数栈帧（C语言演示）.assets\image70.png></a></p> <p>接着<code>main</code>函数继续执行，直到结尾函数栈帧销毁</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>返回对象是内置类型时，一般都是通过寄存器来带回返回值的，返回对象如果时较大的对象时，一般会在主调函数的栈帧中开辟一块空间，然后把这块空间的地址，隐式传递给被调函数，在被调函数中通过地址找到主调函数中预留的空间，将返回值直接保存到主调函数的</p> </div> <h2 id=_17>总结<a class=headerlink href=#_17 title="Permanent link">&para;</a></h2> <p>通过简单分析<code>main</code>函数和<code>Add</code>函数之间的栈帧空间开辟以及相互之间的调用，了解到下面几点：</p> <ol> <li>任何函数在执行正式代码之前都需要进行函数栈帧的空间开辟，而函数栈帧的开辟涉及到<code>esp</code>栈顶指针和<code>ebp</code>栈低指针，这两个指针负责维护二者范围内函数栈帧空间，在此过程中，空间中的内容会被赋值为<code>0xcccccccc</code>，导致未赋初始值的变量为随机值</li> <li>函数局部变量的开辟是通过栈低指针进行地址运算为不同的变量开辟空间</li> <li>在函数调用过程中，后面的函数参数会被先压栈，再者就是前一个变量，并且形参压栈比调用的函数的栈帧空间开辟的时间要早，由全新的一块空间负责存储调用函数时传入的实参的值，所以在函数中改变形参不会影响实参，因为形参和实参是两块不同的空间。最后在调用的函数的栈帧空间销毁时，先销毁调用的函数的栈帧空间，再通过<code>esp</code>指针移动从而销毁形参</li> <li>在调用的函数返回值时，并不是变量将该值带回，而是通过寄存器存储值，将值返回给调用函数的函数接收</li> </ol> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title=最后更新> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2025年5月22日</span> </span> </aside> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> 页面有帮助吗？ </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title=页面对我有帮助 data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title=页面没有帮助到我 data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> 谢谢你的反馈！ </div> <div data-md-value=0 hidden> 谢谢你的反馈！联系<a href=https://www.help-doc.top/author/contact/contact.html>作者</a>提供更详细的信息 </div> </div> </div> </fieldset> </form> <!-- Waline 评论系统 --> <div id=waline></div> <!-- 阅读进度条 - 直接在HTML中定义 --> <div class=reading-progress></div> <!-- 滚动指示器 - 直接在HTML中定义 --> <div class=scroll-indicator></div> <!-- 评论系统 --> <!-- Waline 评论系统 --> <div id=waline></div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2024-2025 柯懒不是柯南 </div> </div> <div class="md-footer-love md-typeset"> 一闪一闪亮晶晶，不及<span class=love-highlight>小亮</span><span class=love-heart>♥</span>照我心。To Li Liang </div> <div class=md-social> <a href=https://github.com/H0308 target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://www.help-doc.top/author/contact/contact.html target=_blank rel=noopener title=www.help-doc.top class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.indexes", "navigation.prune", "navigation.tabs", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script> <script src=../../assets/javascripts/bundle.c8b220af.min.js></script> <script src=../../javascripts/katex.min.js></script> <script src=../../javascripts/other.min.js></script> <script src=../../javascripts/copyright.min.js></script> <script src=../../javascripts/waline.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js></script> <script src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js></script> <script src=https://cdn.jsdelivr.net/npm/mermaid@11.5.0/dist/mermaid.min.js></script> <script src=../../assets/javascripts/toggle-sidebar.js async></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>