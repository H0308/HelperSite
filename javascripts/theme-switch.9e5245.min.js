document.addEventListener('DOMContentLoaded',()=>{const themeSwitch=document.createElement('div');themeSwitch.className='theme-switch';const savedTheme=localStorage.getItem('preferred-theme')||'theme1';themeSwitch.innerHTML=`
        <button class="theme-btn" onclick="switchTheme()">
            ${savedTheme === 'theme1' ? '旧版主题' : '新版主题'}
        </button>
    `;const searchEl=document.querySelector('.md-search');searchEl.parentNode.insertBefore(themeSwitch,searchEl);applyTheme(savedTheme);});function switchTheme(){const currentTheme=localStorage.getItem('preferred-theme')||'theme1';const newTheme=currentTheme==='theme1'?'theme2':'theme1';const btn=document.querySelector('.theme-btn');btn.textContent=newTheme==='theme1'?'旧版主题':'新版主题';btn.style.transform='scale(0.95)';setTimeout(()=>btn.style.transform='scale(1)',200);applyTheme(newTheme);localStorage.setItem('preferred-theme',newTheme);}
function applyTheme(theme){const links=document.querySelectorAll('link[rel="stylesheet"]');links.forEach(link=>{if(link.href.includes('theme')){link.disabled=!link.href.includes(theme);}});}